# Logfile created on 2019-03-01 20:40:12 +0200 by logger.rb/56815
Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/" for 127.0.0.1 at 2019-03-01 20:40:12 +0200
Processing by DummyController#index as HTML
  Rendered dummy/index.html.erb within layouts/application (0.9ms)
Completed 200 OK in 5.7ms (Views: 5.5ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:40:12 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<RSpec::Mocks::MockExpectationError: Airbrake received :notify with unexpected arguments
  expected: (an instance of Airbrake::Notice)
       got: (#<AirbrakeTestError: after_commit>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of Airbrake::Notice"]
[0m[32m+[#<AirbrakeTestError: after_commit>]
[0m>
Completed 500 Internal Server Error in 20.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:40:12 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 23.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:40:14 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:40:17 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.1ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 30.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:40:19 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 23.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:40:21 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:40:23 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:40:25 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 4.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:40:25 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:40:27 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:40:27 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:40:27 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:40:27 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:40:27 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:40:27 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:40:27 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 5.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started HEAD "/crash" for 127.0.0.1 at 2019-03-01 20:40:27 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 0  in 5.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/delayed_job" for 127.0.0.1 at 2019-03-01 20:40:27 +0200
Processing by DummyController#delayed_job as HTML
Completed 500 Internal Server Error in 11.7ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007fe7b5208b00 @config=#<Airbrake::Config:0x00007fe7b64f0358 @proxy={}, @queue...ash=-3528360623463399674>]}>}, @truncator=#<Airbrake::Truncator:0x00007fe7b51e2e50 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007fe7b5208b00 @config=#<Airbrake::Config:0x00007fe7b64f0358 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fe7b64f02e0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fe7b64f0290 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fe7b64f0240 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fe7b64f01c8>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>86, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>142, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__443033451630180231__process_action__4439489940261333287__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__4221219764591588727__call__1024181015197059591__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>180, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007fe7b51e2dd8 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007fe7b5cc54f8>, "rack.errors"=>#<StringIO:0x00007fe7b5cc55e8>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fe7b5ca6080>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fe7b6baafe0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fe7b6baaf40 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007fe7b6baabd0 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007fe7b6baaef0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fe7b6baaea0>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fe7b5dff2b0 @filters=[#<Proc:0x00007fe7b5dff0f8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007fe7b5dff0d0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007fe7b5dff0a8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007fe7b5dfe1a8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007fe7b5dfe180@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"b96fb643a10ed6550c4a7801e0bb150a", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fe7b5cc43a0 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007fe7b5289ca0 @app=#<ActionDispatch::Reloader:0x00007fe7b5289cc8 @app=#<ActionDispatch::Callbacks:0x00007fe7b5289cf0 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007fe7b5289d18 @app=#<Airbrake::Rack::Middleware:0x00007fe7b528ada8 @app=#<ActiveRecord::QueryCache:0x00007fe7b528aec0 @app=#<ActionDispatch::Cookies:0x00007fe7b528afd8 @app=#<ActionDispatch::Session::CookieStore:0x00007fe7b528b320 @secrets=["e989173a1132f6302303b3eef2f243712acdf16b6792a783cca7e2808177"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007fe7b528b0a0>, @app=#<ActionDispatch::Flash:0x00007fe7b528b348 @app=#<ActionDispatch::ParamsParser:0x00007fe7b528b438 @app=#<ActionDispatch::Head:0x00007fe7b528b488 @app=#<Rack::ConditionalGet:0x00007fe7b528b4b0 @app=#<Rack::ETag:0x00007fe7b528b4d8 @app=#<ActionDispatch::BestStandardsSupport:0x00007fe7b528b528 @app=#<Warden::Manager:0x00007fe7b528b5f0 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fe7b5ca6080>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007fe7b69f3008 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=2503252773146566995>=>:xml_simple, #<Mime::Type:0x00007fe7b69f03d0 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=4275146373297316617>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"e989173a1132f6302303b3eef2f243712acdf16b6792a783cca7e2808177", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fe7b528b0a0>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007fe7b5d36540@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3ff3dae5fd68 not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"e989173a1132f6302303b3eef2f243712acdf16b6792a783cca7e2808177", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fe7b528b0a0>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007fe7b5cbf8a0 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007fe7b5cbf3a0 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fe7b5cbf8a0 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007fe7b5cbf300 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70316582107280 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fe7b5cbcba0 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007fe7b5cbcab0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007fe7b5cbca88 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007fe7b5cbcab0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007fe7b5cbc790 @details_key=nil, @details={:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007fe7b5cbc718 @paths=[#<ActionView::FixtureResolver:0x00007fe7b65b3240 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={#<ActionView::LookupContext::DetailsKey:0x00007fe7b5d2ccc0 @hash=-2128681591006269192>=>{"index"=>{"dummy"=>{false=>{[]=>[dummy/index.html.erb]}}}, "application"=>{"layouts"=>{false=>{[]=>[layouts/application.html.erb]}}}}}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fe7b69e3b80 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-3528360623463399674>]}>}, @truncator=#<Airbrake::Truncator:0x00007fe7b51e2e50 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:59:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:40:27 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/resque" for 127.0.0.1 at 2019-03-01 20:40:29 +0200
Processing by DummyController#resque as HTML
  Rendered dummy/resque.html.erb within layouts/application (0.2ms)
Completed 200 OK in 2.4ms (Views: 1.1ms | ActiveRecord: 0.0ms)
Started GET "/active_record_after_rollback" for 127.0.0.1 at 2019-03-01 20:40:29 +0200
Processing by DummyController#active_record_after_rollback as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "Bango"]]
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
#<AirbrakeTestError: after_rollback>
  Rendered dummy/active_record_after_rollback.html.erb within layouts/application (0.2ms)
Completed 200 OK in 6.7ms (Views: 0.9ms | ActiveRecord: 0.1ms)
Started GET "/active_record_after_commit" for 127.0.0.1 at 2019-03-01 20:40:29 +0200
Processing by DummyController#active_record_after_commit as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "Bingo"]]
  [1m[35m (0.1ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
  Rendered dummy/active_record_after_commit.html.erb within layouts/application (0.2ms)
Completed 200 OK in 7.2ms (Views: 1.0ms | ActiveRecord: 0.1ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:40:50 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 11.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:40:50 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/resque" for 127.0.0.1 at 2019-03-01 20:40:52 +0200
Processing by DummyController#resque as HTML
  Rendered dummy/resque.html.erb within layouts/application (0.9ms)
Completed 200 OK in 7.4ms (Views: 6.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-01 20:40:52 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.0ms (Views: 9.3ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-01 20:40:52 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.4ms (Views: 9.4ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-01 20:40:52 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 17.0ms (Views: 11.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-01 20:40:52 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.3ms (Views: 9.3ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-01 20:40:52 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 5.8ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-01 20:40:52 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 12.7ms (Views: 7.7ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-01 20:40:52 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.1ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-01 20:40:52 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.5ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-01 20:40:52 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.2ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-01 20:40:52 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.5ms (Views: 0.7ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-01 20:40:52 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.7ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-01 20:40:52 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.3ms (Views: 0.8ms | ActiveRecord: 0.0ms)
Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:40:52 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:40:52 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:40:52 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 12.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:40:52 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:40:52 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.9ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:40:52 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/delayed_job" for 127.0.0.1 at 2019-03-01 20:40:52 +0200
Processing by DummyController#delayed_job as HTML
Completed 500 Internal Server Error in 12.5ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007f827cb93f88 @config=#<Airbrake::Config:0x00007f827d55d028 @proxy={}, @queue...ash=-1157180035625686725>]}>}, @truncator=#<Airbrake::Truncator:0x00007f827cb71348 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007f827cb93f88 @config=#<Airbrake::Config:0x00007f827d55d028 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007f827d55cfb0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007f827d55cf60 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007f827d55cf10 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f827d55ce98>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>86, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>142, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__2075931790072948373__process_action__726969737524692263__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__1795453271937204155__call__3877483691861386894__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>180, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007f827cb71320 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007f827cc78480>, "rack.errors"=>#<StringIO:0x00007f827cc78548>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007f827d68c570>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007f827cc10bc8 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007f827cc10b28 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007f827cc109c0 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007f827cc10ad8 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f827cc10a88>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007f827cd816b0 @filters=[#<Proc:0x00007f827cd815c0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007f827cd81598@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007f827cd81570@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007f827cd80c38@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007f827cd80c10@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"164778e1272085e8a1253c70bacef57d", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007f827ea67360 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007f827d6b4ac0 @app=#<ActionDispatch::Reloader:0x00007f827d6b4ae8 @app=#<ActionDispatch::Callbacks:0x00007f827d6b4b10 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007f827d6b4b38 @app=#<Airbrake::Rack::Middleware:0x00007f827d6b5718 @app=#<ActiveRecord::QueryCache:0x00007f827d6b5808 @app=#<ActionDispatch::Cookies:0x00007f827d6b58d0 @app=#<ActionDispatch::Session::CookieStore:0x00007f827d6b5c68 @secrets=["ac48fca9592d3e6afc41d669bbb0e966c39f7eae4916b112f43a7d036d5b"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007f827d6b5998>, @app=#<ActionDispatch::Flash:0x00007f827d6b5c90 @app=#<ActionDispatch::ParamsParser:0x00007f827d6b5d80 @app=#<ActionDispatch::Head:0x00007f827d6b5dd0 @app=#<Rack::ConditionalGet:0x00007f827d6b5df8 @app=#<Rack::ETag:0x00007f827d6b5e20 @app=#<ActionDispatch::BestStandardsSupport:0x00007f827d6b5e98 @app=#<Warden::Manager:0x00007f827d6b6050 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007f827d68c570>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007f827d18f568 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=1588570232815643381>=>:xml_simple, #<Mime::Type:0x00007f827d197a60 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=-2219787952060458323>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"ac48fca9592d3e6afc41d669bbb0e966c39f7eae4916b112f43a7d036d5b", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007f827d6b5998>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007f827cd01d98@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3fc13f533488 not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"ac48fca9592d3e6afc41d669bbb0e966c39f7eae4916b112f43a7d036d5b", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007f827d6b5998>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007f827ea66618 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007f827ea66000 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007f827ea66618 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007f827ea65f10 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70099223654080 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007f827d66ef48 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007f827d66ee30 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007f827d66ede0 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007f827d66ee30 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007f827d66ea98 @details_key=nil, @details={:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007f827d66ea20 @paths=[#<ActionView::FixtureResolver:0x00007f827cb33ac0 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={#<ActionView::LookupContext::DetailsKey:0x00007f827cd53940 @hash=-3216976691289322072>=>{"resque"=>{"dummy"=>{false=>{[]=>[dummy/resque.html.erb]}}}, "application"=>{"layouts"=>{false=>{[]=>[layouts/application.html.erb]}}}, "notify_airbrake_helper"=>{"dummy"=>{false=>{[]=>[dummy/notify_airbrake_helper.html.erb]}}}, "notify_airbrake_sync_helper"=>{"dummy"=>{false=>{[]=>[dummy/notify_airbrake_sync_helper.html.erb]}}}}}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007f827d17b4c8 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-1157180035625686725>]}>}, @truncator=#<Airbrake::Truncator:0x00007f827cb71348 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:59:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/active_record_after_rollback" for 127.0.0.1 at 2019-03-01 20:40:52 +0200
Processing by DummyController#active_record_after_rollback as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "Bango"]]
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
#<AirbrakeTestError: after_rollback>
  Rendered dummy/active_record_after_rollback.html.erb within layouts/application (0.2ms)
Completed 200 OK in 6.7ms (Views: 1.0ms | ActiveRecord: 0.1ms)
Started GET "/active_record_after_commit" for 127.0.0.1 at 2019-03-01 20:40:52 +0200
Processing by DummyController#active_record_after_commit as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "Bingo"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
  Rendered dummy/active_record_after_commit.html.erb within layouts/application (0.2ms)
Completed 200 OK in 8.4ms (Views: 1.1ms | ActiveRecord: 0.1ms)
Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:40:52 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<RSpec::Mocks::MockExpectationError: Airbrake received :notify with unexpected arguments
  expected: (an instance of Airbrake::Notice)
       got: (#<AirbrakeTestError: after_commit>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of Airbrake::Notice"]
[0m[32m+[#<AirbrakeTestError: after_commit>]
[0m>
Completed 500 Internal Server Error in 6.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/" for 127.0.0.1 at 2019-03-01 20:40:52 +0200
Processing by DummyController#index as HTML
  Rendered dummy/index.html.erb within layouts/application (0.2ms)
Completed 200 OK in 1.0ms (Views: 0.8ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:40:52 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:40:54 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 5.9ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started HEAD "/crash" for 127.0.0.1 at 2019-03-01 20:40:54 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 0  in 5.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:40:54 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 12.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:40:56 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 10.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:40:58 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 23.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:41:00 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.9ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:41:02 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 10.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:41:04 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 10.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-01 20:41:26 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (1.9ms)
Completed 200 OK in 20.2ms (Views: 15.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-01 20:41:26 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.9ms (Views: 9.3ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-01 20:41:26 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 17.1ms (Views: 11.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-01 20:41:26 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.8ms (Views: 9.4ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-01 20:41:26 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.4ms (Views: 10.8ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-01 20:41:26 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 6.3ms (Views: 1.1ms | ActiveRecord: 0.0ms)
Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:41:26 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 27.9ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:41:26 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:41:26 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 23.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:41:26 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 28.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:41:26 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 12.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:41:26 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 23.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-01 20:41:26 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.3ms)
Completed 200 OK in 19.0ms (Views: 1.2ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-01 20:41:26 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.4ms)
Completed 200 OK in 31.4ms (Views: 1.1ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-01 20:41:26 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 23.5ms (Views: 1.2ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-01 20:41:26 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.9ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-01 20:41:26 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.6ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-01 20:41:26 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2019-03-01 20:41:26 +0200
Processing by DummyController#index as HTML
  Rendered dummy/index.html.erb within layouts/application (0.2ms)
Completed 200 OK in 1.1ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:41:26 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<RSpec::Mocks::MockExpectationError: Airbrake received :notify with unexpected arguments
  expected: (an instance of Airbrake::Notice)
       got: (#<AirbrakeTestError: after_commit>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of Airbrake::Notice"]
[0m[32m+[#<AirbrakeTestError: after_commit>]
[0m>
Completed 500 Internal Server Error in 16.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/delayed_job" for 127.0.0.1 at 2019-03-01 20:41:26 +0200
Processing by DummyController#delayed_job as HTML
Completed 500 Internal Server Error in 12.4ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007fd9e18097c0 @config=#<Airbrake::Config:0x00007fd9dcb26048 @proxy={}, @queue...ash=-2741223524397908620>]}>}, @truncator=#<Airbrake::Truncator:0x00007fd9dd4325b0 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007fd9e18097c0 @config=#<Airbrake::Config:0x00007fd9dcb26048 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fd9dcb25fa8 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fd9dcb25f58 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fd9dcb25f08 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fd9dcb25e90>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>86, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>142, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__4247708462571525638__process_action__2915661179029133110__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__3607666992089029026__call__3047321930047559237__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>180, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007fd9dd432560 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007fd9ddeca680>, "rack.errors"=>#<StringIO:0x00007fd9ddeca720>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fd9dcaaf218>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fd9dd43afd0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fd9dd43af30 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007fd9dd43adc8 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007fd9dd43aee0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fd9dd43ae90>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fd9ddbdb4b0 @filters=[#<Proc:0x00007fd9ddbdb280@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007fd9ddbdb230@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007fd9ddbdb208@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007fd9ddbd9f48@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007fd9ddbd9ea8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"95c006cf4397ea08d9eebc40578d8356", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fd9ddec9280 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007fd9dcaaec78 @app=#<ActionDispatch::Reloader:0x00007fd9dcaaecc8 @app=#<ActionDispatch::Callbacks:0x00007fd9dcaaee30 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007fd9dcaaee58 @app=#<Airbrake::Rack::Middleware:0x00007fd9dcade6f8 @app=#<ActiveRecord::QueryCache:0x00007fd9dcae6150 @app=#<ActionDispatch::Cookies:0x00007fd9dcaeca78 @app=#<ActionDispatch::Session::CookieStore:0x00007fd9dcb053c0 @secrets=["e7ac0bf598d35afc9115a86a0c6db75fc6a3fcf7bb626426ea3c4a2bd1a9"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007fd9dcaf5150>, @app=#<ActionDispatch::Flash:0x00007fd9dcb05550 @app=#<ActionDispatch::ParamsParser:0x00007fd9dcb05b90 @app=#<ActionDispatch::Head:0x00007fd9dcb05be0 @app=#<Rack::ConditionalGet:0x00007fd9dcb05d98 @app=#<Rack::ETag:0x00007fd9dcb05f00 @app=#<ActionDispatch::BestStandardsSupport:0x00007fd9dcb05f78 @app=#<Warden::Manager:0x00007fd9dcb06b30 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fd9dcaaf218>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007fd9ddb52f20 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=-812606621182870934>=>:xml_simple, #<Mime::Type:0x00007fd9ddb5b418 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=-2137360395392726443>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"e7ac0bf598d35afc9115a86a0c6db75fc6a3fcf7bb626426ea3c4a2bd1a9", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fd9dcaf5150>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007fd9dda63498@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3feceef6442c not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"e7ac0bf598d35afc9115a86a0c6db75fc6a3fcf7bb626426ea3c4a2bd1a9", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fd9dcaf5150>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007fd9ddec8628 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007fd9ddec8038 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fd9ddec8628 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007fd9ddec3f88 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70286853938960 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fd9ddec19e0 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007fd9ddec18a0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007fd9ddec1878 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007fd9ddec18a0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007fd9ddec1530 @details_key=nil, @details={:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007fd9ddec1490 @paths=[#<ActionView::FixtureResolver:0x00007fd9dcb971f8 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={#<ActionView::LookupContext::DetailsKey:0x00007fd9ddf6bad0 @hash=4433641725765913981>=>{"notify_airbrake_helper"=>{"dummy"=>{false=>{[]=>[dummy/notify_airbrake_helper.html.erb]}}}, "application"=>{"layouts"=>{false=>{[]=>[layouts/application.html.erb]}}}, "notify_airbrake_sync_helper"=>{"dummy"=>{false=>{[]=>[dummy/notify_airbrake_sync_helper.html.erb]}}}, "index"=>{"dummy"=>{false=>{[]=>[dummy/index.html.erb]}}}}}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fd9ddb438e0 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-2741223524397908620>]}>}, @truncator=#<Airbrake::Truncator:0x00007fd9dd4325b0 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:59:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:41:26 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 6.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:41:26 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 17.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started HEAD "/crash" for 127.0.0.1 at 2019-03-01 20:41:28 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 0  in 6.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:41:28 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 13.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/active_record_after_rollback" for 127.0.0.1 at 2019-03-01 20:41:28 +0200
Processing by DummyController#active_record_after_rollback as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "Bango"]]
  [1m[35m (0.0ms)[0m  rollback transaction
#<AirbrakeTestError: after_rollback>
  Rendered dummy/active_record_after_rollback.html.erb within layouts/application (0.6ms)
Completed 200 OK in 12.3ms (Views: 1.2ms | ActiveRecord: 0.1ms)
Started GET "/active_record_after_commit" for 127.0.0.1 at 2019-03-01 20:41:28 +0200
Processing by DummyController#active_record_after_commit as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "Bingo"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  Rendered dummy/active_record_after_commit.html.erb within layouts/application (0.2ms)
Completed 200 OK in 9.9ms (Views: 0.9ms | ActiveRecord: 0.1ms)
Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:41:28 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:41:30 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 17.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:41:32 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 17.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:41:34 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 10.9ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:41:36 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.1ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 10.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:41:38 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Started GET "/resque" for 127.0.0.1 at 2019-03-01 20:41:41 +0200
Processing by DummyController#resque as HTML
  Rendered dummy/resque.html.erb within layouts/application (0.2ms)
Completed 200 OK in 2.4ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:41:41 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:52:in `call!'
  lib/airbrake/rack/middleware.rb:40:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (3.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-03-04 16:27:31 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 26.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started HEAD "/crash" for 127.0.0.1 at 2019-03-04 16:27:33 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 0  in 6.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-04 16:27:33 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 5.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-04 16:27:33 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (1.0ms)
Completed 200 OK in 21.6ms (Views: 6.7ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-04 16:27:35 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.2ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-04 16:27:37 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.9ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-03-04 16:27:44 +0200
Processing by DummyController#crash as HTML
RSpec::Mocks::MockExpectationError: Airbrake received :notify_query with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :func=>"tap", :file=>"lib/airbrake/rails/active_record_subscriber.rb", :line=>"anything"))
       got: ({:end_time=>2019-03-04 16:27:44.259868000 +0200, :file=>nil, :func=>nil, :line=>nil, :method=>"GET", ...able_info(\"books\")", :route=>"/crash(.:format)", :start_time=>2019-03-04 16:27:44.259809000 +0200})
Diff:[0m
[0m[34m@@ -1,2 +1,9 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :func=>\"tap\", :file=>\"lib/airbrake/rails/active_record_subscriber.rb\", :line=>\"anything\")"]
[0m[32m+[{:end_time=>2019-03-04 16:27:44.259868000 +0200,
[0m[32m+  :file=>nil,
[0m[32m+  :func=>nil,
[0m[32m+  :line=>nil,
[0m[32m+  :method=>"GET",
[0m[32m+  :query=>"PRAGMA table_info(\"books\")",
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-03-04 16:27:44.259809000 +0200}]
[0m: PRAGMA table_info("books")
Completed 500 Internal Server Error in 17.0ms

ActiveRecord::StatementInvalid (RSpec::Mocks::MockExpectationError: Airbrake received :notify_query with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :func=>"tap", :file=>"lib/airbrake/rails/active_record_subscriber.rb", :line=>"anything"))
       got: ({:end_time=>2019-03-04 16:27:44.259868000 +0200, :file=>nil, :func=>nil, :line=>nil, :method=>"GET", ...able_info(\"books\")", :route=>"/crash(.:format)", :start_time=>2019-03-04 16:27:44.259809000 +0200})
Diff:[0m
[0m[34m@@ -1,2 +1,9 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :func=>\"tap\", :file=>\"lib/airbrake/rails/active_record_subscriber.rb\", :line=>\"anything\")"]
[0m[32m+[{:end_time=>2019-03-04 16:27:44.259868000 +0200,
[0m[32m+  :file=>nil,
[0m[32m+  :func=>nil,
[0m[32m+  :line=>nil,
[0m[32m+  :method=>"GET",
[0m[32m+  :query=>"PRAGMA table_info(\"books\")",
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-03-04 16:27:44.259809000 +0200}]
[0m: PRAGMA table_info("books")):
  lib/airbrake/rails/active_record_subscriber.rb:15:in `block in call'
  lib/airbrake/rails/active_record_subscriber.rb:14:in `each'
  lib/airbrake/rails/active_record_subscriber.rb:14:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-03-04 16:28:03 +0200
Processing by DummyController#crash as HTML
RSpec::Mocks::MockExpectationError: Airbrake received :notify_query with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :func=>"tap", :file=>"lib/airbrake/rails/active_record_subscriber.rb", :line=>"anything"))
       got: ({:end_time=>2019-03-04 16:28:03.119043000 +0200, :file=>nil, :func=>nil, :line=>nil, :method=>"GET", ...able_info(\"books\")", :route=>"/crash(.:format)", :start_time=>2019-03-04 16:28:03.118980000 +0200})
Diff:[0m
[0m[34m@@ -1,2 +1,9 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :func=>\"tap\", :file=>\"lib/airbrake/rails/active_record_subscriber.rb\", :line=>\"anything\")"]
[0m[32m+[{:end_time=>2019-03-04 16:28:03.119043000 +0200,
[0m[32m+  :file=>nil,
[0m[32m+  :func=>nil,
[0m[32m+  :line=>nil,
[0m[32m+  :method=>"GET",
[0m[32m+  :query=>"PRAGMA table_info(\"books\")",
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-03-04 16:28:03.118980000 +0200}]
[0m: PRAGMA table_info("books")
Completed 500 Internal Server Error in 2762.8ms

ActiveRecord::StatementInvalid (RSpec::Mocks::MockExpectationError: Airbrake received :notify_query with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :func=>"tap", :file=>"lib/airbrake/rails/active_record_subscriber.rb", :line=>"anything"))
       got: ({:end_time=>2019-03-04 16:28:03.119043000 +0200, :file=>nil, :func=>nil, :line=>nil, :method=>"GET", ...able_info(\"books\")", :route=>"/crash(.:format)", :start_time=>2019-03-04 16:28:03.118980000 +0200})
Diff:[0m
[0m[34m@@ -1,2 +1,9 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :func=>\"tap\", :file=>\"lib/airbrake/rails/active_record_subscriber.rb\", :line=>\"anything\")"]
[0m[32m+[{:end_time=>2019-03-04 16:28:03.119043000 +0200,
[0m[32m+  :file=>nil,
[0m[32m+  :func=>nil,
[0m[32m+  :line=>nil,
[0m[32m+  :method=>"GET",
[0m[32m+  :query=>"PRAGMA table_info(\"books\")",
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-03-04 16:28:03.118980000 +0200}]
[0m: PRAGMA table_info("books")):
  lib/airbrake/rails/active_record_subscriber.rb:15:in `block in call'
  lib/airbrake/rails/active_record_subscriber.rb:14:in `each'
  lib/airbrake/rails/active_record_subscriber.rb:14:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-03-04 16:28:10 +0200
Processing by DummyController#crash as HTML
RSpec::Mocks::MockExpectationError: Airbrake received :notify_query with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :func=>"tap", :file=>"lib/airbrake/rails/active_record_subscriber.rb", :line=>"anything"))
       got: ({:end_time=>2019-03-04 16:28:10.630892000 +0200, :file=>nil, :func=>nil, :line=>nil, :method=>"GET", ...able_info(\"books\")", :route=>"/crash(.:format)", :start_time=>2019-03-04 16:28:10.630829000 +0200})
Diff:[0m
[0m[34m@@ -1,2 +1,9 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :func=>\"tap\", :file=>\"lib/airbrake/rails/active_record_subscriber.rb\", :line=>\"anything\")"]
[0m[32m+[{:end_time=>2019-03-04 16:28:10.630892000 +0200,
[0m[32m+  :file=>nil,
[0m[32m+  :func=>nil,
[0m[32m+  :line=>nil,
[0m[32m+  :method=>"GET",
[0m[32m+  :query=>"PRAGMA table_info(\"books\")",
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-03-04 16:28:10.630829000 +0200}]
[0m: PRAGMA table_info("books")
Completed 500 Internal Server Error in 5403.8ms

ActiveRecord::StatementInvalid (RSpec::Mocks::MockExpectationError: Airbrake received :notify_query with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :func=>"tap", :file=>"lib/airbrake/rails/active_record_subscriber.rb", :line=>"anything"))
       got: ({:end_time=>2019-03-04 16:28:10.630892000 +0200, :file=>nil, :func=>nil, :line=>nil, :method=>"GET", ...able_info(\"books\")", :route=>"/crash(.:format)", :start_time=>2019-03-04 16:28:10.630829000 +0200})
Diff:[0m
[0m[34m@@ -1,2 +1,9 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :func=>\"tap\", :file=>\"lib/airbrake/rails/active_record_subscriber.rb\", :line=>\"anything\")"]
[0m[32m+[{:end_time=>2019-03-04 16:28:10.630892000 +0200,
[0m[32m+  :file=>nil,
[0m[32m+  :func=>nil,
[0m[32m+  :line=>nil,
[0m[32m+  :method=>"GET",
[0m[32m+  :query=>"PRAGMA table_info(\"books\")",
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-03-04 16:28:10.630829000 +0200}]
[0m: PRAGMA table_info("books")):
  lib/airbrake/rails/active_record_subscriber.rb:15:in `block in call'
  lib/airbrake/rails/active_record_subscriber.rb:14:in `each'
  lib/airbrake/rails/active_record_subscriber.rb:14:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.8ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-03-04 16:28:35 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-03-04 16:28:43 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 4.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-03-04 16:28:56 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 3.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-03-04 16:29:07 +0200
Processing by DummyController#crash as HTML
NoMethodError: undefined method `[]' for nil:NilClass: PRAGMA table_info("books")
Completed 500 Internal Server Error in 1.2ms

ActiveRecord::StatementInvalid (NoMethodError: undefined method `[]' for nil:NilClass: PRAGMA table_info("books")):
  lib/airbrake/rails/active_record_subscriber.rb:19:in `block in call'
  lib/airbrake/rails/active_record_subscriber.rb:14:in `each'
  lib/airbrake/rails/active_record_subscriber.rb:14:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-03-04 16:29:14 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 4.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (2.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-03-09 00:22:22 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 25.3ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :func=>nil, :file=>nil, :line=>nil))
       got: ({:groups=>{:db=>nil, :view=>nil}, :method=>"GET", :response_type=>:html, :route=>"/crash(.:format)", :start_time=>2019-03-09 00:22:22.156983000 +0200})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :func=>nil, :file=>nil, :line=>nil)"]
[0m[32m+[{:groups=>{:db=>nil, :view=>nil},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>:html,
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-03-09 00:22:22.156983000 +0200}]
[0m):
  lib/airbrake/rails/action_controller_breakdown_subscriber.rb:13:in `block in call'
  lib/airbrake/rails/action_controller_breakdown_subscriber.rb:12:in `each'
  lib/airbrake/rails/action_controller_breakdown_subscriber.rb:12:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-03-09 00:22:35 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 28.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-03-09 00:22:51 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 34.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-03-09 00:22:59 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 28.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-03-09 00:23:27 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 28.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-03-09 00:24:16 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 27.9ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :response_type=>:html, :groups=>{:db=>#<RS...klass=Float>, :view=>#<RSpec::Mocks::ArgumentMatchers::InstanceOf:0x00007fbb873f6098 @klass=Float>}))
       got: ({:groups=>{:db=>nil, :view=>nil}, :method=>"GET", :response_type=>:html, :route=>"/crash(.:format)", :start_time=>2019-03-09 00:24:16.294496000 +0200})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :response_type=>:html, :groups=>{:db=>#<RSpec::Mocks::ArgumentMatchers::InstanceOf:0x00007fbb873f60c0 @klass=Float>, :view=>#<RSpec::Mocks::ArgumentMatchers::InstanceOf:0x00007fbb873f6098 @klass=Float>})"]
[0m[32m+[{:groups=>{:db=>nil, :view=>nil},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>:html,
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-03-09 00:24:16.294496000 +0200}]
[0m):
  lib/airbrake/rails/action_controller_breakdown_subscriber.rb:13:in `block in call'
  lib/airbrake/rails/action_controller_breakdown_subscriber.rb:12:in `each'
  lib/airbrake/rails/action_controller_breakdown_subscriber.rb:12:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-03-09 00:24:43 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 27.0ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :response_type=>:html, :groups=>{:db=>#<RS...5b931498 @klass=Float>, :view=>#<RSpec::Mocks::ArgumentMatchers::AnyArgMatcher:0x00007fb75a144e20>}))
       got: ({:groups=>{:db=>nil, :view=>nil}, :method=>"GET", :response_type=>:html, :route=>"/crash(.:format)", :start_time=>2019-03-09 00:24:43.456533000 +0200})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :response_type=>:html, :groups=>{:db=>#<RSpec::Mocks::ArgumentMatchers::KindOf:0x00007fb75b931498 @klass=Float>, :view=>#<RSpec::Mocks::ArgumentMatchers::AnyArgMatcher:0x00007fb75a144e20>})"]
[0m[32m+[{:groups=>{:db=>nil, :view=>nil},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>:html,
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-03-09 00:24:43.456533000 +0200}]
[0m):
  lib/airbrake/rails/action_controller_breakdown_subscriber.rb:13:in `block in call'
  lib/airbrake/rails/action_controller_breakdown_subscriber.rb:12:in `each'
  lib/airbrake/rails/action_controller_breakdown_subscriber.rb:12:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (2.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Connecting to database specified by DATABASE_URL
  [1m[36m (4.3ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-03-12 19:24:28 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 13.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-03-12 19:25:40 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 10.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-03-12 19:27:20 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 11.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-03-12 19:28:18 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 10.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-03-12 19:28:34 +0200
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.8ms

ActionView::MissingTemplate (Missing template dummy/breakdown with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}. Searched in:
  * "layouts/application.html.erb, dummy/index.html.erb, dummy/notify_airbrake_helper.html.erb, dummy/notify_airbrake_sync_helper.html.erb, dummy/active_record_after_commit.html.erb, dummy/active_record_after_rollback.html.erb, dummy/active_job.html.erb, dummy/resque.html.erb, dummy/delayed_job.html.erb"
):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-03-12 19:28:44 +0200
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.1ms)[0m  SELECT "books".* FROM "books" 
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 28584.6ms

ActionView::MissingTemplate (Missing template dummy/breakdown with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}. Searched in:
  * "layouts/application.html.erb, dummy/index.html.erb, dummy/notify_airbrake_helper.html.erb, dummy/notify_airbrake_sync_helper.html.erb, dummy/active_record_after_commit.html.erb, dummy/active_record_after_rollback.html.erb, dummy/active_job.html.erb, dummy/resque.html.erb, dummy/delayed_job.html.erb"
):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (3.3ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-03-12 19:30:04 +0200
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (2.8ms)
Completed 200 OK in 21.5ms (Views: 9.0ms | ActiveRecord: 0.3ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-03-12 19:30:35 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 28.0ms
Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-12 19:30:46 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.9ms)
Completed 200 OK in 19.1ms (Views: 14.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-12 19:30:48 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.8ms (Views: 8.6ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-12 19:30:50 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.5ms (Views: 9.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-12 19:30:52 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.7ms (Views: 9.4ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-12 19:30:54 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.4ms (Views: 9.7ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-12 19:30:56 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 17.3ms (Views: 9.7ms | ActiveRecord: 0.0ms)
Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-12 19:30:58 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 34.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-12 19:31:00 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-12 19:31:02 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-12 19:31:04 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-12 19:31:06 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-12 19:31:08 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-12 19:31:10 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.4ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-12 19:31:12 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.6ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-12 19:31:14 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.0ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-12 19:31:16 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.4ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-12 19:31:18 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.1ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-12 19:31:20 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.9ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-03-12 19:31:22 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-12 19:31:25 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-12 19:31:27 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-12 19:31:29 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-12 19:31:31 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-12 19:31:33 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.1ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 44.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-12 19:31:35 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-12 19:31:37 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/" for 127.0.0.1 at 2019-03-12 19:31:39 +0200
Processing by DummyController#index as HTML
  Rendered dummy/index.html.erb within layouts/application (0.2ms)
Completed 200 OK in 1.4ms (Views: 1.1ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-03-12 19:31:39 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<RSpec::Mocks::MockExpectationError: Airbrake received :notify with unexpected arguments
  expected: (an instance of Airbrake::Notice)
       got: (#<AirbrakeTestError: after_commit>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of Airbrake::Notice"]
[0m[32m+[#<AirbrakeTestError: after_commit>]
[0m>
Completed 500 Internal Server Error in 19.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/resque" for 127.0.0.1 at 2019-03-12 19:31:39 +0200
Processing by DummyController#resque as HTML
  Rendered dummy/resque.html.erb within layouts/application (0.2ms)
Completed 200 OK in 1.9ms (Views: 0.8ms | ActiveRecord: 0.0ms)
Started GET "/breakdown" for 127.0.0.1 at 2019-03-12 19:31:39 +0200
Processing by DummyController#breakdown as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "breakdown"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT "books".* FROM "books" [0m
  Rendered dummy/breakdown.html.erb within layouts/application (0.2ms)
Completed 200 OK in 7.9ms (Views: 1.0ms | ActiveRecord: 0.1ms)
Started GET "/crash" for 127.0.0.1 at 2019-03-12 19:31:39 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 4.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-12 19:31:39 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 1.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/delayed_job" for 127.0.0.1 at 2019-03-12 19:31:39 +0200
Processing by DummyController#delayed_job as HTML
Completed 500 Internal Server Error in 13.1ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007fc4adf37dd8 @config=#<Airbrake::Config:0x00007fc4af9b03e0 @proxy={}, @queue...ash=-2229606033541153460>]}>}, @truncator=#<Airbrake::Truncator:0x00007fc4aeb53018 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007fc4adf37dd8 @config=#<Airbrake::Config:0x00007fc4af9b03e0 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fc4af9b0368 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fc4af9b0318 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fc4af9b02c8 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fc4af9b0250>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>87, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>149, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__1923159818643615992__process_action__2805766107018176063__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__18414951737700781__call__3936810067528745909__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007fc4aeb52f28 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007fc4adbdd930>, "rack.errors"=>#<StringIO:0x00007fc4adbdda20>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fc4aeb2abe0>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fc4ade2f8f0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fc4ade2f850 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007fc4ade2f6e8 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007fc4ade2f800 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fc4ade2f7b0>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fc4aeb293d0 @filters=[#<Proc:0x00007fc4aeb29308@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007fc4aeb292e0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007fc4aeb292b8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007fc4aeb289f8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007fc4aeb289d0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"b0c8a5d0520d7f85d424d34208725d0a", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fc4adbd6fb8 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007fc4ade0dbd8 @app=#<ActionDispatch::Reloader:0x00007fc4ade0dc00 @app=#<ActionDispatch::Callbacks:0x00007fc4ade0dc28 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007fc4ade0dc50 @app=#<Airbrake::Rack::Middleware:0x00007fc4ade0dc78 @app=#<ActiveRecord::QueryCache:0x00007fc4ade0ddb8 @app=#<ActionDispatch::Cookies:0x00007fc4ade0dfc0 @app=#<ActionDispatch::Session::CookieStore:0x00007fc4ade0e358 @secrets=["d834e51b056ff165085dbcdadd2a00949a31f73f5b617574686e55946ccf"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007fc4ade0e0d8>, @app=#<ActionDispatch::Flash:0x00007fc4ade0e380 @app=#<ActionDispatch::ParamsParser:0x00007fc4ade0e470 @app=#<ActionDispatch::Head:0x00007fc4ade0e498 @app=#<Rack::ConditionalGet:0x00007fc4ade0e4e8 @app=#<Rack::ETag:0x00007fc4ade0e510 @app=#<ActionDispatch::BestStandardsSupport:0x00007fc4ade0e560 @app=#<Warden::Manager:0x00007fc4ade0e628 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fc4aeb2abe0>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007fc4ad295dc8 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=3759668892003428751>=>:xml_simple, #<Mime::Type:0x00007fc4ad294180 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=-3159742846546867712>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"d834e51b056ff165085dbcdadd2a00949a31f73f5b617574686e55946ccf", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fc4ade0e0d8>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007fc4adecf1c0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3fe256deab98 not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"d834e51b056ff165085dbcdadd2a00949a31f73f5b617574686e55946ccf", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fc4ade0e0d8>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007fc4adbd53e8 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007fc4adbd4b00 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fc4adbd53e8 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007fc4adbd4998 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70241352580500 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fc4adbbf8e0 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007fc4adbbf6b0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007fc4adbbf688 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007fc4adbbf6b0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007fc4adbbefa8 @details_key=nil, @details={:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007fc4adbbef30 @paths=[#<ActionView::FixtureResolver:0x00007fc4ad3271d8 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={#<ActionView::LookupContext::DetailsKey:0x00007fc4ad3b1d10 @hash=3096346451701170602>=>{"notify_airbrake_helper"=>{"dummy"=>{false=>{[]=>[dummy/notify_airbrake_helper.html.erb]}}}, "application"=>{"layouts"=>{false=>{[]=>[layouts/application.html.erb]}}}, "notify_airbrake_sync_helper"=>{"dummy"=>{false=>{[]=>[dummy/notify_airbrake_sync_helper.html.erb]}}}, "index"=>{"dummy"=>{false=>{[]=>[dummy/index.html.erb]}}}, "resque"=>{"dummy"=>{false=>{[]=>[dummy/resque.html.erb]}}}, "breakdown"=>{"dummy"=>{false=>{[]=>[dummy/breakdown.html.erb]}}}}}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fc4ad28f630 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-2229606033541153460>]}>}, @truncator=#<Airbrake::Truncator:0x00007fc4aeb53018 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-12 19:31:39 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 5.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started HEAD "/crash" for 127.0.0.1 at 2019-03-12 19:31:39 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 0  in 4.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started HEAD "/crash" for 127.0.0.1 at 2019-03-12 19:35:21 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 0  in 11.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-12 19:35:21 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 5.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-12 19:35:21 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-12 19:35:23 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-12 19:35:25 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 23.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-12 19:35:27 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-12 19:35:29 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-12 19:35:31 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-12 19:35:33 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-12 19:35:35 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.1ms)[0m  commit transaction
#<RSpec::Mocks::MockExpectationError: Airbrake received :notify with unexpected arguments
  expected: (an instance of Airbrake::Notice)
       got: (#<AirbrakeTestError: after_commit>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of Airbrake::Notice"]
[0m[32m+[#<AirbrakeTestError: after_commit>]
[0m>
Completed 500 Internal Server Error in 17.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/" for 127.0.0.1 at 2019-03-12 19:35:35 +0200
Processing by DummyController#index as HTML
  Rendered dummy/index.html.erb within layouts/application (0.8ms)
Completed 200 OK in 5.6ms (Views: 5.4ms | ActiveRecord: 0.0ms)
Started GET "/delayed_job" for 127.0.0.1 at 2019-03-12 19:35:35 +0200
Processing by DummyController#delayed_job as HTML
Completed 500 Internal Server Error in 12.7ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007fcc663feeb0 @config=#<Airbrake::Config:0x00007fcc662339a0 @proxy={}, @queue...hash=2436672996809604676>]}>}, @truncator=#<Airbrake::Truncator:0x00007fcc663dcf40 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007fcc663feeb0 @config=#<Airbrake::Config:0x00007fcc662339a0 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fcc66233720 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fcc662336d0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fcc66233658 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fcc66233388>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>87, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>149, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__146262195976897702__process_action__1770654501391382763__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__1061269560901798452__call__557319792300805332__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007fcc663dcf18 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007fcc6459dcf0>, "rack.errors"=>#<StringIO:0x00007fcc6459ddb8>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fcc64636e28>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fcc654867f8 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fcc65486758 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007fcc654865f0 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007fcc65486708 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fcc654866b8>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fcc663ace80 @filters=[#<Proc:0x00007fcc663accc8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007fcc663acbb0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007fcc663acb88@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007fcc663ac368@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007fcc663ac340@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"c5cf7e165373b1d1634cb89019be7228", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fcc6459c0a8 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007fcc6627a170 @app=#<ActionDispatch::Reloader:0x00007fcc6627a198 @app=#<ActionDispatch::Callbacks:0x00007fcc6627a1c0 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007fcc6627a1e8 @app=#<Airbrake::Rack::Middleware:0x00007fcc6627a210 @app=#<ActiveRecord::QueryCache:0x00007fcc6627a300 @app=#<ActionDispatch::Cookies:0x00007fcc6627a3c8 @app=#<ActionDispatch::Session::CookieStore:0x00007fcc6627a6e8 @secrets=["a4252bbcd2f724b945c37aa60fafc4757d303a9359a42c1fa11965ae82c0"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007fcc6627a490>, @app=#<ActionDispatch::Flash:0x00007fcc6627a710 @app=#<ActionDispatch::ParamsParser:0x00007fcc6627a800 @app=#<ActionDispatch::Head:0x00007fcc6627a828 @app=#<Rack::ConditionalGet:0x00007fcc6627a850 @app=#<Rack::ETag:0x00007fcc6627a878 @app=#<ActionDispatch::BestStandardsSupport:0x00007fcc6627a8c8 @app=#<Warden::Manager:0x00007fcc6627a990 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fcc64636e28>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007fcc6515abd8 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=4361937142415323936>=>:xml_simple, #<Mime::Type:0x00007fcc65158bd0 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=2316716360347649800>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"a4252bbcd2f724b945c37aa60fafc4757d303a9359a42c1fa11965ae82c0", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fcc6627a490>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007fcc644deff8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3fe6322cb87c not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"a4252bbcd2f724b945c37aa60fafc4757d303a9359a42c1fa11965ae82c0", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fcc6627a490>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007fcc64596dd8 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007fcc64596748 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fcc64596dd8 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007fcc645966d0 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70257916818160 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fcc6458fc68 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007fcc6458fab0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007fcc6458fa88 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007fcc6458fab0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007fcc6458f5b0 @details_key=nil, @details={:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007fcc6458f4e8 @paths=[#<ActionView::FixtureResolver:0x00007fcc6636b250 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={#<ActionView::LookupContext::DetailsKey:0x00007fcc645ec878 @hash=3216129721054552796>=>{"index"=>{"dummy"=>{false=>{[]=>[dummy/index.html.erb]}}}, "application"=>{"layouts"=>{false=>{[]=>[layouts/application.html.erb]}}}}}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fcc651534c8 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=2436672996809604676>]}>}, @truncator=#<Airbrake::Truncator:0x00007fcc663dcf40 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-12 19:35:35 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-12 19:35:37 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 5.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-12 19:35:37 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 1.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/resque" for 127.0.0.1 at 2019-03-12 19:35:37 +0200
Processing by DummyController#resque as HTML
  Rendered dummy/resque.html.erb within layouts/application (0.2ms)
Completed 200 OK in 2.0ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-12 19:35:37 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.4ms (Views: 9.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-12 19:35:39 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.6ms (Views: 10.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-12 19:35:41 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.3ms)
Completed 200 OK in 17.8ms (Views: 12.4ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-12 19:35:43 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 23.7ms (Views: 17.2ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-12 19:35:45 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 32.0ms (Views: 22.7ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-12 19:35:47 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.7ms (Views: 9.2ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-12 19:35:49 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.4ms)
Completed 200 OK in 17.6ms (Views: 1.5ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-12 19:35:51 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.9ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-12 19:35:53 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.7ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-12 19:35:55 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 24.3ms (Views: 8.6ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-12 19:35:57 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.4ms)
Completed 200 OK in 18.5ms (Views: 1.3ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-12 19:35:59 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.3ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-12 19:36:01 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.9ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-12 19:36:03 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-12 19:36:05 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-12 19:36:07 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 26.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-12 19:36:09 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.1ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 36.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-12 19:36:12 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 36.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/breakdown" for 127.0.0.1 at 2019-03-12 19:36:14 +0200
Processing by DummyController#breakdown as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "breakdown"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT "books".* FROM "books" [0m
  Rendered dummy/breakdown.html.erb within layouts/application (0.2ms)
Completed 200 OK in 9.5ms (Views: 0.9ms | ActiveRecord: 0.2ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (1.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-03-12 19:43:35 +0200
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.1ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.9ms)
Completed 200 OK in 19.5ms (Views: 5.8ms | ActiveRecord: 0.4ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (2.8ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-03-28 20:10:09 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 26.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-28 20:10:11 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-28 20:10:13 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 32.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-28 20:10:15 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 17.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-28 20:10:17 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 16.9ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-28 20:10:19 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/resque" for 127.0.0.1 at 2019-03-28 20:10:21 +0200
Processing by DummyController#resque as HTML
  Rendered dummy/resque.html.erb within layouts/application (1.2ms)
Completed 200 OK in 13.0ms (Views: 11.6ms | ActiveRecord: 0.0ms)
Started GET "/breakdown" for 127.0.0.1 at 2019-03-28 20:10:21 +0200
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.1ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.2ms)
Completed 200 OK in 7.6ms (Views: 0.9ms | ActiveRecord: 0.2ms)
Started GET "/crash" for 127.0.0.1 at 2019-03-28 20:10:21 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 8.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/delayed_job" for 127.0.0.1 at 2019-03-28 20:10:23 +0200
Processing by DummyController#delayed_job as HTML
Completed 500 Internal Server Error in 14.0ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007fee0ac86130 @config=#<Airbrake::Config:0x00007fee0a11fa80 @proxy={}, @queue...hash=2943620109571119331>]}>}, @truncator=#<Airbrake::Truncator:0x00007fee0ac2e750 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007fee0ac86130 @config=#<Airbrake::Config:0x00007fee0a11fa80 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fee0a11f9e0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fee0a11f940 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fee0a11f8f0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fee0a11f6c0>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>87, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>149, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__2701625860469606715__process_action__3715290519220012436__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__4492787274168278526__call__3151191555133503837__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007fee0ac2e688 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007fee0c36fae0>, "rack.errors"=>#<StringIO:0x00007fee0c36fb80>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fee0c55e450>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fee0ad55048 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fee0ad54fa8 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007fee0ad54e40 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007fee0ad54f58 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fee0ad54f08>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fee0c2bda48 @filters=[#<Proc:0x00007fee0c2bd980@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007fee0c2bd728@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007fee0c2bd700@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007fee0c2bc0f8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007fee0c2bc0d0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"19a9fb6444c906d35b63cef5c5d3dbc0", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fee0c36dfd8 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007fee0a9f6078 @app=#<ActionDispatch::Reloader:0x00007fee0a9f6140 @app=#<ActionDispatch::Callbacks:0x00007fee0a9f6168 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007fee0a9f6190 @app=#<Airbrake::Rack::Middleware:0x00007fee0a9f65c8 @app=#<ActiveRecord::QueryCache:0x00007fee0a9f6988 @app=#<ActionDispatch::Cookies:0x00007fee0a9f6e88 @app=#<ActionDispatch::Session::CookieStore:0x00007fee0a9f7ab8 @secrets=["9def01d1c6a71d0fa989b335161bae06a575859dea6573c135f3f3522281"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007fee0a9f71f8>, @app=#<ActionDispatch::Flash:0x00007fee0a9f7b08 @app=#<ActionDispatch::ParamsParser:0x00007fee0a9f7e00 @app=#<ActionDispatch::Head:0x00007fee0a9f7e28 @app=#<Rack::ConditionalGet:0x00007fee0a9ff7e0 @app=#<Rack::ETag:0x00007fee0a9ff790 @app=#<ActionDispatch::BestStandardsSupport:0x00007fee0a9fc018 @app=#<Warden::Manager:0x00007fee0a9fc248 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fee0c55e450>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007fee0acd6b80 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=-4205168591221967835>=>:xml_simple, #<Mime::Type:0x00007fee0acd5528 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=-598389002568638253>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"9def01d1c6a71d0fa989b335161bae06a575859dea6573c135f3f3522281", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fee0a9f71f8>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007fee0ab56828@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3ff7061b695c not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"9def01d1c6a71d0fa989b335161bae06a575859dea6573c135f3f3522281", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fee0a9f71f8>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007fee0c36cfc0 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007fee0c367c00 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fee0c36cfc0 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007fee0c367b88 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70330191920460 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fee0c3650b8 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007fee0c364f78 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007fee0c364f50 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007fee0c364f78 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007fee0c364708 @details_key=nil, @details={:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007fee0c364690 @paths=[#<ActionView::FixtureResolver:0x00007fee0a5bb828 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={#<ActionView::LookupContext::DetailsKey:0x00007fee0b325fb8 @hash=-4324221854399863292>=>{"resque"=>{"dummy"=>{false=>{[]=>[dummy/resque.html.erb]}}}, "application"=>{"layouts"=>{false=>{[]=>[layouts/application.html.erb]}}}, "breakdown"=>{"dummy"=>{false=>{[]=>[dummy/breakdown.html.erb]}}}}}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fee0acde6c8 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=2943620109571119331>]}>}, @truncator=#<Airbrake::Truncator:0x00007fee0ac2e750 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-28 20:10:23 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 17.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-28 20:10:25 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 5.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started HEAD "/crash" for 127.0.0.1 at 2019-03-28 20:10:25 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 0  in 4.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-28 20:10:25 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 5.1ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-28 20:10:27 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.9ms (Views: 9.7ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-28 20:10:29 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 19.1ms (Views: 13.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-28 20:10:31 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 12.9ms (Views: 8.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-28 20:10:33 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.3ms (Views: 8.7ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-28 20:10:35 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.7ms (Views: 8.2ms | ActiveRecord: 0.0ms)
Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-28 20:10:37 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-28 20:10:39 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.1ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 17.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-28 20:10:41 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-28 20:10:43 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-28 20:10:46 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 17.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-28 20:10:48 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-28 20:10:50 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.2ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-28 20:10:52 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.3ms)
Completed 200 OK in 12.1ms (Views: 1.2ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-28 20:10:54 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.0ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-28 20:10:56 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.8ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-28 20:10:58 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.2ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-28 20:11:00 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.1ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-03-28 20:11:02 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<RSpec::Mocks::MockExpectationError: Airbrake received :notify with unexpected arguments
  expected: (an instance of Airbrake::Notice)
       got: (#<AirbrakeTestError: after_commit>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of Airbrake::Notice"]
[0m[32m+[#<AirbrakeTestError: after_commit>]
[0m>
Completed 500 Internal Server Error in 7.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/" for 127.0.0.1 at 2019-03-28 20:11:02 +0200
Processing by DummyController#index as HTML
  Rendered dummy/index.html.erb within layouts/application (0.2ms)
Completed 200 OK in 0.9ms (Views: 0.8ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-03-28 20:11:02 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 4.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-28 20:11:02 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 1.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-03-28 20:11:29 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-28 20:11:31 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<RSpec::Mocks::MockExpectationError: Airbrake received :notify with unexpected arguments
  expected: (an instance of Airbrake::Notice)
       got: (#<AirbrakeTestError: after_commit>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of Airbrake::Notice"]
[0m[32m+[#<AirbrakeTestError: after_commit>]
[0m>
Completed 500 Internal Server Error in 13.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/" for 127.0.0.1 at 2019-03-28 20:11:31 +0200
Processing by DummyController#index as HTML
  Rendered dummy/index.html.erb within layouts/application (0.8ms)
Completed 200 OK in 5.5ms (Views: 5.3ms | ActiveRecord: 0.0ms)
Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-28 20:11:31 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.9ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-28 20:11:33 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 39.9ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-28 20:11:35 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-28 20:11:37 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 10.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-28 20:11:39 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 17.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-28 20:11:41 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 17.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-28 20:11:43 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.0ms (Views: 8.7ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-28 20:11:45 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.5ms (Views: 8.4ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-28 20:11:48 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.5ms (Views: 7.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-28 20:11:50 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.9ms (Views: 8.8ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-28 20:11:52 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.9ms (Views: 9.6ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-28 20:11:54 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.4ms (Views: 8.6ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-28 20:11:56 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.3ms)
Completed 200 OK in 15.5ms (Views: 1.3ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-28 20:11:58 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.7ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-28 20:12:00 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.4ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-28 20:12:02 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.6ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-28 20:12:04 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.3ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-28 20:12:06 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.1ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/delayed_job" for 127.0.0.1 at 2019-03-28 20:12:08 +0200
Processing by DummyController#delayed_job as HTML
Completed 500 Internal Server Error in 11.3ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007fb57239de68 @config=#<Airbrake::Config:0x00007fb5719c8640 @proxy={}, @queue...ash=-4546852983413860365>]}>}, @truncator=#<Airbrake::Truncator:0x00007fb5723167d8 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007fb57239de68 @config=#<Airbrake::Config:0x00007fb5719c8640 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fb5719c85c8 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fb5719c8578 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fb5719c8528 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fb5719c84b0>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>87, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>149, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__2266078374062079832__process_action__4176095465911767294__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__768942586040421218__call__1653216763746558456__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007fb5723167b0 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007fb5729da560>, "rack.errors"=>#<StringIO:0x00007fb5729da650>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fb5725a5ee0>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fb571929450 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fb571929360 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007fb5719291a8 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007fb571929310 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fb5719292c0>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fb57052e180 @filters=[#<Proc:0x00007fb57052df50@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007fb57052deb0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007fb57052de38@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007fb57052d0a0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007fb57052d028@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"2001864f5138634dce75fa1ff1dd1a46", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fb5729d9098 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007fb571a3f010 @app=#<ActionDispatch::Reloader:0x00007fb571a3f038 @app=#<ActionDispatch::Callbacks:0x00007fb571a3f060 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007fb571a3f088 @app=#<Airbrake::Rack::Middleware:0x00007fb571a3f0b0 @app=#<ActiveRecord::QueryCache:0x00007fb571a3f1a0 @app=#<ActionDispatch::Cookies:0x00007fb571a3f268 @app=#<ActionDispatch::Session::CookieStore:0x00007fb571a3f5b0 @secrets=["ea7afe04dad01ee3ad0f992eacbabb5fa1c51866e4a96ed9d49ef1a8ab5c"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007fb571a3f330>, @app=#<ActionDispatch::Flash:0x00007fb571a3f5d8 @app=#<ActionDispatch::ParamsParser:0x00007fb571a3f7b8 @app=#<ActionDispatch::Head:0x00007fb571a3f7e0 @app=#<Rack::ConditionalGet:0x00007fb571a3f808 @app=#<Rack::ETag:0x00007fb571a3f830 @app=#<ActionDispatch::BestStandardsSupport:0x00007fb571a3f880 @app=#<Warden::Manager:0x00007fb571a3f948 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fb5725a5ee0>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007fb57283b7b8 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=-910580193776549131>=>:xml_simple, #<Mime::Type:0x00007fb572843738 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=-4439326418119731672>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"ea7afe04dad01ee3ad0f992eacbabb5fa1c51866e4a96ed9d49ef1a8ab5c", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fb571a3f330>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007fb57242fbd8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3fdab94ec414 not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"ea7afe04dad01ee3ad0f992eacbabb5fa1c51866e4a96ed9d49ef1a8ab5c", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fb571a3f330>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007fb5729d85d0 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007fb5729d8120 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fb5729d85d0 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007fb5729d80a8 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70208644358020 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fb5729d04c0 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007fb5729cbf10 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007fb5729cbee8 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007fb5729cbf10 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007fb5729cbb50 @details_key=nil, @details={:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007fb5729cba88 @paths=[#<ActionView::FixtureResolver:0x00007fb572918be0 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={#<ActionView::LookupContext::DetailsKey:0x00007fb57219b160 @hash=1071657742116129084>=>{"index"=>{"dummy"=>{false=>{[]=>[dummy/index.html.erb]}}}, "application"=>{"layouts"=>{false=>{[]=>[layouts/application.html.erb]}}}, "notify_airbrake_helper"=>{"dummy"=>{false=>{[]=>[dummy/notify_airbrake_helper.html.erb]}}}, "notify_airbrake_sync_helper"=>{"dummy"=>{false=>{[]=>[dummy/notify_airbrake_sync_helper.html.erb]}}}}}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fb5728208f0 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-4546852983413860365>]}>}, @truncator=#<Airbrake::Truncator:0x00007fb5723167d8 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-28 20:12:08 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/resque" for 127.0.0.1 at 2019-03-28 20:12:10 +0200
Processing by DummyController#resque as HTML
  Rendered dummy/resque.html.erb within layouts/application (0.2ms)
Completed 200 OK in 2.4ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-03-28 20:12:10 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 17.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-28 20:12:12 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-28 20:12:14 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 10.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-28 20:12:16 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-28 20:12:18 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-28 20:12:20 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 17.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-28 20:12:22 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 5.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started HEAD "/crash" for 127.0.0.1 at 2019-03-28 20:12:22 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 0  in 5.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-28 20:12:22 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 4.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-28 20:12:22 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 1.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/breakdown" for 127.0.0.1 at 2019-03-28 20:12:22 +0200
Processing by DummyController#breakdown as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "breakdown"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT "books".* FROM "books" [0m
  Rendered dummy/breakdown.html.erb within layouts/application (0.2ms)
Completed 200 OK in 7.9ms (Views: 0.9ms | ActiveRecord: 0.2ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-03-28 20:13:41 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 10.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-28 20:13:41 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 1.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-28 20:13:41 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 7.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started HEAD "/crash" for 127.0.0.1 at 2019-03-28 20:13:41 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 0  in 4.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/" for 127.0.0.1 at 2019-03-28 20:13:41 +0200
Processing by DummyController#index as HTML
  Rendered dummy/index.html.erb within layouts/application (0.8ms)
Completed 200 OK in 5.3ms (Views: 5.1ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-03-28 20:13:41 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<RSpec::Mocks::MockExpectationError: Airbrake received :notify with unexpected arguments
  expected: (an instance of Airbrake::Notice)
       got: (#<AirbrakeTestError: after_commit>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of Airbrake::Notice"]
[0m[32m+[#<AirbrakeTestError: after_commit>]
[0m>
Completed 500 Internal Server Error in 12.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-28 20:13:41 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-28 20:13:43 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-28 20:13:45 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-28 20:13:47 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 17.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-28 20:13:49 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-28 20:13:51 +0200
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 17.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-28 20:13:53 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 25.9ms (Views: 1.4ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-28 20:13:55 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.3ms)
Completed 200 OK in 23.2ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-28 20:13:57 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.8ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-28 20:13:59 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.9ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-28 20:14:01 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.8ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-28 20:14:03 +0200
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.3ms)
Completed 200 OK in 13.7ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-28 20:14:05 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.9ms (Views: 8.8ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-28 20:14:07 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.3ms)
Completed 200 OK in 14.1ms (Views: 8.7ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-28 20:14:09 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 17.1ms (Views: 11.7ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-28 20:14:11 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 21.6ms (Views: 15.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-28 20:14:13 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 26.4ms (Views: 19.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-28 20:14:15 +0200
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.9ms (Views: 9.3ms | ActiveRecord: 0.0ms)
Started GET "/resque" for 127.0.0.1 at 2019-03-28 20:14:18 +0200
Processing by DummyController#resque as HTML
  Rendered dummy/resque.html.erb within layouts/application (0.2ms)
Completed 200 OK in 2.8ms (Views: 1.2ms | ActiveRecord: 0.0ms)
Started GET "/breakdown" for 127.0.0.1 at 2019-03-28 20:14:18 +0200
Processing by DummyController#breakdown as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "breakdown"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT "books".* FROM "books" [0m
  Rendered dummy/breakdown.html.erb within layouts/application (0.2ms)
Completed 200 OK in 8.4ms (Views: 0.9ms | ActiveRecord: 0.2ms)
Started GET "/delayed_job" for 127.0.0.1 at 2019-03-28 20:14:18 +0200
Processing by DummyController#delayed_job as HTML
Completed 500 Internal Server Error in 13.6ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007feeee778668 @config=#<Airbrake::Config:0x00007feeee661860 @proxy={}, @queue...hash=4098448780163104265>]}>}, @truncator=#<Airbrake::Truncator:0x00007feef035a520 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007feeee778668 @config=#<Airbrake::Config:0x00007feeee661860 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007feeee6617e8 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007feeee661798 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007feeee661720 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007feeee661680>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>87, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>149, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__3876914363085639764__process_action__1303211941228265630__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__3934229911912318201__call__1549725132338445966__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007feef035a4f8 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007feeee533b78>, "rack.errors"=>#<StringIO:0x00007feeee533d08>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007feeedbbe390>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007feeee949ff0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007feeee949f50 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007feeee949de8 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007feeee949f00 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007feeee949eb0>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007feeedb07b40 @filters=[#<Proc:0x00007feeedb07988@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007feeedb078c0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007feeedb07898@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007feeedb06fb0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007feeedb06f88@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"bfd80fb1764841f6969d31f0fec3f5d9", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007feeee523ae8 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007feeedbde5f0 @app=#<ActionDispatch::Reloader:0x00007feeedbde618 @app=#<ActionDispatch::Callbacks:0x00007feeedbde640 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007feeedbde668 @app=#<Airbrake::Rack::Middleware:0x00007feeedbde758 @app=#<ActiveRecord::QueryCache:0x00007feeedbde8e8 @app=#<ActionDispatch::Cookies:0x00007feeedbdea28 @app=#<ActionDispatch::Session::CookieStore:0x00007feeedbdefa0 @secrets=["072eb997f5c1ad0ef965002fbebf56560eb83d4407df1f52c910334ecb12"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007feeedbdebb8>, @app=#<ActionDispatch::Flash:0x00007feeedbdefc8 @app=#<ActionDispatch::ParamsParser:0x00007feeedbdf1a8 @app=#<ActionDispatch::Head:0x00007feeedbdf1d0 @app=#<Rack::ConditionalGet:0x00007feeedbdf1f8 @app=#<Rack::ETag:0x00007feeedbdf220 @app=#<ActionDispatch::BestStandardsSupport:0x00007feeedbdf270 @app=#<Warden::Manager:0x00007feeedbdf338 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007feeedbbe390>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007feeee320bb0 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=-2110781180386443340>=>:xml_simple, #<Mime::Type:0x00007feeee331d48 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=2651781476765663895>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"072eb997f5c1ad0ef965002fbebf56560eb83d4407df1f52c910334ecb12", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007feeedbdebb8>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007feef035b790@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3ff7772908e8 not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"072eb997f5c1ad0ef965002fbebf56560eb83d4407df1f52c910334ecb12", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007feeedbdebb8>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007feeee520cd0 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007feeee51b820 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007feeee520cd0 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007feeee51b730 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70332088638020 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007feeee511f00 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007feeee511d70 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007feeee511d48 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007feeee511d70 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007feeee5116b8 @details_key=nil, @details={:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007feeee511410 @paths=[#<ActionView::FixtureResolver:0x00007feef02b3cc0 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={#<ActionView::LookupContext::DetailsKey:0x00007feeedb6f150 @hash=4400462559880460223>=>{"index"=>{"dummy"=>{false=>{[]=>[dummy/index.html.erb]}}}, "application"=>{"layouts"=>{false=>{[]=>[layouts/application.html.erb]}}}, "notify_airbrake_sync_helper"=>{"dummy"=>{false=>{[]=>[dummy/notify_airbrake_sync_helper.html.erb]}}}, "notify_airbrake_helper"=>{"dummy"=>{false=>{[]=>[dummy/notify_airbrake_helper.html.erb]}}}, "resque"=>{"dummy"=>{false=>{[]=>[dummy/resque.html.erb]}}}, "breakdown"=>{"dummy"=>{false=>{[]=>[dummy/breakdown.html.erb]}}}}}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007feeee313bb8 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=4098448780163104265>]}>}, @truncator=#<Airbrake::Truncator:0x00007feef035a520 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-28 20:14:18 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 16.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-28 20:14:20 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 15.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-28 20:14:22 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 15.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-28 20:14:24 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 11.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-28 20:14:26 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 17.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-28 20:14:28 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 9.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-28 20:14:30 +0200
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-03-28 20:14:32 +0200
Processing by DummyController#crash as HTML
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (5.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/delayed_job" for 127.0.0.1 at 2019-04-01 13:47:34 +0300
Processing by DummyController#delayed_job as HTML
Completed 500 Internal Server Error in 11.2ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007fed67ca9340 @config=#<Airbrake::Config:0x00007fed68d87720 @proxy={}, @queue...hash=3900637000862569930>]}>}, @truncator=#<Airbrake::Truncator:0x00007fed68db14a8 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007fed67ca9340 @config=#<Airbrake::Config:0x00007fed68d87720 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fed68d876a8 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fed68d87658 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fed68d87608 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fed68d87590>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3">, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>87, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>149, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__83456659031293807__process_action__2087420186915765575__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__4120157808760365097__call__2493302765148272837__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.2", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007fed68db1458 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007fed68f8af18>, "rack.errors"=>#<StringIO:0x00007fed68f8b030>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fed6a276398>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fed68feb390 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fed68feb2c8 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007fed68feb160 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007fed68feb278 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fed68feb228>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fed691ffed8 @filters=[#<Proc:0x00007fed691ffe10@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007fed691ffde8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007fed691ffdc0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007fed691ff410@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007fed691ff3e8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"d990ac84f622389ebe30517047dd82a2", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fed691fcc10 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007fed68ef1e30 @app=#<ActionDispatch::Reloader:0x00007fed68ef1ea8 @app=#<ActionDispatch::Callbacks:0x00007fed68ef1ed0 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007fed68ef1ef8 @app=#<Airbrake::Rack::Middleware:0x00007fed68ef1f20 @app=#<ActiveRecord::QueryCache:0x00007fed68ef2038 @app=#<ActionDispatch::Cookies:0x00007fed68ef2128 @app=#<ActionDispatch::Session::CookieStore:0x00007fed68ef25b0 @secrets=["e4b0ec799efd029665d9bb7fad3535a0757372761e2cae48bf483812578f"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007fed68ef2218>, @app=#<ActionDispatch::Flash:0x00007fed68ef2628 @app=#<ActionDispatch::ParamsParser:0x00007fed68ef2718 @app=#<ActionDispatch::Head:0x00007fed68ef2740 @app=#<Rack::ConditionalGet:0x00007fed68ef2768 @app=#<Rack::ETag:0x00007fed68ef2790 @app=#<ActionDispatch::BestStandardsSupport:0x00007fed68ef27e0 @app=#<Warden::Manager:0x00007fed68ef28d0 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fed6a276398>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007fed6a12d068 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=2382684110760511079>=>:xml_simple, #<Mime::Type:0x00007fed6a1367a8 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=4052675979160935381>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"e4b0ec799efd029665d9bb7fad3535a0757372761e2cae48bf483812578f", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fed68ef2218>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007fed6a28e128@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3ff6b48fb804 not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"e4b0ec799efd029665d9bb7fad3535a0757372761e2cae48bf483812578f", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fed68ef2218>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007fed691f6900 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007fed691f6108 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fed691f6900 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007fed67cfab50 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70328812819720 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fed68f5b4c0 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007fed68f5b358 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007fed68f5b308 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007fed68f5b358 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007fed691ddb80 @details_key=nil, @details={:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007fed691ddab8 @paths=[#<ActionView::FixtureResolver:0x00007fed68dbad78 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fed6a1261c8 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=3900637000862569930>]}>}, @truncator=#<Airbrake::Truncator:0x00007fed68db14a8 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started HEAD "/crash" for 127.0.0.1 at 2019-04-01 13:47:34 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 0  in 11.9ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-01 13:47:34 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 9.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-01 13:47:34 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.6ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 29.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-01 13:47:36 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 5.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-01 13:47:36 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 1.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-01 13:47:36 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 14.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-01 13:47:38 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (1.2ms)
Completed 200 OK in 22.5ms (Views: 9.8ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-01 13:47:40 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.8ms (Views: 0.8ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-01 13:47:42 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.2ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-01 13:47:44 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.6ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-01 13:47:46 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 12.9ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-01 13:47:48 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.5ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-01 13:47:50 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.5ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-01 13:47:53 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.9ms (Views: 9.8ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-01 13:47:55 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.7ms (Views: 8.2ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-01 13:47:57 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.3ms)
Completed 200 OK in 13.3ms (Views: 8.1ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-01 13:47:59 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 12.6ms (Views: 8.1ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-01 13:48:01 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.3ms (Views: 9.7ms | ActiveRecord: 0.0ms)
Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-01 13:48:03 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 14.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-01 13:48:05 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-01 13:48:07 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-01 13:48:09 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-01 13:48:11 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-01 13:48:13 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/resque" for 127.0.0.1 at 2019-04-01 13:48:15 +0300
Processing by DummyController#resque as HTML
  Rendered dummy/resque.html.erb within layouts/application (0.2ms)
Completed 200 OK in 2.1ms (Views: 0.8ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-01 13:48:15 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<RSpec::Mocks::MockExpectationError: Airbrake received :notify with unexpected arguments
  expected: (an instance of Airbrake::Notice)
       got: (#<AirbrakeTestError: after_commit>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of Airbrake::Notice"]
[0m[32m+[#<AirbrakeTestError: after_commit>]
[0m>
Completed 500 Internal Server Error in 5.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/" for 127.0.0.1 at 2019-04-01 13:48:15 +0300
Processing by DummyController#index as HTML
  Rendered dummy/index.html.erb within layouts/application (0.2ms)
Completed 200 OK in 1.2ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/breakdown" for 127.0.0.1 at 2019-04-01 13:48:15 +0300
Processing by DummyController#breakdown as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "breakdown"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT "books".* FROM "books" [0m
  Rendered dummy/breakdown.html.erb within layouts/application (0.2ms)
Completed 200 OK in 7.0ms (Views: 0.8ms | ActiveRecord: 0.2ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:route=>"/breakdown(.:format)", :method=>"GET", :response_type=>:html, :groups=>"hash_including(:db=>\"an instance of Float\")"))
       got: ({:groups=>{"db"=>0.194, "view"=>0.7850000401958823}, :method=>"GET", :response_type=>:html, :route=>"/breakdown(.:format)", :start_time=>2019-04-01 13:48:15.377602000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:route=>\"/breakdown(.:format)\", :method=>\"GET\", :response_type=>:html, :groups=>\"hash_including(:db=>\\\"an instance of Float\\\")\")"]
[0m[32m+[{:groups=>{"db"=>0.194, "view"=>0.7850000401958823},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>:html,
[0m[32m+  :route=>"/breakdown(.:format)",
[0m[32m+  :start_time=>2019-04-01 13:48:15.377602000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:15:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:12:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:12:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-01 13:48:15 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 9.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-01 13:48:17 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-01 13:48:19 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 17.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (2.8ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started HEAD "/crash" for 127.0.0.1 at 2019-04-11 22:58:56 +0300
Processing by DummyController#crash as HTML
Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 00:42:27 +0300
Processing by DummyController#breakdown as HTML

NameError (undefined local variable or method `r' for #<Airbrake::Rails::ActionControllerRouteSubscriber:0x00007fdf2e244a68>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:36:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:43:07 +0300
Processing by DummyController#crash as HTML
Connecting to database specified by DATABASE_URL
  [1m[36m (0.8ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started HEAD "/crash" for 127.0.0.1 at 2019-04-12 00:43:12 +0300
Processing by DummyController#crash as HTML

NameError (undefined local variable or method `r' for #<Airbrake::Rails::ActionControllerRouteSubscriber:0x00007f80ece132e0>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:36:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:44:12 +0300
Processing by DummyController#crash as HTML
Connecting to database specified by DATABASE_URL
Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:44:26 +0300
Processing by DummyController#crash as HTML

NameError (undefined local variable or method `r' for #<Airbrake::Rails::ActionControllerRouteSubscriber:0x00007fb63d77c310>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/" for 127.0.0.1 at 2019-04-12 00:44:29 +0300
Processing by DummyController#index as HTML

RSpec::Mocks::MockExpectationError ((Airbrake).notify(#<Airbrake::Notice:0x00007fb63cdf37d0 @config=#<Airbrake::Config:0x00007fb63d3ced80 @proxy={}, @queue...hash=2303246210146269462>]}>}, @truncator=#<Airbrake::Truncator:0x00007fb63d747bd8 @max_size=10000>>)
    expected: 0 times with any arguments
    received: 1 time with arguments: (#<Airbrake::Notice:0x00007fb63cdf37d0 @config=#<Airbrake::Config:0x00007fb63d3ced80 @proxy={}, @queue...hash=2303246210146269462>]}>}, @truncator=#<Airbrake::Truncator:0x00007fb63d747bd8 @max_size=10000>>)):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:44:29 +0300
Processing by DummyController#crash as HTML

RSpec::Expectations::ExpectationNotMetError (
expected: "AirbrakeTestError"
     got: "NameError"

(compared using ==)
):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:44:29 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `r' for #<Airbrake::Rails::ActionControllerRouteSubscriber:0x00007fb63d77c310>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.3ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 00:44:48 +0300
Processing by DummyController#breakdown as HTML

NameError (undefined local variable or method `r' for #<Airbrake::Rails::ActionControllerRouteSubscriber:0x00007f89307911c8>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:44:48 +0300
Processing by DummyController#crash as HTML

NameError (undefined local variable or method `r' for #<Airbrake::Rails::ActionControllerRouteSubscriber:0x00007f89307911c8>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:44:50 +0300
Processing by DummyController#crash as HTML

NameError (undefined local variable or method `r' for #<Airbrake::Rails::ActionControllerRouteSubscriber:0x00007f89307911c8>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:44:50 +0300
Processing by DummyController#crash as HTML

NameError (undefined local variable or method `r' for #<Airbrake::Rails::ActionControllerRouteSubscriber:0x00007f89307911c8>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/" for 127.0.0.1 at 2019-04-12 00:44:50 +0300
Processing by DummyController#index as HTML

RSpec::Mocks::MockExpectationError ((Airbrake).notify(#<Airbrake::Notice:0x00007f893066ae70 @config=#<Airbrake::Config:0x00007f8930ab9968 @proxy={}, @queue...hash=-106107129546810582>]}>}, @truncator=#<Airbrake::Truncator:0x00007f893115ce50 @max_size=10000>>)
    expected: 0 times with any arguments
    received: 1 time with arguments: (#<Airbrake::Notice:0x00007f893066ae70 @config=#<Airbrake::Config:0x00007f8930ab9968 @proxy={}, @queue...hash=-106107129546810582>]}>}, @truncator=#<Airbrake::Truncator:0x00007f893115ce50 @max_size=10000>>)):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:44:50 +0300
Processing by DummyController#crash as HTML

RSpec::Expectations::ExpectationNotMetError (
expected: "AirbrakeTestError"
     got: "NameError"

(compared using ==)
):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:44:50 +0300
Processing by DummyController#crash as HTML

NameError (undefined local variable or method `r' for #<Airbrake::Rails::ActionControllerRouteSubscriber:0x00007f89307911c8>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:44:52 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `r' for #<Airbrake::Rails::ActionControllerRouteSubscriber:0x00007f89307911c8>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:44:54 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `r' for #<Airbrake::Rails::ActionControllerRouteSubscriber:0x00007f89307911c8>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:44:56 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `r' for #<Airbrake::Rails::ActionControllerRouteSubscriber:0x00007f89307911c8>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:45:03 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `path' for {:controller=>"dummy", :action=>"index"}:Hash):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:45:05 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `path' for {:controller=>"dummy", :action=>"index"}:Hash):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:45:07 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `path' for {:controller=>"dummy", :action=>"index"}:Hash):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:45:09 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `path' for {:controller=>"dummy", :action=>"index"}:Hash):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:45:11 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `path' for {:controller=>"dummy", :action=>"index"}:Hash):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:45:13 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `path' for {:controller=>"dummy", :action=>"index"}:Hash):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:45:15 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `path' for {:controller=>"dummy", :action=>"index"}:Hash):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:45:17 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `path' for {:controller=>"dummy", :action=>"index"}:Hash):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:45:19 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `path' for {:controller=>"dummy", :action=>"index"}:Hash):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:45:21 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `path' for {:controller=>"dummy", :action=>"index"}:Hash):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:45:23 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `path' for {:controller=>"dummy", :action=>"index"}:Hash):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:45:25 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `path' for {:controller=>"dummy", :action=>"index"}:Hash):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:45:27 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `path' for {:controller=>"dummy", :action=>"index"}:Hash):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 00:45:29 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `path' for {:controller=>"dummy", :action=>"index"}:Hash):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 00:45:31 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `path' for {:controller=>"dummy", :action=>"index"}:Hash):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 00:45:33 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `path' for {:controller=>"dummy", :action=>"index"}:Hash):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 00:45:35 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `path' for {:controller=>"dummy", :action=>"index"}:Hash):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 00:45:37 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `path' for {:controller=>"dummy", :action=>"index"}:Hash):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 00:45:39 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `path' for {:controller=>"dummy", :action=>"index"}:Hash):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/" for 127.0.0.1 at 2019-04-12 00:45:41 +0300
Processing by DummyController#index as HTML

RSpec::Mocks::MockExpectationError ((Airbrake).notify(#<Airbrake::Notice:0x00007fc171dfd718 @config=#<Airbrake::Config:0x00007fc170b4ce20 @proxy={}, @queue...@hash=539940566882263417>]}>}, @truncator=#<Airbrake::Truncator:0x00007fc174083698 @max_size=10000>>)
    expected: 0 times with any arguments
    received: 1 time with arguments: (#<Airbrake::Notice:0x00007fc171dfd718 @config=#<Airbrake::Config:0x00007fc170b4ce20 @proxy={}, @queue...@hash=539940566882263417>]}>}, @truncator=#<Airbrake::Truncator:0x00007fc174083698 @max_size=10000>>)):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:45:41 +0300
Processing by DummyController#crash as HTML

RSpec::Expectations::ExpectationNotMetError (
expected: "AirbrakeTestError"
     got: "NoMethodError"

(compared using ==)
):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/delayed_job" for 127.0.0.1 at 2019-04-12 00:45:41 +0300
Processing by DummyController#delayed_job as HTML

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007fc171cce180 @config=#<Airbrake::Config:0x00007fc170b4ce20 @proxy={}, @queue...@hash=539940566882263417>]}>}, @truncator=#<Airbrake::Truncator:0x00007fc171c8ff20 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007fc171cce180 @config=#<Airbrake::Config:0x00007fc170b4ce20 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fc170b4cda8 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fc170b4cd58 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fc170b4cd08 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fc170b4cc90>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"NoMethodError", :message=>"undefined method `path' for {:controller=>\"dummy\", :action=>\"index\"}:Hash", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/action_controller_route_subscriber.rb", :line=>37, :function=>"block in find_route"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/action_controller_route_subscriber.rb", :line=>34, :function=>"each"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/action_controller_route_subscriber.rb", :line=>34, :function=>"find_route"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/action_controller_route_subscriber.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>47, :function=>"publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"block in publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>25, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>27, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__2923761692379606625__call__2237260404015651572__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<NoMethodError: undefined method `path' for {:controller=>"dummy", :action=>"index"}:Hash>, :rack_request=>#<ActionDispatch::Request:0x00007fc171c8fef8 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007fc171cde260>, "rack.errors"=>#<StringIO:0x00007fc171cde3a0>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fc17359ac90>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fc171162850 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fc1711627b0 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007fc171162648 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007fc171162760 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fc171162710>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fc1711ea138 @filters=[#<Proc:0x00007fc1711ea020@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007fc1711e9ff8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007fc1711e9f80@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007fc1711e90f8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007fc1711e90d0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"b182295b88ee627598323db0b1e6e6d2", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fc171cdd248 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007fc170bbfa60 @app=#<ActionDispatch::Reloader:0x00007fc170bbfab0 @app=#<ActionDispatch::Callbacks:0x00007fc170bbfad8 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007fc170bbfb00 @app=#<Airbrake::Rack::Middleware:0x00007fc170bbfb28 @app=#<ActiveRecord::QueryCache:0x00007fc170bbfc40 @app=#<ActionDispatch::Cookies:0x00007fc170bbfd08 @app=#<ActionDispatch::Session::CookieStore:0x00007fc170bc4bc8 @secrets=["ccf6b87d5e5f62747a31d232dea3b0f8fc34484668891d6b1a9eb4633d11"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007fc170bbfdd0>, @app=#<ActionDispatch::Flash:0x00007fc170bc4ad8 @app=#<ActionDispatch::ParamsParser:0x00007fc170bc40b0 @app=#<ActionDispatch::Head:0x00007fc170bc40d8 @app=#<Rack::ConditionalGet:0x00007fc170bc4100 @app=#<Rack::ETag:0x00007fc170bc4128 @app=#<ActionDispatch::BestStandardsSupport:0x00007fc170bc4178 @app=#<Warden::Manager:0x00007fc170bc4240 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fc17359ac90>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007fc173328a48 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=175321492010568034>=>:xml_simple, #<Mime::Type:0x00007fc1733322a0 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=-91289089113043093>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"ccf6b87d5e5f62747a31d232dea3b0f8fc34484668891d6b1a9eb4633d11", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fc170bbfdd0>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007fc171170f40@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3fe0b8e6e4ec not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"ccf6b87d5e5f62747a31d232dea3b0f8fc34484668891d6b1a9eb4633d11", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fc170bbfdd0>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007fc171cdc7a8 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007fc171cdc398 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fc171cdc7a8 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007fc171cdc320 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70234407362840 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fc171cd5fe8 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007fc171cd5ed0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007fc171cd5ea8 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007fc171cd5ed0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007fc171cd5b60 @details_key=nil, @details={:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :png, :jpeg, :gif, :bmp, :tiff, :mpeg, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007fc171cd5ac0 @paths=[#<ActionView::FixtureResolver:0x00007fc170af4ce8 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fc1733183f0 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=539940566882263417>]}>}, @truncator=#<Airbrake::Truncator:0x00007fc171c8ff20 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:45:41 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `path' for {:controller=>"dummy", :action=>"index"}:Hash):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:45:41 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `path' for {:controller=>"dummy", :action=>"index"}:Hash):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:45:41 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `path' for {:controller=>"dummy", :action=>"index"}:Hash):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/resque" for 127.0.0.1 at 2019-04-12 00:45:43 +0300
Processing by DummyController#resque as HTML

NoMethodError (undefined method `path' for {:controller=>"dummy", :action=>"index"}:Hash):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:45:43 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `path' for {:controller=>"dummy", :action=>"index"}:Hash):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:45:45 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `path' for {:controller=>"dummy", :action=>"index"}:Hash):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:45:47 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `path' for {:controller=>"dummy", :action=>"index"}:Hash):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:45:49 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `path' for {:controller=>"dummy", :action=>"index"}:Hash):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:45:51 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `path' for {:controller=>"dummy", :action=>"index"}:Hash):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:45:53 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `path' for {:controller=>"dummy", :action=>"index"}:Hash):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 00:45:55 +0300
Processing by DummyController#breakdown as HTML

NoMethodError (undefined method `path' for {:controller=>"dummy", :action=>"index"}:Hash):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started HEAD "/crash" for 127.0.0.1 at 2019-04-12 00:45:55 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `path' for {:controller=>"dummy", :action=>"index"}:Hash):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:45:55 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `path' for {:controller=>"dummy", :action=>"index"}:Hash):
  lib/airbrake/rails/action_controller_route_subscriber.rb:37:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:34:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:22:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 00:46:26 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe0b8a36920>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:19:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 00:46:28 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe0b8a36920>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:19:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 00:46:30 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe0b8a36920>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:19:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 00:46:32 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe0b8a36920>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:19:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 00:46:34 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe0b8a36920>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:19:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 00:46:36 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe0b8a36920>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:19:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:46:38 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe0b8a36920>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:19:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:46:40 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe0b8a36920>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:19:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:46:42 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe0b8a36920>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:19:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:46:44 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe0b8a36920>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:19:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:46:46 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe0b8a36920>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:19:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:46:48 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe0b8a36920>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:19:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:46:50 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe0b8a36920>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:19:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:46:52 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe0b8a36920>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:19:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:46:54 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe0b8a36920>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:19:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:46:56 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe0b8a36920>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:19:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:46:58 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe0b8a36920>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:19:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:47:00 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe0b8a36920>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:19:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started HEAD "/crash" for 127.0.0.1 at 2019-04-12 00:47:02 +0300
Processing by DummyController#crash as HTML

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe0b8a36920>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:19:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:47:02 +0300
Processing by DummyController#crash as HTML

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe0b8a36920>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:19:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:47:02 +0300
Processing by DummyController#crash as HTML

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe0b8a36920>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:19:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:47:03 +0300
Processing by DummyController#crash as HTML

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe0b8a36920>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:19:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:47:03 +0300
Processing by DummyController#crash as HTML

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe0b8a36920>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:19:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:47:05 +0300
Processing by DummyController#crash as HTML

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe0b8a36920>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:19:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:47:07 +0300
Processing by DummyController#crash as HTML

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe0b8a36920>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:19:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:47:09 +0300
Processing by DummyController#crash as HTML

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe0b8a36920>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:19:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:47:11 +0300
Processing by DummyController#crash as HTML

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe0b8a36920>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:19:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:47:13 +0300
Processing by DummyController#crash as HTML

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe0b8a36920>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:19:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:47:15 +0300
Processing by DummyController#crash as HTML

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe0b8a36920>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:19:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/resque" for 127.0.0.1 at 2019-04-12 00:47:17 +0300
Processing by DummyController#resque as HTML

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe0b8a36920>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:19:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 00:47:17 +0300
Processing by DummyController#breakdown as HTML

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe0b8a36920>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:19:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/" for 127.0.0.1 at 2019-04-12 00:47:17 +0300
Processing by DummyController#index as HTML

RSpec::Mocks::MockExpectationError ((Airbrake).notify(#<Airbrake::Notice:0x00007fe0b6ca0cf8 @config=#<Airbrake::Config:0x00007fe0b71c1e08 @proxy={}, @queue...ash=-1531332444990834769>]}>}, @truncator=#<Airbrake::Truncator:0x00007fe0b6c18510 @max_size=10000>>)
    expected: 0 times with any arguments
    received: 1 time with arguments: (#<Airbrake::Notice:0x00007fe0b6ca0cf8 @config=#<Airbrake::Config:0x00007fe0b71c1e08 @proxy={}, @queue...ash=-1531332444990834769>]}>}, @truncator=#<Airbrake::Truncator:0x00007fe0b6c18510 @max_size=10000>>)):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:47:17 +0300
Processing by DummyController#crash as HTML

RSpec::Expectations::ExpectationNotMetError (
expected: "AirbrakeTestError"
     got: "NameError"

(compared using ==)
):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:47:17 +0300
Processing by DummyController#crash as HTML

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe0b8a36920>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:19:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/delayed_job" for 127.0.0.1 at 2019-04-12 00:47:19 +0300
Processing by DummyController#delayed_job as HTML

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007fe0b6bab050 @config=#<Airbrake::Config:0x00007fe0b71c1e08 @proxy={}, @queue...ash=-1531332444990834769>]}>}, @truncator=#<Airbrake::Truncator:0x00007fe0b6afa200 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,10 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007fe0b6bab050 @config=#<Airbrake::Config:0x00007fe0b71c1e08 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fe0b71c1d90 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fe0b71c1d40 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fe0b71c1cf0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fe0b71c1c78>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"NameError", :message=>"undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe0b8a36920>\nDid you mean?  engines\n               @engine", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/app.rb", :line=>11, :function=>"routes"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/action_controller_route_subscriber.rb", :line=>19, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>47, :function=>"publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"block in publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>25, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>27, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__420734230781474883__call__3628344407028354383__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<NameError: undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe0b8a36920>
[0m[32m+Did you mean?  engines
[0m[32m+               @engine>, :rack_request=>#<ActionDispatch::Request:0x00007fe0b6afa1d8 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007fe0b6bc1e40>, "rack.errors"=>#<StringIO:0x00007fe0b6bc1ee0>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fe0b8a5c030>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fe0b6c5b518 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fe0b6c5b478 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007fe0b6c5b310 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007fe0b6c5b428 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fe0b6c5b3d8>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fe0b8a3ec60 @filters=[#<Proc:0x00007fe0b8a3eb48@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007fe0b8a3eb20@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007fe0b8a3eaa8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007fe0b8a3dce8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007fe0b8a3dcc0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"7ccb8c948c708ec6dc979fb43af82425", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fe0b6bc0ce8 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007fe0b72b22b8 @app=#<ActionDispatch::Reloader:0x00007fe0b72b22e0 @app=#<ActionDispatch::Callbacks:0x00007fe0b72b2308 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007fe0b72b2330 @app=#<Airbrake::Rack::Middleware:0x00007fe0b72b2358 @app=#<ActiveRecord::QueryCache:0x00007fe0b72b2448 @app=#<ActionDispatch::Cookies:0x00007fe0b72b2510 @app=#<ActionDispatch::Session::CookieStore:0x00007fe0b72b2858 @secrets=["8ae59847aee87cebb29b0b25bfa3e60a6a0790650993cc4c26003d80d7bd"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007fe0b72b25d8>, @app=#<ActionDispatch::Flash:0x00007fe0b72b2880 @app=#<ActionDispatch::ParamsParser:0x00007fe0b72b29c0 @app=#<ActionDispatch::Head:0x00007fe0b72b29e8 @app=#<Rack::ConditionalGet:0x00007fe0b72b2a10 @app=#<Rack::ETag:0x00007fe0b72b2a38 @app=#<ActionDispatch::BestStandardsSupport:0x00007fe0b72b2a88 @app=#<Warden::Manager:0x00007fe0b72b2b78 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fe0b8a5c030>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007fe0b6386578 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=3634351959857671716>=>:xml_simple, #<Mime::Type:0x00007fe0b6384930 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=1097035565204525766>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"8ae59847aee87cebb29b0b25bfa3e60a6a0790650993cc4c26003d80d7bd", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fe0b72b25d8>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007fe0b6c6ae78@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3ff05b5e01d8 not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"8ae59847aee87cebb29b0b25bfa3e60a6a0790650993cc4c26003d80d7bd", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fe0b72b25d8>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007fe0b6bc0180 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007fe0b6bbb9c8 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fe0b6bc0180 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007fe0b6bbb428 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70301557578140 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fe0b6bb2f08 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007fe0b6bb2d50 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007fe0b6bb2d28 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007fe0b6bb2d50 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007fe0b6bb28a0 @details_key=nil, @details={:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :png, :jpeg, :gif, :bmp, :tiff, :mpeg, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007fe0b6bb2828 @paths=[#<ActionView::FixtureResolver:0x00007fe0b651d850 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fe0b6374ee0 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-1531332444990834769>]}>}, @truncator=#<Airbrake::Truncator:0x00007fe0b6afa200 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:49:02 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 10.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:49:02 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 1.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/resque" for 127.0.0.1 at 2019-04-12 00:49:02 +0300
Processing by DummyController#resque as HTML
  Rendered dummy/resque.html.erb within layouts/application (1.6ms)
Completed 200 OK in 10.5ms (Views: 9.4ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:49:02 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 17.6ms (Views: 12.5ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:49:04 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.8ms (Views: 9.2ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:49:06 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.2ms (Views: 10.1ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:49:08 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.0ms (Views: 10.6ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:49:10 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.8ms (Views: 9.7ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:49:12 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.7ms (Views: 9.3ms | ActiveRecord: 0.0ms)
Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 00:49:14 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 23.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 00:49:16 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 00:49:18 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.9ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 00:49:20 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 00:49:22 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 00:49:24 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:49:26 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 18.5ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:49:28 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.2ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:49:30 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.0ms (Views: 1.1ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:49:32 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 17.0ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:49:34 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.5ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 00:49:36 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 18.4ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:49:39 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 6.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started HEAD "/crash" for 127.0.0.1 at 2019-04-12 00:49:39 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 0  in 5.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:49:39 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 9.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/delayed_job" for 127.0.0.1 at 2019-04-12 00:49:41 +0300
Processing by DummyController#delayed_job as HTML
Completed 500 Internal Server Error in 11.5ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007fbb706218e8 @config=#<Airbrake::Config:0x00007fbb709bdda8 @proxy={}, @queue...ash=-2792085094619735174>]}>}, @truncator=#<Airbrake::Truncator:0x00007fbb70608370 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007fbb706218e8 @config=#<Airbrake::Config:0x00007fbb709bdda8 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fbb709bdd30 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fbb709bdce0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fbb709bdc90 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fbb709bdc18>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>87, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>149, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__3820448872323427096__process_action__3427589886543507693__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__2306573860699338452__call__4531071501099203122__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007fbb70608348 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007fbb72a8ac70>, "rack.errors"=>#<StringIO:0x00007fbb72a8ae50>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fbb70925670>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fbb72a9a648 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fbb72a9a5a8 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007fbb72a9a440 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007fbb72a9a558 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fbb72a9a508>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fbb72aa0bd8 @filters=[#<Proc:0x00007fbb72aa0ae8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007fbb72aa0ac0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007fbb72aa0a98@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007fbb72aa05c0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007fbb72aa0fe8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"1e78cc62cd571c926b6ba967bd91732a", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fbb72a88fd8 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007fbb709ed918 @app=#<ActionDispatch::Reloader:0x00007fbb709ed940 @app=#<ActionDispatch::Callbacks:0x00007fbb709ed990 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007fbb709ed9b8 @app=#<Airbrake::Rack::Middleware:0x00007fbb709ed9e0 @app=#<ActiveRecord::QueryCache:0x00007fbb709edd00 @app=#<ActionDispatch::Cookies:0x00007fbb709ede90 @app=#<ActionDispatch::Session::CookieStore:0x00007fbb709ee1b0 @secrets=["3f35d0a79afdc41e364279db10b8dfcb8f476144272accf0d203eade91fd"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007fbb709edf58>, @app=#<ActionDispatch::Flash:0x00007fbb709ee1d8 @app=#<ActionDispatch::ParamsParser:0x00007fbb709ee2f0 @app=#<ActionDispatch::Head:0x00007fbb709ee318 @app=#<Rack::ConditionalGet:0x00007fbb709ee340 @app=#<Rack::ETag:0x00007fbb709ee368 @app=#<ActionDispatch::BestStandardsSupport:0x00007fbb709ee3b8 @app=#<Warden::Manager:0x00007fbb709ee480 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fbb70925670>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007fbb7029d5c8 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=-10345114120822695>=>:xml_simple, #<Mime::Type:0x00007fbb702a6010 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=3279977305307969382>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"3f35d0a79afdc41e364279db10b8dfcb8f476144272accf0d203eade91fd", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fbb709edf58>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007fbb72ab3df0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3fddb9541dd0 not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"3f35d0a79afdc41e364279db10b8dfcb8f476144272accf0d203eade91fd", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fbb709edf58>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007fbb72a837e0 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007fbb72a83178 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fbb72a837e0 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007fbb72a830b0 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70221529618280 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fbb72a7b4c8 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007fbb72a7b3b0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007fbb72a7b388 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007fbb72a7b3b0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007fbb72a7b0b8 @details_key=nil, @details={:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007fbb72a7afa0 @paths=[#<ActionView::FixtureResolver:0x00007fbb701e3d58 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={#<ActionView::LookupContext::DetailsKey:0x00007fbb72981a90 @hash=778749817552275404>=>{"resque"=>{"dummy"=>{false=>{[]=>[dummy/resque.html.erb]}}}, "application"=>{"layouts"=>{false=>{[]=>[layouts/application.html.erb]}}}, "notify_airbrake_helper"=>{"dummy"=>{false=>{[]=>[dummy/notify_airbrake_helper.html.erb]}}}, "notify_airbrake_sync_helper"=>{"dummy"=>{false=>{[]=>[dummy/notify_airbrake_sync_helper.html.erb]}}}}}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fbb702974c0 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-2792085094619735174>]}>}, @truncator=#<Airbrake::Truncator:0x00007fbb70608370 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:49:41 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:49:43 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:49:45 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:49:47 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:49:49 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 24.9ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:49:51 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 28.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:49:53 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 00:49:55 +0300
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.1ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.2ms)
Completed 200 OK in 8.4ms (Views: 1.0ms | ActiveRecord: 0.2ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-12 00:49:55 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<RSpec::Mocks::MockExpectationError: Airbrake received :notify with unexpected arguments
  expected: (an instance of Airbrake::Notice)
       got: (#<AirbrakeTestError: after_commit>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of Airbrake::Notice"]
[0m[32m+[#<AirbrakeTestError: after_commit>]
[0m>
Completed 500 Internal Server Error in 5.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/" for 127.0.0.1 at 2019-04-12 00:49:55 +0300
Processing by DummyController#index as HTML
  Rendered dummy/index.html.erb within layouts/application (0.1ms)
Completed 200 OK in 0.9ms (Views: 0.7ms | ActiveRecord: 0.0ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (2.7ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/resque" for 127.0.0.1 at 2019-04-12 01:22:58 +0300
Processing by DummyController#resque as HTML

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007fb8fae49e08>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:22:58 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007fb8f829f7a8>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:23:00 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007fb8f9315ce0>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:23:02 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007fb8fae71ea8>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:23:04 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007fb8f8297490>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:23:06 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007fb8f92fc948>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:23:08 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007fb8fae33dd8>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/delayed_job" for 127.0.0.1 at 2019-04-12 01:23:25 +0300
Processing by DummyController#delayed_job as HTML
Completed 500 Internal Server Error in 13.9ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007fc984b66db8 @config=#<Airbrake::Config:0x00007fc984aa1d88 @proxy={}, @queue...hash=1426851141385059987>]}>}, @truncator=#<Airbrake::Truncator:0x00007fc984b4ce40 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007fc984b66db8 @config=#<Airbrake::Config:0x00007fc984aa1d88 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fc984aa1d10 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fc984aa1cc0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fc984aa1c70 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fc984aa1bf8>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3">, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>87, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>149, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__3069299604228245864__process_action__3973486879782066577__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__219066044566875550__call__1063491429373311846__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007fc984b4ce18 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007fc984422c50>, "rack.errors"=>#<StringIO:0x00007fc984422d18>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fc984cac3f8>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fc984c56d18 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fc984c56c78 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007fc984c56b10 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007fc984c56c28 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fc984c56bd8>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fc984c5dc58 @filters=[#<Proc:0x00007fc984c5db40@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007fc984c5db18@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007fc984c5daf0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007fc984c5d258@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007fc984c5d230@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"76ffeb888afa43b397832b978b4f2874", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fc984c56a20 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007fc983269428 @app=#<ActionDispatch::Reloader:0x00007fc983269478 @app=#<ActionDispatch::Callbacks:0x00007fc9832694a0 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007fc9832694c8 @app=#<Airbrake::Rack::Middleware:0x00007fc9832694f0 @app=#<ActiveRecord::QueryCache:0x00007fc9832695e0 @app=#<ActionDispatch::Cookies:0x00007fc983269888 @app=#<ActionDispatch::Session::CookieStore:0x00007fc983269e78 @secrets=["a507174e49c9a3652bb45a6a8895109f5eb02d514f04e891c64c0e8e2aa6"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007fc9832699f0>, @app=#<ActionDispatch::Flash:0x00007fc983269ea0 @app=#<ActionDispatch::ParamsParser:0x00007fc98326a030 @app=#<ActionDispatch::Head:0x00007fc98326a0a8 @app=#<Rack::ConditionalGet:0x00007fc98326a0d0 @app=#<Rack::ETag:0x00007fc98326a0f8 @app=#<ActionDispatch::BestStandardsSupport:0x00007fc98326a148 @app=#<Warden::Manager:0x00007fc98326a210 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fc984cac3f8>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007fc983a6dd18 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=2744348316528618832>=>:xml_simple, #<Mime::Type:0x00007fc983a6c288 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=-1442366683445128714>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"a507174e49c9a3652bb45a6a8895109f5eb02d514f04e891c64c0e8e2aa6", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fc9832699f0>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007fc98441b888@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3fe4c262a660 not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"a507174e49c9a3652bb45a6a8895109f5eb02d514f04e891c64c0e8e2aa6", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fc9832699f0>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007fc984c549c8 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007fc984c54590 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fc984c549c8 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007fc9844110b8 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70251742005180 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fc9843f99b8 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007fc9843f9850 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007fc9843f9800 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007fc9843f9850 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007fc9843b2cc0 @details_key=nil, @details={:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007fc9843b2bf8 @paths=[#<ActionView::FixtureResolver:0x00007fc9831e8350 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fc983a5c130 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=1426851141385059987>]}>}, @truncator=#<Airbrake::Truncator:0x00007fc984b4ce40 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/resque" for 127.0.0.1 at 2019-04-12 01:23:25 +0300
Processing by DummyController#resque as HTML
  Rendered dummy/resque.html.erb within layouts/application (1.0ms)
Completed 200 OK in 10.3ms (Views: 9.1ms | ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2019-04-12 01:23:25 +0300
Processing by DummyController#index as HTML
  Rendered dummy/index.html.erb within layouts/application (0.1ms)
Completed 200 OK in 0.9ms (Views: 0.8ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:23:25 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<RSpec::Mocks::MockExpectationError: Airbrake received :notify with unexpected arguments
  expected: (an instance of Airbrake::Notice)
       got: (#<AirbrakeTestError: after_commit>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of Airbrake::Notice"]
[0m[32m+[#<AirbrakeTestError: after_commit>]
[0m>
Completed 500 Internal Server Error in 13.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 01:23:25 +0300
Processing by DummyController#breakdown as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "breakdown"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT "books".* FROM "books" [0m
  Rendered dummy/breakdown.html.erb within layouts/application (0.2ms)
Completed 200 OK in 8.1ms (Views: 0.9ms | ActiveRecord: 0.2ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:23:25 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:23:27 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:23:29 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:23:31 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:23:33 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:23:35 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 54.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:23:37 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 11.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:23:39 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.4ms (Views: 1.2ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:23:41 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.3ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:23:43 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.9ms (Views: 1.1ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:23:45 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.5ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:23:47 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.3ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:23:49 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.1ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:23:51 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.9ms (Views: 9.2ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:23:53 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.3ms)
Completed 200 OK in 16.8ms (Views: 9.3ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:23:55 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.5ms (Views: 9.7ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:23:57 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 17.8ms (Views: 11.5ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:23:59 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.3ms (Views: 9.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:24:01 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.3ms (Views: 9.5ms | ActiveRecord: 0.0ms)
Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 01:24:04 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 01:24:06 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 01:24:08 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 01:24:10 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 28.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 01:24:12 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 01:24:14 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:24:16 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 5.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:24:16 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 1.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:24:16 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 5.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started HEAD "/crash" for 127.0.0.1 at 2019-04-12 01:24:16 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 0  in 5.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:24:16 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 17.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:24:33 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007f7f93e776c8>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:24:35 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007f7f93c55458>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:24:37 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007f7f932fc8c0>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:24:39 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007f7f93ebf0b8>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:24:41 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007f7f951ab500>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:24:43 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007f7f93ba1bd8>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:24:45 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007f7f93ecdde8>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:24:47 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007f7f951c13a0>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:24:49 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007f7f93b413f0>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:24:51 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007f7f93e8fed0>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:24:53 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007f7f951a07e0>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:24:55 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007f7f9326ecc8>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 01:24:57 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007f7f93e3cb40>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 01:24:59 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007f7f9581acd8>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 01:25:01 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007f7f942eec60>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 01:25:03 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007f7f95282758>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 01:25:05 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007f7f93d5f768>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 01:25:07 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007f7f934cb2a0>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/" for 127.0.0.1 at 2019-04-12 01:25:09 +0300
Processing by DummyController#index as HTML

RSpec::Mocks::MockExpectationError ((Airbrake).notify(#<Airbrake::Notice:0x00007f7f93e056b8 @config=#<Airbrake::Config:0x00007f7f93d85968 @proxy={}, @queue...ash=-1156267180569970369>]}>}, @truncator=#<Airbrake::Truncator:0x00007f7f93de5570 @max_size=10000>>)
    expected: 0 times with any arguments
    received: 1 time with arguments: (#<Airbrake::Notice:0x00007f7f93e056b8 @config=#<Airbrake::Config:0x00007f7f93d85968 @proxy={}, @queue...ash=-1156267180569970369>]}>}, @truncator=#<Airbrake::Truncator:0x00007f7f93de5570 @max_size=10000>>)):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:25:09 +0300
Processing by DummyController#crash as HTML

RSpec::Expectations::ExpectationNotMetError (
expected: "AirbrakeTestError"
     got: "NoMethodError"

(compared using ==)
):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:25:09 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007f7f93508128>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:25:11 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007f7f93499f20>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:25:13 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007f7f942ad5f8>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:25:15 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007f7f934d1330>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:25:17 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007f7f95232ff0>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:25:19 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007f7f941e47c0>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:25:21 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007f7f93efe858>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:25:23 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007f7f93461760>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:25:23 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007f7f93dc4c58>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/resque" for 127.0.0.1 at 2019-04-12 01:25:23 +0300
Processing by DummyController#resque as HTML

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007f7f951a0c68>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started HEAD "/crash" for 127.0.0.1 at 2019-04-12 01:25:23 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007f7f95370bd8>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:25:23 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007f7f95323a18>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:25:23 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007f7f952c9978>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 01:25:25 +0300
Processing by DummyController#breakdown as HTML

NoMethodError (undefined method `payload' for #<Airbrake::Rails::Event:0x00007f7f93e0e2b8>):
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/delayed_job" for 127.0.0.1 at 2019-04-12 01:25:25 +0300
Processing by DummyController#delayed_job as HTML

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007f7f951b1428 @config=#<Airbrake::Config:0x00007f7f93d85968 @proxy={}, @queue...ash=-1156267180569970369>]}>}, @truncator=#<Airbrake::Truncator:0x00007f7f93dacf40 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007f7f951b1428 @config=#<Airbrake::Config:0x00007f7f93d85968 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007f7f93d858f0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007f7f93d858a0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007f7f93d85850 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f7f93d857d8>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"NoMethodError", :message=>"undefined method `payload' for #<Airbrake::Rails::Event:0x00007f7f951b2f30>", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/action_controller_route_subscriber.rb", :line=>20, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>47, :function=>"publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"block in publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>25, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>27, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__4257722132382060550__call__2898957509540418548__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<NoMethodError: undefined method `payload' for #<Airbrake::Rails::Event:0x00007f7f951b2f30>>, :rack_request=>#<ActionDispatch::Request:0x00007f7f93dacf18 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007f7f951c2688>, "rack.errors"=>#<StringIO:0x00007f7f951c2778>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007f7f93f04c08>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007f7f93e4fd58 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007f7f93e4fcb8 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007f7f93e4fb50 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007f7f93e4fc68 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f7f93e4fc18>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007f7f941bc568 @filters=[#<Proc:0x00007f7f941bc478@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007f7f941bc450@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007f7f941bc428@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007f7f93eefd30@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007f7f93eefd08@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"31fbb7209438fef404b23273afbf503b", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007f7f951c1508 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007f7f952305c0 @app=#<ActionDispatch::Reloader:0x00007f7f952305e8 @app=#<ActionDispatch::Callbacks:0x00007f7f95230610 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007f7f95230638 @app=#<Airbrake::Rack::Middleware:0x00007f7f95230660 @app=#<ActiveRecord::QueryCache:0x00007f7f95230750 @app=#<ActionDispatch::Cookies:0x00007f7f95230818 @app=#<ActionDispatch::Session::CookieStore:0x00007f7f95230b60 @secrets=["d19f3be199badb5c5449a328565fb5b023674c75b3e281a97dbc7104f133"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007f7f95230908>, @app=#<ActionDispatch::Flash:0x00007f7f95230b88 @app=#<ActionDispatch::ParamsParser:0x00007f7f95230c78 @app=#<ActionDispatch::Head:0x00007f7f95230ca0 @app=#<Rack::ConditionalGet:0x00007f7f95230cc8 @app=#<Rack::ETag:0x00007f7f95230cf0 @app=#<ActionDispatch::BestStandardsSupport:0x00007f7f95230d68 @app=#<Warden::Manager:0x00007f7f95230e30 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007f7f93f04c08>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007f7f93aa9758 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=1791395882589213327>=>:xml_simple, #<Mime::Type:0x00007f7f93ab1fc0 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=1324430901396687616>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"d19f3be199badb5c5449a328565fb5b023674c75b3e281a97dbc7104f133", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007f7f95230908>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007f7f93e651a8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3fbfca8e04f8 not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"d19f3be199badb5c5449a328565fb5b023674c75b3e281a97dbc7104f133", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007f7f95230908>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007f7f951c0630 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007f7f951c00b8 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007f7f951c0630 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007f7f951c0040 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70092969598700 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007f7f951b9308 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007f7f951b90d8 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007f7f951b9088 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007f7f951b90d8 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007f7f951b89f8 @details_key=nil, @details={:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :png, :jpeg, :gif, :bmp, :tiff, :mpeg, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007f7f951b8980 @paths=[#<ActionView::FixtureResolver:0x00007f7f95118958 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007f7f93aa39c0 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-1156267180569970369>]}>}, @truncator=#<Airbrake::Truncator:0x00007f7f93dacf40 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 01:26:28 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 27.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 01:26:30 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 01:26:33 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 01:26:35 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 01:26:37 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 01:26:39 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:26:41 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (1.0ms)
Completed 200 OK in 19.4ms (Views: 6.2ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:26:43 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.6ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:26:45 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.1ms (Views: 0.8ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:26:47 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.2ms (Views: 1.1ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:26:49 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.7ms (Views: 1.1ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:26:51 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.5ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:26:53 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.3ms (Views: 9.4ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:26:55 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.2ms (Views: 11.8ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:26:57 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.3ms)
Completed 200 OK in 14.8ms (Views: 10.1ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:26:59 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.5ms (Views: 9.8ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:27:01 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.5ms (Views: 10.8ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:27:03 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.9ms (Views: 9.8ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:27:05 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/" for 127.0.0.1 at 2019-04-12 01:27:07 +0300
Processing by DummyController#index as HTML
  Rendered dummy/index.html.erb within layouts/application (0.2ms)
Completed 200 OK in 1.2ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:27:07 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<RSpec::Mocks::MockExpectationError: Airbrake received :notify with unexpected arguments
  expected: (an instance of Airbrake::Notice)
       got: (#<AirbrakeTestError: after_commit>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of Airbrake::Notice"]
[0m[32m+[#<AirbrakeTestError: after_commit>]
[0m>
Completed 500 Internal Server Error in 17.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started HEAD "/crash" for 127.0.0.1 at 2019-04-12 01:27:07 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 0  in 4.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:27:07 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 5.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/delayed_job" for 127.0.0.1 at 2019-04-12 01:27:07 +0300
Processing by DummyController#delayed_job as HTML
Completed 500 Internal Server Error in 11.5ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007fed739ce1f0 @config=#<Airbrake::Config:0x00007fed73ac5860 @proxy={}, @queue...ash=-4603407620414932742>]}>}, @truncator=#<Airbrake::Truncator:0x00007fed73984690 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007fed739ce1f0 @config=#<Airbrake::Config:0x00007fed73ac5860 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fed73ac57e8 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fed73ac5798 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fed73ac5748 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fed73ac56d0>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>87, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>149, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__2526004145510255635__process_action__2824699176006506481__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__1123518207645588245__call__1032085707394680869__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007fed73984668 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007fed71cd58a0>, "rack.errors"=>#<StringIO:0x00007fed71cd5940>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fed7390aa70>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fed70dbeb78 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fed70dbead8 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007fed70dbe970 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007fed70dbea88 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fed70dbea38>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fed7308c6a0 @filters=[#<Proc:0x00007fed7308c5d8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007fed7308c5b0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007fed7308c588@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007fed73063de0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007fed73063db8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"6a21b20cd5f1772deb86136c5f4cda3b", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fed71cd49c8 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007fed70d06ff0 @app=#<ActionDispatch::Reloader:0x00007fed70d07018 @app=#<ActionDispatch::Callbacks:0x00007fed70d07090 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007fed70d070b8 @app=#<Airbrake::Rack::Middleware:0x00007fed70d070e0 @app=#<ActiveRecord::QueryCache:0x00007fed70d071d0 @app=#<ActionDispatch::Cookies:0x00007fed70d07298 @app=#<ActionDispatch::Session::CookieStore:0x00007fed70d075e0 @secrets=["8d5414f91a096c675cad075a4c349eb6abd0424376e42bb8a0a958985e01"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007fed70d07388>, @app=#<ActionDispatch::Flash:0x00007fed70d07608 @app=#<ActionDispatch::ParamsParser:0x00007fed70d076f8 @app=#<ActionDispatch::Head:0x00007fed70d07720 @app=#<Rack::ConditionalGet:0x00007fed70d07748 @app=#<Rack::ETag:0x00007fed70d07770 @app=#<ActionDispatch::BestStandardsSupport:0x00007fed70d077c0 @app=#<Warden::Manager:0x00007fed70d07888 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fed7390aa70>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007fed70aad4e8 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=1898748038092043076>=>:xml_simple, #<Mime::Type:0x00007fed70ab6fe8 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=582118728679502508>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"8d5414f91a096c675cad075a4c349eb6abd0424376e42bb8a0a958985e01", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fed70d07388>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007fed70dd4068@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3ff6b8e6a098 not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"8d5414f91a096c675cad075a4c349eb6abd0424376e42bb8a0a958985e01", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fed70d07388>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007fed71ccfea0 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007fed71ccfa68 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fed71ccfea0 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007fed71ccf9f0 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70328896617600 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fed71ccd920 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007fed71ccd830 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007fed71ccd808 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007fed71ccd830 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007fed71ccd510 @details_key=nil, @details={:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007fed71ccd498 @paths=[#<ActionView::FixtureResolver:0x00007fed71added0 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={#<ActionView::LookupContext::DetailsKey:0x00007fed71d2de88 @hash=-3311864611973351462>=>{"notify_airbrake_sync_helper"=>{"dummy"=>{false=>{[]=>[dummy/notify_airbrake_sync_helper.html.erb]}}}, "application"=>{"layouts"=>{false=>{[]=>[layouts/application.html.erb]}}}, "notify_airbrake_helper"=>{"dummy"=>{false=>{[]=>[dummy/notify_airbrake_helper.html.erb]}}}, "index"=>{"dummy"=>{false=>{[]=>[dummy/index.html.erb]}}}}}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fed70a9ff00 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-4603407620414932742>]}>}, @truncator=#<Airbrake::Truncator:0x00007fed73984690 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:27:07 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 5.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:27:07 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 1.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 01:27:07 +0300
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.1ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.2ms)
Completed 200 OK in 7.9ms (Views: 0.9ms | ActiveRecord: 0.1ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:27:07 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/resque" for 127.0.0.1 at 2019-04-12 01:27:09 +0300
Processing by DummyController#resque as HTML
  Rendered dummy/resque.html.erb within layouts/application (0.2ms)
Completed 200 OK in 3.5ms (Views: 1.9ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:27:09 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 32.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:27:11 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 10.9ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:27:13 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:27:15 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 23.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:27:17 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:27:19 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
Connecting to database specified by DATABASE_URL
Started GET "/delayed_job" for 127.0.0.1 at 2019-04-12 01:32:39 +0300
Processing by DummyController#delayed_job as HTML
Completed 500 Internal Server Error in 2.1ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007fe1d14415a0 @config=#<Airbrake::Config:0x00007fe1d2365b08 @proxy={}, @queue...@hash=535974791582556782>]}>}, @truncator=#<Airbrake::Truncator:0x00007fe1d141b760 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007fe1d14415a0 @config=#<Airbrake::Config:0x00007fe1d2365b08 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fe1d2365a90 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fe1d2365a40 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fe1d23659f0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fe1d2365978>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3">, @payload={:errors=>[{:type=>"ActiveRecord::StatementInvalid", :message=>"Could not find table 'delayed_jobs'", :backtrace=>[{:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/sqlite_adapter.rb", :line=>472, :function=>"table_structure"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/sqlite_adapter.rb", :line=>346, :function=>"columns"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/schema_cache.rb", :line=>12, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/model_schema.rb", :line=>229, :function=>"columns"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/model_schema.rb", :line=>244, :function=>"column_defaults"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/base.rb", :line=>482, :function=>"initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"new"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>149, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__83392030625750351__process_action__4264786765841906895__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__382240455889273403__call__3463748009575976144__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<ActiveRecord::StatementInvalid: Could not find table 'delayed_jobs'>, :rack_request=>#<ActionDispatch::Request:0x00007fe1d141b6e8 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007fe1d23e7c48>, "rack.errors"=>#<StringIO:0x00007fe1d23e7ce8>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fe1d1a18dc0>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fe1d36f7d88 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fe1d36f7ce8 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007fe1d36f7b80 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007fe1d36f7c98 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fe1d36f7c48>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fe1d228e950 @filters=[#<Proc:0x00007fe1d228e888@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007fe1d228e860@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007fe1d228e838@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007fe1d228ded8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007fe1d228de10@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"5be9ac54d45601505521c90a0fae0d0c", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fe1d227f4f0 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007fe1d3674bb8 @app=#<ActionDispatch::Reloader:0x00007fe1d3674be0 @app=#<ActionDispatch::Callbacks:0x00007fe1d3674c30 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007fe1d3674c58 @app=#<Airbrake::Rack::Middleware:0x00007fe1d3674c80 @app=#<ActiveRecord::QueryCache:0x00007fe1d3674dc0 @app=#<ActionDispatch::Cookies:0x00007fe1d3674e88 @app=#<ActionDispatch::Session::CookieStore:0x00007fe1d36751f8 @secrets=["334c6b1b117c207a28db88a9652a0ca685842e36a0ba82f610938cfad81a"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007fe1d3674f78>, @app=#<ActionDispatch::Flash:0x00007fe1d3675270 @app=#<ActionDispatch::ParamsParser:0x00007fe1d3675478 @app=#<ActionDispatch::Head:0x00007fe1d3675518 @app=#<Rack::ConditionalGet:0x00007fe1d3675680 @app=#<Rack::ETag:0x00007fe1d36756a8 @app=#<ActionDispatch::BestStandardsSupport:0x00007fe1d3675720 @app=#<Warden::Manager:0x00007fe1d3675838 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fe1d1a18dc0>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007fe1d3449028 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=2132821508747114697>=>:xml_simple, #<Mime::Type:0x00007fe1d3452510 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=2792445029810918441>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"334c6b1b117c207a28db88a9652a0ca685842e36a0ba82f610938cfad81a", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fe1d3674f78>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007fe1d1962db8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3ff0e8912440 not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"334c6b1b117c207a28db88a9652a0ca685842e36a0ba82f610938cfad81a", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fe1d3674f78>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007fe1d1224290 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007fe1d121fe70 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fe1d1224290 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007fe1d11ff1e8 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70303926450260 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fe1d24de250 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007fe1d24de110 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007fe1d24de0c0 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007fe1d24de110 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007fe1d1462840 @details_key=nil, @details={:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007fe1d14627a0 @paths=[#<ActionView::FixtureResolver:0x00007fe1d22c58d8 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fe1d3442fe8 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=535974791582556782>]}>}, @truncator=#<Airbrake::Truncator:0x00007fe1d141b760 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 01:32:39 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
Completed 500 Internal Server Error in 0.6ms

ActiveRecord::StatementInvalid (Could not find table 'books'):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 01:32:41 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
Completed 500 Internal Server Error in 0.3ms

ActiveRecord::StatementInvalid (Could not find table 'books'):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 01:32:43 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
Completed 500 Internal Server Error in 0.3ms

ActiveRecord::StatementInvalid (Could not find table 'books'):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 01:32:45 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
Completed 500 Internal Server Error in 0.4ms

ActiveRecord::StatementInvalid (Could not find table 'books'):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 01:32:47 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
Completed 500 Internal Server Error in 0.5ms

ActiveRecord::StatementInvalid (Could not find table 'books'):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 01:32:49 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
Completed 500 Internal Server Error in 0.4ms

ActiveRecord::StatementInvalid (Could not find table 'books'):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:32:51 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (1.0ms)
Completed 200 OK in 20.3ms (Views: 14.8ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:32:53 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.6ms (Views: 9.4ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:32:55 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.8ms (Views: 9.8ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:32:57 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.3ms)
Completed 200 OK in 18.3ms (Views: 11.4ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:32:59 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.4ms (Views: 9.2ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:33:01 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.3ms)
Completed 200 OK in 14.7ms (Views: 9.6ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:33:03 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 17.7ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:33:05 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 12.9ms (Views: 0.8ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:33:07 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.7ms (Views: 1.1ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:33:09 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.4ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:33:11 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.3ms)
Completed 200 OK in 14.8ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:33:13 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.4ms (Views: 1.1ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:33:15 +0300
Processing by DummyController#crash as HTML
Completed 500 Internal Server Error in 0.3ms

ActiveRecord::StatementInvalid (Could not find table 'books'):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started HEAD "/crash" for 127.0.0.1 at 2019-04-12 01:33:17 +0300
Processing by DummyController#crash as HTML
Completed 0  in 0.4ms

ActiveRecord::StatementInvalid (Could not find table 'books'):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:33:17 +0300
Processing by DummyController#crash as HTML
Completed 500 Internal Server Error in 0.3ms

ActiveRecord::StatementInvalid (Could not find table 'books'):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:33:17 +0300
Processing by DummyController#crash as HTML
Completed 500 Internal Server Error in 0.4ms

ActiveRecord::StatementInvalid (Could not find table 'books'):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:33:17 +0300
Processing by DummyController#crash as HTML
Completed 500 Internal Server Error in 0.3ms

ActiveRecord::StatementInvalid (Could not find table 'books'):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:33:17 +0300
Processing by DummyController#crash as HTML
Completed 500 Internal Server Error in 0.2ms

ActiveRecord::StatementInvalid (Could not find table 'books'):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:33:19 +0300
Processing by DummyController#crash as HTML
Completed 500 Internal Server Error in 0.4ms

ActiveRecord::StatementInvalid (Could not find table 'books'):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:33:21 +0300
Processing by DummyController#crash as HTML
Completed 500 Internal Server Error in 0.3ms

ActiveRecord::StatementInvalid (Could not find table 'books'):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:33:23 +0300
Processing by DummyController#crash as HTML
Completed 500 Internal Server Error in 0.3ms

ActiveRecord::StatementInvalid (Could not find table 'books'):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:33:25 +0300
Processing by DummyController#crash as HTML
Completed 500 Internal Server Error in 0.4ms

ActiveRecord::StatementInvalid (Could not find table 'books'):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:33:27 +0300
Processing by DummyController#crash as HTML
Completed 500 Internal Server Error in 0.4ms

ActiveRecord::StatementInvalid (Could not find table 'books'):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 01:33:29 +0300
Processing by DummyController#breakdown as HTML
Completed 500 Internal Server Error in 0.4ms

ActiveRecord::StatementInvalid (Could not find table 'books'):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:33:29 +0300
Processing by DummyController#crash as HTML
Completed 500 Internal Server Error in 0.2ms

ActiveRecord::StatementInvalid (Could not find table 'books'):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:33:31 +0300
Processing by DummyController#crash as HTML
Completed 500 Internal Server Error in 0.4ms

RSpec::Expectations::ExpectationNotMetError (
expected: "AirbrakeTestError"
     got: "ActiveRecord::StatementInvalid"

(compared using ==)
):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/" for 127.0.0.1 at 2019-04-12 01:33:31 +0300
Processing by DummyController#index as HTML
  Rendered dummy/index.html.erb within layouts/application (0.2ms)
Completed 200 OK in 1.2ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/resque" for 127.0.0.1 at 2019-04-12 01:33:31 +0300
Processing by DummyController#resque as HTML
  Rendered dummy/resque.html.erb within layouts/application (0.2ms)
Completed 200 OK in 2.0ms (Views: 0.8ms | ActiveRecord: 0.0ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:34:28 +0300
Processing by DummyController#crash as HTML

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe544c7a0e8>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:34:30 +0300
Processing by DummyController#crash as HTML

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe544c7a0e8>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:34:32 +0300
Processing by DummyController#crash as HTML

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe544c7a0e8>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:34:34 +0300
Processing by DummyController#crash as HTML

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe544c7a0e8>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:34:37 +0300
Processing by DummyController#crash as HTML

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe544c7a0e8>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:34:39 +0300
Processing by DummyController#crash as HTML

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe544c7a0e8>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:34:41 +0300
Processing by DummyController#crash as HTML

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe544c7a0e8>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started HEAD "/crash" for 127.0.0.1 at 2019-04-12 01:34:41 +0300
Processing by DummyController#crash as HTML

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe544c7a0e8>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/resque" for 127.0.0.1 at 2019-04-12 01:34:41 +0300
Processing by DummyController#resque as HTML

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe544c7a0e8>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:34:41 +0300
Processing by DummyController#crash as HTML

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe544c7a0e8>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:34:41 +0300
Processing by DummyController#crash as HTML

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe544c7a0e8>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:34:41 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe544c7a0e8>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:34:43 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe544c7a0e8>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:34:45 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe544c7a0e8>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:34:47 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe544c7a0e8>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:34:49 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe544c7a0e8>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:34:51 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe544c7a0e8>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 01:34:53 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe544c7a0e8>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 01:34:55 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe544c7a0e8>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 01:34:57 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe544c7a0e8>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 01:34:59 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe544c7a0e8>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 01:35:01 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe544c7a0e8>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 01:35:03 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe544c7a0e8>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:35:05 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe544c7a0e8>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:35:07 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe544c7a0e8>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:35:09 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe544c7a0e8>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:35:11 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe544c7a0e8>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:35:13 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe544c7a0e8>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:35:15 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe544c7a0e8>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 01:35:17 +0300
Processing by DummyController#breakdown as HTML

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe544c7a0e8>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/delayed_job" for 127.0.0.1 at 2019-04-12 01:35:17 +0300
Processing by DummyController#delayed_job as HTML

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007fe544c3af10 @config=#<Airbrake::Config:0x00007fe544471950 @proxy={}, @queue...ash=-1450689268318340530>]}>}, @truncator=#<Airbrake::Truncator:0x00007fe546b529e8 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,10 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007fe544c3af10 @config=#<Airbrake::Config:0x00007fe544471950 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fe5444718d8 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fe544471888 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fe544471838 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fe5444717c0>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"NameError", :message=>"undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe544c7a0e8>\nDid you mean?  engines\n               @engine", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/app.rb", :line=>11, :function=>"routes"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/action_controller_route_subscriber.rb", :line=>27, :function=>"find_route"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/action_controller_route_subscriber.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>47, :function=>"publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"block in publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>25, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>27, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__3882351258361652067__call__2108996028352409629__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<NameError: undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe544c7a0e8>
[0m[32m+Did you mean?  engines
[0m[32m+               @engine>, :rack_request=>#<ActionDispatch::Request:0x00007fe546b529c0 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007fe544c40938>, "rack.errors"=>#<StringIO:0x00007fe544c40b18>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fe544343358>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fe544c52930 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fe544c52890 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007fe544c52728 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007fe544c52840 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fe544c527f0>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fe544c829f0 @filters=[#<Proc:0x00007fe544c82900@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007fe544c828d8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007fe544c828b0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007fe544c820e0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007fe544c820b8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"e325acbeb6058ec62e1972f0a7563973", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fe545397268 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007fe546b71118 @app=#<ActionDispatch::Reloader:0x00007fe546b71140 @app=#<ActionDispatch::Callbacks:0x00007fe546b71168 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007fe546b71190 @app=#<Airbrake::Rack::Middleware:0x00007fe546b711b8 @app=#<ActiveRecord::QueryCache:0x00007fe546b712a8 @app=#<ActionDispatch::Cookies:0x00007fe546b71398 @app=#<ActionDispatch::Session::CookieStore:0x00007fe546b716b8 @secrets=["206daf4e255fef9977252499b33feadc91b02ab278ba3188b96242e6da78"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007fe546b71460>, @app=#<ActionDispatch::Flash:0x00007fe546b716e0 @app=#<ActionDispatch::ParamsParser:0x00007fe546b71820 @app=#<ActionDispatch::Head:0x00007fe546b71848 @app=#<Rack::ConditionalGet:0x00007fe546b71870 @app=#<Rack::ETag:0x00007fe546b71898 @app=#<ActionDispatch::BestStandardsSupport:0x00007fe546b718e8 @app=#<Warden::Manager:0x00007fe546b719d8 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fe544343358>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007fe544ad9ba8 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=-3939732679046397159>=>:xml_simple, #<Mime::Type:0x00007fe544ad9ec8 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=-2599796548907124161>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"206daf4e255fef9977252499b33feadc91b02ab278ba3188b96242e6da78", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fe546b71460>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007fe544c62470@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3ff2a29cb2b8 not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"206daf4e255fef9977252499b33feadc91b02ab278ba3188b96242e6da78", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fe546b71460>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007fe545396368 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007fe545395f80 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fe545396368 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007fe545395f08 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70311342812940 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fe54538f3d8 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007fe54538f220 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007fe54538f1f8 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007fe54538f220 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007fe54538ed70 @details_key=nil, @details={:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :png, :jpeg, :gif, :bmp, :tiff, :mpeg, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007fe54538ec30 @paths=[#<ActionView::FixtureResolver:0x00007fe5452c5948 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fe544ad3f78 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-1450689268318340530>]}>}, @truncator=#<Airbrake::Truncator:0x00007fe546b529e8 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:35:17 +0300
Processing by DummyController#crash as HTML

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe544c7a0e8>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:35:19 +0300
Processing by DummyController#crash as HTML

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fe544c7a0e8>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:35:21 +0300
Processing by DummyController#crash as HTML

RSpec::Expectations::ExpectationNotMetError (
expected: "AirbrakeTestError"
     got: "NameError"

(compared using ==)
):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/" for 127.0.0.1 at 2019-04-12 01:35:21 +0300
Processing by DummyController#index as HTML

RSpec::Mocks::MockExpectationError ((Airbrake).notify(#<Airbrake::Notice:0x00007fe544bdbba0 @config=#<Airbrake::Config:0x00007fe544471950 @proxy={}, @queue...ash=-1450689268318340530>]}>}, @truncator=#<Airbrake::Truncator:0x00007fe54442b8b0 @max_size=10000>>)
    expected: 0 times with any arguments
    received: 1 time with arguments: (#<Airbrake::Notice:0x00007fe544bdbba0 @config=#<Airbrake::Config:0x00007fe544471950 @proxy={}, @queue...ash=-1450689268318340530>]}>}, @truncator=#<Airbrake::Truncator:0x00007fe54442b8b0 @max_size=10000>>)):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/resque" for 127.0.0.1 at 2019-04-12 01:38:04 +0300
Processing by DummyController#resque as HTML

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fc74fa99c28>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.3ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/resque" for 127.0.0.1 at 2019-04-12 01:41:32 +0300
Processing by DummyController#resque as HTML

NameError (undefined local variable or method `engine' for #<Airbrake::Rails::App:0x00007fcd48396738>
Did you mean?  engines
               @engine):
  lib/airbrake/rails/app.rb:12:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/resque" for 127.0.0.1 at 2019-04-12 01:42:03 +0300
Processing by DummyController#resque as HTML

NoMethodError (undefined method `routes' for []:Array):
  lib/airbrake/rails/app.rb:11:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/resque" for 127.0.0.1 at 2019-04-12 01:42:12 +0300
Processing by DummyController#resque as HTML

NoMethodError (undefined method `routes' for []:Array):
  lib/airbrake/rails/app.rb:12:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/resque" for 127.0.0.1 at 2019-04-12 01:43:25 +0300
Processing by DummyController#resque as HTML

NoMethodError (undefined method `defaults' for [{:controller=>"dummy", :action=>"index"}, "/"]:Array
Did you mean?  to_default_s):
  lib/airbrake/rails/action_controller_route_subscriber.rb:28:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/resque" for 127.0.0.1 at 2019-04-12 01:44:23 +0300
Processing by DummyController#resque as HTML

NoMethodError (undefined method `defaults' for ["/", {:controller=>"dummy", :action=>"index"}]:Array
Did you mean?  to_default_s):
  lib/airbrake/rails/action_controller_route_subscriber.rb:28:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/resque" for 127.0.0.1 at 2019-04-12 01:45:32 +0300
Processing by DummyController#resque as HTML

NoMethodError (undefined method `defaults' for {:controller=>"dummy", :action=>"index"}:Hash
Did you mean?  default
               default=):
  lib/airbrake/rails/action_controller_route_subscriber.rb:28:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:27:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/resque" for 127.0.0.1 at 2019-04-12 01:45:42 +0300
Processing by DummyController#resque as HTML

NoMethodError (undefined method `defaults' for {:controller=>"dummy", :action=>"index"}:Hash
Did you mean?  default
               default=):
  lib/airbrake/rails/action_controller_route_subscriber.rb:29:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:28:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:28:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/resque" for 127.0.0.1 at 2019-04-12 01:48:44 +0300
Processing by DummyController#resque as HTML

NoMethodError (undefined method `defaults' for {:controller=>"dummy", :action=>"index"}:Hash
Did you mean?  default
               default=):
  lib/airbrake/rails/action_controller_route_subscriber.rb:29:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:28:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:28:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/resque" for 127.0.0.1 at 2019-04-12 01:48:54 +0300
Processing by DummyController#resque as HTML

NoMethodError (undefined method `defaults' for {:controller=>"dummy", :action=>"index"}:Hash
Did you mean?  default
               default=):
  lib/airbrake/rails/action_controller_route_subscriber.rb:29:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:28:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:28:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/resque" for 127.0.0.1 at 2019-04-12 01:49:02 +0300
Processing by DummyController#resque as HTML

NoMethodError (undefined method `defaults' for {:controller=>"dummy", :action=>"index"}:Hash
Did you mean?  default
               default=):
  lib/airbrake/rails/action_controller_route_subscriber.rb:29:in `block in find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:28:in `each'
  lib/airbrake/rails/action_controller_route_subscriber.rb:28:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:18:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.8ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/resque" for 127.0.0.1 at 2019-04-12 01:49:55 +0300
Processing by DummyController#resque as HTML
  Rendered dummy/resque.html.erb within layouts/application (0.9ms)
Completed 200 OK in 7.8ms (Views: 6.4ms | ActiveRecord: 0.0ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:50:10 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 24.9ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:50:12 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 17.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:50:14 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 17.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:50:16 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.9ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:50:18 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:50:20 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:50:22 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:50:24 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 01:50:26 +0300
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.6ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (1.2ms)
Completed 200 OK in 23.0ms (Views: 8.9ms | ActiveRecord: 0.7ms)
Started GET "/delayed_job" for 127.0.0.1 at 2019-04-12 01:50:26 +0300
Processing by DummyController#delayed_job as HTML
Completed 500 Internal Server Error in 17.6ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007fce5ea6ce88 @config=#<Airbrake::Config:0x00007fce5e6170e0 @proxy={}, @queue...hash=-994249961269135493>]}>}, @truncator=#<Airbrake::Truncator:0x00007fce5ea47200 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007fce5ea6ce88 @config=#<Airbrake::Config:0x00007fce5e6170e0 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fce5e617068 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fce5e616ff0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fce5e616fa0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fce5e616f28>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>87, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>149, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__2968385677115677381__process_action__1133864144312701182__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__3273757407341502638__call__106639052388188583__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007fce5ea47138 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007fce5ea65408>, "rack.errors"=>#<StringIO:0x00007fce5ea654d0>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fce5e754a48>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fce64032318 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fce64032278 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007fce64032110 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007fce64032228 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fce640321d8>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fce5e72e758 @filters=[#<Proc:0x00007fce5e72e618@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007fce5e72e5f0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007fce5e72e5c8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007fce5e72da38@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007fce5e72d9e8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"68ffc6b6f975f7997ce337876e2e11e9", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fce5ea64418 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007fce5e764150 @app=#<ActionDispatch::Reloader:0x00007fce5e764218 @app=#<ActionDispatch::Callbacks:0x00007fce5e764268 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007fce5e764290 @app=#<Airbrake::Rack::Middleware:0x00007fce5e7642b8 @app=#<ActiveRecord::QueryCache:0x00007fce5e7643d0 @app=#<ActionDispatch::Cookies:0x00007fce5e764510 @app=#<ActionDispatch::Session::CookieStore:0x00007fce5e764948 @secrets=["77271c061090e1bac6c13404e0b85ff2a190e7585db3dea66573707b3451"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007fce5e764628>, @app=#<ActionDispatch::Flash:0x00007fce5e764970 @app=#<ActionDispatch::ParamsParser:0x00007fce5e764a88 @app=#<ActionDispatch::Head:0x00007fce5e764ab0 @app=#<Rack::ConditionalGet:0x00007fce5e764ad8 @app=#<Rack::ETag:0x00007fce5e764b00 @app=#<ActionDispatch::BestStandardsSupport:0x00007fce5e764b50 @app=#<Warden::Manager:0x00007fce5e764c68 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fce5e754a48>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007fce5e383540 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=2338203564900814374>=>:xml_simple, #<Mime::Type:0x00007fce5e38b880 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=-3816563461406780389>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"77271c061090e1bac6c13404e0b85ff2a190e7585db3dea66573707b3451", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fce5e764628>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007fce5f2b8218@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3fe72f52bd94 not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"77271c061090e1bac6c13404e0b85ff2a190e7585db3dea66573707b3451", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fce5e764628>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007fce5ea578f8 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007fce5ea57420 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fce5ea578f8 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007fce5ea57358 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70262163945680 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fce5e7a7c98 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007fce5e7a7ba8 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007fce5e7a7b80 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007fce5e7a7ba8 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007fce5e7a77e8 @details_key=nil, @details={:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007fce5e7a7770 @paths=[#<ActionView::FixtureResolver:0x00007fce5e845d80 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={#<ActionView::LookupContext::DetailsKey:0x00007fce5e73f580 @hash=-4459469275948097684>=>{"breakdown"=>{"dummy"=>{false=>{[]=>[dummy/breakdown.html.erb]}}}, "application"=>{"layouts"=>{false=>{[]=>[layouts/application.html.erb]}}}}}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fce5e371ca0 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-994249961269135493>]}>}, @truncator=#<Airbrake::Truncator:0x00007fce5ea47200 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:50:26 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<RSpec::Mocks::MockExpectationError: Airbrake received :notify with unexpected arguments
  expected: (an instance of Airbrake::Notice)
       got: (#<AirbrakeTestError: after_commit>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of Airbrake::Notice"]
[0m[32m+[#<AirbrakeTestError: after_commit>]
[0m>
Completed 500 Internal Server Error in 5.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/" for 127.0.0.1 at 2019-04-12 01:50:26 +0300
Processing by DummyController#index as HTML
  Rendered dummy/index.html.erb within layouts/application (0.2ms)
Completed 200 OK in 1.2ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started HEAD "/crash" for 127.0.0.1 at 2019-04-12 01:50:26 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 0  in 6.9ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:50:26 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 4.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 01:50:26 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 16.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 01:50:28 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 9.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 01:50:30 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 16.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 01:50:32 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 01:50:35 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 17.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 01:50:37 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 10.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:50:39 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 12.4ms (Views: 8.2ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:50:41 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.3ms)
Completed 200 OK in 12.3ms (Views: 8.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:50:43 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.3ms)
Completed 200 OK in 13.8ms (Views: 9.1ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:50:45 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.6ms (Views: 8.5ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:50:47 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.0ms (Views: 9.3ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:50:49 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 12.4ms (Views: 8.3ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:50:51 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.9ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:50:53 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.3ms)
Completed 200 OK in 12.2ms (Views: 1.2ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:50:55 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.1ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:50:57 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 12.9ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:50:59 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.0ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 01:51:01 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.0ms (Views: 2.9ms | ActiveRecord: 0.0ms)
Started GET "/resque" for 127.0.0.1 at 2019-04-12 01:51:03 +0300
Processing by DummyController#resque as HTML
  Rendered dummy/resque.html.erb within layouts/application (0.2ms)
Completed 200 OK in 2.0ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:51:03 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.1ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 4.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 01:51:03 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 1.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:04:06 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<RSpec::Mocks::MockExpectationError: Airbrake received :notify with unexpected arguments
  expected: (an instance of Airbrake::Notice)
       got: (#<AirbrakeTestError: after_commit>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of Airbrake::Notice"]
[0m[32m+[#<AirbrakeTestError: after_commit>]
[0m>
Completed 500 Internal Server Error in 20.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/" for 127.0.0.1 at 2019-04-12 02:04:06 +0300
Processing by DummyController#index as HTML
  Rendered dummy/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 8.3ms (Views: 8.2ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:04:06 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:04:08 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:04:10 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:04:12 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:04:15 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:04:17 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 17.9ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:04:19 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 17.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:04:21 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.3ms)
Completed 200 OK in 13.2ms (Views: 1.1ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:04:23 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:04:25 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.8ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:04:27 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 27.2ms (Views: 1.7ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:04:29 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 23.1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:04:31 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.6ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:04:33 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.1ms (Views: 11.1ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:04:35 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 12.7ms (Views: 8.5ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:04:37 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.3ms)
Completed 200 OK in 13.7ms (Views: 9.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:04:39 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.9ms (Views: 8.8ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:04:41 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.0ms (Views: 8.1ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:04:43 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.3ms)
Completed 200 OK in 17.3ms (Views: 12.2ms | ActiveRecord: 0.0ms)
Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 02:04:45 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 30.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 02:04:47 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 02:04:49 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 02:04:51 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 17.9ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 02:04:53 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 02:04:55 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:04:57 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.9ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:04:59 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.1ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 11.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:04:59 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 1.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/resque" for 127.0.0.1 at 2019-04-12 02:04:59 +0300
Processing by DummyController#resque as HTML
  Rendered dummy/resque.html.erb within layouts/application (0.2ms)
Completed 200 OK in 2.0ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:04:59 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 4.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started HEAD "/crash" for 127.0.0.1 at 2019-04-12 02:04:59 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 0  in 5.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/delayed_job" for 127.0.0.1 at 2019-04-12 02:04:59 +0300
Processing by DummyController#delayed_job as HTML
Completed 500 Internal Server Error in 12.9ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007f9b7d8e4318 @config=#<Airbrake::Config:0x00007f9b7c9992c8 @proxy={}, @queue...ash=-2477600471871297311>]}>}, @truncator=#<Airbrake::Truncator:0x00007f9b7b9bb388 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007f9b7d8e4318 @config=#<Airbrake::Config:0x00007f9b7c9992c8 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007f9b7c999250 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007f9b7c999138 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007f9b7c998990 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f9b7c9988a0>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>87, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>149, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__2529273355285037153__process_action__4081840133254184785__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__2064600733816654456__call__2422881531196304597__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007f9b7b9bb360 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007f9b7ca185c8>, "rack.errors"=>#<StringIO:0x00007f9b7ca18690>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007f9b7bbeb8d8>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007f9b7c5cb4e8 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007f9b7c5cb3f8 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007f9b7c5cb088 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007f9b7c5cb3a8 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f9b7c5cb308>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007f9b7cb921d8 @filters=[#<Proc:0x00007f9b7cb92098@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007f9b7cb91fd0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007f9b7cb91fa8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007f9b7cb91508@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007f9b7cb914e0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"d7530e21ca95a50fd7265d5bd4e67c3a", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007f9b7ca13000 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007f9b7db75be0 @app=#<ActionDispatch::Reloader:0x00007f9b7db75c08 @app=#<ActionDispatch::Callbacks:0x00007f9b7db75c30 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007f9b7db75c58 @app=#<Airbrake::Rack::Middleware:0x00007f9b7db75c80 @app=#<ActiveRecord::QueryCache:0x00007f9b7db75d98 @app=#<ActionDispatch::Cookies:0x00007f9b7db75f78 @app=#<ActionDispatch::Session::CookieStore:0x00007f9b7db762c0 @secrets=["98b9a0ba38c20729256bed6a388a77bb3555fb0ae269abd33b798bd44109"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007f9b7db76040>, @app=#<ActionDispatch::Flash:0x00007f9b7db762e8 @app=#<ActionDispatch::ParamsParser:0x00007f9b7db76428 @app=#<ActionDispatch::Head:0x00007f9b7db76450 @app=#<Rack::ConditionalGet:0x00007f9b7db76478 @app=#<Rack::ETag:0x00007f9b7db764a0 @app=#<ActionDispatch::BestStandardsSupport:0x00007f9b7db764f0 @app=#<Warden::Manager:0x00007f9b7db76608 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007f9b7bbeb8d8>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007f9b7d8b5360 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=620795442673172711>=>:xml_simple, #<Mime::Type:0x00007f9b7d8bd8d0 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=2921699940410049115>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"98b9a0ba38c20729256bed6a388a77bb3555fb0ae269abd33b798bd44109", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007f9b7db76040>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007f9b7bcc27c0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3fcdbe508e3c not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"98b9a0ba38c20729256bed6a388a77bb3555fb0ae269abd33b798bd44109", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007f9b7db76040>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007f9b7ca11a20 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007f9b7ca115c0 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007f9b7ca11a20 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007f9b7ca11548 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70152893794860 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007f9b7dae6f30 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007f9b7dae6da0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007f9b7dae6d50 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007f9b7dae6da0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007f9b7dae6350 @details_key=nil, @details={:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007f9b7dae6238 @paths=[#<ActionView::FixtureResolver:0x00007f9b7bb9a4d8 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={#<ActionView::LookupContext::DetailsKey:0x00007f9b7c579ad0 @hash=2789075369151535797>=>{"index"=>{"dummy"=>{false=>{[]=>[dummy/index.html.erb]}}}, "application"=>{"layouts"=>{false=>{[]=>[layouts/application.html.erb]}}}, "notify_airbrake_sync_helper"=>{"dummy"=>{false=>{[]=>[dummy/notify_airbrake_sync_helper.html.erb]}}}, "notify_airbrake_helper"=>{"dummy"=>{false=>{[]=>[dummy/notify_airbrake_helper.html.erb]}}}, "resque"=>{"dummy"=>{false=>{[]=>[dummy/resque.html.erb]}}}}}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007f9b7d89c180 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-2477600471871297311>]}>}, @truncator=#<Airbrake::Truncator:0x00007f9b7b9bb388 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 02:04:59 +0300
Processing by DummyController#breakdown as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "breakdown"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT "books".* FROM "books" [0m
  Rendered dummy/breakdown.html.erb within layouts/application (0.2ms)
Completed 200 OK in 7.9ms (Views: 0.9ms | ActiveRecord: 0.2ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/resque" for 127.0.0.1 at 2019-04-12 02:08:07 +0300
Processing by DummyController#resque as HTML
  Rendered dummy/resque.html.erb within layouts/application (0.8ms)
Completed 200 OK in 6.6ms (Views: 5.4ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:08:07 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 26.9ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:08:09 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 17.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:08:11 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 17.9ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:08:13 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:08:15 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 29.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:08:17 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:08:19 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 02:08:21 +0300
Processing by DummyController#breakdown as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "breakdown"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
  [1m[36mBook Load (0.0ms)[0m  [1mSELECT "books".* FROM "books" [0m
  Rendered dummy/breakdown.html.erb within layouts/application (0.2ms)
Completed 200 OK in 7.4ms (Views: 0.8ms | ActiveRecord: 0.2ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:08:21 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 4.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started HEAD "/crash" for 127.0.0.1 at 2019-04-12 02:08:21 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 0  in 5.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/" for 127.0.0.1 at 2019-04-12 02:08:21 +0300
Processing by DummyController#index as HTML
  Rendered dummy/index.html.erb within layouts/application (0.2ms)
Completed 200 OK in 1.0ms (Views: 0.8ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:08:21 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<RSpec::Mocks::MockExpectationError: Airbrake received :notify with unexpected arguments
  expected: (an instance of Airbrake::Notice)
       got: (#<AirbrakeTestError: after_commit>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of Airbrake::Notice"]
[0m[32m+[#<AirbrakeTestError: after_commit>]
[0m>
Completed 500 Internal Server Error in 13.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:08:21 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:08:23 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 10.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:08:23 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 2.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 02:08:23 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 16.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 02:08:25 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 02:08:27 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 02:08:29 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 17.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 02:08:31 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 16.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 02:08:33 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:08:35 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.6ms (Views: 1.1ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:08:37 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.8ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:08:39 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 12.6ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:08:41 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.0ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:08:43 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 12.1ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:08:45 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.7ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:08:47 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.8ms (Views: 9.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:08:49 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.1ms (Views: 9.4ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:08:51 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.0ms (Views: 8.1ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:08:53 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.4ms (Views: 9.5ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:08:56 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 12.6ms (Views: 8.2ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:08:58 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.3ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/delayed_job" for 127.0.0.1 at 2019-04-12 02:09:00 +0300
Processing by DummyController#delayed_job as HTML
Completed 500 Internal Server Error in 11.6ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007fab25eb59b0 @config=#<Airbrake::Config:0x00007fab25c8d0c0 @proxy={}, @queue...hash=-214438064089290973>]}>}, @truncator=#<Airbrake::Truncator:0x00007fab25eabc30 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007fab25eb59b0 @config=#<Airbrake::Config:0x00007fab25c8d0c0 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fab25c8d048 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fab25c8cff8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fab25c8cfa8 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fab25c8cf30>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>87, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>149, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__3038826623013623126__process_action__2915049913558581966__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__2910205980935439244__call__4433785169180869233__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007fab25eabc08 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007fab28603350>, "rack.errors"=>#<StringIO:0x00007fab286033f0>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fab25de64a8>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fab25e3d4b0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fab25e3d410 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007fab25e3d2a8 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007fab25e3d3c0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fab25e3d370>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fab25dd7818 @filters=[#<Proc:0x00007fab25dd7700@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007fab25dd76d8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007fab25dd7688@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007fab25dd6ad0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007fab25dd6aa8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"d2884208214f0b30d7b6ba490d1ca81d", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fab28602518 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007fab25df7140 @app=#<ActionDispatch::Reloader:0x00007fab25df7168 @app=#<ActionDispatch::Callbacks:0x00007fab25df7190 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007fab25df71b8 @app=#<Airbrake::Rack::Middleware:0x00007fab25df71e0 @app=#<ActiveRecord::QueryCache:0x00007fab25df7370 @app=#<ActionDispatch::Cookies:0x00007fab25df7460 @app=#<ActionDispatch::Session::CookieStore:0x00007fab25df78c0 @secrets=["b64bc9d31f44ffa3470185900acffaf3135f9aef1700b0f98362190a0832"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007fab25df7528>, @app=#<ActionDispatch::Flash:0x00007fab25df7910 @app=#<ActionDispatch::ParamsParser:0x00007fab25df7a50 @app=#<ActionDispatch::Head:0x00007fab25df7a78 @app=#<Rack::ConditionalGet:0x00007fab25df7aa0 @app=#<Rack::ETag:0x00007fab25df7ac8 @app=#<ActionDispatch::BestStandardsSupport:0x00007fab25df7b18 @app=#<Warden::Manager:0x00007fab25df7ca8 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fab25de64a8>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007fab281f0d08 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=-3636204729466480810>=>:xml_simple, #<Mime::Type:0x00007fab282032a0 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=-821087715402216990>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"b64bc9d31f44ffa3470185900acffaf3135f9aef1700b0f98362190a0832", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fab25df7528>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007fab2850b150@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3fd594300e7c not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"b64bc9d31f44ffa3470185900acffaf3135f9aef1700b0f98362190a0832", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fab25df7528>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007fab28601af0 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007fab28601708 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fab28601af0 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007fab28601690 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70186546760400 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fab285fba10 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007fab285fb920 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007fab285fb8f8 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007fab285fb920 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007fab285fb628 @details_key=nil, @details={:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007fab285fb5b0 @paths=[#<ActionView::FixtureResolver:0x00007fab271b4f98 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={#<ActionView::LookupContext::DetailsKey:0x00007fab25d7cd00 @hash=3927443445442198297>=>{"resque"=>{"dummy"=>{false=>{[]=>[dummy/resque.html.erb]}}}, "application"=>{"layouts"=>{false=>{[]=>[layouts/application.html.erb]}}}, "breakdown"=>{"dummy"=>{false=>{[]=>[dummy/breakdown.html.erb]}}}, "index"=>{"dummy"=>{false=>{[]=>[dummy/index.html.erb]}}}, "notify_airbrake_sync_helper"=>{"dummy"=>{false=>{[]=>[dummy/notify_airbrake_sync_helper.html.erb]}}}, "notify_airbrake_helper"=>{"dummy"=>{false=>{[]=>[dummy/notify_airbrake_helper.html.erb]}}}}}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fab281e2910 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-214438064089290973>]}>}, @truncator=#<Airbrake::Truncator:0x00007fab25eabc30 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:17:00 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 28.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:17:02 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.1ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 12.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:17:04 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:17:06 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 10.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:17:08 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 29.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:17:10 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 16.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:17:12 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 4.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:17:12 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 1.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:17:12 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 02:17:14 +0300
Processing by DummyController#breakdown as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "breakdown"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT "books".* FROM "books" [0m
  Rendered dummy/breakdown.html.erb within layouts/application (0.9ms)
Completed 200 OK in 12.5ms (Views: 5.8ms | ActiveRecord: 0.2ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:17:14 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 15.9ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/delayed_job" for 127.0.0.1 at 2019-04-12 02:17:16 +0300
Processing by DummyController#delayed_job as HTML
Completed 500 Internal Server Error in 12.4ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007fb5f9406cb0 @config=#<Airbrake::Config:0x00007fb5f93fd980 @proxy={}, @queue...ash=-1295660623000668788>]}>}, @truncator=#<Airbrake::Truncator:0x00007fb5fb1c6840 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007fb5f9406cb0 @config=#<Airbrake::Config:0x00007fb5f93fd980 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fb5f93fd908 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fb5f93fd8b8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fb5f93fd868 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fb5f93fd7f0>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>87, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>149, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__841844881059577422__process_action__4077725880216385400__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__3268677452531139947__call__623664641473256421__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007fb5fb1c6818 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007fb5f955b4d0>, "rack.errors"=>#<StringIO:0x00007fb5f955b5c0>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fb5f9610c90>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fb5fd00e9b0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fb5fd00e730 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007fb5fd00e280 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007fb5fd00e5a0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fb5fd00e488>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fb5f943d8c8 @filters=[#<Proc:0x00007fb5f943d800@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007fb5f943d7b0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007fb5f943d760@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007fb5f943cd38@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007fb5f943cd10@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"9520d813d4328c073b1435995d14c591", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fb5f9558c58 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007fb5fb159b78 @app=#<ActionDispatch::Reloader:0x00007fb5fb159bf0 @app=#<ActionDispatch::Callbacks:0x00007fb5fb159c18 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007fb5fb159c40 @app=#<Airbrake::Rack::Middleware:0x00007fb5fb159c68 @app=#<ActiveRecord::QueryCache:0x00007fb5fb159dd0 @app=#<ActionDispatch::Cookies:0x00007fb5fb159f10 @app=#<ActionDispatch::Session::CookieStore:0x00007fb5fb15a4d8 @secrets=["c14ce68e12d21340198c417af43ca6c6b5865d8954107845fcdc31526515"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007fb5fb15a050>, @app=#<ActionDispatch::Flash:0x00007fb5fb15a500 @app=#<ActionDispatch::ParamsParser:0x00007fb5fb15a618 @app=#<ActionDispatch::Head:0x00007fb5fb15a640 @app=#<Rack::ConditionalGet:0x00007fb5fb15a668 @app=#<Rack::ETag:0x00007fb5fb15a690 @app=#<ActionDispatch::BestStandardsSupport:0x00007fb5fb15a6e0 @app=#<Warden::Manager:0x00007fb5fb15a7f8 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fb5f9610c90>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007fb5fa1b4308 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=-1263666871886488279>=>:xml_simple, #<Mime::Type:0x00007fb5fa1c6850 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=1782345123451686561>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"c14ce68e12d21340198c417af43ca6c6b5865d8954107845fcdc31526515", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fb5fb15a050>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007fb5f951a958@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3fdafe413c78 not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"c14ce68e12d21340198c417af43ca6c6b5865d8954107845fcdc31526515", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fb5fb15a050>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007fb5fc827620 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007fb5fc827198 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fb5fc827620 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007fb5fc8270a8 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70209801107240 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fb5fc8244e8 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007fb5fc824308 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007fb5fc8242e0 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007fb5fc824308 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007fb5fb1dfe08 @details_key=nil, @details={:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007fb5fb1dfd40 @paths=[#<ActionView::FixtureResolver:0x00007fb5f9476b28 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={#<ActionView::LookupContext::DetailsKey:0x00007fb5ff848160 @hash=4387313958556387709>=>{"breakdown"=>{"dummy"=>{false=>{[]=>[dummy/breakdown.html.erb]}}}, "application"=>{"layouts"=>{false=>{[]=>[layouts/application.html.erb]}}}}}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fb5fa1ad670 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-1295660623000668788>]}>}, @truncator=#<Airbrake::Truncator:0x00007fb5fb1c6840 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:17:16 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 4.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started HEAD "/crash" for 127.0.0.1 at 2019-04-12 02:17:16 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 0  in 4.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:17:16 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:17:18 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 12.7ms (Views: 1.1ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:17:20 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.3ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:17:22 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.2ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:17:24 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.3ms)
Completed 200 OK in 16.2ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:17:26 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.2ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 02:17:28 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 17.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 02:17:30 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 10.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 02:17:32 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 9.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 02:17:35 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 17.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 02:17:37 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 02:17:39 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:17:41 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 12.7ms (Views: 8.2ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:17:43 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.3ms (Views: 8.2ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:17:45 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 12.6ms (Views: 8.3ms | ActiveRecord: 0.0ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (1.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:43:51 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `defaults' for #<Array:0x00007fb4e15d6a68>
Did you mean?  to_default_s):
  lib/airbrake/rails/app.rb:22:in `block in routes'
  lib/airbrake/rails/app.rb:21:in `each'
  lib/airbrake/rails/app.rb:21:in `flat_map'
  lib/airbrake/rails/app.rb:21:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:29:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:43:53 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `defaults' for #<Array:0x00007fb4e15d6a68>
Did you mean?  to_default_s):
  lib/airbrake/rails/app.rb:22:in `block in routes'
  lib/airbrake/rails/app.rb:21:in `each'
  lib/airbrake/rails/app.rb:21:in `flat_map'
  lib/airbrake/rails/app.rb:21:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:29:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:43:55 +0300
Processing by DummyController#crash as HTML

RSpec::Expectations::ExpectationNotMetError (
expected: "AirbrakeTestError"
     got: "NoMethodError"

(compared using ==)
):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/" for 127.0.0.1 at 2019-04-12 02:43:55 +0300
Processing by DummyController#index as HTML

RSpec::Mocks::MockExpectationError ((Airbrake).notify(#<Airbrake::Notice:0x00007fb4e141e4c8 @config=#<Airbrake::Config:0x00007fb4e13ed800 @proxy={}, @queue...hash=4556266012210054634>]}>}, @truncator=#<Airbrake::Truncator:0x00007fb4e13e4ae8 @max_size=10000>>)
    expected: 0 times with any arguments
    received: 1 time with arguments: (#<Airbrake::Notice:0x00007fb4e141e4c8 @config=#<Airbrake::Config:0x00007fb4e13ed800 @proxy={}, @queue...hash=4556266012210054634>]}>}, @truncator=#<Airbrake::Truncator:0x00007fb4e13e4ae8 @max_size=10000>>)):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:43:56 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `defaults' for #<Array:0x00007fb4e15d6a68>
Did you mean?  to_default_s):
  lib/airbrake/rails/app.rb:22:in `block in routes'
  lib/airbrake/rails/app.rb:21:in `each'
  lib/airbrake/rails/app.rb:21:in `flat_map'
  lib/airbrake/rails/app.rb:21:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:29:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:43:58 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `defaults' for #<Array:0x00007fb4e15d6a68>
Did you mean?  to_default_s):
  lib/airbrake/rails/app.rb:22:in `block in routes'
  lib/airbrake/rails/app.rb:21:in `each'
  lib/airbrake/rails/app.rb:21:in `flat_map'
  lib/airbrake/rails/app.rb:21:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:29:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:44:00 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `defaults' for #<Array:0x00007fb4e15d6a68>
Did you mean?  to_default_s):
  lib/airbrake/rails/app.rb:22:in `block in routes'
  lib/airbrake/rails/app.rb:21:in `each'
  lib/airbrake/rails/app.rb:21:in `flat_map'
  lib/airbrake/rails/app.rb:21:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:29:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:44:02 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `defaults' for #<Array:0x00007fb4e15d6a68>
Did you mean?  to_default_s):
  lib/airbrake/rails/app.rb:22:in `block in routes'
  lib/airbrake/rails/app.rb:21:in `each'
  lib/airbrake/rails/app.rb:21:in `flat_map'
  lib/airbrake/rails/app.rb:21:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:29:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:44:04 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `defaults' for #<Array:0x00007fb4e15d6a68>
Did you mean?  to_default_s):
  lib/airbrake/rails/app.rb:22:in `block in routes'
  lib/airbrake/rails/app.rb:21:in `each'
  lib/airbrake/rails/app.rb:21:in `flat_map'
  lib/airbrake/rails/app.rb:21:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:29:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:44:06 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `defaults' for #<Array:0x00007fb4e15d6a68>
Did you mean?  to_default_s):
  lib/airbrake/rails/app.rb:22:in `block in routes'
  lib/airbrake/rails/app.rb:21:in `each'
  lib/airbrake/rails/app.rb:21:in `flat_map'
  lib/airbrake/rails/app.rb:21:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:29:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:44:26 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `defaults' for #<Array:0x00007ff16b56e0c8>
Did you mean?  to_default_s):
  lib/airbrake/rails/app.rb:22:in `block in routes'
  lib/airbrake/rails/app.rb:21:in `each'
  lib/airbrake/rails/app.rb:21:in `flat_map'
  lib/airbrake/rails/app.rb:21:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:29:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:44:26 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `defaults' for #<Array:0x00007ff16b56e0c8>
Did you mean?  to_default_s):
  lib/airbrake/rails/app.rb:22:in `block in routes'
  lib/airbrake/rails/app.rb:21:in `each'
  lib/airbrake/rails/app.rb:21:in `flat_map'
  lib/airbrake/rails/app.rb:21:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:29:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:44:26 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `defaults' for #<Array:0x00007ff16b56e0c8>
Did you mean?  to_default_s):
  lib/airbrake/rails/app.rb:22:in `block in routes'
  lib/airbrake/rails/app.rb:21:in `each'
  lib/airbrake/rails/app.rb:21:in `flat_map'
  lib/airbrake/rails/app.rb:21:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:29:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:44:28 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `defaults' for #<Array:0x00007ff16b56e0c8>
Did you mean?  to_default_s):
  lib/airbrake/rails/app.rb:22:in `block in routes'
  lib/airbrake/rails/app.rb:21:in `each'
  lib/airbrake/rails/app.rb:21:in `flat_map'
  lib/airbrake/rails/app.rb:21:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:29:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:44:30 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `defaults' for #<Array:0x00007ff16b56e0c8>
Did you mean?  to_default_s):
  lib/airbrake/rails/app.rb:22:in `block in routes'
  lib/airbrake/rails/app.rb:21:in `each'
  lib/airbrake/rails/app.rb:21:in `flat_map'
  lib/airbrake/rails/app.rb:21:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:29:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:44:32 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `defaults' for #<Array:0x00007ff16b56e0c8>
Did you mean?  to_default_s):
  lib/airbrake/rails/app.rb:22:in `block in routes'
  lib/airbrake/rails/app.rb:21:in `each'
  lib/airbrake/rails/app.rb:21:in `flat_map'
  lib/airbrake/rails/app.rb:21:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:29:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:44:34 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `defaults' for #<Array:0x00007ff16b56e0c8>
Did you mean?  to_default_s):
  lib/airbrake/rails/app.rb:22:in `block in routes'
  lib/airbrake/rails/app.rb:21:in `each'
  lib/airbrake/rails/app.rb:21:in `flat_map'
  lib/airbrake/rails/app.rb:21:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:29:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:44:36 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `defaults' for #<Array:0x00007ff16b56e0c8>
Did you mean?  to_default_s):
  lib/airbrake/rails/app.rb:22:in `block in routes'
  lib/airbrake/rails/app.rb:21:in `each'
  lib/airbrake/rails/app.rb:21:in `flat_map'
  lib/airbrake/rails/app.rb:21:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:29:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:44:38 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `defaults' for #<Array:0x00007ff16b56e0c8>
Did you mean?  to_default_s):
  lib/airbrake/rails/app.rb:22:in `block in routes'
  lib/airbrake/rails/app.rb:21:in `each'
  lib/airbrake/rails/app.rb:21:in `flat_map'
  lib/airbrake/rails/app.rb:21:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:29:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/resque" for 127.0.0.1 at 2019-04-12 02:44:40 +0300
Processing by DummyController#resque as HTML

NoMethodError (undefined method `defaults' for #<Array:0x00007ff16b56e0c8>
Did you mean?  to_default_s):
  lib/airbrake/rails/app.rb:22:in `block in routes'
  lib/airbrake/rails/app.rb:21:in `each'
  lib/airbrake/rails/app.rb:21:in `flat_map'
  lib/airbrake/rails/app.rb:21:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:29:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:44:40 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `defaults' for #<Array:0x00007ff16b56e0c8>
Did you mean?  to_default_s):
  lib/airbrake/rails/app.rb:22:in `block in routes'
  lib/airbrake/rails/app.rb:21:in `each'
  lib/airbrake/rails/app.rb:21:in `flat_map'
  lib/airbrake/rails/app.rb:21:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:29:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.3ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:44:56 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `defaults' for #<Array:0x00007fe013fab068>
Did you mean?  to_default_s):
  lib/airbrake/rails/app.rb:22:in `block in routes'
  lib/airbrake/rails/app.rb:21:in `each'
  lib/airbrake/rails/app.rb:21:in `flat_map'
  lib/airbrake/rails/app.rb:21:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:30:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:21:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:45:36 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `defaults' for #<Array:0x00007fb254cd62f8>
Did you mean?  to_default_s):
  lib/airbrake/rails/app.rb:23:in `block in routes'
  lib/airbrake/rails/app.rb:22:in `each'
  lib/airbrake/rails/app.rb:22:in `flat_map'
  lib/airbrake/rails/app.rb:22:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:30:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:21:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:46:30 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `path' for #<Array:0x00007fdc14ed6e10>):
  lib/airbrake/rails/app.rb:24:in `block in routes'
  lib/airbrake/rails/app.rb:22:in `each'
  lib/airbrake/rails/app.rb:22:in `flat_map'
  lib/airbrake/rails/app.rb:22:in `routes'
  lib/airbrake/rails/action_controller_route_subscriber.rb:30:in `find_route'
  lib/airbrake/rails/action_controller_route_subscriber.rb:21:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.4ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:46:50 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 13.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:47:06 +0300
Processing by DummyController#crash as HTML
Connecting to database specified by DATABASE_URL
  [1m[36m (1.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:47:54 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 14.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:14:12 +0300
Processing by DummyController#crash as HTML

RSpec::Expectations::ExpectationNotMetError (
expected: "AirbrakeTestError"
     got: "NoMethodError"

(compared using ==)
):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/" for 127.0.0.1 at 2019-04-12 12:14:12 +0300
Processing by DummyController#index as HTML

RSpec::Mocks::MockExpectationError ((Airbrake).notify(#<Airbrake::Notice:0x00007f99e4a6b078 @config=#<Airbrake::Config:0x00007f99e49d9da8 @proxy={}, @queue...ash=-2189221720869303315>]}>}, @truncator=#<Airbrake::Truncator:0x00007f99e4a4a170 @max_size=10000>>)
    expected: 0 times with any arguments
    received: 1 time with arguments: (#<Airbrake::Notice:0x00007f99e4a6b078 @config=#<Airbrake::Config:0x00007f99e49d9da8 @proxy={}, @queue...ash=-2189221720869303315>]}>}, @truncator=#<Airbrake::Truncator:0x00007f99e4a4a170 @max_size=10000>>)):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:14:12 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007f99e4523a20>
Did you mean?  respond_to?):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:14:14 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007f99e4641fd8>
Did you mean?  respond_to?):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 12:15:09 +0300
Processing by DummyController#breakdown as HTML

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007fbfe927b9a0>
Did you mean?  respond_to?):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/resque" for 127.0.0.1 at 2019-04-12 12:15:09 +0300
Processing by DummyController#resque as HTML

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007fbfe71b0400>
Did you mean?  respond_to?):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:15:09 +0300
Processing by DummyController#crash as HTML

RSpec::Expectations::ExpectationNotMetError (
expected: "AirbrakeTestError"
     got: "NoMethodError"

(compared using ==)
):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/" for 127.0.0.1 at 2019-04-12 12:15:09 +0300
Processing by DummyController#index as HTML

RSpec::Mocks::MockExpectationError ((Airbrake).notify(#<Airbrake::Notice:0x00007fbfe9121b18 @config=#<Airbrake::Config:0x00007fbfeab89a50 @proxy={}, @queue...hash=3762755753403067565>]}>}, @truncator=#<Airbrake::Truncator:0x00007fbfeadfb400 @max_size=10000>>)
    expected: 0 times with any arguments
    received: 1 time with arguments: (#<Airbrake::Notice:0x00007fbfe9121b18 @config=#<Airbrake::Config:0x00007fbfeab89a50 @proxy={}, @queue...hash=3762755753403067565>]}>}, @truncator=#<Airbrake::Truncator:0x00007fbfeadfb400 @max_size=10000>>)):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:15:09 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007fbfead32820>
Did you mean?  respond_to?):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/delayed_job" for 127.0.0.1 at 2019-04-12 12:15:11 +0300
Processing by DummyController#delayed_job as HTML

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007fbfe9219c00 @config=#<Airbrake::Config:0x00007fbfeab89a50 @proxy={}, @queue...hash=3762755753403067565>]}>}, @truncator=#<Airbrake::Truncator:0x00007fbfeac400e8 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,9 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007fbfe9219c00 @config=#<Airbrake::Config:0x00007fbfeab89a50 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fbfeab899d8 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fbfeab89988 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fbfeab89938 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fbfeab898c0>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"NoMethodError", :message=>"undefined method `response_type' for #<Airbrake::Rails::Event:0x00007fbfe9220cf8>\nDid you mean?  respond_to?", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/action_controller_route_subscriber.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>47, :function=>"publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"block in publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>25, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>27, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__1495596733776212413__call__404923809384440107__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<NoMethodError: undefined method `response_type' for #<Airbrake::Rails::Event:0x00007fbfe9220cf8>
[0m[32m+Did you mean?  respond_to?>, :rack_request=>#<ActionDispatch::Request:0x00007fbfeac400c0 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007fbfe9230838>, "rack.errors"=>#<StringIO:0x00007fbfe9230928>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fbfea9f3ce0>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fbfeac7b418 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fbfeac7b378 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007fbfeac7b210 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007fbfeac7b328 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fbfeac7b2d8>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fbfeac701f8 @filters=[#<Proc:0x00007fbfeac70108@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007fbfeac700b8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007fbfeac70090@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007fbfe71db948@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007fbfe71db920@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"df7eab1dfd6f020168ecdc598c24bb19", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fbfe922b2e8 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007fbfe92525a0 @app=#<ActionDispatch::Reloader:0x00007fbfe92525c8 @app=#<ActionDispatch::Callbacks:0x00007fbfe92525f0 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007fbfe9252618 @app=#<Airbrake::Rack::Middleware:0x00007fbfe9252640 @app=#<ActiveRecord::QueryCache:0x00007fbfe9252730 @app=#<ActionDispatch::Cookies:0x00007fbfe92527f8 @app=#<ActionDispatch::Session::CookieStore:0x00007fbfe9252b68 @secrets=["5d38c13aa3f8cd8c8c2afeb68958866e9aaa31ae0f507c91da01e7cdeb81"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007fbfe92528c0>, @app=#<ActionDispatch::Flash:0x00007fbfe9252b90 @app=#<ActionDispatch::ParamsParser:0x00007fbfe9252ca8 @app=#<ActionDispatch::Head:0x00007fbfe9252cd0 @app=#<Rack::ConditionalGet:0x00007fbfe9252cf8 @app=#<Rack::ETag:0x00007fbfe9252d20 @app=#<ActionDispatch::BestStandardsSupport:0x00007fbfe9252d98 @app=#<Warden::Manager:0x00007fbfe9252e60 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fbfea9f3ce0>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007fbfe7b0af78 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=1445780424774046822>=>:xml_simple, #<Mime::Type:0x00007fbfe7b08f48 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=3310746184355183778>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"5d38c13aa3f8cd8c8c2afeb68958866e9aaa31ae0f507c91da01e7cdeb81", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fbfe92528c0>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007fbfeac8ac88@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3fdff4915460 not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"5d38c13aa3f8cd8c8c2afeb68958866e9aaa31ae0f507c91da01e7cdeb81", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fbfe92528c0>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007fbfe922a618 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007fbfe9229ee8 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fbfe922a618 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007fbfe9229e48 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70231113420460 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fbfe9223458 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007fbfe92232a0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007fbfe9223278 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007fbfe92232a0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007fbfe9222d28 @details_key=nil, @details={:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :png, :jpeg, :gif, :bmp, :tiff, :mpeg, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007fbfe9222c60 @paths=[#<ActionView::FixtureResolver:0x00007fbfe7d9d7b8 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fbfe7af8f80 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=3762755753403067565>]}>}, @truncator=#<Airbrake::Truncator:0x00007fbfeac400e8 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started HEAD "/crash" for 127.0.0.1 at 2019-04-12 12:15:11 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007fbfeabc9df8>
Did you mean?  respond_to?):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:15:11 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007fbfeaad0898>
Did you mean?  respond_to?):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:15:11 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007fbfeaa892e0>
Did you mean?  respond_to?):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:15:13 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007fbfead38518>
Did you mean?  respond_to?):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:15:15 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007fbfeac2aa90>
Did you mean?  respond_to?):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:15:17 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007fbfe91ead60>
Did you mean?  respond_to?):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:15:19 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007fbfe7f0bc30>
Did you mean?  respond_to?):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:15:21 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007fbfe71a0348>
Did you mean?  respond_to?):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/delayed_job" for 127.0.0.1 at 2019-04-12 12:15:28 +0300
Processing by DummyController#delayed_job as HTML
Completed 500 Internal Server Error in 11.4ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007fc9943ca540 @config=#<Airbrake::Config:0x00007fc993c195f8 @proxy={}, @queue...@hash=629431703544892687>]}>}, @truncator=#<Airbrake::Truncator:0x00007fc993bf8718 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007fc9943ca540 @config=#<Airbrake::Config:0x00007fc993c195f8 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fc993c19580 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fc993c19530 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fc993c194e0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fc993c19468>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3">, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>87, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>149, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__2561560693029840158__process_action__1359741826281283930__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__4151898453825400953__call__3121593332199927630__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007fc993bf8330 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007fc9944b06a8>, "rack.errors"=>#<StringIO:0x00007fc9944b0810>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fc993c884a8>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fc993c40ce8 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fc993c40c48 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007fc993c40ae0 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007fc993c40bf8 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fc993c40ba8>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fc994499390 @filters=[#<Proc:0x00007fc9944992c8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007fc994499278@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007fc994499250@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007fc994498ad0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007fc994498aa8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"113a243dcf38878f9ba8e5c7bbcdc9ca", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fc994491578 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007fc99330c640 @app=#<ActionDispatch::Reloader:0x00007fc99330c668 @app=#<ActionDispatch::Callbacks:0x00007fc99330c690 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007fc99330c6b8 @app=#<Airbrake::Rack::Middleware:0x00007fc99330c6e0 @app=#<ActiveRecord::QueryCache:0x00007fc99330c7d0 @app=#<ActionDispatch::Cookies:0x00007fc99330c898 @app=#<ActionDispatch::Session::CookieStore:0x00007fc99330cbe0 @secrets=["ebe7d532d4b404003a4dbacaf9637f1215a4a4540e6850b00b0e81ed382d"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007fc99330c960>, @app=#<ActionDispatch::Flash:0x00007fc99330cc30 @app=#<ActionDispatch::ParamsParser:0x00007fc99330ce38 @app=#<ActionDispatch::Head:0x00007fc99330ce60 @app=#<Rack::ConditionalGet:0x00007fc99330cf00 @app=#<Rack::ETag:0x00007fc99330cf28 @app=#<ActionDispatch::BestStandardsSupport:0x00007fc99330cf78 @app=#<Warden::Manager:0x00007fc99330d090 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fc993c884a8>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007fc993aba180 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=366699319437951180>=>:xml_simple, #<Mime::Type:0x00007fc993ac3aa0 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=1340636175623941413>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"ebe7d532d4b404003a4dbacaf9637f1215a4a4540e6850b00b0e81ed382d", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fc99330c960>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007fc993345fd0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3fe4ca245894 not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"ebe7d532d4b404003a4dbacaf9637f1215a4a4540e6850b00b0e81ed382d", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fc99330c960>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007fc99448ad90 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007fc99448a958 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fc99448ad90 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007fc994480b60 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70251876451640 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fc99445bf18 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007fc99445b900 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007fc99445b630 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007fc99445b900 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007fc99331d9b8 @details_key=nil, @details={:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007fc99331d918 @paths=[#<ActionView::FixtureResolver:0x00007fc9931cf660 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fc993ab3f60 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=629431703544892687>]}>}, @truncator=#<Airbrake::Truncator:0x00007fc993bf8718 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 12:15:28 +0300
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.8ms)
Completed 200 OK in 17.2ms (Views: 5.0ms | ActiveRecord: 0.3ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:route=>"/breakdown(.:format)", :method=>"GET", :response_type=>:html, :groups=>"hash_including(:db=>\"an instance of Float\")"))
       got: ({:groups=>{:db=>0.27999999999999997, :view=>4.9989999970421195}, :method=>{:method=>"GET", :response_...ponse_type=>:html, :route=>"/breakdown(.:format)", :start_time=>2019-04-12 12:15:28.089401000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:route=>\"/breakdown(.:format)\", :method=>\"GET\", :response_type=>:html, :groups=>\"hash_including(:db=>\\\"an instance of Float\\\")\")"]
[0m[32m+[{:groups=>{:db=>0.27999999999999997, :view=>4.9989999970421195},
[0m[32m+  :method=>{:method=>"GET", :response_type=>nil},
[0m[32m+  :response_type=>:html,
[0m[32m+  :route=>"/breakdown(.:format)",
[0m[32m+  :start_time=>2019-04-12 12:15:28.089401000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:18:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:15:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:15:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:15:28 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
RSpec::Mocks::MockExpectationError: Airbrake received :notify_query with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :func=>"tap", :file=>"lib/airbrake/rails/active_record_subscriber.rb", :line=>"anything"))
       got: ({:end_time=>2019-04-12 12:15:28.112352000 +0300, :file=>"lib/airbrake/rails/active_record_subscriber....=>"begin transaction", :route=>"/crash(.:format)", :start_time=>2019-04-12 12:15:28.112323000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,9 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :func=>\"tap\", :file=>\"lib/airbrake/rails/active_record_subscriber.rb\", :line=>\"anything\")"]
[0m[32m+[{:end_time=>2019-04-12 12:15:28.112352000 +0300,
[0m[32m+  :file=>"lib/airbrake/rails/active_record_subscriber.rb",
[0m[32m+  :func=>"tap",
[0m[32m+  :line=>31,
[0m[32m+  :method=>{:method=>"GET", :response_type=>nil},
[0m[32m+  :query=>"begin transaction",
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 12:15:28.112323000 +0300}]
[0m: begin transaction
Completed 500 Internal Server Error in 2.9ms

ActiveRecord::StatementInvalid (RSpec::Mocks::MockExpectationError: Airbrake received :notify_query with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :func=>"tap", :file=>"lib/airbrake/rails/active_record_subscriber.rb", :line=>"anything"))
       got: ({:end_time=>2019-04-12 12:15:28.112352000 +0300, :file=>"lib/airbrake/rails/active_record_subscriber....=>"begin transaction", :route=>"/crash(.:format)", :start_time=>2019-04-12 12:15:28.112323000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,9 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :func=>\"tap\", :file=>\"lib/airbrake/rails/active_record_subscriber.rb\", :line=>\"anything\")"]
[0m[32m+[{:end_time=>2019-04-12 12:15:28.112352000 +0300,
[0m[32m+  :file=>"lib/airbrake/rails/active_record_subscriber.rb",
[0m[32m+  :func=>"tap",
[0m[32m+  :line=>31,
[0m[32m+  :method=>{:method=>"GET", :response_type=>nil},
[0m[32m+  :query=>"begin transaction",
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 12:15:28.112323000 +0300}]
[0m: begin transaction):
  lib/airbrake/rails/active_record_subscriber.rb:15:in `block in call'
  lib/airbrake/rails/active_record_subscriber.rb:14:in `each'
  lib/airbrake/rails/active_record_subscriber.rb:14:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:15:28 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.3ms)[0m  begin transaction
RSpec::Mocks::MockExpectationError: Airbrake received :notify_query with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :func=>nil, :file=>nil, :line=>nil))
       got: ({:end_time=>2019-04-12 12:15:28.121032000 +0300, :file=>nil, :func=>nil, :line=>nil, :method=>{:metho...=>"begin transaction", :route=>"/crash(.:format)", :start_time=>2019-04-12 12:15:28.120777000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,9 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :func=>nil, :file=>nil, :line=>nil)"]
[0m[32m+[{:end_time=>2019-04-12 12:15:28.121032000 +0300,
[0m[32m+  :file=>nil,
[0m[32m+  :func=>nil,
[0m[32m+  :line=>nil,
[0m[32m+  :method=>{:method=>"GET", :response_type=>nil},
[0m[32m+  :query=>"begin transaction",
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 12:15:28.120777000 +0300}]
[0m: begin transaction
Completed 500 Internal Server Error in 2.0ms

ActiveRecord::StatementInvalid (RSpec::Mocks::MockExpectationError: Airbrake received :notify_query with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :func=>nil, :file=>nil, :line=>nil))
       got: ({:end_time=>2019-04-12 12:15:28.121032000 +0300, :file=>nil, :func=>nil, :line=>nil, :method=>{:metho...=>"begin transaction", :route=>"/crash(.:format)", :start_time=>2019-04-12 12:15:28.120777000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,9 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :func=>nil, :file=>nil, :line=>nil)"]
[0m[32m+[{:end_time=>2019-04-12 12:15:28.121032000 +0300,
[0m[32m+  :file=>nil,
[0m[32m+  :func=>nil,
[0m[32m+  :line=>nil,
[0m[32m+  :method=>{:method=>"GET", :response_type=>nil},
[0m[32m+  :query=>"begin transaction",
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 12:15:28.120777000 +0300}]
[0m: begin transaction):
  lib/airbrake/rails/active_record_subscriber.rb:15:in `block in call'
  lib/airbrake/rails/active_record_subscriber.rb:14:in `each'
  lib/airbrake/rails/active_record_subscriber.rb:14:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:15:28 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
Completed 500 Internal Server Error in 1.7ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify_request with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET"))
       got: ({:end_time=>2019-04-12 12:15:28.129959000 +0300, :method=>{:method=>"GET", :response_type=>nil}, :route=>"/crash(.:format)", :start_time=>2019-04-12 12:15:28.128180000 +0300, :status_code=>500})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\")"]
[0m[32m+[{:end_time=>2019-04-12 12:15:28.129959000 +0300,
[0m[32m+  :method=>{:method=>"GET", :response_type=>nil},
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 12:15:28.128180000 +0300,
[0m[32m+  :status_code=>500}]
[0m):
  lib/airbrake/rails/action_controller_notify_subscriber.rb:16:in `block in call'
  lib/airbrake/rails/action_controller_notify_subscriber.rb:15:in `each'
  lib/airbrake/rails/action_controller_notify_subscriber.rb:15:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started HEAD "/crash" for 127.0.0.1 at 2019-04-12 12:15:28 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.2ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
Completed 0  in 1.6ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify_request with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"HEAD", :status_code=>500))
       got: ({:end_time=>2019-04-12 12:15:28.140466000 +0300, :method=>{:method=>"HEAD", :response_type=>nil}, :route=>"/crash(.:format)", :start_time=>2019-04-12 12:15:28.138732000 +0300, :status_code=>500})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"HEAD\", :status_code=>500)"]
[0m[32m+[{:end_time=>2019-04-12 12:15:28.140466000 +0300,
[0m[32m+  :method=>{:method=>"HEAD", :response_type=>nil},
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 12:15:28.138732000 +0300,
[0m[32m+  :status_code=>500}]
[0m):
  lib/airbrake/rails/action_controller_notify_subscriber.rb:16:in `block in call'
  lib/airbrake/rails/action_controller_notify_subscriber.rb:15:in `each'
  lib/airbrake/rails/action_controller_notify_subscriber.rb:15:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:15:28 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
Completed 500 Internal Server Error in 1.7ms

ActiveRecord::StatementInvalid (SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:15:30 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.3ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
Completed 500 Internal Server Error in 3.6ms

ActiveRecord::StatementInvalid (SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/resque" for 127.0.0.1 at 2019-04-12 12:15:32 +0300
Processing by DummyController#resque as HTML
  Rendered dummy/resque.html.erb within layouts/application (0.2ms)
Completed 200 OK in 2.5ms (Views: 1.1ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:15:32 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
Completed 500 Internal Server Error in 2.2ms

ActiveRecord::StatementInvalid (SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:15:34 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.3ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
Completed 500 Internal Server Error in 2.0ms

ActiveRecord::StatementInvalid (SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:15:36 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
Completed 500 Internal Server Error in 2.6ms

ActiveRecord::StatementInvalid (SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:15:38 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.2ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
Completed 500 Internal Server Error in 2.1ms

ActiveRecord::StatementInvalid (SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:15:40 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
Completed 500 Internal Server Error in 2.6ms

ActiveRecord::StatementInvalid (SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:15:42 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.2ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
Completed 500 Internal Server Error in 2.4ms

ActiveRecord::StatementInvalid (SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:15:44 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
Completed 500 Internal Server Error in 4.2ms

RSpec::Expectations::ExpectationNotMetError (
expected: "AirbrakeTestError"
     got: "ActiveRecord::StatementInvalid"

(compared using ==)
):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/" for 127.0.0.1 at 2019-04-12 12:15:44 +0300
Processing by DummyController#index as HTML
  Rendered dummy/index.html.erb within layouts/application (0.2ms)
Completed 200 OK in 1.3ms (Views: 1.1ms | ActiveRecord: 0.0ms)
Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 12:15:44 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.3ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
Completed 500 Internal Server Error in 2.3ms

ActiveRecord::StatementInvalid (SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 12:15:46 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
Completed 500 Internal Server Error in 2.2ms

ActiveRecord::StatementInvalid (SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 12:15:48 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.3ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
Completed 500 Internal Server Error in 2.0ms

ActiveRecord::StatementInvalid (SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 12:15:50 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
Completed 500 Internal Server Error in 2.4ms

ActiveRecord::StatementInvalid (SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 12:15:52 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.3ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
Completed 500 Internal Server Error in 2.1ms

ActiveRecord::StatementInvalid (SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 12:15:54 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.6ms)[0m  [1mbegin transaction[0m
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
Completed 500 Internal Server Error in 4.0ms

ActiveRecord::StatementInvalid (SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:15:56 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 18.6ms (Views: 12.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:15:58 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.7ms (Views: 9.6ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:16:00 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.5ms (Views: 1.1ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:16:02 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.0ms (Views: 10.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:16:04 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.2ms (Views: 10.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:16:06 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 20.9ms (Views: 15.1ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:16:08 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 28.8ms (Views: 1.2ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:16:10 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.3ms)
Completed 200 OK in 26.6ms (Views: 1.2ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:16:12 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.0ms (Views: 1.1ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:16:15 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.3ms)
Completed 200 OK in 16.4ms (Views: 1.1ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:16:17 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.8ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:16:19 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.3ms)
Completed 200 OK in 14.7ms (Views: 1.1ms | ActiveRecord: 0.0ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (1.2ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:18:00 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 16.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:18:02 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:18:04 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:18:06 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:18:08 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:18:10 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 12:18:12 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 12:18:14 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 23.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 12:18:16 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 12:18:18 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.9ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 12:18:20 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 12:18:22 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 10.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:18:24 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.9ms)
Completed 200 OK in 19.2ms (Views: 5.7ms | ActiveRecord: 0.0ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started HEAD "/crash" for 127.0.0.1 at 2019-04-12 12:18:29 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 0  in 14.0ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify_request with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"HEAD", :status_code=>500))
       got: ({:end_time=>2019-04-12 12:21:20.916811000 +0300, :method=>{:method=>"HEAD", :response_type=>nil}, :route=>"/crash(.:format)", :start_time=>2019-04-12 12:21:20.902623000 +0300, :status_code=>500})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"HEAD\", :status_code=>500)"]
[0m[32m+[{:end_time=>2019-04-12 12:21:20.916811000 +0300,
[0m[32m+  :method=>{:method=>"HEAD", :response_type=>nil},
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 12:21:20.902623000 +0300,
[0m[32m+  :status_code=>500}]
[0m):
  lib/airbrake/rails/action_controller_notify_subscriber.rb:16:in `block in call'
  lib/airbrake/rails/action_controller_notify_subscriber.rb:15:in `each'
  lib/airbrake/rails/action_controller_notify_subscriber.rb:15:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:21:20 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 6.0ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify_request with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET"))
       got: ({:end_time=>2019-04-12 12:21:22.088992000 +0300, :method=>{:method=>"GET", :response_type=>nil}, :route=>"/crash(.:format)", :start_time=>2019-04-12 12:21:22.082875000 +0300, :status_code=>500})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\")"]
[0m[32m+[{:end_time=>2019-04-12 12:21:22.088992000 +0300,
[0m[32m+  :method=>{:method=>"GET", :response_type=>nil},
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 12:21:22.082875000 +0300,
[0m[32m+  :status_code=>500}]
[0m):
  lib/airbrake/rails/action_controller_notify_subscriber.rb:16:in `block in call'
  lib/airbrake/rails/action_controller_notify_subscriber.rb:15:in `each'
  lib/airbrake/rails/action_controller_notify_subscriber.rb:15:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:21:22 +0300
Processing by DummyController#crash as HTML
Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:21:31 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007ff7a110d448>
Did you mean?  repsonse_type):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:21:33 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007ff7a1a76c00>
Did you mean?  repsonse_type):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:21:35 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007ff7a144cd48>
Did you mean?  repsonse_type):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:21:37 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007ff7a2d90958>
Did you mean?  repsonse_type):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:21:39 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007ff7a137d660>
Did you mean?  repsonse_type):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:21:41 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007ff7a1444440>
Did you mean?  repsonse_type):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:21:43 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007ff7a2d60e88>
Did you mean?  repsonse_type):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:21:45 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007ff7a1a6db00>
Did you mean?  repsonse_type):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:21:47 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007ff7a33cfc60>
Did you mean?  repsonse_type):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:21:49 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007ff7a2d38f00>
Did you mean?  repsonse_type):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:21:51 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007ff7a2c64ac0>
Did you mean?  repsonse_type):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:21:53 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007ff7a4018fa8>
Did you mean?  repsonse_type):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:21:55 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007ff7a1bad8f8>
Did you mean?  repsonse_type):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 12:21:57 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007ff7a29bcbd8>
Did you mean?  repsonse_type):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 12:21:59 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007ff7a330fbb8>
Did you mean?  repsonse_type):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 12:22:01 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007ff7a1b6f4b8>
Did you mean?  repsonse_type):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 12:22:03 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007ff7a122f308>
Did you mean?  repsonse_type):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 12:22:05 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007ff7a2de11f0>
Did you mean?  repsonse_type):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 12:22:07 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007ff7a1ab66e8>
Did you mean?  repsonse_type):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 12:22:09 +0300
Processing by DummyController#breakdown as HTML

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007ff7a1c2f858>
Did you mean?  repsonse_type):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/resque" for 127.0.0.1 at 2019-04-12 12:22:09 +0300
Processing by DummyController#resque as HTML

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007ff7a3307850>
Did you mean?  repsonse_type):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:22:09 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007ff7a2cfb588>
Did you mean?  repsonse_type):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:22:11 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007ff7a314c1f0>
Did you mean?  repsonse_type):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:22:13 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007ff7a13bfe48>
Did you mean?  repsonse_type):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:22:15 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007ff7a1b0d100>
Did you mean?  repsonse_type):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:22:17 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007ff7a1c973b8>
Did you mean?  repsonse_type):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:22:19 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007ff7a2d7b210>
Did you mean?  repsonse_type):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started HEAD "/crash" for 127.0.0.1 at 2019-04-12 12:22:21 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007ff7a32be718>
Did you mean?  repsonse_type):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:22:21 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007ff7a1a141e0>
Did you mean?  repsonse_type):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:22:21 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007ff7a32242d0>
Did you mean?  repsonse_type):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:22:21 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007ff7a30d4358>
Did you mean?  repsonse_type):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:22:21 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007ff7a1c76370>
Did you mean?  repsonse_type):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/" for 127.0.0.1 at 2019-04-12 12:22:23 +0300
Processing by DummyController#index as HTML

RSpec::Mocks::MockExpectationError ((Airbrake).notify(#<Airbrake::Notice:0x00007ff7a1bf4d98 @config=#<Airbrake::Config:0x00007ff7a1a75580 @proxy={}, @queue...ash=-1996019344128693493>]}>}, @truncator=#<Airbrake::Truncator:0x00007ff7a1bcc550 @max_size=10000>>)
    expected: 0 times with any arguments
    received: 1 time with arguments: (#<Airbrake::Notice:0x00007ff7a1bf4d98 @config=#<Airbrake::Config:0x00007ff7a1a75580 @proxy={}, @queue...ash=-1996019344128693493>]}>}, @truncator=#<Airbrake::Truncator:0x00007ff7a1bcc550 @max_size=10000>>)):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:22:23 +0300
Processing by DummyController#crash as HTML

RSpec::Expectations::ExpectationNotMetError (
expected: "AirbrakeTestError"
     got: "NoMethodError"

(compared using ==)
):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/delayed_job" for 127.0.0.1 at 2019-04-12 12:22:23 +0300
Processing by DummyController#delayed_job as HTML

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007ff7a129c1b0 @config=#<Airbrake::Config:0x00007ff7a1a75580 @proxy={}, @queue...ash=-1996019344128693493>]}>}, @truncator=#<Airbrake::Truncator:0x00007ff7a2a7d770 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,9 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007ff7a129c1b0 @config=#<Airbrake::Config:0x00007ff7a1a75580 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007ff7a1a75508 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007ff7a1a754b8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007ff7a1a75468 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007ff7a1a753f0>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"NoMethodError", :message=>"undefined method `response_type' for #<Airbrake::Rails::Event:0x00007ff7a12b6768>\nDid you mean?  repsonse_type", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/action_controller_route_subscriber.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>47, :function=>"publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"block in publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>25, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>27, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__3957611243099759588__call__3593156202107058928__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<NoMethodError: undefined method `response_type' for #<Airbrake::Rails::Event:0x00007ff7a12b6768>
[0m[32m+Did you mean?  repsonse_type>, :rack_request=>#<ActionDispatch::Request:0x00007ff7a2a6e0e0 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007ff7a12ef540>, "rack.errors"=>#<StringIO:0x00007ff7a12ef720>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007ff7a1c4d128>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007ff7a2df2c48 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007ff7a2df2ba8 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007ff7a2df2a40 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007ff7a2df2b58 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007ff7a2df2b08>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007ff7a2ddb228 @filters=[#<Proc:0x00007ff7a2ddb160@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007ff7a2ddb138@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007ff7a2ddb110@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007ff7a2dda940@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007ff7a2dda918@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"249c4bf0fc39293a593ee264dc345bfb", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007ff7a12ec318 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007ff7a1bbe8b0 @app=#<ActionDispatch::Reloader:0x00007ff7a1bbe8d8 @app=#<ActionDispatch::Callbacks:0x00007ff7a1bbe900 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007ff7a1bbe928 @app=#<Airbrake::Rack::Middleware:0x00007ff7a1bbe950 @app=#<ActiveRecord::QueryCache:0x00007ff7a1bbea40 @app=#<ActionDispatch::Cookies:0x00007ff7a1bbeb08 @app=#<ActionDispatch::Session::CookieStore:0x00007ff7a1bbee28 @secrets=["e4406e06a08ca1ac45c21baca66e7bf37b6b87a9ca7ae1f57347a3d29c82"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007ff7a1bbebd0>, @app=#<ActionDispatch::Flash:0x00007ff7a1bbee50 @app=#<ActionDispatch::ParamsParser:0x00007ff7a1bbef68 @app=#<ActionDispatch::Head:0x00007ff7a1bbef90 @app=#<Rack::ConditionalGet:0x00007ff7a1bbefb8 @app=#<Rack::ETag:0x00007ff7a1bbefe0 @app=#<ActionDispatch::BestStandardsSupport:0x00007ff7a1bbf058 @app=#<Warden::Manager:0x00007ff7a1bbf148 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007ff7a1c4d128>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007ff7a1206840 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=682383903736878255>=>:xml_simple, #<Mime::Type:0x00007ff7a120eea0 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=-3362148669495022889>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"e4406e06a08ca1ac45c21baca66e7bf37b6b87a9ca7ae1f57347a3d29c82", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007ff7a1bbebd0>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007ff7a2d5b0a0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3ffbd0972c80 not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"e4406e06a08ca1ac45c21baca66e7bf37b6b87a9ca7ae1f57347a3d29c82", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007ff7a1bbebd0>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007ff7a12e4d70 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007ff7a12dfe60 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007ff7a12e4d70 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007ff7a12dfd98 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70350768897400 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007ff7a12c5718 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007ff7a12c46d8 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007ff7a12c4480 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007ff7a12c46d8 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007ff7a12bf610 @details_key=nil, @details={:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :png, :jpeg, :gif, :bmp, :tiff, :mpeg, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007ff7a12bf548 @paths=[#<ActionView::FixtureResolver:0x00007ff7a1a04178 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007ff7a11ff4f0 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-1996019344128693493>]}>}, @truncator=#<Airbrake::Truncator:0x00007ff7a2a7d770 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:22:31 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007fa05cb39f30>
Did you mean?  repsonse_type):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:22:31 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007fa05d01d560>
Did you mean?  repsonse_type):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:22:31 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007fa059d22098>
Did you mean?  repsonse_type):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:22:47 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007fa24027c1f0>
Did you mean?  repsonse_type):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:22:54 +0300
Processing by DummyController#crash as HTML

NoMethodError (undefined method `response_type' for #<Airbrake::Rails::Event:0x00007f7f64bd9710>
Did you mean?  repsonse_type):
  lib/airbrake/rails/action_controller_route_subscriber.rb:25:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 12:26:47 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 27.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 12:26:49 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 12:26:51 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 12:26:53 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 12:26:55 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 12:26:57 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:26:59 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.9ms)
Completed 200 OK in 19.8ms (Views: 6.2ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:27:01 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.4ms (Views: 0.8ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:27:03 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.1ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:27:05 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.6ms (Views: 1.1ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:27:07 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.2ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:27:09 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.9ms (Views: 1.2ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:27:11 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 24.5ms (Views: 17.6ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:27:13 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.6ms (Views: 10.1ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:27:15 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.1ms (Views: 9.7ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:27:17 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 18.3ms (Views: 12.6ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:27:19 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.5ms (Views: 9.6ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:27:21 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 17.7ms (Views: 11.9ms | ActiveRecord: 0.0ms)
Started GET "/resque" for 127.0.0.1 at 2019-04-12 12:27:23 +0300
Processing by DummyController#resque as HTML
  Rendered dummy/resque.html.erb within layouts/application (0.2ms)
Completed 200 OK in 2.2ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2019-04-12 12:27:23 +0300
Processing by DummyController#index as HTML
  Rendered dummy/index.html.erb within layouts/application (0.1ms)
Completed 200 OK in 0.8ms (Views: 0.7ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:27:23 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<RSpec::Mocks::MockExpectationError: Airbrake received :notify with unexpected arguments
  expected: (an instance of Airbrake::Notice)
       got: (#<AirbrakeTestError: after_commit>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of Airbrake::Notice"]
[0m[32m+[#<AirbrakeTestError: after_commit>]
[0m>
Completed 500 Internal Server Error in 14.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/delayed_job" for 127.0.0.1 at 2019-04-12 12:27:23 +0300
Processing by DummyController#delayed_job as HTML
Completed 500 Internal Server Error in 11.9ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007fdba8042c80 @config=#<Airbrake::Config:0x00007fdba5c51a60 @proxy={}, @queue...hash=3654552134272164215>]}>}, @truncator=#<Airbrake::Truncator:0x00007fdba67038a0 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007fdba8042c80 @config=#<Airbrake::Config:0x00007fdba5c51a60 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fdba5c519e8 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fdba5c51998 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fdba5c51948 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fdba5c518d0>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>87, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>149, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__4322803641811987159__process_action__1249146540187820727__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__1937788290794731233__call__4311313418367242963__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007fdba6703800 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007fdba69811b8>, "rack.errors"=>#<StringIO:0x00007fdba6981258>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fdba6c11108>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fdba6692bf0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fdba6692b50 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007fdba66929e8 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007fdba6692b00 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fdba6692ab0>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fdba667b338 @filters=[#<Proc:0x00007fdba667b248@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007fdba667b220@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007fdba667b1f8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007fdba667a9b0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007fdba667a988@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"8f87228eea1a97344ff5e6ce96a13dac", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fdba6979788 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007fdba5cab100 @app=#<ActionDispatch::Reloader:0x00007fdba5cab128 @app=#<ActionDispatch::Callbacks:0x00007fdba5cab150 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007fdba5cab178 @app=#<Airbrake::Rack::Middleware:0x00007fdba5cab1a0 @app=#<ActiveRecord::QueryCache:0x00007fdba5cab2b8 @app=#<ActionDispatch::Cookies:0x00007fdba5cab380 @app=#<ActionDispatch::Session::CookieStore:0x00007fdba5cab7b8 @secrets=["67f91c5362ce8b5aee24a58ce4da59791fee153f019cd63aaf561047c3d9"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007fdba5cab4c0>, @app=#<ActionDispatch::Flash:0x00007fdba5cab7e0 @app=#<ActionDispatch::ParamsParser:0x00007fdba5cab8d0 @app=#<ActionDispatch::Head:0x00007fdba5cab8f8 @app=#<Rack::ConditionalGet:0x00007fdba5cab920 @app=#<Rack::ETag:0x00007fdba5cab948 @app=#<ActionDispatch::BestStandardsSupport:0x00007fdba5cab9c0 @app=#<Warden::Manager:0x00007fdba5caba88 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fdba6c11108>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007fdba63f1a18 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=2102132191556082184>=>:xml_simple, #<Mime::Type:0x00007fdba63fade8 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=322966887321450523>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"67f91c5362ce8b5aee24a58ce4da59791fee153f019cd63aaf561047c3d9", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fdba5cab4c0>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007fdba662bd38@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3fedd34b9adc not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"67f91c5362ce8b5aee24a58ce4da59791fee153f019cd63aaf561047c3d9", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fdba5cab4c0>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007fdba6973158 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007fdba69725c8 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fdba6973158 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007fdba6972488 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70290684743980 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fdba6968208 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007fdba824bec8 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007fdba824bea0 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007fdba824bec8 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007fdba824b680 @details_key=nil, @details={:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007fdba824b590 @paths=[#<ActionView::FixtureResolver:0x00007fdba68e26d0 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={#<ActionView::LookupContext::DetailsKey:0x00007fdba65b99e0 @hash=240819148781519661>=>{"notify_airbrake_sync_helper"=>{"dummy"=>{false=>{[]=>[dummy/notify_airbrake_sync_helper.html.erb]}}}, "application"=>{"layouts"=>{false=>{[]=>[layouts/application.html.erb]}}}, "notify_airbrake_helper"=>{"dummy"=>{false=>{[]=>[dummy/notify_airbrake_helper.html.erb]}}}, "resque"=>{"dummy"=>{false=>{[]=>[dummy/resque.html.erb]}}}, "index"=>{"dummy"=>{false=>{[]=>[dummy/index.html.erb]}}}}}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fdba63ea970 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=3654552134272164215>]}>}, @truncator=#<Airbrake::Truncator:0x00007fdba67038a0 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:27:23 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 17.9ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:27:26 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 35.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:27:28 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:27:30 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:27:32 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.1ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:27:34 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:27:36 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started HEAD "/crash" for 127.0.0.1 at 2019-04-12 12:27:38 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 0  in 5.7ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify_request with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"HEAD", :status_code=>500))
       got: ({:end_time=>2019-04-12 12:27:38.324559000 +0300, :method=>{:method=>"HEAD", :response_type=>:html}, :route=>"/crash(.:format)", :start_time=>2019-04-12 12:27:38.318711000 +0300, :status_code=>500})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"HEAD\", :status_code=>500)"]
[0m[32m+[{:end_time=>2019-04-12 12:27:38.324559000 +0300,
[0m[32m+  :method=>{:method=>"HEAD", :response_type=>:html},
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 12:27:38.318711000 +0300,
[0m[32m+  :status_code=>500}]
[0m):
  lib/airbrake/rails/action_controller_notify_subscriber.rb:16:in `block in call'
  lib/airbrake/rails/action_controller_notify_subscriber.rb:15:in `each'
  lib/airbrake/rails/action_controller_notify_subscriber.rb:15:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:27:38 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 7.1ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify_request with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET"))
       got: ({:end_time=>2019-04-12 12:27:38.337727000 +0300, :method=>{:method=>"GET", :response_type=>:html}, :route=>"/crash(.:format)", :start_time=>2019-04-12 12:27:38.330567000 +0300, :status_code=>500})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\")"]
[0m[32m+[{:end_time=>2019-04-12 12:27:38.337727000 +0300,
[0m[32m+  :method=>{:method=>"GET", :response_type=>:html},
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 12:27:38.330567000 +0300,
[0m[32m+  :status_code=>500}]
[0m):
  lib/airbrake/rails/action_controller_notify_subscriber.rb:16:in `block in call'
  lib/airbrake/rails/action_controller_notify_subscriber.rb:15:in `each'
  lib/airbrake/rails/action_controller_notify_subscriber.rb:15:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:27:38 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
RSpec::Mocks::MockExpectationError: Airbrake received :notify_query with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :func=>"tap", :file=>"lib/airbrake/rails/active_record_subscriber.rb", :line=>"anything"))
       got: ({:end_time=>2019-04-12 12:27:38.342774000 +0300, :file=>"lib/airbrake/rails/active_record_subscriber....=>"begin transaction", :route=>"/crash(.:format)", :start_time=>2019-04-12 12:27:38.342750000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,9 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :func=>\"tap\", :file=>\"lib/airbrake/rails/active_record_subscriber.rb\", :line=>\"anything\")"]
[0m[32m+[{:end_time=>2019-04-12 12:27:38.342774000 +0300,
[0m[32m+  :file=>"lib/airbrake/rails/active_record_subscriber.rb",
[0m[32m+  :func=>"tap",
[0m[32m+  :line=>31,
[0m[32m+  :method=>{:method=>"GET", :response_type=>:html},
[0m[32m+  :query=>"begin transaction",
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 12:27:38.342750000 +0300}]
[0m: begin transaction
Completed 500 Internal Server Error in 2.6ms

ActiveRecord::StatementInvalid (RSpec::Mocks::MockExpectationError: Airbrake received :notify_query with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :func=>"tap", :file=>"lib/airbrake/rails/active_record_subscriber.rb", :line=>"anything"))
       got: ({:end_time=>2019-04-12 12:27:38.342774000 +0300, :file=>"lib/airbrake/rails/active_record_subscriber....=>"begin transaction", :route=>"/crash(.:format)", :start_time=>2019-04-12 12:27:38.342750000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,9 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :func=>\"tap\", :file=>\"lib/airbrake/rails/active_record_subscriber.rb\", :line=>\"anything\")"]
[0m[32m+[{:end_time=>2019-04-12 12:27:38.342774000 +0300,
[0m[32m+  :file=>"lib/airbrake/rails/active_record_subscriber.rb",
[0m[32m+  :func=>"tap",
[0m[32m+  :line=>31,
[0m[32m+  :method=>{:method=>"GET", :response_type=>:html},
[0m[32m+  :query=>"begin transaction",
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 12:27:38.342750000 +0300}]
[0m: begin transaction):
  lib/airbrake/rails/active_record_subscriber.rb:15:in `block in call'
  lib/airbrake/rails/active_record_subscriber.rb:14:in `each'
  lib/airbrake/rails/active_record_subscriber.rb:14:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:27:38 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.2ms)[0m  begin transaction
RSpec::Mocks::MockExpectationError: Airbrake received :notify_query with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :func=>nil, :file=>nil, :line=>nil))
       got: ({:end_time=>2019-04-12 12:27:38.350573000 +0300, :file=>nil, :func=>nil, :line=>nil, :method=>{:metho...=>"begin transaction", :route=>"/crash(.:format)", :start_time=>2019-04-12 12:27:38.350396000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,9 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :func=>nil, :file=>nil, :line=>nil)"]
[0m[32m+[{:end_time=>2019-04-12 12:27:38.350573000 +0300,
[0m[32m+  :file=>nil,
[0m[32m+  :func=>nil,
[0m[32m+  :line=>nil,
[0m[32m+  :method=>{:method=>"GET", :response_type=>:html},
[0m[32m+  :query=>"begin transaction",
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 12:27:38.350396000 +0300}]
[0m: begin transaction
Completed 500 Internal Server Error in 1.5ms

ActiveRecord::StatementInvalid (RSpec::Mocks::MockExpectationError: Airbrake received :notify_query with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :func=>nil, :file=>nil, :line=>nil))
       got: ({:end_time=>2019-04-12 12:27:38.350573000 +0300, :file=>nil, :func=>nil, :line=>nil, :method=>{:metho...=>"begin transaction", :route=>"/crash(.:format)", :start_time=>2019-04-12 12:27:38.350396000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,9 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :func=>nil, :file=>nil, :line=>nil)"]
[0m[32m+[{:end_time=>2019-04-12 12:27:38.350573000 +0300,
[0m[32m+  :file=>nil,
[0m[32m+  :func=>nil,
[0m[32m+  :line=>nil,
[0m[32m+  :method=>{:method=>"GET", :response_type=>:html},
[0m[32m+  :query=>"begin transaction",
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 12:27:38.350396000 +0300}]
[0m: begin transaction):
  lib/airbrake/rails/active_record_subscriber.rb:15:in `block in call'
  lib/airbrake/rails/active_record_subscriber.rb:14:in `each'
  lib/airbrake/rails/active_record_subscriber.rb:14:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:27:38 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
Completed 500 Internal Server Error in 1.8ms

ActiveRecord::StatementInvalid (SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 12:27:40 +0300
Processing by DummyController#breakdown as HTML
  [1m[35m (0.2ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
Completed 500 Internal Server Error in 2.5ms

ActiveRecord::StatementInvalid (SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:27:51 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 11.6ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify_request with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET"))
       got: ({:end_time=>2019-04-12 12:27:51.195253000 +0300, :method=>{:method=>"GET", :response_type=>:html}, :route=>"/crash(.:format)", :start_time=>2019-04-12 12:27:51.183585000 +0300, :status_code=>500})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\")"]
[0m[32m+[{:end_time=>2019-04-12 12:27:51.195253000 +0300,
[0m[32m+  :method=>{:method=>"GET", :response_type=>:html},
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 12:27:51.183585000 +0300,
[0m[32m+  :status_code=>500}]
[0m):
  lib/airbrake/rails/action_controller_notify_subscriber.rb:16:in `block in call'
  lib/airbrake/rails/action_controller_notify_subscriber.rb:15:in `each'
  lib/airbrake/rails/action_controller_notify_subscriber.rb:15:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:28:01 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 13.6ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify_request with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET"))
       got: ({:end_time=>2019-04-12 12:28:33.011662000 +0300, :method=>{:method=>"GET", :response_type=>:html}, :route=>"/crash(.:format)", :start_time=>2019-04-12 12:28:32.997938000 +0300, :status_code=>500})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\")"]
[0m[32m+[{:end_time=>2019-04-12 12:28:33.011662000 +0300,
[0m[32m+  :method=>{:method=>"GET", :response_type=>:html},
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 12:28:32.997938000 +0300,
[0m[32m+  :status_code=>500}]
[0m):
  lib/airbrake/rails/action_controller_notify_subscriber.rb:16:in `block in call'
  lib/airbrake/rails/action_controller_notify_subscriber.rb:15:in `each'
  lib/airbrake/rails/action_controller_notify_subscriber.rb:15:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:29:01 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 13.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:29:17 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 11.2ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify_request with unexpected arguments
  expected: (1)
       got: ({:end_time=>2019-04-12 12:29:17.782134000 +0300, :method=>{:method=>"GET", :response_type=>:html}, :route=>"/crash(.:format)", :start_time=>2019-04-12 12:29:17.770828000 +0300, :status_code=>500})):
  lib/airbrake/rails/action_controller_notify_subscriber.rb:16:in `block in call'
  lib/airbrake/rails/action_controller_notify_subscriber.rb:15:in `each'
  lib/airbrake/rails/action_controller_notify_subscriber.rb:15:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:29:56 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 11.3ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify_request with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET"))
       got: ({:end_time=>2019-04-12 12:37:04.198690000 +0300, :method=>{:method=>"GET", :response_type=>:html}, :route=>"/crash(.:format)", :start_time=>2019-04-12 12:29:56.075160000 +0300, :status_code=>500})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\")"]
[0m[32m+[{:end_time=>2019-04-12 12:37:04.198690000 +0300,
[0m[32m+  :method=>{:method=>"GET", :response_type=>:html},
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 12:29:56.075160000 +0300,
[0m[32m+  :status_code=>500}]
[0m):
  lib/airbrake/rails/action_controller_notify_subscriber.rb:17:in `block in call'
  lib/airbrake/rails/action_controller_notify_subscriber.rb:15:in `each'
  lib/airbrake/rails/action_controller_notify_subscriber.rb:15:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:37:08 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 10.9ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 12:37:26 +0300
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.9ms)
Completed 200 OK in 19.1ms (Views: 6.2ms | ActiveRecord: 0.3ms)
Started GET "/resque" for 127.0.0.1 at 2019-04-12 12:37:26 +0300
Processing by DummyController#resque as HTML
  Rendered dummy/resque.html.erb within layouts/application (0.2ms)
Completed 200 OK in 2.0ms (Views: 0.8ms | ActiveRecord: 0.0ms)
Started GET "/delayed_job" for 127.0.0.1 at 2019-04-12 12:37:26 +0300
Processing by DummyController#delayed_job as HTML
Completed 500 Internal Server Error in 14.3ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007fa3dd429770 @config=#<Airbrake::Config:0x00007fa3dc44f1b0 @proxy={}, @queue...hash=2851573977254654179>]}>}, @truncator=#<Airbrake::Truncator:0x00007fa3dc5bf0b8 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007fa3dd429770 @config=#<Airbrake::Config:0x00007fa3dc44f1b0 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fa3dc44f138 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fa3dc44f0e8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fa3dc44f098 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fa3dc44f020>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3">, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>87, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>149, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__2274030383225152802__process_action__670782382596278996__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__2380225349063324518__call__4400971288324222752__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007fa3dc5bf040 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007fa3dc35ccd0>, "rack.errors"=>#<StringIO:0x00007fa3dc35cd70>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fa3dc5eff88>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fa3dd2b9930 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fa3dd2b9890 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007fa3dd2b9728 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007fa3dd2b9840 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fa3dd2b97f0>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fa3dc4ee3a0 @filters=[#<Proc:0x00007fa3dc4ee2d8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007fa3dc4ee2b0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007fa3dc4ee288@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007fa3dc4ed9a0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007fa3dc4ed978@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"836a3e7d01aeda4c247e253b91a9d603", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fa3dc357168 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007fa3db1505c8 @app=#<ActionDispatch::Reloader:0x00007fa3db1505f0 @app=#<ActionDispatch::Callbacks:0x00007fa3db150618 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007fa3db150640 @app=#<Airbrake::Rack::Middleware:0x00007fa3db150668 @app=#<ActiveRecord::QueryCache:0x00007fa3db150758 @app=#<ActionDispatch::Cookies:0x00007fa3db150820 @app=#<ActionDispatch::Session::CookieStore:0x00007fa3db150cf8 @secrets=["942655fc61a856cecad41fd3888ece24db803b49788ba284dd6c416a5141"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007fa3db150910>, @app=#<ActionDispatch::Flash:0x00007fa3db150d20 @app=#<ActionDispatch::ParamsParser:0x00007fa3db150e38 @app=#<ActionDispatch::Head:0x00007fa3db150e88 @app=#<Rack::ConditionalGet:0x00007fa3db150eb0 @app=#<Rack::ETag:0x00007fa3db150ed8 @app=#<ActionDispatch::BestStandardsSupport:0x00007fa3db150f28 @app=#<Warden::Manager:0x00007fa3db151018 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fa3dc5eff88>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007fa3dd2807c0 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=879989970421747413>=>:xml_simple, #<Mime::Type:0x00007fa3dd289ff0 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=1399448541050501770>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"942655fc61a856cecad41fd3888ece24db803b49788ba284dd6c416a5141", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fa3db150910>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007fa3dc524f18@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3fd1ee1ab2b0 not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"942655fc61a856cecad41fd3888ece24db803b49788ba284dd6c416a5141", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fa3db150910>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007fa3dc3562b8 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007fa3dc355db8 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fa3dc3562b8 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007fa3dc355d40 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70170875440680 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fa3dc3458a0 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007fa3dc3456e8 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007fa3dc3456c0 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007fa3dc3456e8 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007fa3dc3450f8 @details_key=nil, @details={:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007fa3dc344e00 @paths=[#<ActionView::FixtureResolver:0x00007fa3dc3b5790 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={#<ActionView::LookupContext::DetailsKey:0x00007fa3dd2f3a18 @hash=-1738390485993175835>=>{"breakdown"=>{"dummy"=>{false=>{[]=>[dummy/breakdown.html.erb]}}}, "application"=>{"layouts"=>{false=>{[]=>[layouts/application.html.erb]}}}, "resque"=>{"dummy"=>{false=>{[]=>[dummy/resque.html.erb]}}}}}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fa3dd27b270 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=2851573977254654179>]}>}, @truncator=#<Airbrake::Truncator:0x00007fa3dc5bf0b8 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 12:37:26 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 12:37:28 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 12:37:30 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 12:37:32 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 12:37:34 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 12:37:36 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:37:38 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.3ms)
Completed 200 OK in 15.7ms (Views: 1.1ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:37:40 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.2ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:37:42 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.8ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:37:45 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 18.0ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:37:47 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.3ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:37:49 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.2ms (Views: 1.1ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:37:51 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.6ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:37:53 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.2ms (Views: 9.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:37:55 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.5ms (Views: 11.4ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:37:57 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.1ms (Views: 9.7ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:37:59 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.6ms (Views: 11.1ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:38:01 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.6ms (Views: 9.8ms | ActiveRecord: 0.0ms)
Started HEAD "/crash" for 127.0.0.1 at 2019-04-12 12:38:03 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 0  in 5.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:38:03 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 5.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:38:03 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 26.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:38:05 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 24.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:38:07 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.9ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:38:09 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 10.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:38:11 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:38:13 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 10.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:38:15 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 17.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:38:17 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 17.9ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/" for 127.0.0.1 at 2019-04-12 12:38:19 +0300
Processing by DummyController#index as HTML
  Rendered dummy/index.html.erb within layouts/application (0.2ms)
Completed 200 OK in 1.2ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:38:19 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<RSpec::Mocks::MockExpectationError: Airbrake received :notify with unexpected arguments
  expected: (an instance of Airbrake::Notice)
       got: (#<AirbrakeTestError: after_commit>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of Airbrake::Notice"]
[0m[32m+[#<AirbrakeTestError: after_commit>]
[0m>
Completed 500 Internal Server Error in 5.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:38:19 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
RSpec::Mocks::MockExpectationError: Airbrake received :notify_query with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :func=>"tap", :file=>"lib/airbrake/rails/active_record_subscriber.rb", :line=>"anything"))
       got: ({:end_time=>2019-04-12 12:38:19.643730000 +0300, :file=>"lib/airbrake/rails/active_record_subscriber....=>"begin transaction", :route=>"/crash(.:format)", :start_time=>2019-04-12 12:38:19.643696000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,9 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :func=>\"tap\", :file=>\"lib/airbrake/rails/active_record_subscriber.rb\", :line=>\"anything\")"]
[0m[32m+[{:end_time=>2019-04-12 12:38:19.643730000 +0300,
[0m[32m+  :file=>"lib/airbrake/rails/active_record_subscriber.rb",
[0m[32m+  :func=>"tap",
[0m[32m+  :line=>31,
[0m[32m+  :method=>{:method=>"GET", :response_type=>:html},
[0m[32m+  :query=>"begin transaction",
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 12:38:19.643696000 +0300}]
[0m: begin transaction
Completed 500 Internal Server Error in 3.3ms

ActiveRecord::StatementInvalid (RSpec::Mocks::MockExpectationError: Airbrake received :notify_query with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :func=>"tap", :file=>"lib/airbrake/rails/active_record_subscriber.rb", :line=>"anything"))
       got: ({:end_time=>2019-04-12 12:38:19.643730000 +0300, :file=>"lib/airbrake/rails/active_record_subscriber....=>"begin transaction", :route=>"/crash(.:format)", :start_time=>2019-04-12 12:38:19.643696000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,9 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :func=>\"tap\", :file=>\"lib/airbrake/rails/active_record_subscriber.rb\", :line=>\"anything\")"]
[0m[32m+[{:end_time=>2019-04-12 12:38:19.643730000 +0300,
[0m[32m+  :file=>"lib/airbrake/rails/active_record_subscriber.rb",
[0m[32m+  :func=>"tap",
[0m[32m+  :line=>31,
[0m[32m+  :method=>{:method=>"GET", :response_type=>:html},
[0m[32m+  :query=>"begin transaction",
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 12:38:19.643696000 +0300}]
[0m: begin transaction):
  lib/airbrake/rails/active_record_subscriber.rb:15:in `block in call'
  lib/airbrake/rails/active_record_subscriber.rb:14:in `each'
  lib/airbrake/rails/active_record_subscriber.rb:14:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:38:19 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
RSpec::Mocks::MockExpectationError: Airbrake received :notify_query with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :func=>nil, :file=>nil, :line=>nil))
       got: ({:end_time=>2019-04-12 12:38:19.651508000 +0300, :file=>nil, :func=>nil, :line=>nil, :method=>{:metho...=>"begin transaction", :route=>"/crash(.:format)", :start_time=>2019-04-12 12:38:19.651310000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,9 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :func=>nil, :file=>nil, :line=>nil)"]
[0m[32m+[{:end_time=>2019-04-12 12:38:19.651508000 +0300,
[0m[32m+  :file=>nil,
[0m[32m+  :func=>nil,
[0m[32m+  :line=>nil,
[0m[32m+  :method=>{:method=>"GET", :response_type=>:html},
[0m[32m+  :query=>"begin transaction",
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 12:38:19.651310000 +0300}]
[0m: begin transaction
Completed 500 Internal Server Error in 1.6ms

ActiveRecord::StatementInvalid (RSpec::Mocks::MockExpectationError: Airbrake received :notify_query with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :func=>nil, :file=>nil, :line=>nil))
       got: ({:end_time=>2019-04-12 12:38:19.651508000 +0300, :file=>nil, :func=>nil, :line=>nil, :method=>{:metho...=>"begin transaction", :route=>"/crash(.:format)", :start_time=>2019-04-12 12:38:19.651310000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,9 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :func=>nil, :file=>nil, :line=>nil)"]
[0m[32m+[{:end_time=>2019-04-12 12:38:19.651508000 +0300,
[0m[32m+  :file=>nil,
[0m[32m+  :func=>nil,
[0m[32m+  :line=>nil,
[0m[32m+  :method=>{:method=>"GET", :response_type=>:html},
[0m[32m+  :query=>"begin transaction",
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 12:38:19.651310000 +0300}]
[0m: begin transaction):
  lib/airbrake/rails/active_record_subscriber.rb:15:in `block in call'
  lib/airbrake/rails/active_record_subscriber.rb:14:in `each'
  lib/airbrake/rails/active_record_subscriber.rb:14:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:41:04 +0300
Processing by DummyController#crash as HTML
RSpec::Mocks::MockExpectationError: Airbrake received :notify_query with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :func=>"tap", :file=>"lib/airbrake/rails/active_record_subscriber.rb", :line=>"anything"))
       got: ({:end_time=>2019-04-12 12:41:04.423416000 +0300, :file=>"lib/airbrake/rails/active_record_subscriber....able_info(\"books\")", :route=>"/crash(.:format)", :start_time=>2019-04-12 12:41:04.423349000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,9 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :func=>\"tap\", :file=>\"lib/airbrake/rails/active_record_subscriber.rb\", :line=>\"anything\")"]
[0m[32m+[{:end_time=>2019-04-12 12:41:04.423416000 +0300,
[0m[32m+  :file=>"lib/airbrake/rails/active_record_subscriber.rb",
[0m[32m+  :func=>"tap",
[0m[32m+  :line=>31,
[0m[32m+  :method=>{:method=>"GET", :response_type=>:html},
[0m[32m+  :query=>"PRAGMA table_info(\"books\")",
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 12:41:04.423349000 +0300}]
[0m: PRAGMA table_info("books")
Completed 500 Internal Server Error in 10.7ms

ActiveRecord::StatementInvalid (RSpec::Mocks::MockExpectationError: Airbrake received :notify_query with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :func=>"tap", :file=>"lib/airbrake/rails/active_record_subscriber.rb", :line=>"anything"))
       got: ({:end_time=>2019-04-12 12:41:04.423416000 +0300, :file=>"lib/airbrake/rails/active_record_subscriber....able_info(\"books\")", :route=>"/crash(.:format)", :start_time=>2019-04-12 12:41:04.423349000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,9 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :func=>\"tap\", :file=>\"lib/airbrake/rails/active_record_subscriber.rb\", :line=>\"anything\")"]
[0m[32m+[{:end_time=>2019-04-12 12:41:04.423416000 +0300,
[0m[32m+  :file=>"lib/airbrake/rails/active_record_subscriber.rb",
[0m[32m+  :func=>"tap",
[0m[32m+  :line=>31,
[0m[32m+  :method=>{:method=>"GET", :response_type=>:html},
[0m[32m+  :query=>"PRAGMA table_info(\"books\")",
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 12:41:04.423349000 +0300}]
[0m: PRAGMA table_info("books")):
  lib/airbrake/rails/active_record_subscriber.rb:15:in `block in call'
  lib/airbrake/rails/active_record_subscriber.rb:14:in `each'
  lib/airbrake/rails/active_record_subscriber.rb:14:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:42:02 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 11.9ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:42:08 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 24.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:42:10 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.9ms)
Completed 200 OK in 18.9ms (Views: 13.7ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:42:12 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.7ms (Views: 9.6ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:42:14 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 17.2ms (Views: 11.5ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:42:16 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.0ms (Views: 8.6ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:42:18 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.2ms (Views: 9.8ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:42:20 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 17.5ms (Views: 11.3ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:42:22 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.3ms)
Completed 200 OK in 14.4ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:42:24 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.2ms (Views: 1.1ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:42:26 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.5ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:42:28 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.1ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:42:30 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.1ms (Views: 1.1ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 12:42:32 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.4ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 12:42:34 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.1ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 12:42:36 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 12:42:38 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 12:42:40 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 12:42:42 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 23.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 12:42:44 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.9ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/resque" for 127.0.0.1 at 2019-04-12 12:42:46 +0300
Processing by DummyController#resque as HTML
  Rendered dummy/resque.html.erb within layouts/application (0.2ms)
Completed 200 OK in 2.3ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/delayed_job" for 127.0.0.1 at 2019-04-12 12:42:46 +0300
Processing by DummyController#delayed_job as HTML
Completed 500 Internal Server Error in 14.2ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007fe4856dc498 @config=#<Airbrake::Config:0x00007fe486a65848 @proxy={}, @queue...ash=-4060638456430657257>]}>}, @truncator=#<Airbrake::Truncator:0x00007fe4856b65e0 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007fe4856dc498 @config=#<Airbrake::Config:0x00007fe486a65848 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fe486a657d0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fe486a65780 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fe486a65730 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fe486a656b8>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>87, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>149, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__693791909332148666__process_action__796473213163627253__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__1028021682486214838__call__4083278094400887383__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007fe4856b65b8 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007fe4869777d8>, "rack.errors"=>#<StringIO:0x00007fe4869778c8>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fe485b82420>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fe485daa9a0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fe485daa900 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007fe485daa798 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007fe485daa8b0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fe485daa860>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fe48563e310 @filters=[#<Proc:0x00007fe48563e248@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007fe48563e220@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007fe48563e1f8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007fe48563da00@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007fe48563d9d8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"34daff3cf87ba651e3afc5ee68941cd3", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fe48696fa60 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007fe4855a50e8 @app=#<ActionDispatch::Reloader:0x00007fe4855a5110 @app=#<ActionDispatch::Callbacks:0x00007fe4855a5138 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007fe4855a5160 @app=#<Airbrake::Rack::Middleware:0x00007fe4855a5188 @app=#<ActiveRecord::QueryCache:0x00007fe4855a5278 @app=#<ActionDispatch::Cookies:0x00007fe4855a5340 @app=#<ActionDispatch::Session::CookieStore:0x00007fe4855a5688 @secrets=["e5c9c23e790154202799123a35ef37bf7e77fab506601a157a1ea3111354"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007fe4855a5430>, @app=#<ActionDispatch::Flash:0x00007fe4855a56b0 @app=#<ActionDispatch::ParamsParser:0x00007fe4855a57c8 @app=#<ActionDispatch::Head:0x00007fe4855a57f0 @app=#<Rack::ConditionalGet:0x00007fe4855a5840 @app=#<Rack::ETag:0x00007fe4855a5868 @app=#<ActionDispatch::BestStandardsSupport:0x00007fe4855a58b8 @app=#<Warden::Manager:0x00007fe4855a59a8 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fe485b82420>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007fe485325ac0 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=-2394885562960309320>=>:xml_simple, #<Mime::Type:0x00007fe485326a38 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=-4400729056284985766>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"e5c9c23e790154202799123a35ef37bf7e77fab506601a157a1ea3111354", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fe4855a5430>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007fe485dba2d8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3ff2434b68f4 not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"e5c9c23e790154202799123a35ef37bf7e77fab506601a157a1ea3111354", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fe4855a5430>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007fe48696cdd8 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007fe48696c720 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fe48696cdd8 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007fe48696c658 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70309743649380 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fe48695f3e0 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007fe48695edf0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007fe48695eda0 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007fe48695edf0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007fe48695e788 @details_key=nil, @details={:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007fe48695e710 @paths=[#<ActionView::FixtureResolver:0x00007fe48696dbc0 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={#<ActionView::LookupContext::DetailsKey:0x00007fe48557c0d0 @hash=-3751345004009833759>=>{"notify_airbrake_helper"=>{"dummy"=>{false=>{[]=>[dummy/notify_airbrake_helper.html.erb]}}}, "application"=>{"layouts"=>{false=>{[]=>[layouts/application.html.erb]}}}, "notify_airbrake_sync_helper"=>{"dummy"=>{false=>{[]=>[dummy/notify_airbrake_sync_helper.html.erb]}}}, "resque"=>{"dummy"=>{false=>{[]=>[dummy/resque.html.erb]}}}}}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fe4853141f8 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-4060638456430657257>]}>}, @truncator=#<Airbrake::Truncator:0x00007fe4856b65e0 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 12:42:46 +0300
Processing by DummyController#breakdown as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "breakdown"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT "books".* FROM "books" [0m
  Rendered dummy/breakdown.html.erb within layouts/application (0.2ms)
Completed 200 OK in 8.7ms (Views: 0.9ms | ActiveRecord: 0.2ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:42:46 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:42:48 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 14.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started HEAD "/crash" for 127.0.0.1 at 2019-04-12 12:42:48 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 0  in 5.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/" for 127.0.0.1 at 2019-04-12 12:42:48 +0300
Processing by DummyController#index as HTML
  Rendered dummy/index.html.erb within layouts/application (0.1ms)
Completed 200 OK in 0.9ms (Views: 0.8ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:42:48 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<RSpec::Mocks::MockExpectationError: Airbrake received :notify with unexpected arguments
  expected: (an instance of Airbrake::Notice)
       got: (#<AirbrakeTestError: after_commit>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of Airbrake::Notice"]
[0m[32m+[#<AirbrakeTestError: after_commit>]
[0m>
Completed 500 Internal Server Error in 5.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:42:48 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.1ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 5.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:42:48 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 1.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:42:48 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:42:51 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 10.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:42:53 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:42:55 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.9ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:42:57 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 12:42:59 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 13:55:52 +0300
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.1ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.9ms)
Completed 200 OK in 19.5ms (Views: 5.8ms | ActiveRecord: 0.3ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 13:56:03 +0300
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.9ms)
Completed 200 OK in 20.9ms (Views: 6.0ms | ActiveRecord: 0.4ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:response_type=>:htmll))
       got: ({:groups=>{:db=>0.366, :view=>5.982999995467253}, :method=>"GET", :response_type=>:html, :route=>"/breakdown(.:format)", :start_time=>2019-04-12 13:56:03.168428000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:response_type=>:htmll)"]
[0m[32m+[{:groups=>{:db=>0.366, :view=>5.982999995467253},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>:html,
[0m[32m+  :route=>"/breakdown(.:format)",
[0m[32m+  :start_time=>2019-04-12 13:56:03.168428000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:15:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:12:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:12:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 13:59:46 +0300
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.1ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.9ms)
Completed 200 OK in 23316.8ms (Views: 5.9ms | ActiveRecord: 0.4ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 14:00:13 +0300
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.1ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.9ms)
Completed 200 OK in 4521.0ms (Views: 6.2ms | ActiveRecord: 0.4ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 14:03:23 +0300
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.9ms)
Completed 200 OK in 18.3ms (Views: 5.3ms | ActiveRecord: 0.3ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 14:03:36 +0300
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.8ms)
Completed 200 OK in 19.4ms (Views: 5.5ms | ActiveRecord: 0.3ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (0.8ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 14:04:20 +0300
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.9ms)
Completed 200 OK in 19.0ms (Views: 5.6ms | ActiveRecord: 0.4ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 14:04:29 +0300
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (1.0ms)
Completed 200 OK in 20.4ms (Views: 6.4ms | ActiveRecord: 0.4ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/test" for 127.0.0.1 at 2019-04-12 14:05:04 +0300
Processing by DummyController#test as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/test within layouts/application (1.2ms)
Completed 200 OK in 5302.0ms (Views: 6.4ms | ActiveRecord: 0.5ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (0.8ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/test" for 127.0.0.1 at 2019-04-12 14:07:11 +0300
Processing by DummyController#test as HTML
Completed 500 Internal Server Error in 0.3ms

ArgumentError (too few arguments):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.3ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/test" for 127.0.0.1 at 2019-04-12 14:07:21 +0300
Processing by DummyController#test as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
Completed 500 Internal Server Error in 13.0ms

ArgumentError (too few arguments):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/test" for 127.0.0.1 at 2019-04-12 14:07:40 +0300
Processing by DummyController#test as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
Completed 500 Internal Server Error in 20.6ms

ArgumentError (too few arguments):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/test" for 127.0.0.1 at 2019-04-12 14:08:19 +0300
Processing by DummyController#test as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.1ms)[0m  SELECT "books".* FROM "books" 
Completed 406 Not Acceptable in 13.3ms (ActiveRecord: 0.4ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/test" for 127.0.0.1 at 2019-04-12 14:08:36 +0300
Processing by DummyController#test as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
Completed 406 Not Acceptable in 13.3ms (ActiveRecord: 0.3ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.4ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/test" for 127.0.0.1 at 2019-04-12 14:09:08 +0300
Processing by DummyController#test as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.1ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/test within layouts/application (0.9ms)
Completed 200 OK in 18.8ms (Views: 5.7ms | ActiveRecord: 0.3ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/test" for 127.0.0.1 at 2019-04-12 14:09:19 +0300
Processing by DummyController#test as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/test within layouts/application (0.8ms)
Completed 200 OK in 17.6ms (Views: 5.2ms | ActiveRecord: 0.3ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (0.8ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/test.all" for 127.0.0.1 at 2019-04-12 14:09:40 +0300
Processing by DummyController#test as 
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
Completed 406 Not Acceptable in 13.0ms (ActiveRecord: 0.3ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:response_type=>:html))
       got: ({:groups=>{:db=>0.33}, :method=>"GET", :response_type=>nil, :route=>"/test(.:format)", :start_time=>2019-04-12 14:09:40.228098000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:response_type=>:html)"]
[0m[32m+[{:groups=>{:db=>0.33},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>nil,
[0m[32m+  :route=>"/test(.:format)",
[0m[32m+  :start_time=>2019-04-12 14:09:40.228098000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:15:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:12:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:12:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/test.all" for 127.0.0.1 at 2019-04-12 14:09:56 +0300
Processing by DummyController#test as 
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/test within layouts/application (0.9ms)
Completed 200 OK in 18.3ms (Views: 5.4ms | ActiveRecord: 0.3ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:response_type=>:html))
       got: ({:groups=>{:db=>0.337, :view=>5.360999988624826}, :method=>"GET", :response_type=>nil, :route=>"/test(.:format)", :start_time=>2019-04-12 14:09:56.908948000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:response_type=>:html)"]
[0m[32m+[{:groups=>{:db=>0.337, :view=>5.360999988624826},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>nil,
[0m[32m+  :route=>"/test(.:format)",
[0m[32m+  :start_time=>2019-04-12 14:09:56.908948000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:15:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:12:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:12:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/test.xyz" for 127.0.0.1 at 2019-04-12 14:11:16 +0300
Processing by DummyController#test as 
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/test within layouts/application (0.9ms)
Completed 200 OK in 18.8ms (Views: 5.5ms | ActiveRecord: 0.4ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:response_type=>:html))
       got: ({:groups=>{:db=>0.385, :view=>5.531000002520159}, :method=>"GET", :response_type=>nil, :route=>"/test(.:format)", :start_time=>2019-04-12 14:11:16.146712000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:response_type=>:html)"]
[0m[32m+[{:groups=>{:db=>0.385, :view=>5.531000002520159},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>nil,
[0m[32m+  :route=>"/test(.:format)",
[0m[32m+  :start_time=>2019-04-12 14:11:16.146712000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:15:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:12:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:12:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/test.xyz" for 127.0.0.1 at 2019-04-12 14:11:31 +0300
Processing by DummyController#test as 
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
Completed 406 Not Acceptable in 13.4ms (ActiveRecord: 0.4ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:response_type=>:html))
       got: ({:groups=>{:db=>0.387}, :method=>"GET", :response_type=>nil, :route=>"/test(.:format)", :start_time=>2019-04-12 14:11:31.347049000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:response_type=>:html)"]
[0m[32m+[{:groups=>{:db=>0.387},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>nil,
[0m[32m+  :route=>"/test(.:format)",
[0m[32m+  :start_time=>2019-04-12 14:11:31.347049000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:15:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:12:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:12:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/test.xyz" for 127.0.0.1 at 2019-04-12 14:11:49 +0300
Processing by DummyController#test as 
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
Completed 406 Not Acceptable in 13.3ms (ActiveRecord: 0.4ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:response_type=>:html))
       got: ({:groups=>{:db=>0.359}, :method=>"GET", :response_type=>nil, :route=>"/test(.:format)", :start_time=>2019-04-12 14:11:49.613384000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:response_type=>:html)"]
[0m[32m+[{:groups=>{:db=>0.359},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>nil,
[0m[32m+  :route=>"/test(.:format)",
[0m[32m+  :start_time=>2019-04-12 14:11:49.613384000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:15:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:12:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:12:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/test.xyz" for 127.0.0.1 at 2019-04-12 14:12:00 +0300
Processing by DummyController#test as 
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/test within layouts/application (0.8ms)
Completed 200 OK in 19.0ms (Views: 5.6ms | ActiveRecord: 0.3ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:response_type=>:html))
       got: ({:groups=>{:db=>0.33599999999999997, :view=>5.624000012176111}, :method=>"GET", :response_type=>nil, :route=>"/test(.:format)", :start_time=>2019-04-12 14:12:00.365714000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:response_type=>:html)"]
[0m[32m+[{:groups=>{:db=>0.33599999999999997, :view=>5.624000012176111},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>nil,
[0m[32m+  :route=>"/test(.:format)",
[0m[32m+  :start_time=>2019-04-12 14:12:00.365714000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:15:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:12:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:12:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/test.xyz" for 127.0.0.1 at 2019-04-12 14:12:16 +0300
Processing by DummyController#test as 
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
Completed 406 Not Acceptable in 13.2ms (ActiveRecord: 0.3ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:response_type=>:html))
       got: ({:groups=>{:db=>0.319}, :method=>"GET", :response_type=>nil, :route=>"/test(.:format)", :start_time=>2019-04-12 14:12:16.837358000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:response_type=>:html)"]
[0m[32m+[{:groups=>{:db=>0.319},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>nil,
[0m[32m+  :route=>"/test(.:format)",
[0m[32m+  :start_time=>2019-04-12 14:12:16.837358000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:15:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:12:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:12:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/test.xyz" for 127.0.0.1 at 2019-04-12 14:13:47 +0300
Processing by DummyController#test as 
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
Completed 500 Internal Server Error in 17.6ms

TypeError (no implicit conversion of nil into String):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/test" for 127.0.0.1 at 2019-04-12 14:13:56 +0300
Processing by DummyController#test as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
Completed 500 Internal Server Error in 16.9ms

TypeError (no implicit conversion of nil into String):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/test?foo=111" for 127.0.0.1 at 2019-04-12 14:18:42 +0300
Processing by DummyController#test as HTML
  Parameters: {"foo"=>"111"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
Completed 500 Internal Server Error in 26.9ms

TypeError (no implicit conversion of nil into String):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.3ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.4ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/test?format=*%2F*" for 127.0.0.1 at 2019-04-12 14:19:01 +0300
Processing by DummyController#test as 
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
Completed 500 Internal Server Error in 19.9ms

TypeError (no implicit conversion of nil into String):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/test?format=*%2F*" for 127.0.0.1 at 2019-04-12 14:20:40 +0300
Processing by DummyController#test as 
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.1ms)[0m  SELECT "books".* FROM "books" 
Completed 500 Internal Server Error in 18.3ms

TypeError (no implicit conversion of nil into String):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/test" for 127.0.0.1 at 2019-04-12 14:21:08 +0300
Processing by DummyController#test as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
Completed 500 Internal Server Error in 18.5ms

TypeError (no implicit conversion of nil into String):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/test.js" for 127.0.0.1 at 2019-04-12 14:21:22 +0300
Processing by DummyController#test as JS
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
Completed 500 Internal Server Error in 18.2ms

TypeError (no implicit conversion of nil into String):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.3ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.4ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/test.*" for 127.0.0.1 at 2019-04-12 14:21:34 +0300
Processing by DummyController#test as 
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.1ms)[0m  SELECT "books".* FROM "books" 
Completed 500 Internal Server Error in 18.4ms

TypeError (no implicit conversion of nil into String):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/test.all" for 127.0.0.1 at 2019-04-12 14:21:49 +0300
Processing by DummyController#test as 
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
Completed 500 Internal Server Error in 17.5ms

TypeError (no implicit conversion of nil into String):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/test" for 127.0.0.1 at 2019-04-12 14:22:13 +0300
Processing by DummyController#test as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/test within layouts/application (0.9ms)
Completed 200 OK in 20.9ms (Views: 5.5ms | ActiveRecord: 0.4ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (0.8ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/test" for 127.0.0.1 at 2019-04-12 14:29:15 +0300
Processing by DummyController#test as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/test within layouts/application (0.9ms)
Completed 200 OK in 18.3ms (Views: 5.8ms | ActiveRecord: 0.3ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/test" for 127.0.0.1 at 2019-04-12 14:29:51 +0300
Processing by DummyController#test as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/test within layouts/application (1.0ms)
Completed 200 OK in 11639.4ms (Views: 6.4ms | ActiveRecord: 0.5ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/test" for 127.0.0.1 at 2019-04-12 14:31:06 +0300
Processing by DummyController#test as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/test within layouts/application (0.9ms)
Completed 200 OK in 5095.2ms (Views: 5.9ms | ActiveRecord: 0.4ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/test" for 127.0.0.1 at 2019-04-12 14:35:21 +0300
Processing by DummyController#test as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/test within layouts/application (0.9ms)
Completed 200 OK in 72089.0ms (Views: 6.3ms | ActiveRecord: 0.4ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (0.8ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/test" for 127.0.0.1 at 2019-04-12 14:36:38 +0300
Processing by DummyController#test as */*
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.1ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/test within layouts/application (1.2ms)
Completed 200 OK in 6117.5ms (Views: 6.9ms | ActiveRecord: 0.5ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (1.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/test" for 127.0.0.1 at 2019-04-12 14:37:01 +0300
Processing by DummyController#test as */*
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/test within layouts/application (1.0ms)
Completed 200 OK in 9800.5ms (Views: 6.0ms | ActiveRecord: 0.5ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/test" for 127.0.0.1 at 2019-04-12 14:37:15 +0300
Processing by DummyController#test as */*
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.1ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/test within layouts/application (0.9ms)
Completed 200 OK in 18.7ms (Views: 5.6ms | ActiveRecord: 0.4ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 14:38:38 +0300
Processing by DummyController#breakdown as */*
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.9ms)
Completed 200 OK in 19.1ms (Views: 5.6ms | ActiveRecord: 0.3ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 14:38:47 +0300
Processing by DummyController#breakdown as */*
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.9ms)
Completed 200 OK in 19.4ms (Views: 5.7ms | ActiveRecord: 0.4ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 14:39:00 +0300
Processing by DummyController#breakdown as */*
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (1.0ms)
Completed 200 OK in 20.3ms (Views: 7.1ms | ActiveRecord: 0.4ms)

NameError (undefined local variable or method `payload' for #<Airbrake::Rails::ActionControllerPerformanceBreakdownSubscriber:0x00007f7f5abd72d0>):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:10:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:9:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:9:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 14:44:56 +0300
Processing by DummyController#breakdown as */*
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.1ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.9ms)
Completed 200 OK in 21.4ms (Views: 6.0ms | ActiveRecord: 0.4ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 14:45:01 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 10.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 14:45:01 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 1.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 14:45:01 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 5.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started HEAD "/crash" for 127.0.0.1 at 2019-04-12 14:45:01 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 0  in 6.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 14:45:01 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 14:45:03 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 14:45:05 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 14:45:07 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.1ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 14:45:09 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.9ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 14:45:11 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 14:45:13 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.9ms)
Completed 200 OK in 22.4ms (Views: 5.7ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 14:45:15 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.7ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 14:45:17 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.4ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 14:45:19 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.3ms)
Completed 200 OK in 17.4ms (Views: 1.3ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 14:45:21 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.9ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 14:45:23 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 18.0ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 14:45:25 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.0ms (Views: 9.1ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 14:45:27 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.0ms (Views: 9.6ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 14:45:29 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.2ms (Views: 10.7ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 14:45:31 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.8ms (Views: 0.8ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 14:45:33 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.8ms (Views: 10.1ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 14:45:35 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 17.4ms (Views: 9.5ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-12 14:45:37 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<RSpec::Mocks::MockExpectationError: Airbrake received :notify with unexpected arguments
  expected: (an instance of Airbrake::Notice)
       got: (#<AirbrakeTestError: after_commit>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of Airbrake::Notice"]
[0m[32m+[#<AirbrakeTestError: after_commit>]
[0m>
Completed 500 Internal Server Error in 15.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/" for 127.0.0.1 at 2019-04-12 14:45:37 +0300
Processing by DummyController#index as HTML
  Rendered dummy/index.html.erb within layouts/application (0.2ms)
Completed 200 OK in 1.0ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 14:45:37 +0300
Processing by DummyController#breakdown as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "breakdown"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT "books".* FROM "books" [0m
  Rendered dummy/breakdown.html.erb within layouts/application (0.1ms)
Completed 200 OK in 9.8ms (Views: 0.8ms | ActiveRecord: 0.1ms)
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 14:45:37 +0300
Processing by DummyController#breakdown as */*
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "breakdown"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
  [1m[36mBook Load (0.0ms)[0m  [1mSELECT "books".* FROM "books" [0m
  Rendered dummy/breakdown.html.erb within layouts/application (0.2ms)
Completed 200 OK in 7.6ms (Views: 1.0ms | ActiveRecord: 0.2ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-12 14:45:37 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 14:45:39 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 14:45:41 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 37.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 14:45:43 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 14:45:45 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 14:45:47 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/resque" for 127.0.0.1 at 2019-04-12 14:45:50 +0300
Processing by DummyController#resque as HTML
  Rendered dummy/resque.html.erb within layouts/application (0.2ms)
Completed 200 OK in 2.3ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/delayed_job" for 127.0.0.1 at 2019-04-12 14:45:50 +0300
Processing by DummyController#delayed_job as HTML
Completed 500 Internal Server Error in 11.8ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007f89b058bbc8 @config=#<Airbrake::Config:0x00007f89b32a15b8 @proxy={}, @queue...ash=-4465626250149951912>]}>}, @truncator=#<Airbrake::Truncator:0x00007f89b1865a78 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007f89b058bbc8 @config=#<Airbrake::Config:0x00007f89b32a15b8 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007f89b32a1540 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007f89b32a14f0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007f89b32a14a0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f89b32a1428>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>87, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>149, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__3296179035759761699__process_action__3966476058481550964__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__1277010311052911723__call__907320541725510131__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007f89b1865a00 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007f89b070c858>, "rack.errors"=>#<StringIO:0x00007f89b070c8f8>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007f89b38175d8>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007f89b07e5428 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007f89b07e5388 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007f89b07e5220 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007f89b07e5338 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f89b07e52e8>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007f89b33c9dc8 @filters=[#<Proc:0x00007f89b33c9cd8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007f89b33c9cb0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007f89b33c9c88@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007f89b33c9468@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007f89b33c9440@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"751bd5a0d832d158e04b71fa26b0cdf2", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007f89b0707588 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007f89b07ecd68 @app=#<ActionDispatch::Reloader:0x00007f89b07ecdb8 @app=#<ActionDispatch::Callbacks:0x00007f89b07ecde0 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007f89b07ece08 @app=#<Airbrake::Rack::Middleware:0x00007f89b07ece30 @app=#<ActiveRecord::QueryCache:0x00007f89b07ecf70 @app=#<ActionDispatch::Cookies:0x00007f89b07ed060 @app=#<ActionDispatch::Session::CookieStore:0x00007f89b07ed3d0 @secrets=["328badc03c0074dc6e4b8718ec4fd946dd419fe69133f1946b7d6b375127"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007f89b07ed128>, @app=#<ActionDispatch::Flash:0x00007f89b07ed3f8 @app=#<ActionDispatch::ParamsParser:0x00007f89b07ed4e8 @app=#<ActionDispatch::Head:0x00007f89b07ed510 @app=#<Rack::ConditionalGet:0x00007f89b07ed538 @app=#<Rack::ETag:0x00007f89b07ed560 @app=#<ActionDispatch::BestStandardsSupport:0x00007f89b07ed5b0 @app=#<Warden::Manager:0x00007f89b07ed678 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007f89b38175d8>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007f89b0937628 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=-3356049502883250147>=>:xml_simple, #<Mime::Type:0x00007f89b0935558 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=4106798148347463931>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"328badc03c0074dc6e4b8718ec4fd946dd419fe69133f1946b7d6b375127", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007f89b07ed128>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007f89b6098a70@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3fc4d8383510 not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"328badc03c0074dc6e4b8718ec4fd946dd419fe69133f1946b7d6b375127", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007f89b07ed128>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007f89b0706598 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007f89b0705bc0 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007f89b0706598 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007f89b0705b48 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70114673700120 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007f89b06fce08 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007f89b06fccc8 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007f89b06fcca0 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007f89b06fccc8 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007f89b06fc980 @details_key=nil, @details={:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007f89b06fc8e0 @paths=[#<ActionView::FixtureResolver:0x00007f89b09cd830 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={#<ActionView::LookupContext::DetailsKey:0x00007f89b0a2d910 @hash=-1187229077718413089>=>{"notify_airbrake_sync_helper"=>{"dummy"=>{false=>{[]=>[dummy/notify_airbrake_sync_helper.html.erb]}}}, "application"=>{"layouts"=>{false=>{[]=>[layouts/application.html.erb]}}}, "notify_airbrake_helper"=>{"dummy"=>{false=>{[]=>[dummy/notify_airbrake_helper.html.erb]}}}, "index"=>{"dummy"=>{false=>{[]=>[dummy/index.html.erb]}}}, "breakdown"=>{"dummy"=>{false=>{[]=>[dummy/breakdown.html.erb]}}}, "resque"=>{"dummy"=>{false=>{[]=>[dummy/resque.html.erb]}}}}, #<ActionView::LookupContext::DetailsKey:0x00007f89b1a9d818 @hash=4266227809563575385>=>{"breakdown"=>{"dummy"=>{false=>{[]=>[dummy/breakdown.html.erb]}}}}}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007f89b09278b8 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-4465626250149951912>]}>}, @truncator=#<Airbrake::Truncator:0x00007f89b1865a78 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 14:45:50 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 17.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 14:45:52 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.4ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 14:46:58 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.8ms)
Completed 200 OK in 19.7ms (Views: 5.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 14:47:00 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.3ms)
Completed 200 OK in 16.3ms (Views: 1.5ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 14:47:02 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.5ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 14:47:04 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.3ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 14:47:06 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.3ms)
Completed 200 OK in 14.9ms (Views: 1.1ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 14:47:08 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.9ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 14:47:10 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 27.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 14:47:12 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 14:47:14 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 14:47:16 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 14:47:18 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 14:47:20 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 14:47:22 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.6ms (Views: 9.2ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 14:47:24 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.6ms (Views: 9.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 14:47:26 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.8ms (Views: 9.5ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 14:47:28 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.1ms (Views: 9.5ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 14:47:30 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.8ms (Views: 10.2ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 14:47:32 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.1ms (Views: 10.1ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-12 14:47:34 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 14:47:36 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<RSpec::Mocks::MockExpectationError: Airbrake received :notify with unexpected arguments
  expected: (an instance of Airbrake::Notice)
       got: (#<AirbrakeTestError: after_commit>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of Airbrake::Notice"]
[0m[32m+[#<AirbrakeTestError: after_commit>]
[0m>
Completed 500 Internal Server Error in 14.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/" for 127.0.0.1 at 2019-04-12 14:47:36 +0300
Processing by DummyController#index as HTML
  Rendered dummy/index.html.erb within layouts/application (0.2ms)
Completed 200 OK in 1.2ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 14:47:36 +0300
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.1ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.2ms)
Completed 200 OK in 8.1ms (Views: 0.9ms | ActiveRecord: 0.2ms)
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 14:47:36 +0300
Processing by DummyController#breakdown as */*
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.1ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.2ms)
Completed 200 OK in 9.3ms (Views: 0.9ms | ActiveRecord: 0.2ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:response_type=>:html))
       got: ({:groups=>{:db=>0.163, :view=>0.877000013133511}, :method=>"GET", :response_type=>"*/*", :route=>"/breakdown(.:format)", :start_time=>2019-04-12 14:47:36.823531000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:response_type=>:html)"]
[0m[32m+[{:groups=>{:db=>0.163, :view=>0.877000013133511},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>"*/*",
[0m[32m+  :route=>"/breakdown(.:format)",
[0m[32m+  :start_time=>2019-04-12 14:47:36.823531000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:11:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:11:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 14:47:36 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 17.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 14:47:38 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 10.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 14:47:40 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 14:47:42 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 14:47:45 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 12.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 14:47:47 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.1ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 24.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/resque" for 127.0.0.1 at 2019-04-12 14:47:49 +0300
Processing by DummyController#resque as HTML
  Rendered dummy/resque.html.erb within layouts/application (0.2ms)
Completed 200 OK in 3.8ms (Views: 1.9ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-12 14:47:49 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 14:47:51 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 5.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started HEAD "/crash" for 127.0.0.1 at 2019-04-12 14:47:51 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 0  in 5.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/delayed_job" for 127.0.0.1 at 2019-04-12 14:47:51 +0300
Processing by DummyController#delayed_job as HTML
Completed 500 Internal Server Error in 12.2ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007f821e9fc1b0 @config=#<Airbrake::Config:0x00007f821e31dba0 @proxy={}, @queue...ash=-1248935769971560490>]}>}, @truncator=#<Airbrake::Truncator:0x00007f821f569660 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007f821e9fc1b0 @config=#<Airbrake::Config:0x00007f821e31dba0 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007f821e31db28 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007f821e31dad8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007f821e31da88 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f821e31da10>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>87, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>149, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__4347449997990331418__process_action__2601946363756889155__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__3767018103166379451__call__3238648295611472384__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007f821f569638 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007f821e4b7100>, "rack.errors"=>#<StringIO:0x00007f821e4b71f0>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007f821f5c0b40>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007f821ea67438 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007f821ea67398 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007f821ea67230 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007f821ea67348 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f821ea672f8>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007f821e4ae6e0 @filters=[#<Proc:0x00007f821e4ae5f0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007f821e4ae5c8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007f821e4ae5a0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007f821e4adb50@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007f821e4adb28@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"fb617a4a25650488d5b022ef1f5f004d", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007f821e4b5da0 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007f821e436398 @app=#<ActionDispatch::Reloader:0x00007f821e4363c0 @app=#<ActionDispatch::Callbacks:0x00007f821e4363e8 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007f821e436410 @app=#<Airbrake::Rack::Middleware:0x00007f821e436438 @app=#<ActiveRecord::QueryCache:0x00007f821e436528 @app=#<ActionDispatch::Cookies:0x00007f821e4365f0 @app=#<ActionDispatch::Session::CookieStore:0x00007f821e436910 @secrets=["926411ee3241804aa16016483447e22b3102906f5b4ad683d33c7df33dbc"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007f821e4366b8>, @app=#<ActionDispatch::Flash:0x00007f821e436938 @app=#<ActionDispatch::ParamsParser:0x00007f821e436a78 @app=#<ActionDispatch::Head:0x00007f821e436aa0 @app=#<Rack::ConditionalGet:0x00007f821e436ac8 @app=#<Rack::ETag:0x00007f821e436b18 @app=#<ActionDispatch::BestStandardsSupport:0x00007f821e436b68 @app=#<Warden::Manager:0x00007f821e436c30 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007f821f5c0b40>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007f821f2833b0 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=1504251189907953283>=>:xml_simple, #<Mime::Type:0x00007f821f2813f8 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=3038043830832827034>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"926411ee3241804aa16016483447e22b3102906f5b4ad683d33c7df33dbc", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007f821e4366b8>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007f821dbf62c8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3fc10f25a7a0 not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"926411ee3241804aa16016483447e22b3102906f5b4ad683d33c7df33dbc", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007f821e4366b8>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007f821e4b4d38 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007f821e4b4338 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007f821e4b4d38 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007f821e4b4248 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70098415362140 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007f821e4ac2f0 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007f821e4ac1b0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007f821e4ac160 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007f821e4ac1b0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007f821e4a7d18 @details_key=nil, @details={:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007f821e4a7ca0 @paths=[#<ActionView::FixtureResolver:0x00007f821db458d8 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={#<ActionView::LookupContext::DetailsKey:0x00007f821e355cd0 @hash=2433326820816606628>=>{"notify_airbrake_sync_helper"=>{"dummy"=>{false=>{[]=>[dummy/notify_airbrake_sync_helper.html.erb]}}}, "application"=>{"layouts"=>{false=>{[]=>[layouts/application.html.erb]}}}, "notify_airbrake_helper"=>{"dummy"=>{false=>{[]=>[dummy/notify_airbrake_helper.html.erb]}}}, "index"=>{"dummy"=>{false=>{[]=>[dummy/index.html.erb]}}}, "breakdown"=>{"dummy"=>{false=>{[]=>[dummy/breakdown.html.erb]}}}, "resque"=>{"dummy"=>{false=>{[]=>[dummy/resque.html.erb]}}}}, #<ActionView::LookupContext::DetailsKey:0x00007f821f5d9230 @hash=1117833205806456109>=>{"breakdown"=>{"dummy"=>{false=>{[]=>[dummy/breakdown.html.erb]}}}}}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007f821f271318 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-1248935769971560490>]}>}, @truncator=#<Airbrake::Truncator:0x00007f821f569660 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 14:47:51 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 6.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 14:47:51 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 1.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 15:46:26 +0300
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.1ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (1.1ms)
Completed 200 OK in 20.5ms (Views: 6.2ms | ActiveRecord: 0.3ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/index" for 127.0.0.1 at 2019-04-12 15:47:40 +0300

ActionController::RoutingError (No route matches [GET] "/index"):
  actionpack (3.2.22.5) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.22.5) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.22.5) lib/rails/rack/logger.rb:18:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.7) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.7) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.22.5) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.7) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/static.rb:83:in `call'
  railties (3.2.22.5) lib/rails/engine.rb:484:in `call'
  railties (3.2.22.5) lib/rails/application.rb:231:in `call'
  rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'
  rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'
  rack-test (0.6.3) lib/rack/test.rb:58:in `get'
  spec/integration/rails/rails_spec.rb:321:in `block (4 levels) in <top (required)>'
  rspec-core (3.8.0) lib/rspec/core/example.rb:254:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/example.rb:254:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example.rb:500:in `block in with_around_and_singleton_context_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:457:in `block in with_around_example_hooks'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:464:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:604:in `block in run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/example.rb:342:in `call'
  rspec-wait (0.0.9) lib/rspec/wait.rb:46:in `block (2 levels) in <top (required)>'
  rspec-core (3.8.0) lib/rspec/core/example.rb:447:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/example.rb:447:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:373:in `execute_with'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:606:in `block (2 levels) in run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/example.rb:342:in `call'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:607:in `run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:464:in `run'
  rspec-core (3.8.0) lib/rspec/core/example.rb:457:in `with_around_example_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:500:in `with_around_and_singleton_context_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:251:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:629:in `block in run_examples'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:625:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:625:in `run_examples'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:591:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `block (3 levels) in run_specs'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `map'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `block (2 levels) in run_specs'
  rspec-core (3.8.0) lib/rspec/core/configuration.rb:1989:in `with_suite_hooks'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:111:in `block in run_specs'
  rspec-core (3.8.0) lib/rspec/core/reporter.rb:74:in `report'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:110:in `run_specs'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:87:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:71:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:45:in `invoke'
  rspec-core (3.8.0) exe/rspec:4:in `<top (required)>'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/rspec:23:in `load'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/rspec:23:in `<top (required)>'
  bundler (1.17.1) lib/bundler/cli/exec.rb:74:in `load'
  bundler (1.17.1) lib/bundler/cli/exec.rb:74:in `kernel_load'
  bundler (1.17.1) lib/bundler/cli/exec.rb:28:in `run'
  bundler (1.17.1) lib/bundler/cli.rb:463:in `exec'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/command.rb:27:in `run'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/invocation.rb:126:in `invoke_command'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor.rb:387:in `dispatch'
  bundler (1.17.1) lib/bundler/cli.rb:27:in `dispatch'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/base.rb:466:in `start'
  bundler (1.17.1) lib/bundler/cli.rb:18:in `start'
  bundler (1.17.1) exe/bundle:30:in `block in <top (required)>'
  bundler (1.17.1) lib/bundler/friendly_errors.rb:124:in `with_friendly_errors'
  bundler (1.17.1) exe/bundle:22:in `<top (required)>'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/bundle:23:in `load'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/bundle:23:in `<main>'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/index" for 127.0.0.1 at 2019-04-12 15:47:45 +0300

ActionController::RoutingError (No route matches [GET] "/index"):
  actionpack (3.2.22.5) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.22.5) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.22.5) lib/rails/rack/logger.rb:18:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.7) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.7) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.22.5) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.7) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/static.rb:83:in `call'
  railties (3.2.22.5) lib/rails/engine.rb:484:in `call'
  railties (3.2.22.5) lib/rails/application.rb:231:in `call'
  rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'
  rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'
  rack-test (0.6.3) lib/rack/test.rb:58:in `get'
  spec/integration/rails/rails_spec.rb:321:in `block (4 levels) in <top (required)>'
  rspec-core (3.8.0) lib/rspec/core/example.rb:254:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/example.rb:254:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example.rb:500:in `block in with_around_and_singleton_context_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:457:in `block in with_around_example_hooks'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:464:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:604:in `block in run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/example.rb:342:in `call'
  rspec-wait (0.0.9) lib/rspec/wait.rb:46:in `block (2 levels) in <top (required)>'
  rspec-core (3.8.0) lib/rspec/core/example.rb:447:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/example.rb:447:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:373:in `execute_with'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:606:in `block (2 levels) in run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/example.rb:342:in `call'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:607:in `run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:464:in `run'
  rspec-core (3.8.0) lib/rspec/core/example.rb:457:in `with_around_example_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:500:in `with_around_and_singleton_context_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:251:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:629:in `block in run_examples'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:625:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:625:in `run_examples'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:591:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `block (3 levels) in run_specs'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `map'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `block (2 levels) in run_specs'
  rspec-core (3.8.0) lib/rspec/core/configuration.rb:1989:in `with_suite_hooks'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:111:in `block in run_specs'
  rspec-core (3.8.0) lib/rspec/core/reporter.rb:74:in `report'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:110:in `run_specs'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:87:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:71:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:45:in `invoke'
  rspec-core (3.8.0) exe/rspec:4:in `<top (required)>'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/rspec:23:in `load'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/rspec:23:in `<top (required)>'
  bundler (1.17.1) lib/bundler/cli/exec.rb:74:in `load'
  bundler (1.17.1) lib/bundler/cli/exec.rb:74:in `kernel_load'
  bundler (1.17.1) lib/bundler/cli/exec.rb:28:in `run'
  bundler (1.17.1) lib/bundler/cli.rb:463:in `exec'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/command.rb:27:in `run'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/invocation.rb:126:in `invoke_command'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor.rb:387:in `dispatch'
  bundler (1.17.1) lib/bundler/cli.rb:27:in `dispatch'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/base.rb:466:in `start'
  bundler (1.17.1) lib/bundler/cli.rb:18:in `start'
  bundler (1.17.1) exe/bundle:30:in `block in <top (required)>'
  bundler (1.17.1) lib/bundler/friendly_errors.rb:124:in `with_friendly_errors'
  bundler (1.17.1) exe/bundle:22:in `<top (required)>'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/bundle:23:in `load'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/bundle:23:in `<main>'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 15:54:50 +0300
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.1ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.9ms)
Completed 200 OK in 20.3ms (Views: 6.0ms | ActiveRecord: 0.4ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:groups=>{:view=>1}))
       got: ({:groups=>{:db=>0.40399999999999997, :view=>6.024000002071261}, :method=>"GET", :response_type=>:html, :route=>"/breakdown(.:format)", :start_time=>2019-04-12 15:54:50.342674000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:groups=>{:view=>1})"]
[0m[32m+[{:groups=>{:db=>0.40399999999999997, :view=>6.024000002071261},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>:html,
[0m[32m+  :route=>"/breakdown(.:format)",
[0m[32m+  :start_time=>2019-04-12 15:54:50.342674000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:16:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 15:55:14 +0300
Processing by DummyController#breakdown as HTML
Completed 500 Internal Server Error in 4.1ms

TypeError (no implicit conversion of nil into String):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 15:55:39 +0300
Processing by DummyController#breakdown as HTML
  Rendered dummy/breakdown.html.erb within layouts/application (0.8ms)
Completed 200 OK in 6.2ms (Views: 6.0ms | ActiveRecord: 0.0ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:groups=>{:view=>1}))
       got: ({:groups=>{:view=>5.95599997905083}, :method=>"GET", :response_type=>:html, :route=>"/breakdown(.:format)", :start_time=>2019-04-12 15:55:39.700355000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:groups=>{:view=>1})"]
[0m[32m+[{:groups=>{:view=>5.95599997905083},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>:html,
[0m[32m+  :route=>"/breakdown(.:format)",
[0m[32m+  :start_time=>2019-04-12 15:55:39.700355000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:16:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 15:56:17 +0300
Processing by DummyController#breakdown as HTML
  Rendered dummy/breakdown.html.erb within layouts/application (0.8ms)
Completed 200 OK in 5.8ms (Views: 5.6ms | ActiveRecord: 0.0ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:groups=>{:view=>#<RSpec::Matchers::AliasedMatcher:0x00007fef4d402c40 @description_blo...f:0x00007fef4d402c68 @expected=Integer, @matcher_name=:an_instance_of, @actual=5.577999982051551>>}))
       got: ({:groups=>{:view=>5.577999982051551}, :method=>"GET", :response_type=>:html, :route=>"/breakdown(.:format)", :start_time=>2019-04-12 15:56:17.982161000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:groups=>{:view=>#<RSpec::Matchers::AliasedMatcher:0x00007fef4d402c40 @description_block=#<Proc:0x00007fef4f906cf8@/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-expectations-3.8.2/lib/rspec/matchers/dsl.rb:31 (lambda)>, @base_matcher=#<RSpec::Matchers::BuiltIn::BeAnInstanceOf:0x00007fef4d402c68 @expected=Integer, @matcher_name=:an_instance_of, @actual=5.577999982051551>>})"]
[0m[32m+[{:groups=>{:view=>5.577999982051551},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>:html,
[0m[32m+  :route=>"/breakdown(.:format)",
[0m[32m+  :start_time=>2019-04-12 15:56:17.982161000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:16:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 16:04:53 +0300
Processing by DummyController#breakdown as HTML
  Rendered dummy/breakdown.html.erb within layouts/application (0.9ms)
Completed 200 OK in 6.0ms (Views: 5.8ms | ActiveRecord: 0.0ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:groups=>{:view=>#<RSpec::Matchers::AliasedMatcher:0x00007ff590c94b08 @description_blo...f:0x00007ff590c94b30 @expected=Integer, @matcher_name=:an_instance_of, @actual=5.795000004582107>>}))
       got: ({:groups=>{:view=>5.795000004582107}, :method=>"GET", :response_type=>:html, :route=>"/breakdown(.:format)", :start_time=>2019-04-12 16:04:53.467977000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:groups=>{:view=>#<RSpec::Matchers::AliasedMatcher:0x00007ff590c94b08 @description_block=#<Proc:0x00007ff590832bc8@/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-expectations-3.8.2/lib/rspec/matchers/dsl.rb:31 (lambda)>, @base_matcher=#<RSpec::Matchers::BuiltIn::BeAnInstanceOf:0x00007ff590c94b30 @expected=Integer, @matcher_name=:an_instance_of, @actual=5.795000004582107>>})"]
[0m[32m+[{:groups=>{:view=>5.795000004582107},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>:html,
[0m[32m+  :route=>"/breakdown(.:format)",
[0m[32m+  :start_time=>2019-04-12 16:04:53.467977000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:17:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 16:05:13 +0300
Processing by DummyController#breakdown as HTML
  Rendered dummy/breakdown.html.erb within layouts/application (0.8ms)
Completed 200 OK in 5.5ms (Views: 5.3ms | ActiveRecord: 0.0ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 16:05:24 +0300
Processing by DummyController#breakdown as HTML
  Rendered dummy/breakdown.html.erb within layouts/application (0.9ms)
Completed 200 OK in 5.6ms (Views: 5.4ms | ActiveRecord: 0.0ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:groups=>{:view=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007ffb9e83c600 @expected=0, @operator=:<, @args=[], @actual=5.415999999968335>}))
       got: ({:groups=>{:view=>5.415999999968335}, :method=>"GET", :response_type=>:html, :route=>"/breakdown(.:format)", :start_time=>2019-04-12 16:05:24.697651000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:groups=>{:view=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007ffb9e83c600 @expected=0, @operator=:<, @args=[], @actual=5.415999999968335>})"]
[0m[32m+[{:groups=>{:view=>5.415999999968335},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>:html,
[0m[32m+  :route=>"/breakdown(.:format)",
[0m[32m+  :start_time=>2019-04-12 16:05:24.697651000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:17:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 16:05:39 +0300
Processing by DummyController#breakdown as HTML
  Rendered dummy/breakdown.html.erb within layouts/application (0.8ms)
Completed 200 OK in 5.6ms (Views: 5.4ms | ActiveRecord: 0.0ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 16:05:51 +0300
Processing by DummyController#breakdown as HTML
  Rendered dummy/breakdown.html.erb within layouts/application (1.7ms)
Completed 200 OK in 7.5ms (Views: 7.2ms | ActiveRecord: 0.0ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:groups=>{:view=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007f98e94a7c00 @expected=0, @operator=:==, @args=[], @actual=7.201000000350177>}))
       got: ({:groups=>{:view=>7.201000000350177}, :method=>"GET", :response_type=>:html, :route=>"/breakdown(.:format)", :start_time=>2019-04-12 16:05:51.423020000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:groups=>{:view=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007f98e94a7c00 @expected=0, @operator=:==, @args=[], @actual=7.201000000350177>})"]
[0m[32m+[{:groups=>{:view=>7.201000000350177},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>:html,
[0m[32m+  :route=>"/breakdown(.:format)",
[0m[32m+  :start_time=>2019-04-12 16:05:51.423020000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:16:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.2ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/" for 127.0.0.1 at 2019-04-12 16:06:53 +0300
Processing by DummyController#index as HTML
  Rendered dummy/index.html.erb within layouts/application (0.8ms)
Completed 200 OK in 5.3ms (Views: 5.1ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-12 16:06:53 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<RSpec::Mocks::MockExpectationError: Airbrake received :notify with unexpected arguments
  expected: (an instance of Airbrake::Notice)
       got: (#<AirbrakeTestError: after_commit>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of Airbrake::Notice"]
[0m[32m+[#<AirbrakeTestError: after_commit>]
[0m>
Completed 500 Internal Server Error in 24.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 16:06:53 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 5.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started HEAD "/crash" for 127.0.0.1 at 2019-04-12 16:06:53 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 0  in 6.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 16:06:53 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.9ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 16:06:55 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 16:06:57 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 16:06:59 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 16:07:01 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 24.9ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 16:07:03 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 16:07:05 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/delayed_job" for 127.0.0.1 at 2019-04-12 16:07:07 +0300
Processing by DummyController#delayed_job as HTML
Completed 500 Internal Server Error in 11.3ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007fea461d9a88 @config=#<Airbrake::Config:0x00007fea4619f130 @proxy={}, @queue...hash=4215429897895998756>]}>}, @truncator=#<Airbrake::Truncator:0x00007fea461c3648 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007fea461d9a88 @config=#<Airbrake::Config:0x00007fea4619f130 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fea4619f0b8 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fea4619f068 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fea4619f018 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fea4619efa0>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>88, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>155, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__2597734601660146384__process_action__1177515423560588368__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__725593513104023235__call__2982686385770604938__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007fea461c3620 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007fea46dddaf0>, "rack.errors"=>#<StringIO:0x00007fea46dddbb8>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fea45de3190>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fea45c34df8 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fea45c34cb8 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007fea45c34ab0 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007fea45c34c18 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fea45c34b78>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fea46cb6c58 @filters=[#<Proc:0x00007fea46cb6b90@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007fea46cb6b68@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007fea46cb6ac8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007fea46cb6028@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007fea46cb6000@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"eb70288bbcb60b0ae879db824ce29a70", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fea46ddcbc8 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007fea46216190 @app=#<ActionDispatch::Reloader:0x00007fea462161b8 @app=#<ActionDispatch::Callbacks:0x00007fea462161e0 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007fea46216208 @app=#<Airbrake::Rack::Middleware:0x00007fea46216230 @app=#<ActiveRecord::QueryCache:0x00007fea46216348 @app=#<ActionDispatch::Cookies:0x00007fea46216410 @app=#<ActionDispatch::Session::CookieStore:0x00007fea46216758 @secrets=["bf861fc3686da21bb093fd0bd9fa727b9dcd4fd55a043e44bdad62c63c25"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007fea462164d8>, @app=#<ActionDispatch::Flash:0x00007fea46216780 @app=#<ActionDispatch::ParamsParser:0x00007fea46216898 @app=#<ActionDispatch::Head:0x00007fea462168c0 @app=#<Rack::ConditionalGet:0x00007fea46216910 @app=#<Rack::ETag:0x00007fea46216938 @app=#<ActionDispatch::BestStandardsSupport:0x00007fea46216988 @app=#<Warden::Manager:0x00007fea46216aa0 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fea45de3190>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007fea45b44510 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=2453020401007101570>=>:xml_simple, #<Mime::Type:0x00007fea45b4dca0 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=-38674308438788804>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"bf861fc3686da21bb093fd0bd9fa727b9dcd4fd55a043e44bdad62c63c25", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fea462164d8>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007fea46d06be0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3ff5236ee170 not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"bf861fc3686da21bb093fd0bd9fa727b9dcd4fd55a043e44bdad62c63c25", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fea462164d8>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007fea46ddc0d8 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007fea46dd7b78 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fea46ddc0d8 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007fea46dd7ad8 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70322093997260 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fea46dd5300 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007fea46dd50a8 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007fea46dd5080 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007fea46dd50a8 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007fea46dd4b58 @details_key=nil, @details={:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007fea46dd4a90 @paths=[#<ActionView::FixtureResolver:0x00007fea48a38f88 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={#<ActionView::LookupContext::DetailsKey:0x00007fea461c34b8 @hash=-4475916522247596711>=>{"index"=>{"dummy"=>{false=>{[]=>[dummy/index.html.erb]}}}, "application"=>{"layouts"=>{false=>{[]=>[layouts/application.html.erb]}}}}}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown", "dummy/breakdown_view.html.erb"=>"breakdown_view"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fea45b3e570 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=4215429897895998756>]}>}, @truncator=#<Airbrake::Truncator:0x00007fea461c3648 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 16:07:07 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.3ms)
Completed 200 OK in 16.8ms (Views: 12.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 16:07:09 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 19.2ms (Views: 13.4ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 16:07:11 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 27.7ms (Views: 17.8ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 16:07:13 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 20.9ms (Views: 9.2ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 16:07:15 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.3ms)
Completed 200 OK in 17.0ms (Views: 10.7ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 16:07:17 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 21.3ms (Views: 13.9ms | ActiveRecord: 0.0ms)
Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 16:07:19 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 16:07:21 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 16:07:24 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 16:07:26 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 16:07:28 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 23.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 16:07:30 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 16:07:32 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.7ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 16:07:34 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.5ms (Views: 1.1ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 16:07:36 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.5ms (Views: 0.8ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 16:07:38 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 17.7ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 16:07:40 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.5ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 16:07:42 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 19.0ms (Views: 1.2ms | ActiveRecord: 0.0ms)
Started GET "/resque" for 127.0.0.1 at 2019-04-12 16:07:44 +0300
Processing by DummyController#resque as HTML
  Rendered dummy/resque.html.erb within layouts/application (0.2ms)
Completed 200 OK in 2.4ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 16:07:44 +0300
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.2ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.2ms)
Completed 200 OK in 9.3ms (Views: 0.9ms | ActiveRecord: 0.3ms)
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 16:07:44 +0300
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.1ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.2ms)
Completed 200 OK in 8.5ms (Views: 0.9ms | ActiveRecord: 0.2ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:groups=>{:view=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007fea46c9e630 @expected=0, @operator=:>, @args=[]>}))
       got: ({:groups=>{:db=>0.16799999999999998, :view=>0.881000014487654}, :method=>"GET", :response_type=>:html, :route=>"/breakdown(.:format)", :start_time=>2019-04-12 16:07:44.349768000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:groups=>{:view=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007fea46c9e630 @expected=0, @operator=:>, @args=[]>})"]
[0m[32m+[{:groups=>{:db=>0.16799999999999998, :view=>0.881000014487654},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>:html,
[0m[32m+  :route=>"/breakdown(.:format)",
[0m[32m+  :start_time=>2019-04-12 16:07:44.349768000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:16:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 16:07:44 +0300
Processing by DummyController#breakdown as */*
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.1ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.2ms)
Completed 200 OK in 9.7ms (Views: 1.0ms | ActiveRecord: 0.2ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-12 16:07:44 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 5.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 16:07:44 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 1.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 16:07:44 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 17.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.8ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 16:09:05 +0300
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.1ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (1.1ms)
Completed 200 OK in 20.3ms (Views: 6.3ms | ActiveRecord: 0.4ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:groups=>{:view=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007fd27270d478 @expected=0, @operator=:>, @args=[]>}))
       got: ({:groups=>{:db=>0.35200000000000004, :view=>6.293999991612509}, :method=>"GET", :response_type=>:html, :route=>"/breakdown(.:format)", :start_time=>2019-04-12 16:09:05.500416000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:groups=>{:view=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007fd27270d478 @expected=0, @operator=:>, @args=[]>})"]
[0m[32m+[{:groups=>{:db=>0.35200000000000004, :view=>6.293999991612509},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>:html,
[0m[32m+  :route=>"/breakdown(.:format)",
[0m[32m+  :start_time=>2019-04-12 16:09:05.500416000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:16:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_view" for 127.0.0.1 at 2019-04-12 16:09:35 +0300
Processing by DummyController#breakdown_view as HTML
  Rendered dummy/breakdown_view.html.erb within layouts/application (0.9ms)
Completed 200 OK in 11.8ms (Views: 11.2ms | ActiveRecord: 0.0ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_db_only" for 127.0.0.1 at 2019-04-12 16:10:48 +0300

ActionController::RoutingError (No route matches [GET] "/breakdown_db_only"):
  actionpack (3.2.22.5) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.22.5) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.22.5) lib/rails/rack/logger.rb:18:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.7) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.7) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.22.5) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.7) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/static.rb:83:in `call'
  railties (3.2.22.5) lib/rails/engine.rb:484:in `call'
  railties (3.2.22.5) lib/rails/application.rb:231:in `call'
  rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'
  rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'
  rack-test (0.6.3) lib/rack/test.rb:58:in `get'
  spec/integration/rails/rails_spec.rb:330:in `block (4 levels) in <top (required)>'
  rspec-core (3.8.0) lib/rspec/core/example.rb:254:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/example.rb:254:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example.rb:500:in `block in with_around_and_singleton_context_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:457:in `block in with_around_example_hooks'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:464:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:604:in `block in run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/example.rb:342:in `call'
  rspec-wait (0.0.9) lib/rspec/wait.rb:46:in `block (2 levels) in <top (required)>'
  rspec-core (3.8.0) lib/rspec/core/example.rb:447:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/example.rb:447:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:373:in `execute_with'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:606:in `block (2 levels) in run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/example.rb:342:in `call'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:607:in `run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:464:in `run'
  rspec-core (3.8.0) lib/rspec/core/example.rb:457:in `with_around_example_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:500:in `with_around_and_singleton_context_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:251:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:629:in `block in run_examples'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:625:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:625:in `run_examples'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:591:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `block (3 levels) in run_specs'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `map'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `block (2 levels) in run_specs'
  rspec-core (3.8.0) lib/rspec/core/configuration.rb:1989:in `with_suite_hooks'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:111:in `block in run_specs'
  rspec-core (3.8.0) lib/rspec/core/reporter.rb:74:in `report'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:110:in `run_specs'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:87:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:71:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:45:in `invoke'
  rspec-core (3.8.0) exe/rspec:4:in `<top (required)>'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/rspec:23:in `load'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/rspec:23:in `<top (required)>'
  bundler (1.17.1) lib/bundler/cli/exec.rb:74:in `load'
  bundler (1.17.1) lib/bundler/cli/exec.rb:74:in `kernel_load'
  bundler (1.17.1) lib/bundler/cli/exec.rb:28:in `run'
  bundler (1.17.1) lib/bundler/cli.rb:463:in `exec'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/command.rb:27:in `run'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/invocation.rb:126:in `invoke_command'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor.rb:387:in `dispatch'
  bundler (1.17.1) lib/bundler/cli.rb:27:in `dispatch'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/base.rb:466:in `start'
  bundler (1.17.1) lib/bundler/cli.rb:18:in `start'
  bundler (1.17.1) exe/bundle:30:in `block in <top (required)>'
  bundler (1.17.1) lib/bundler/friendly_errors.rb:124:in `with_friendly_errors'
  bundler (1.17.1) exe/bundle:22:in `<top (required)>'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/bundle:23:in `load'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/bundle:23:in `<main>'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_db_only" for 127.0.0.1 at 2019-04-12 16:11:05 +0300

ActionController::RoutingError (No route matches [GET] "/breakdown_db_only"):
  actionpack (3.2.22.5) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.22.5) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.22.5) lib/rails/rack/logger.rb:18:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.7) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.7) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.22.5) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.7) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/static.rb:83:in `call'
  railties (3.2.22.5) lib/rails/engine.rb:484:in `call'
  railties (3.2.22.5) lib/rails/application.rb:231:in `call'
  rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'
  rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'
  rack-test (0.6.3) lib/rack/test.rb:58:in `get'
  spec/integration/rails/rails_spec.rb:330:in `block (4 levels) in <top (required)>'
  rspec-core (3.8.0) lib/rspec/core/example.rb:254:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/example.rb:254:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example.rb:500:in `block in with_around_and_singleton_context_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:457:in `block in with_around_example_hooks'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:464:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:604:in `block in run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/example.rb:342:in `call'
  rspec-wait (0.0.9) lib/rspec/wait.rb:46:in `block (2 levels) in <top (required)>'
  rspec-core (3.8.0) lib/rspec/core/example.rb:447:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/example.rb:447:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:373:in `execute_with'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:606:in `block (2 levels) in run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/example.rb:342:in `call'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:607:in `run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:464:in `run'
  rspec-core (3.8.0) lib/rspec/core/example.rb:457:in `with_around_example_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:500:in `with_around_and_singleton_context_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:251:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:629:in `block in run_examples'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:625:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:625:in `run_examples'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:591:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `block (3 levels) in run_specs'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `map'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `block (2 levels) in run_specs'
  rspec-core (3.8.0) lib/rspec/core/configuration.rb:1989:in `with_suite_hooks'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:111:in `block in run_specs'
  rspec-core (3.8.0) lib/rspec/core/reporter.rb:74:in `report'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:110:in `run_specs'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:87:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:71:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:45:in `invoke'
  rspec-core (3.8.0) exe/rspec:4:in `<top (required)>'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/rspec:23:in `load'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/rspec:23:in `<top (required)>'
  bundler (1.17.1) lib/bundler/cli/exec.rb:74:in `load'
  bundler (1.17.1) lib/bundler/cli/exec.rb:74:in `kernel_load'
  bundler (1.17.1) lib/bundler/cli/exec.rb:28:in `run'
  bundler (1.17.1) lib/bundler/cli.rb:463:in `exec'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/command.rb:27:in `run'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/invocation.rb:126:in `invoke_command'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor.rb:387:in `dispatch'
  bundler (1.17.1) lib/bundler/cli.rb:27:in `dispatch'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/base.rb:466:in `start'
  bundler (1.17.1) lib/bundler/cli.rb:18:in `start'
  bundler (1.17.1) exe/bundle:30:in `block in <top (required)>'
  bundler (1.17.1) lib/bundler/friendly_errors.rb:124:in `with_friendly_errors'
  bundler (1.17.1) exe/bundle:22:in `<top (required)>'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/bundle:23:in `load'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/bundle:23:in `<main>'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_db_only" for 127.0.0.1 at 2019-04-12 16:11:19 +0300

ActionController::RoutingError (No route matches [GET] "/breakdown_db_only"):
  actionpack (3.2.22.5) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.22.5) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.22.5) lib/rails/rack/logger.rb:18:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.7) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.7) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.22.5) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.7) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/static.rb:83:in `call'
  railties (3.2.22.5) lib/rails/engine.rb:484:in `call'
  railties (3.2.22.5) lib/rails/application.rb:231:in `call'
  rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'
  rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'
  rack-test (0.6.3) lib/rack/test.rb:58:in `get'
  spec/integration/rails/rails_spec.rb:330:in `block (4 levels) in <top (required)>'
  rspec-core (3.8.0) lib/rspec/core/example.rb:254:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/example.rb:254:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example.rb:500:in `block in with_around_and_singleton_context_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:457:in `block in with_around_example_hooks'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:464:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:604:in `block in run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/example.rb:342:in `call'
  rspec-wait (0.0.9) lib/rspec/wait.rb:46:in `block (2 levels) in <top (required)>'
  rspec-core (3.8.0) lib/rspec/core/example.rb:447:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/example.rb:447:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:373:in `execute_with'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:606:in `block (2 levels) in run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/example.rb:342:in `call'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:607:in `run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:464:in `run'
  rspec-core (3.8.0) lib/rspec/core/example.rb:457:in `with_around_example_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:500:in `with_around_and_singleton_context_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:251:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:629:in `block in run_examples'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:625:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:625:in `run_examples'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:591:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `block (3 levels) in run_specs'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `map'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `block (2 levels) in run_specs'
  rspec-core (3.8.0) lib/rspec/core/configuration.rb:1989:in `with_suite_hooks'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:111:in `block in run_specs'
  rspec-core (3.8.0) lib/rspec/core/reporter.rb:74:in `report'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:110:in `run_specs'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:87:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:71:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:45:in `invoke'
  rspec-core (3.8.0) exe/rspec:4:in `<top (required)>'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/rspec:23:in `load'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/rspec:23:in `<top (required)>'
  bundler (1.17.1) lib/bundler/cli/exec.rb:74:in `load'
  bundler (1.17.1) lib/bundler/cli/exec.rb:74:in `kernel_load'
  bundler (1.17.1) lib/bundler/cli/exec.rb:28:in `run'
  bundler (1.17.1) lib/bundler/cli.rb:463:in `exec'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/command.rb:27:in `run'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/invocation.rb:126:in `invoke_command'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor.rb:387:in `dispatch'
  bundler (1.17.1) lib/bundler/cli.rb:27:in `dispatch'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/base.rb:466:in `start'
  bundler (1.17.1) lib/bundler/cli.rb:18:in `start'
  bundler (1.17.1) exe/bundle:30:in `block in <top (required)>'
  bundler (1.17.1) lib/bundler/friendly_errors.rb:124:in `with_friendly_errors'
  bundler (1.17.1) exe/bundle:22:in `<top (required)>'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/bundle:23:in `load'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/bundle:23:in `<main>'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_db_only" for 127.0.0.1 at 2019-04-12 16:13:37 +0300

ActionController::RoutingError (No route matches [GET] "/breakdown_db_only"):
  actionpack (3.2.22.5) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.22.5) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.22.5) lib/rails/rack/logger.rb:18:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.7) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.7) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.22.5) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.7) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/static.rb:83:in `call'
  railties (3.2.22.5) lib/rails/engine.rb:484:in `call'
  railties (3.2.22.5) lib/rails/application.rb:231:in `call'
  rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'
  rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'
  rack-test (0.6.3) lib/rack/test.rb:58:in `get'
  spec/integration/rails/rails_spec.rb:330:in `block (4 levels) in <top (required)>'
  rspec-core (3.8.0) lib/rspec/core/example.rb:254:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/example.rb:254:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example.rb:500:in `block in with_around_and_singleton_context_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:457:in `block in with_around_example_hooks'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:464:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:604:in `block in run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/example.rb:342:in `call'
  rspec-wait (0.0.9) lib/rspec/wait.rb:46:in `block (2 levels) in <top (required)>'
  rspec-core (3.8.0) lib/rspec/core/example.rb:447:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/example.rb:447:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:373:in `execute_with'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:606:in `block (2 levels) in run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/example.rb:342:in `call'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:607:in `run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:464:in `run'
  rspec-core (3.8.0) lib/rspec/core/example.rb:457:in `with_around_example_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:500:in `with_around_and_singleton_context_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:251:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:629:in `block in run_examples'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:625:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:625:in `run_examples'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:591:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `block (3 levels) in run_specs'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `map'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `block (2 levels) in run_specs'
  rspec-core (3.8.0) lib/rspec/core/configuration.rb:1989:in `with_suite_hooks'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:111:in `block in run_specs'
  rspec-core (3.8.0) lib/rspec/core/reporter.rb:74:in `report'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:110:in `run_specs'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:87:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:71:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:45:in `invoke'
  rspec-core (3.8.0) exe/rspec:4:in `<top (required)>'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/rspec:23:in `load'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/rspec:23:in `<top (required)>'
  bundler (1.17.1) lib/bundler/cli/exec.rb:74:in `load'
  bundler (1.17.1) lib/bundler/cli/exec.rb:74:in `kernel_load'
  bundler (1.17.1) lib/bundler/cli/exec.rb:28:in `run'
  bundler (1.17.1) lib/bundler/cli.rb:463:in `exec'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/command.rb:27:in `run'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/invocation.rb:126:in `invoke_command'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor.rb:387:in `dispatch'
  bundler (1.17.1) lib/bundler/cli.rb:27:in `dispatch'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/base.rb:466:in `start'
  bundler (1.17.1) lib/bundler/cli.rb:18:in `start'
  bundler (1.17.1) exe/bundle:30:in `block in <top (required)>'
  bundler (1.17.1) lib/bundler/friendly_errors.rb:124:in `with_friendly_errors'
  bundler (1.17.1) exe/bundle:22:in `<top (required)>'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/bundle:23:in `load'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/bundle:23:in `<main>'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_db_only" for 127.0.0.1 at 2019-04-12 16:13:45 +0300

ActionController::RoutingError (No route matches [GET] "/breakdown_db_only"):
  actionpack (3.2.22.5) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.22.5) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.22.5) lib/rails/rack/logger.rb:18:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.7) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.7) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.22.5) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.7) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/static.rb:83:in `call'
  railties (3.2.22.5) lib/rails/engine.rb:484:in `call'
  railties (3.2.22.5) lib/rails/application.rb:231:in `call'
  rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'
  rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'
  rack-test (0.6.3) lib/rack/test.rb:58:in `get'
  spec/integration/rails/rails_spec.rb:330:in `block (4 levels) in <top (required)>'
  rspec-core (3.8.0) lib/rspec/core/example.rb:254:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/example.rb:254:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example.rb:500:in `block in with_around_and_singleton_context_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:457:in `block in with_around_example_hooks'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:464:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:604:in `block in run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/example.rb:342:in `call'
  rspec-wait (0.0.9) lib/rspec/wait.rb:46:in `block (2 levels) in <top (required)>'
  rspec-core (3.8.0) lib/rspec/core/example.rb:447:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/example.rb:447:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:373:in `execute_with'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:606:in `block (2 levels) in run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/example.rb:342:in `call'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:607:in `run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:464:in `run'
  rspec-core (3.8.0) lib/rspec/core/example.rb:457:in `with_around_example_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:500:in `with_around_and_singleton_context_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:251:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:629:in `block in run_examples'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:625:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:625:in `run_examples'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:591:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `block (3 levels) in run_specs'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `map'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `block (2 levels) in run_specs'
  rspec-core (3.8.0) lib/rspec/core/configuration.rb:1989:in `with_suite_hooks'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:111:in `block in run_specs'
  rspec-core (3.8.0) lib/rspec/core/reporter.rb:74:in `report'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:110:in `run_specs'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:87:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:71:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:45:in `invoke'
  rspec-core (3.8.0) exe/rspec:4:in `<top (required)>'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/rspec:23:in `load'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/rspec:23:in `<top (required)>'
  bundler (1.17.1) lib/bundler/cli/exec.rb:74:in `load'
  bundler (1.17.1) lib/bundler/cli/exec.rb:74:in `kernel_load'
  bundler (1.17.1) lib/bundler/cli/exec.rb:28:in `run'
  bundler (1.17.1) lib/bundler/cli.rb:463:in `exec'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/command.rb:27:in `run'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/invocation.rb:126:in `invoke_command'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor.rb:387:in `dispatch'
  bundler (1.17.1) lib/bundler/cli.rb:27:in `dispatch'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/base.rb:466:in `start'
  bundler (1.17.1) lib/bundler/cli.rb:18:in `start'
  bundler (1.17.1) exe/bundle:30:in `block in <top (required)>'
  bundler (1.17.1) lib/bundler/friendly_errors.rb:124:in `with_friendly_errors'
  bundler (1.17.1) exe/bundle:22:in `<top (required)>'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/bundle:23:in `load'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/bundle:23:in `<main>'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.8ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_db_only" for 127.0.0.1 at 2019-04-12 16:14:01 +0300

ActionController::RoutingError (No route matches [GET] "/breakdown_db_only"):
  actionpack (3.2.22.5) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.22.5) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.22.5) lib/rails/rack/logger.rb:18:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.7) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.7) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.22.5) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.7) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/static.rb:83:in `call'
  railties (3.2.22.5) lib/rails/engine.rb:484:in `call'
  railties (3.2.22.5) lib/rails/application.rb:231:in `call'
  rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'
  rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'
  rack-test (0.6.3) lib/rack/test.rb:58:in `get'
  spec/integration/rails/rails_spec.rb:330:in `block (4 levels) in <top (required)>'
  rspec-core (3.8.0) lib/rspec/core/example.rb:254:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/example.rb:254:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example.rb:500:in `block in with_around_and_singleton_context_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:457:in `block in with_around_example_hooks'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:464:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:604:in `block in run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/example.rb:342:in `call'
  rspec-wait (0.0.9) lib/rspec/wait.rb:46:in `block (2 levels) in <top (required)>'
  rspec-core (3.8.0) lib/rspec/core/example.rb:447:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/example.rb:447:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:373:in `execute_with'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:606:in `block (2 levels) in run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/example.rb:342:in `call'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:607:in `run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:464:in `run'
  rspec-core (3.8.0) lib/rspec/core/example.rb:457:in `with_around_example_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:500:in `with_around_and_singleton_context_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:251:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:629:in `block in run_examples'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:625:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:625:in `run_examples'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:591:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `block (3 levels) in run_specs'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `map'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `block (2 levels) in run_specs'
  rspec-core (3.8.0) lib/rspec/core/configuration.rb:1989:in `with_suite_hooks'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:111:in `block in run_specs'
  rspec-core (3.8.0) lib/rspec/core/reporter.rb:74:in `report'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:110:in `run_specs'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:87:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:71:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:45:in `invoke'
  rspec-core (3.8.0) exe/rspec:4:in `<top (required)>'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/rspec:23:in `load'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/rspec:23:in `<top (required)>'
  bundler (1.17.1) lib/bundler/cli/exec.rb:74:in `load'
  bundler (1.17.1) lib/bundler/cli/exec.rb:74:in `kernel_load'
  bundler (1.17.1) lib/bundler/cli/exec.rb:28:in `run'
  bundler (1.17.1) lib/bundler/cli.rb:463:in `exec'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/command.rb:27:in `run'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/invocation.rb:126:in `invoke_command'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor.rb:387:in `dispatch'
  bundler (1.17.1) lib/bundler/cli.rb:27:in `dispatch'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/base.rb:466:in `start'
  bundler (1.17.1) lib/bundler/cli.rb:18:in `start'
  bundler (1.17.1) exe/bundle:30:in `block in <top (required)>'
  bundler (1.17.1) lib/bundler/friendly_errors.rb:124:in `with_friendly_errors'
  bundler (1.17.1) exe/bundle:22:in `<top (required)>'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/bundle:23:in `load'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/bundle:23:in `<main>'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_view_only" for 127.0.0.1 at 2019-04-12 16:16:13 +0300

ActionController::RoutingError (No route matches [GET] "/breakdown_view_only"):
  actionpack (3.2.22.5) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.22.5) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.22.5) lib/rails/rack/logger.rb:18:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.7) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.7) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.22.5) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.7) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/static.rb:83:in `call'
  railties (3.2.22.5) lib/rails/engine.rb:484:in `call'
  railties (3.2.22.5) lib/rails/application.rb:231:in `call'
  rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'
  rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'
  rack-test (0.6.3) lib/rack/test.rb:58:in `get'
  spec/integration/rails/rails_spec.rb:330:in `block (4 levels) in <top (required)>'
  rspec-core (3.8.0) lib/rspec/core/example.rb:254:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/example.rb:254:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example.rb:500:in `block in with_around_and_singleton_context_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:457:in `block in with_around_example_hooks'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:464:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:604:in `block in run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/example.rb:342:in `call'
  rspec-wait (0.0.9) lib/rspec/wait.rb:46:in `block (2 levels) in <top (required)>'
  rspec-core (3.8.0) lib/rspec/core/example.rb:447:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/example.rb:447:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:373:in `execute_with'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:606:in `block (2 levels) in run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/example.rb:342:in `call'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:607:in `run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:464:in `run'
  rspec-core (3.8.0) lib/rspec/core/example.rb:457:in `with_around_example_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:500:in `with_around_and_singleton_context_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:251:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:629:in `block in run_examples'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:625:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:625:in `run_examples'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:591:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `block (3 levels) in run_specs'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `map'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `block (2 levels) in run_specs'
  rspec-core (3.8.0) lib/rspec/core/configuration.rb:1989:in `with_suite_hooks'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:111:in `block in run_specs'
  rspec-core (3.8.0) lib/rspec/core/reporter.rb:74:in `report'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:110:in `run_specs'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:87:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:71:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:45:in `invoke'
  rspec-core (3.8.0) exe/rspec:4:in `<top (required)>'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/rspec:23:in `load'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/rspec:23:in `<top (required)>'
  bundler (1.17.1) lib/bundler/cli/exec.rb:74:in `load'
  bundler (1.17.1) lib/bundler/cli/exec.rb:74:in `kernel_load'
  bundler (1.17.1) lib/bundler/cli/exec.rb:28:in `run'
  bundler (1.17.1) lib/bundler/cli.rb:463:in `exec'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/command.rb:27:in `run'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/invocation.rb:126:in `invoke_command'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor.rb:387:in `dispatch'
  bundler (1.17.1) lib/bundler/cli.rb:27:in `dispatch'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/base.rb:466:in `start'
  bundler (1.17.1) lib/bundler/cli.rb:18:in `start'
  bundler (1.17.1) exe/bundle:30:in `block in <top (required)>'
  bundler (1.17.1) lib/bundler/friendly_errors.rb:124:in `with_friendly_errors'
  bundler (1.17.1) exe/bundle:22:in `<top (required)>'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/bundle:23:in `load'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/bundle:23:in `<main>'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.4ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_view_only" for 127.0.0.1 at 2019-04-12 16:16:29 +0300

ActionController::RoutingError (No route matches [GET] "/breakdown_view_only"):
  actionpack (3.2.22.5) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.22.5) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.22.5) lib/rails/rack/logger.rb:18:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.7) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.7) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.22.5) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.7) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/static.rb:83:in `call'
  railties (3.2.22.5) lib/rails/engine.rb:484:in `call'
  railties (3.2.22.5) lib/rails/application.rb:231:in `call'
  rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'
  rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'
  rack-test (0.6.3) lib/rack/test.rb:58:in `get'
  spec/integration/rails/rails_spec.rb:321:in `block (4 levels) in <top (required)>'
  rspec-core (3.8.0) lib/rspec/core/example.rb:254:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/example.rb:254:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example.rb:500:in `block in with_around_and_singleton_context_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:457:in `block in with_around_example_hooks'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:464:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:604:in `block in run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/example.rb:342:in `call'
  rspec-wait (0.0.9) lib/rspec/wait.rb:46:in `block (2 levels) in <top (required)>'
  rspec-core (3.8.0) lib/rspec/core/example.rb:447:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/example.rb:447:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:373:in `execute_with'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:606:in `block (2 levels) in run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/example.rb:342:in `call'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:607:in `run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:464:in `run'
  rspec-core (3.8.0) lib/rspec/core/example.rb:457:in `with_around_example_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:500:in `with_around_and_singleton_context_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:251:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:629:in `block in run_examples'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:625:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:625:in `run_examples'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:591:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `block (3 levels) in run_specs'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `map'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `block (2 levels) in run_specs'
  rspec-core (3.8.0) lib/rspec/core/configuration.rb:1989:in `with_suite_hooks'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:111:in `block in run_specs'
  rspec-core (3.8.0) lib/rspec/core/reporter.rb:74:in `report'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:110:in `run_specs'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:87:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:71:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:45:in `invoke'
  rspec-core (3.8.0) exe/rspec:4:in `<top (required)>'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/rspec:23:in `load'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/rspec:23:in `<top (required)>'
  bundler (1.17.1) lib/bundler/cli/exec.rb:74:in `load'
  bundler (1.17.1) lib/bundler/cli/exec.rb:74:in `kernel_load'
  bundler (1.17.1) lib/bundler/cli/exec.rb:28:in `run'
  bundler (1.17.1) lib/bundler/cli.rb:463:in `exec'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/command.rb:27:in `run'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/invocation.rb:126:in `invoke_command'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor.rb:387:in `dispatch'
  bundler (1.17.1) lib/bundler/cli.rb:27:in `dispatch'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/base.rb:466:in `start'
  bundler (1.17.1) lib/bundler/cli.rb:18:in `start'
  bundler (1.17.1) exe/bundle:30:in `block in <top (required)>'
  bundler (1.17.1) lib/bundler/friendly_errors.rb:124:in `with_friendly_errors'
  bundler (1.17.1) exe/bundle:22:in `<top (required)>'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/bundle:23:in `load'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/bundle:23:in `<main>'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/" for 127.0.0.1 at 2019-04-12 16:16:36 +0300
Processing by DummyController#index as HTML
  Rendered dummy/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 6.3ms (Views: 6.2ms | ActiveRecord: 0.0ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 16:16:46 +0300
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.9ms)
Completed 200 OK in 19.1ms (Views: 5.8ms | ActiveRecord: 0.3ms)
Started GET "/breakdown_db_only" for 127.0.0.1 at 2019-04-12 16:16:48 +0300

ActionController::RoutingError (No route matches [GET] "/breakdown_db_only"):
  actionpack (3.2.22.5) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.22.5) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.22.5) lib/rails/rack/logger.rb:18:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.7) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.7) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.22.5) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.7) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/static.rb:83:in `call'
  railties (3.2.22.5) lib/rails/engine.rb:484:in `call'
  railties (3.2.22.5) lib/rails/application.rb:231:in `call'
  rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'
  rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'
  rack-test (0.6.3) lib/rack/test.rb:58:in `get'
  spec/integration/rails/rails_spec.rb:330:in `block (4 levels) in <top (required)>'
  rspec-core (3.8.0) lib/rspec/core/example.rb:254:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/example.rb:254:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example.rb:500:in `block in with_around_and_singleton_context_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:457:in `block in with_around_example_hooks'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:464:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:604:in `block in run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/example.rb:342:in `call'
  rspec-wait (0.0.9) lib/rspec/wait.rb:46:in `block (2 levels) in <top (required)>'
  rspec-core (3.8.0) lib/rspec/core/example.rb:447:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/example.rb:447:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:373:in `execute_with'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:606:in `block (2 levels) in run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/example.rb:342:in `call'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:607:in `run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:464:in `run'
  rspec-core (3.8.0) lib/rspec/core/example.rb:457:in `with_around_example_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:500:in `with_around_and_singleton_context_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:251:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:629:in `block in run_examples'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:625:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:625:in `run_examples'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:591:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `block (3 levels) in run_specs'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `map'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `block (2 levels) in run_specs'
  rspec-core (3.8.0) lib/rspec/core/configuration.rb:1989:in `with_suite_hooks'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:111:in `block in run_specs'
  rspec-core (3.8.0) lib/rspec/core/reporter.rb:74:in `report'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:110:in `run_specs'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:87:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:71:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:45:in `invoke'
  rspec-core (3.8.0) exe/rspec:4:in `<top (required)>'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/rspec:23:in `load'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/rspec:23:in `<top (required)>'
  bundler (1.17.1) lib/bundler/cli/exec.rb:74:in `load'
  bundler (1.17.1) lib/bundler/cli/exec.rb:74:in `kernel_load'
  bundler (1.17.1) lib/bundler/cli/exec.rb:28:in `run'
  bundler (1.17.1) lib/bundler/cli.rb:463:in `exec'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/command.rb:27:in `run'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/invocation.rb:126:in `invoke_command'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor.rb:387:in `dispatch'
  bundler (1.17.1) lib/bundler/cli.rb:27:in `dispatch'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/base.rb:466:in `start'
  bundler (1.17.1) lib/bundler/cli.rb:18:in `start'
  bundler (1.17.1) exe/bundle:30:in `block in <top (required)>'
  bundler (1.17.1) lib/bundler/friendly_errors.rb:124:in `with_friendly_errors'
  bundler (1.17.1) exe/bundle:22:in `<top (required)>'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/bundle:23:in `load'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/bundle:23:in `<main>'


Started GET "/breakdown_view_only" for 127.0.0.1 at 2019-04-12 16:16:48 +0300

ActionController::RoutingError (No route matches [GET] "/breakdown_view_only"):
  actionpack (3.2.22.5) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.22.5) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.22.5) lib/rails/rack/logger.rb:18:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.7) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.7) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.22.5) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.7) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/static.rb:83:in `call'
  railties (3.2.22.5) lib/rails/engine.rb:484:in `call'
  railties (3.2.22.5) lib/rails/application.rb:231:in `call'
  rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'
  rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'
  rack-test (0.6.3) lib/rack/test.rb:58:in `get'
  spec/integration/rails/rails_spec.rb:321:in `block (4 levels) in <top (required)>'
  rspec-core (3.8.0) lib/rspec/core/example.rb:254:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/example.rb:254:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example.rb:500:in `block in with_around_and_singleton_context_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:457:in `block in with_around_example_hooks'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:464:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:604:in `block in run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/example.rb:342:in `call'
  rspec-wait (0.0.9) lib/rspec/wait.rb:46:in `block (2 levels) in <top (required)>'
  rspec-core (3.8.0) lib/rspec/core/example.rb:447:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/example.rb:447:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:373:in `execute_with'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:606:in `block (2 levels) in run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/example.rb:342:in `call'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:607:in `run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:464:in `run'
  rspec-core (3.8.0) lib/rspec/core/example.rb:457:in `with_around_example_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:500:in `with_around_and_singleton_context_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:251:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:629:in `block in run_examples'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:625:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:625:in `run_examples'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:591:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `block (3 levels) in run_specs'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `map'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `block (2 levels) in run_specs'
  rspec-core (3.8.0) lib/rspec/core/configuration.rb:1989:in `with_suite_hooks'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:111:in `block in run_specs'
  rspec-core (3.8.0) lib/rspec/core/reporter.rb:74:in `report'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:110:in `run_specs'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:87:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:71:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:45:in `invoke'
  rspec-core (3.8.0) exe/rspec:4:in `<top (required)>'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/rspec:23:in `load'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/rspec:23:in `<top (required)>'
  bundler (1.17.1) lib/bundler/cli/exec.rb:74:in `load'
  bundler (1.17.1) lib/bundler/cli/exec.rb:74:in `kernel_load'
  bundler (1.17.1) lib/bundler/cli/exec.rb:28:in `run'
  bundler (1.17.1) lib/bundler/cli.rb:463:in `exec'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/command.rb:27:in `run'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/invocation.rb:126:in `invoke_command'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor.rb:387:in `dispatch'
  bundler (1.17.1) lib/bundler/cli.rb:27:in `dispatch'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/base.rb:466:in `start'
  bundler (1.17.1) lib/bundler/cli.rb:18:in `start'
  bundler (1.17.1) exe/bundle:30:in `block in <top (required)>'
  bundler (1.17.1) lib/bundler/friendly_errors.rb:124:in `with_friendly_errors'
  bundler (1.17.1) exe/bundle:22:in `<top (required)>'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/bundle:23:in `load'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/bundle:23:in `<main>'


Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 16:16:48 +0300
Processing by DummyController#breakdown as */*
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.1ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.2ms)
Completed 200 OK in 9.0ms (Views: 1.1ms | ActiveRecord: 0.2ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_view_only" for 127.0.0.1 at 2019-04-12 16:17:10 +0300

ActionController::RoutingError (No route matches [GET] "/breakdown_view_only"):
  actionpack (3.2.22.5) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.22.5) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.22.5) lib/rails/rack/logger.rb:18:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.7) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.7) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.22.5) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.7) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/static.rb:83:in `call'
  railties (3.2.22.5) lib/rails/engine.rb:484:in `call'
  railties (3.2.22.5) lib/rails/application.rb:231:in `call'
  rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'
  rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'
  rack-test (0.6.3) lib/rack/test.rb:58:in `get'
  spec/integration/rails/rails_spec.rb:321:in `block (4 levels) in <top (required)>'
  rspec-core (3.8.0) lib/rspec/core/example.rb:254:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/example.rb:254:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example.rb:500:in `block in with_around_and_singleton_context_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:457:in `block in with_around_example_hooks'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:464:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:604:in `block in run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/example.rb:342:in `call'
  rspec-wait (0.0.9) lib/rspec/wait.rb:46:in `block (2 levels) in <top (required)>'
  rspec-core (3.8.0) lib/rspec/core/example.rb:447:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/example.rb:447:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:373:in `execute_with'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:606:in `block (2 levels) in run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/example.rb:342:in `call'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:607:in `run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:464:in `run'
  rspec-core (3.8.0) lib/rspec/core/example.rb:457:in `with_around_example_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:500:in `with_around_and_singleton_context_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:251:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:629:in `block in run_examples'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:625:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:625:in `run_examples'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:591:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `block (3 levels) in run_specs'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `map'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `block (2 levels) in run_specs'
  rspec-core (3.8.0) lib/rspec/core/configuration.rb:1989:in `with_suite_hooks'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:111:in `block in run_specs'
  rspec-core (3.8.0) lib/rspec/core/reporter.rb:74:in `report'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:110:in `run_specs'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:87:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:71:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:45:in `invoke'
  rspec-core (3.8.0) exe/rspec:4:in `<top (required)>'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/rspec:23:in `load'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/rspec:23:in `<top (required)>'
  bundler (1.17.1) lib/bundler/cli/exec.rb:74:in `load'
  bundler (1.17.1) lib/bundler/cli/exec.rb:74:in `kernel_load'
  bundler (1.17.1) lib/bundler/cli/exec.rb:28:in `run'
  bundler (1.17.1) lib/bundler/cli.rb:463:in `exec'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/command.rb:27:in `run'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/invocation.rb:126:in `invoke_command'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor.rb:387:in `dispatch'
  bundler (1.17.1) lib/bundler/cli.rb:27:in `dispatch'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/base.rb:466:in `start'
  bundler (1.17.1) lib/bundler/cli.rb:18:in `start'
  bundler (1.17.1) exe/bundle:30:in `block in <top (required)>'
  bundler (1.17.1) lib/bundler/friendly_errors.rb:124:in `with_friendly_errors'
  bundler (1.17.1) exe/bundle:22:in `<top (required)>'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/bundle:23:in `load'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/bundle:23:in `<main>'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_view_only" for 127.0.0.1 at 2019-04-12 16:17:38 +0300

ActionController::RoutingError (No route matches [GET] "/breakdown_view_only"):
  actionpack (3.2.22.5) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.22.5) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.22.5) lib/rails/rack/logger.rb:18:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.7) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.7) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.22.5) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.7) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.22.5) lib/action_dispatch/middleware/static.rb:83:in `call'
  railties (3.2.22.5) lib/rails/engine.rb:484:in `call'
  railties (3.2.22.5) lib/rails/application.rb:231:in `call'
  rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'
  rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'
  rack-test (0.6.3) lib/rack/test.rb:58:in `get'
  spec/integration/rails/rails_spec.rb:321:in `block (4 levels) in <top (required)>'
  rspec-core (3.8.0) lib/rspec/core/example.rb:254:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/example.rb:254:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example.rb:500:in `block in with_around_and_singleton_context_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:457:in `block in with_around_example_hooks'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:464:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:604:in `block in run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/example.rb:342:in `call'
  rspec-wait (0.0.9) lib/rspec/wait.rb:46:in `block (2 levels) in <top (required)>'
  rspec-core (3.8.0) lib/rspec/core/example.rb:447:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/example.rb:447:in `instance_exec'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:373:in `execute_with'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:606:in `block (2 levels) in run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/example.rb:342:in `call'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:607:in `run_around_example_hooks_for'
  rspec-core (3.8.0) lib/rspec/core/hooks.rb:464:in `run'
  rspec-core (3.8.0) lib/rspec/core/example.rb:457:in `with_around_example_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:500:in `with_around_and_singleton_context_hooks'
  rspec-core (3.8.0) lib/rspec/core/example.rb:251:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:629:in `block in run_examples'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:625:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:625:in `run_examples'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:591:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `block in run'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `map'
  rspec-core (3.8.0) lib/rspec/core/example_group.rb:592:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `block (3 levels) in run_specs'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `map'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:116:in `block (2 levels) in run_specs'
  rspec-core (3.8.0) lib/rspec/core/configuration.rb:1989:in `with_suite_hooks'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:111:in `block in run_specs'
  rspec-core (3.8.0) lib/rspec/core/reporter.rb:74:in `report'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:110:in `run_specs'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:87:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:71:in `run'
  rspec-core (3.8.0) lib/rspec/core/runner.rb:45:in `invoke'
  rspec-core (3.8.0) exe/rspec:4:in `<top (required)>'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/rspec:23:in `load'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/rspec:23:in `<top (required)>'
  bundler (1.17.1) lib/bundler/cli/exec.rb:74:in `load'
  bundler (1.17.1) lib/bundler/cli/exec.rb:74:in `kernel_load'
  bundler (1.17.1) lib/bundler/cli/exec.rb:28:in `run'
  bundler (1.17.1) lib/bundler/cli.rb:463:in `exec'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/command.rb:27:in `run'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/invocation.rb:126:in `invoke_command'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor.rb:387:in `dispatch'
  bundler (1.17.1) lib/bundler/cli.rb:27:in `dispatch'
  bundler (1.17.1) lib/bundler/vendor/thor/lib/thor/base.rb:466:in `start'
  bundler (1.17.1) lib/bundler/cli.rb:18:in `start'
  bundler (1.17.1) exe/bundle:30:in `block in <top (required)>'
  bundler (1.17.1) lib/bundler/friendly_errors.rb:124:in `with_friendly_errors'
  bundler (1.17.1) exe/bundle:22:in `<top (required)>'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/bundle:23:in `load'
  /Users/kyrylo/.gem/ruby/2.4.2/bin/bundle:23:in `<main>'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.2ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.4ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_view_only" for 127.0.0.1 at 2019-04-12 16:18:04 +0300
Processing by DummyController#breakdown_view_only as HTML
  Rendered dummy/breakdown.html.erb within layouts/application (1.0ms)
Completed 200 OK in 6.5ms (Views: 6.4ms | ActiveRecord: 0.0ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_db_only" for 127.0.0.1 at 2019-04-12 16:18:24 +0300
Processing by DummyController#breakdown_db_only as HTML
  [1m[36mBook Load (0.0ms)[0m  [1mSELECT "books".* FROM "books" [0m
  Rendered dummy/breakdown_db_only.html.erb within layouts/application (0.8ms)
Completed 200 OK in 12.0ms (Views: 5.3ms | ActiveRecord: 0.3ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:groups=>{:db=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007f80fa5a90b0 @expected=0, @operator=:>, @args=[]>}))
       got: ({:groups=>{:db=>0.30100000000000005, :view=>5.342000018572435}, :method=>"GET", :response_type=>:html, :route=>"/breakdown_db_only(.:format)", :start_time=>2019-04-12 16:18:24.447869000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:groups=>{:db=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007f80fa5a90b0 @expected=0, @operator=:>, @args=[]>})"]
[0m[32m+[{:groups=>{:db=>0.30100000000000005, :view=>5.342000018572435},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>:html,
[0m[32m+  :route=>"/breakdown_db_only(.:format)",
[0m[32m+  :start_time=>2019-04-12 16:18:24.447869000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:16:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.8ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_db_only" for 127.0.0.1 at 2019-04-12 16:18:44 +0300
Processing by DummyController#breakdown_db_only as HTML
  [1m[36mBook Load (0.0ms)[0m  [1mSELECT "books".* FROM "books" [0m
  Rendered dummy/breakdown_db_only.html.erb within layouts/application (0.8ms)
Completed 200 OK in 12.3ms (Views: 5.3ms | ActiveRecord: 0.2ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:groups=>{:db=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007f83a4c46c90 @expected=0, @operator=:>, @args=[]>}))
       got: ({:groups=>{:db=>0.23900000000000002, :view=>5.271000001812354}, :method=>"GET", :response_type=>:html, :route=>"/breakdown_db_only(.:format)", :start_time=>2019-04-12 16:18:44.619552000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:groups=>{:db=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007f83a4c46c90 @expected=0, @operator=:>, @args=[]>})"]
[0m[32m+[{:groups=>{:db=>0.23900000000000002, :view=>5.271000001812354},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>:html,
[0m[32m+  :route=>"/breakdown_db_only(.:format)",
[0m[32m+  :start_time=>2019-04-12 16:18:44.619552000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:16:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_db_only" for 127.0.0.1 at 2019-04-12 16:19:08 +0300
Processing by DummyController#breakdown_db_only as HTML
  [1m[36mBook Load (0.0ms)[0m  [1mSELECT "books".* FROM "books" [0m
Completed 500 Internal Server Error in 10.9ms

TypeError (no implicit conversion of nil into String):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_db_only" for 127.0.0.1 at 2019-04-12 16:19:25 +0300
Processing by DummyController#breakdown_db_only as HTML
  [1m[36mBook Load (0.0ms)[0m  [1mSELECT "books".* FROM "books" [0m
Completed 500 Internal Server Error in 14.6ms

ActionView::MissingTemplate (Missing template dummy/nothing with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}. Searched in:
  * "layouts/application.html.erb, dummy/index.html.erb, dummy/notify_airbrake_helper.html.erb, dummy/notify_airbrake_sync_helper.html.erb, dummy/active_record_after_commit.html.erb, dummy/active_record_after_rollback.html.erb, dummy/active_job.html.erb, dummy/resque.html.erb, dummy/delayed_job.html.erb, dummy/breakdown.html.erb, dummy/breakdown_view_only.html.erb, dummy/breakdown_db_only.html.erb"
):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_db_only" for 127.0.0.1 at 2019-04-12 16:19:54 +0300
Processing by DummyController#breakdown_db_only as HTML
  [1m[36mBook Load (0.0ms)[0m  [1mSELECT "books".* FROM "books" [0m
  Rendered text template (0.0ms)
Completed 200 OK in 13.2ms (Views: 6.8ms | ActiveRecord: 0.2ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:groups=>{:db=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007ff8dc23a848 @expected=0, @operator=:>, @args=[]>}))
       got: ({:groups=>{:db=>0.17200000000000001, :view=>6.797000009100884}, :method=>"GET", :response_type=>:html, :route=>"/breakdown_db_only(.:format)", :start_time=>2019-04-12 16:19:54.976322000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:groups=>{:db=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007ff8dc23a848 @expected=0, @operator=:>, @args=[]>})"]
[0m[32m+[{:groups=>{:db=>0.17200000000000001, :view=>6.797000009100884},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>:html,
[0m[32m+  :route=>"/breakdown_db_only(.:format)",
[0m[32m+  :start_time=>2019-04-12 16:19:54.976322000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:16:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_db_only" for 127.0.0.1 at 2019-04-12 16:20:29 +0300
Processing by DummyController#breakdown_db_only as HTML
  [1m[36mBook Load (0.0ms)[0m  [1mSELECT "books".* FROM "books" [0m
  Rendered text template (0.0ms)
Completed 200 OK in 12.4ms (Views: 5.6ms | ActiveRecord: 0.2ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:groups=>{:db=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007ffa1fc16e40 @expected=0, @operator=:>, @args=[]>}))
       got: ({:groups=>{:db=>0.189, :view=>5.574999988311902}, :method=>"GET", :response_type=>:html, :route=>"/breakdown_db_only(.:format)", :start_time=>2019-04-12 16:20:29.799065000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:groups=>{:db=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007ffa1fc16e40 @expected=0, @operator=:>, @args=[]>})"]
[0m[32m+[{:groups=>{:db=>0.189, :view=>5.574999988311902},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>:html,
[0m[32m+  :route=>"/breakdown_db_only(.:format)",
[0m[32m+  :start_time=>2019-04-12 16:20:29.799065000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:16:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_db_only" for 127.0.0.1 at 2019-04-12 16:28:17 +0300
Processing by DummyController#breakdown_db_only as HTML
  [1m[36mBook Load (0.0ms)[0m  [1mSELECT "books".* FROM "books" [0m
Completed 500 Internal Server Error in 11.6ms

ActionView::MissingTemplate (Missing template dummy/breakdown_db_only with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}. Searched in:
  * "layouts/application.html.erb, dummy/index.html.erb, dummy/notify_airbrake_helper.html.erb, dummy/notify_airbrake_sync_helper.html.erb, dummy/active_record_after_commit.html.erb, dummy/active_record_after_rollback.html.erb, dummy/active_job.html.erb, dummy/resque.html.erb, dummy/delayed_job.html.erb, dummy/breakdown.html.erb, dummy/breakdown_view_only.html.erb"
):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_db_only" for 127.0.0.1 at 2019-04-12 16:28:45 +0300
Processing by DummyController#breakdown_db_only as HTML
  [1m[36mBook Load (0.0ms)[0m  [1mSELECT "books".* FROM "books" [0m
Completed 500 Internal Server Error in 12.2ms

ActionView::MissingTemplate (Missing template dummy/breakdown_db_only with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}. Searched in:
  * "layouts/application.html.erb, dummy/index.html.erb, dummy/notify_airbrake_helper.html.erb, dummy/notify_airbrake_sync_helper.html.erb, dummy/active_record_after_commit.html.erb, dummy/active_record_after_rollback.html.erb, dummy/active_job.html.erb, dummy/resque.html.erb, dummy/delayed_job.html.erb, dummy/breakdown.html.erb, dummy/breakdown_view_only.html.erb"
):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.3ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.5ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (3.3ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_db_only" for 127.0.0.1 at 2019-04-12 16:28:57 +0300
Processing by DummyController#breakdown_db_only as HTML
  [1m[36mBook Load (0.0ms)[0m  [1mSELECT "books".* FROM "books" [0m
  Rendered text template (0.0ms)
Completed 200 OK in 12.3ms (Views: 5.2ms | ActiveRecord: 0.2ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:groups=>{:db=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007fe5edc89990 @expected=0, @operator=:>, @args=[]>}))
       got: ({:groups=>{:db=>0.23600000000000002, :view=>5.178999999770895}, :method=>"GET", :response_type=>:html, :route=>"/breakdown_db_only(.:format)", :start_time=>2019-04-12 16:28:57.305528000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:groups=>{:db=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007fe5edc89990 @expected=0, @operator=:>, @args=[]>})"]
[0m[32m+[{:groups=>{:db=>0.23600000000000002, :view=>5.178999999770895},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>:html,
[0m[32m+  :route=>"/breakdown_db_only(.:format)",
[0m[32m+  :start_time=>2019-04-12 16:28:57.305528000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:16:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_db_only" for 127.0.0.1 at 2019-04-12 16:29:18 +0300
Processing by DummyController#breakdown_db_only as HTML
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT "books".* FROM "books" [0m
Completed 500 Internal Server Error in 12.5ms

NoMethodError (undefined method `layout' for #<DummyController:0x00007fb8eaca80a0>
Did you mean?  _layout):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_db_only" for 127.0.0.1 at 2019-04-12 16:46:05 +0300
Processing by DummyController#breakdown_db_only as HTML
  [1m[36mBook Load (0.0ms)[0m  [1mSELECT "books".* FROM "books" [0m
  Rendered text template (0.0ms)
Completed 200 OK in 10.8ms (Views: 4.7ms | ActiveRecord: 0.2ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:groups=>{:db=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007fe25ad79af8 @expected=0, @operator=:>, @args=[]>}))
       got: ({:groups=>{:db=>0.19399999999999998, :view=>4.652999981772155}, :method=>"GET", :response_type=>:html, :route=>"/breakdown_db_only(.:format)", :start_time=>2019-04-12 16:46:05.372747000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:groups=>{:db=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007fe25ad79af8 @expected=0, @operator=:>, @args=[]>})"]
[0m[32m+[{:groups=>{:db=>0.19399999999999998, :view=>4.652999981772155},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>:html,
[0m[32m+  :route=>"/breakdown_db_only(.:format)",
[0m[32m+  :start_time=>2019-04-12 16:46:05.372747000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:16:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_db_only" for 127.0.0.1 at 2019-04-12 16:48:18 +0300
Processing by DummyController#breakdown_db_only as HTML
  [1m[36mBook Load (0.0ms)[0m  [1mSELECT "books".* FROM "books" [0m
  Rendered text template (0.0ms)
Completed 200 OK in 10.9ms (Views: 4.6ms | ActiveRecord: 0.2ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:groups=>{:db=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007fc9493c6a30 @expected=0, @operator=:>, @args=[]>}))
       got: ({:groups=>{:db=>0.18, :view=>4.6070000098552555}, :method=>"GET", :response_type=>:html, :route=>"/breakdown_db_only(.:format)", :start_time=>2019-04-12 16:48:18.929717000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:groups=>{:db=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007fc9493c6a30 @expected=0, @operator=:>, @args=[]>})"]
[0m[32m+[{:groups=>{:db=>0.18, :view=>4.6070000098552555},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>:html,
[0m[32m+  :route=>"/breakdown_db_only(.:format)",
[0m[32m+  :start_time=>2019-04-12 16:48:18.929717000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:16:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_db_only" for 127.0.0.1 at 2019-04-12 16:48:43 +0300
Processing by DummyController#breakdown_db_only as HTML
  Rendered text template (0.0ms)
Completed 200 OK in 5.7ms (Views: 5.5ms | ActiveRecord: 0.0ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:groups=>{:db=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007fa8efbed468 @expected=0, @operator=:>, @args=[]>}))
       got: ({:groups=>{:view=>5.51600000471808}, :method=>"GET", :response_type=>:html, :route=>"/breakdown_db_only(.:format)", :start_time=>2019-04-12 16:48:43.774907000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:groups=>{:db=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007fa8efbed468 @expected=0, @operator=:>, @args=[]>})"]
[0m[32m+[{:groups=>{:view=>5.51600000471808},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>:html,
[0m[32m+  :route=>"/breakdown_db_only(.:format)",
[0m[32m+  :start_time=>2019-04-12 16:48:43.774907000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:16:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_db_only" for 127.0.0.1 at 2019-04-12 16:49:30 +0300
Processing by DummyController#breakdown_db_only as HTML
  [1m[36mBook Load (0.0ms)[0m  [1mSELECT "books".* FROM "books" [0m
  Rendered text template (0.0ms)
Completed 200 OK in 11.6ms (Views: 5.1ms | ActiveRecord: 0.2ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:groups=>{:db=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007fc10c4e0690 @expected=0, @operator=:>, @args=[]>}))
       got: ({:groups=>{:db=>0.194, :view=>5.1340000063646585}, :method=>"GET", :response_type=>:html, :route=>"/breakdown_db_only(.:format)", :start_time=>2019-04-12 16:49:30.639715000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:groups=>{:db=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007fc10c4e0690 @expected=0, @operator=:>, @args=[]>})"]
[0m[32m+[{:groups=>{:db=>0.194, :view=>5.1340000063646585},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>:html,
[0m[32m+  :route=>"/breakdown_db_only(.:format)",
[0m[32m+  :start_time=>2019-04-12 16:49:30.639715000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:16:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_db_only" for 127.0.0.1 at 2019-04-12 16:54:41 +0300
Processing by DummyController#breakdown_db_only as HTML
  [1m[36mBook Load (0.0ms)[0m  [1mSELECT "books".* FROM "books" [0m
  Rendered text template (0.0ms)
Completed 200 OK in 10.9ms (Views: 4.8ms | ActiveRecord: 0.2ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:groups=>{:db=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007ffea0b53118 @expected=0, @operator=:>, @args=[]>}))
       got: ({:groups=>{:db=>0.163, :view=>4.7719999856781214}, :method=>"GET", :response_type=>:html, :route=>"/breakdown_db_only(.:format)", :start_time=>2019-04-12 16:54:41.627771000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:groups=>{:db=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007ffea0b53118 @expected=0, @operator=:>, @args=[]>})"]
[0m[32m+[{:groups=>{:db=>0.163, :view=>4.7719999856781214},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>:html,
[0m[32m+  :route=>"/breakdown_db_only(.:format)",
[0m[32m+  :start_time=>2019-04-12 16:54:41.627771000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:16:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_db_only" for 127.0.0.1 at 2019-04-12 16:55:15 +0300
Processing by DummyController#breakdown_db_only as HTML
  [1m[36mBook Load (0.0ms)[0m  [1mSELECT "books".* FROM "books" [0m
Completed 500 Internal Server Error in 12.1ms

ActionView::MissingTemplate (Missing template dummy/breakdown_db_only with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}. Searched in:
  * "layouts/application.html.erb, dummy/index.html.erb, dummy/notify_airbrake_helper.html.erb, dummy/notify_airbrake_sync_helper.html.erb, dummy/active_record_after_commit.html.erb, dummy/active_record_after_rollback.html.erb, dummy/active_job.html.erb, dummy/resque.html.erb, dummy/delayed_job.html.erb, dummy/breakdown.html.erb, dummy/breakdown_view_only.html.erb"
):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_db_only" for 127.0.0.1 at 2019-04-12 16:55:54 +0300
Processing by DummyController#breakdown_db_only as HTML
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT "books".* FROM "books" [0m
Completed 500 Internal Server Error in 11.6ms

ActionView::MissingTemplate (Missing template dummy/breakdown_db_only with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}. Searched in:
  * "layouts/application.html.erb, dummy/index.html.erb, dummy/notify_airbrake_helper.html.erb, dummy/notify_airbrake_sync_helper.html.erb, dummy/active_record_after_commit.html.erb, dummy/active_record_after_rollback.html.erb, dummy/active_job.html.erb, dummy/resque.html.erb, dummy/delayed_job.html.erb, dummy/breakdown.html.erb, dummy/breakdown_view_only.html.erb"
):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_db_only" for 127.0.0.1 at 2019-04-12 16:56:20 +0300
Processing by DummyController#breakdown_db_only as HTML
  [1m[36mBook Load (0.0ms)[0m  [1mSELECT "books".* FROM "books" [0m
  Rendered text template (0.0ms)
Completed 200 OK in 11.4ms (Views: 4.6ms | ActiveRecord: 0.2ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:groups=>{:db=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007fceefaa96a8 @expected=0, @operator=:>, @args=[]>}))
       got: ({:groups=>{:db=>0.21599999999999997, :view=>4.6030000085011125}, :method=>"GET", :response_type=>:html, :route=>"/breakdown_db_only(.:format)", :start_time=>2019-04-12 16:56:20.256688000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:groups=>{:db=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007fceefaa96a8 @expected=0, @operator=:>, @args=[]>})"]
[0m[32m+[{:groups=>{:db=>0.21599999999999997, :view=>4.6030000085011125},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>:html,
[0m[32m+  :route=>"/breakdown_db_only(.:format)",
[0m[32m+  :start_time=>2019-04-12 16:56:20.256688000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:16:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_db_only" for 127.0.0.1 at 2019-04-12 16:57:20 +0300
Processing by DummyController#breakdown_db_only as HTML
  [1m[36mBook Load (0.0ms)[0m  [1mSELECT "books".* FROM "books" [0m
  Rendered text template (0.0ms)
Completed 200 OK in 12.0ms (Views: 5.3ms | ActiveRecord: 0.2ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:groups=>{:db=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007f94722c2528 @expected=0, @operator=:>, @args=[]>}))
       got: ({:groups=>{:db=>0.17900000000000002, :view=>5.275000003166497}, :method=>"GET", :response_type=>:html, :route=>"/breakdown_db_only(.:format)", :start_time=>2019-04-12 16:57:20.673439000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:groups=>{:db=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007f94722c2528 @expected=0, @operator=:>, @args=[]>})"]
[0m[32m+[{:groups=>{:db=>0.17900000000000002, :view=>5.275000003166497},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>:html,
[0m[32m+  :route=>"/breakdown_db_only(.:format)",
[0m[32m+  :start_time=>2019-04-12 16:57:20.673439000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:16:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_db_only" for 127.0.0.1 at 2019-04-12 16:57:41 +0300
Processing by DummyController#breakdown_db_only as HTML
  [1m[36mBook Load (0.0ms)[0m  [1mSELECT "books".* FROM "books" [0m
  Rendered dummy/breakdown_db_only.html.erb within layouts/application (0.9ms)
Completed 200 OK in 12.8ms (Views: 6.4ms | ActiveRecord: 0.2ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:groups=>{:db=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007fd9eed17de0 @expected=0, @operator=:>, @args=[]>}))
       got: ({:groups=>{:db=>0.211, :view=>6.380999984685332}, :method=>"GET", :response_type=>:html, :route=>"/breakdown_db_only(.:format)", :start_time=>2019-04-12 16:57:41.229062000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:groups=>{:db=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007fd9eed17de0 @expected=0, @operator=:>, @args=[]>})"]
[0m[32m+[{:groups=>{:db=>0.211, :view=>6.380999984685332},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>:html,
[0m[32m+  :route=>"/breakdown_db_only(.:format)",
[0m[32m+  :start_time=>2019-04-12 16:57:41.229062000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:16:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (2.7ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_db_only" for 127.0.0.1 at 2019-04-12 16:57:53 +0300
Processing by DummyController#breakdown_db_only as HTML
  Rendered dummy/breakdown_db_only.html.erb within layouts/application (0.9ms)
Completed 200 OK in 5.5ms (Views: 5.3ms | ActiveRecord: 0.0ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:groups=>{:db=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007f9db5bff1f8 @expected=0, @operator=:>, @args=[]>}))
       got: ({:groups=>{:view=>5.273999995552003}, :method=>"GET", :response_type=>:html, :route=>"/breakdown_db_only(.:format)", :start_time=>2019-04-12 16:57:53.114728000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:groups=>{:db=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007f9db5bff1f8 @expected=0, @operator=:>, @args=[]>})"]
[0m[32m+[{:groups=>{:view=>5.273999995552003},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>:html,
[0m[32m+  :route=>"/breakdown_db_only(.:format)",
[0m[32m+  :start_time=>2019-04-12 16:57:53.114728000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:16:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_db_only" for 127.0.0.1 at 2019-04-12 16:58:06 +0300
Processing by DummyController#breakdown_db_only as HTML
  Rendered text template (0.0ms)
Completed 200 OK in 5.2ms (Views: 5.0ms | ActiveRecord: 0.0ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:groups=>{:db=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007fd4673ab9f0 @expected=0, @operator=:>, @args=[]>}))
       got: ({:groups=>{:view=>4.988999979104847}, :method=>"GET", :response_type=>:html, :route=>"/breakdown_db_only(.:format)", :start_time=>2019-04-12 16:58:06.007243000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:groups=>{:db=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007fd4673ab9f0 @expected=0, @operator=:>, @args=[]>})"]
[0m[32m+[{:groups=>{:view=>4.988999979104847},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>:html,
[0m[32m+  :route=>"/breakdown_db_only(.:format)",
[0m[32m+  :start_time=>2019-04-12 16:58:06.007243000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:16:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_db_only" for 127.0.0.1 at 2019-04-12 16:59:25 +0300
Processing by DummyController#breakdown_db_only as HTML
  Rendered dummy/breakdown_db_only.html.erb within layouts/application (0.9ms)
Completed 200 OK in 5.8ms (Views: 5.6ms | ActiveRecord: 0.0ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:groups=>{:db=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007fab8fda2f90 @expected=0, @operator=:>, @args=[]>}))
       got: ({:groups=>{:view=>5.608999985270202}, :method=>"GET", :response_type=>:html, :route=>"/breakdown_db_only(.:format)", :start_time=>2019-04-12 16:59:25.841014000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:groups=>{:db=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007fab8fda2f90 @expected=0, @operator=:>, @args=[]>})"]
[0m[32m+[{:groups=>{:view=>5.608999985270202},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>:html,
[0m[32m+  :route=>"/breakdown_db_only(.:format)",
[0m[32m+  :start_time=>2019-04-12 16:59:25.841014000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:16:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_db_only" for 127.0.0.1 at 2019-04-12 16:59:32 +0300
Processing by DummyController#breakdown_db_only as HTML
  Rendered dummy/breakdown_db_only.html.erb within layouts/application (1.1ms)
Completed 200 OK in 6.2ms (Views: 6.1ms | ActiveRecord: 0.0ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:groups=>{:db=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007feeabc826d8 @expected=0, @operator=:>, @args=[]>}))
       got: ({:groups=>{:view=>6.051000003935769}, :method=>"GET", :response_type=>:html, :route=>"/breakdown_db_only(.:format)", :start_time=>2019-04-12 16:59:32.021166000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:groups=>{:db=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007feeabc826d8 @expected=0, @operator=:>, @args=[]>})"]
[0m[32m+[{:groups=>{:view=>6.051000003935769},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>:html,
[0m[32m+  :route=>"/breakdown_db_only(.:format)",
[0m[32m+  :start_time=>2019-04-12 16:59:32.021166000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:16:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_db_only" for 127.0.0.1 at 2019-04-12 16:59:39 +0300
Processing by DummyController#breakdown_db_only as HTML
  Rendered dummy/breakdown_db_only.html.erb within layouts/application (1.0ms)
Completed 200 OK in 5.9ms (Views: 5.7ms | ActiveRecord: 0.0ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:groups=>{:db=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007f97accb7438 @expected=0, @operator=:>, @args=[]>}))
       got: ({:groups=>{:view=>5.727000010665506}, :method=>"GET", :response_type=>:html, :route=>"/breakdown_db_only(.:format)", :start_time=>2019-04-12 16:59:39.468212000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:groups=>{:db=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007f97accb7438 @expected=0, @operator=:>, @args=[]>})"]
[0m[32m+[{:groups=>{:view=>5.727000010665506},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>:html,
[0m[32m+  :route=>"/breakdown_db_only(.:format)",
[0m[32m+  :start_time=>2019-04-12 16:59:39.468212000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:16:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (2.2ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 19:19:54 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 27.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 19:21:02 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 13.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started HEAD "/crash" for 127.0.0.1 at 2019-04-12 19:21:02 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.1ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 0  in 7.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 19:21:02 +0300
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.1ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (1.1ms)
Completed 200 OK in 17.9ms (Views: 8.5ms | ActiveRecord: 0.2ms)
Started GET "/breakdown_view_only" for 127.0.0.1 at 2019-04-12 19:21:34 +0300
Processing by DummyController#breakdown_view_only as HTML
  Rendered dummy/breakdown.html.erb within layouts/application (0.2ms)
Completed 200 OK in 2.8ms (Views: 1.4ms | ActiveRecord: 0.0ms)
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 19:21:38 +0300
Processing by DummyController#breakdown as */*
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.1ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.2ms)
Completed 200 OK in 8.9ms (Views: 1.1ms | ActiveRecord: 0.3ms)
Started GET "/" for 127.0.0.1 at 2019-04-12 19:21:40 +0300
Processing by DummyController#index as HTML
  Rendered dummy/index.html.erb within layouts/application (0.2ms)
Completed 200 OK in 1.1ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-12 19:21:41 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<RSpec::Mocks::MockExpectationError: Airbrake received :notify with unexpected arguments
  expected: (an instance of Airbrake::Notice)
       got: (#<AirbrakeTestError: after_commit>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of Airbrake::Notice"]
[0m[32m+[#<AirbrakeTestError: after_commit>]
[0m>
Completed 500 Internal Server Error in 21.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/delayed_job" for 127.0.0.1 at 2019-04-12 19:21:41 +0300
Processing by DummyController#delayed_job as HTML
Completed 500 Internal Server Error in 11.3ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007ff720322e30 @config=#<Airbrake::Config:0x00007ff721b65178 @proxy={}, @queue...ash=-2194427807437418333>]}>}, @truncator=#<Airbrake::Truncator:0x00007ff721cc72c8 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007ff720322e30 @config=#<Airbrake::Config:0x00007ff721b65178 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007ff721b65100 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007ff721b650b0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007ff721b65060 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007ff721b64fe8>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3">, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>88, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>155, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__3824412655633217546__process_action__973933718451648961__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__4302986592123593031__call__259989245459725232__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007ff721cc72a0 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007ff722bb9560>, "rack.errors"=>#<StringIO:0x00007ff722bb9650>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007ff7203b35e8>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007ff7214ba260 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007ff7214ba1c0 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007ff7214ba058 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007ff7214ba170 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007ff7214ba120>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007ff720321670 @filters=[#<Proc:0x00007ff720321580@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007ff720321558@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007ff720321508@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007ff720320d60@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007ff720320d38@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"15b9bb852a749aa0b2c80c8d89ed5aec", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007ff722bb3b60 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007ff721453768 @app=#<ActionDispatch::Reloader:0x00007ff721453790 @app=#<ActionDispatch::Callbacks:0x00007ff7214537b8 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007ff7214537e0 @app=#<Airbrake::Rack::Middleware:0x00007ff721453808 @app=#<ActiveRecord::QueryCache:0x00007ff721453920 @app=#<ActionDispatch::Cookies:0x00007ff7214539e8 @app=#<ActionDispatch::Session::CookieStore:0x00007ff721453d08 @secrets=["53ce0dbbcaf92fe2b7a5bc38eda1f0940d98f82b2659fc7255d5932fc4d6"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007ff721453ab0>, @app=#<ActionDispatch::Flash:0x00007ff721453d30 @app=#<ActionDispatch::ParamsParser:0x00007ff721453e20 @app=#<ActionDispatch::Head:0x00007ff721453e48 @app=#<Rack::ConditionalGet:0x00007ff721453e70 @app=#<Rack::ETag:0x00007ff721453e98 @app=#<ActionDispatch::BestStandardsSupport:0x00007ff721453ee8 @app=#<Warden::Manager:0x00007ff721453fb0 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007ff7203b35e8>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007ff721262be8 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=-2189546778138401340>=>:xml_simple, #<Mime::Type:0x00007ff721260708 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=391959726012600903>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"53ce0dbbcaf92fe2b7a5bc38eda1f0940d98f82b2659fc7255d5932fc4d6", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007ff721453ab0>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007ff720341678@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3ffb915d970c not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"53ce0dbbcaf92fe2b7a5bc38eda1f0940d98f82b2659fc7255d5932fc4d6", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007ff721453ab0>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007ff722bb2b98 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007ff722bb2670 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007ff722bb2b98 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007ff722bb25f8 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70349708169840 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007ff722bab410 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007ff722bab2f8 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007ff722bab2d0 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007ff722bab2f8 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007ff722baaf88 @details_key=nil, @details={:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007ff722baaf10 @paths=[#<ActionView::FixtureResolver:0x00007ff7229d8250 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={#<ActionView::LookupContext::DetailsKey:0x00007ff722bab910 @hash=3720654570329717693>=>{"breakdown"=>{"dummy"=>{false=>{[]=>[dummy/breakdown.html.erb]}}}, "application"=>{"layouts"=>{false=>{[]=>[layouts/application.html.erb]}}}, "breakdown.html"=>{"dummy"=>{false=>{[]=>[dummy/breakdown.html.erb]}}}, "index"=>{"dummy"=>{false=>{[]=>[dummy/index.html.erb]}}}}, #<ActionView::LookupContext::DetailsKey:0x00007ff722a3b8f0 @hash=-2280374815722946103>=>{"breakdown"=>{"dummy"=>{false=>{[]=>[dummy/breakdown.html.erb]}}}}}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown", "dummy/breakdown_view_only.html.erb"=>"breakdown_view_only"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007ff721251898 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-2194427807437418333>]}>}, @truncator=#<Airbrake::Truncator:0x00007ff721cc72c8 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 19:21:41 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.1ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 19:21:43 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (2.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 19:40:41 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 28.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 19:40:43 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.1ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 19:40:45 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 19:40:47 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 19:40:49 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 19:40:51 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 19:40:53 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (1.3ms)
Completed 200 OK in 23.8ms (Views: 9.2ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 19:40:56 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 17.5ms (Views: 0.8ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 19:40:58 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.9ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 19:41:00 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.3ms)
Completed 200 OK in 16.6ms (Views: 1.5ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 19:41:02 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.4ms)
Completed 200 OK in 19.7ms (Views: 1.2ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 19:41:04 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.3ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 19:41:06 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 18.6ms (Views: 13.3ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 19:41:08 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.3ms)
Completed 200 OK in 15.5ms (Views: 10.6ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 19:41:10 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 17.8ms (Views: 12.4ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 19:41:12 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 17.7ms (Views: 12.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 19:41:14 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.3ms)
Completed 200 OK in 16.4ms (Views: 11.3ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 19:41:16 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.3ms)
Completed 200 OK in 17.5ms (Views: 11.6ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-12 19:41:18 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 19:41:20 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 19:41:22 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 19:41:24 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 19:41:26 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 24.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 19:41:28 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 24.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 19:41:30 +0300
Processing by DummyController#breakdown as HTML
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.1ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.2ms)
Completed 200 OK in 12.0ms (Views: 0.9ms | ActiveRecord: 0.3ms)
Started GET "/breakdown_view_only" for 127.0.0.1 at 2019-04-12 19:41:30 +0300
Processing by DummyController#breakdown_view_only as HTML
  Rendered dummy/breakdown.html.erb within layouts/application (0.3ms)
Completed 200 OK in 1.4ms (Views: 1.2ms | ActiveRecord: 0.0ms)
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 19:41:30 +0300
Processing by DummyController#breakdown as */*
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.1ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.2ms)
Completed 200 OK in 8.7ms (Views: 0.8ms | ActiveRecord: 0.2ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-12 19:41:30 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/delayed_job" for 127.0.0.1 at 2019-04-12 19:41:32 +0300
Processing by DummyController#delayed_job as HTML
Completed 500 Internal Server Error in 11.4ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007fe3da235cd8 @config=#<Airbrake::Config:0x00007fe3d952d590 @proxy={}, @queue...hash=3382682994714352089>]}>}, @truncator=#<Airbrake::Truncator:0x00007fe3da21ee98 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007fe3da235cd8 @config=#<Airbrake::Config:0x00007fe3d952d590 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fe3d952d518 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fe3d952d4c8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fe3d952d478 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fe3d952d400>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>88, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>155, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__4318493105137490271__process_action__3638856126881089465__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__2944954634283569457__call__964621152294291171__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007fe3da21ee70 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007fe3d97cb540>, "rack.errors"=>#<StringIO:0x00007fe3d97cb608>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fe3d9788ad8>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fe3d9d52298 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fe3d9d521f8 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007fe3d9d52090 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007fe3d9d521a8 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fe3d9d52158>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fe3da24e0d0 @filters=[#<Proc:0x00007fe3da24de50@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007fe3da24ddd8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007fe3da24dd60@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007fe3da24c460@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007fe3da24c438@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"8ebffaa9a89c7f8b852fecf1bafcebaa", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fe3d97ca4d8 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007fe3d966aed0 @app=#<ActionDispatch::Reloader:0x00007fe3d966af20 @app=#<ActionDispatch::Callbacks:0x00007fe3d966af48 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007fe3d966af70 @app=#<Airbrake::Rack::Middleware:0x00007fe3d966af98 @app=#<ActiveRecord::QueryCache:0x00007fe3d966b0b0 @app=#<ActionDispatch::Cookies:0x00007fe3d966b1a0 @app=#<ActionDispatch::Session::CookieStore:0x00007fe3d966b5b0 @secrets=["e9f767dd00ca77c3486d410a1b3bb4ca1907c96e8ef117beda02537343e3"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007fe3d966b290>, @app=#<ActionDispatch::Flash:0x00007fe3d966b650 @app=#<ActionDispatch::ParamsParser:0x00007fe3d966b740 @app=#<ActionDispatch::Head:0x00007fe3d966b768 @app=#<Rack::ConditionalGet:0x00007fe3d966b790 @app=#<Rack::ETag:0x00007fe3d966b7b8 @app=#<ActionDispatch::BestStandardsSupport:0x00007fe3d966b808 @app=#<Warden::Manager:0x00007fe3d966b8d0 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fe3d9788ad8>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007fe3d91eadb0 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=-998540258548011521>=>:xml_simple, #<Mime::Type:0x00007fe3d91f3ed8 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=2412379477140575662>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"e9f767dd00ca77c3486d410a1b3bb4ca1907c96e8ef117beda02537343e3", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fe3d966b290>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007fe3da22dfb0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3ff1ecbe4d6c not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"e9f767dd00ca77c3486d410a1b3bb4ca1907c96e8ef117beda02537343e3", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fe3d966b290>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007fe3d97c9830 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007fe3d97c9330 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fe3d97c9830 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007fe3d97c9290 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70308291561620 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fe3d97c1fb8 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007fe3d97c1d60 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007fe3d97c1d38 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007fe3d97c1d60 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007fe3d97c1838 @details_key=nil, @details={:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007fe3d97c17c0 @paths=[#<ActionView::FixtureResolver:0x00007fe3da14b570 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={#<ActionView::LookupContext::DetailsKey:0x00007fe3d951e8d8 @hash=-1791648001816486840>=>{"notify_airbrake_sync_helper"=>{"dummy"=>{false=>{[]=>[dummy/notify_airbrake_sync_helper.html.erb]}}}, "application"=>{"layouts"=>{false=>{[]=>[layouts/application.html.erb]}}}, "notify_airbrake_helper"=>{"dummy"=>{false=>{[]=>[dummy/notify_airbrake_helper.html.erb]}}}, "breakdown"=>{"dummy"=>{false=>{[]=>[dummy/breakdown.html.erb]}}}, "breakdown.html"=>{"dummy"=>{false=>{[]=>[dummy/breakdown.html.erb]}}}}, #<ActionView::LookupContext::DetailsKey:0x00007fe3de00abd0 @hash=2060409211067797463>=>{"breakdown"=>{"dummy"=>{false=>{[]=>[dummy/breakdown.html.erb]}}}}}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown", "dummy/breakdown_view_only.html.erb"=>"breakdown_view_only"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fe3d91d8458 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=3382682994714352089>]}>}, @truncator=#<Airbrake::Truncator:0x00007fe3da21ee98 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 19:41:32 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 5.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 19:41:32 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 1.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 19:41:32 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 17.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 19:41:34 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<RSpec::Mocks::MockExpectationError: Airbrake received :notify with unexpected arguments
  expected: (an instance of Airbrake::Notice)
       got: (#<AirbrakeTestError: after_commit>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of Airbrake::Notice"]
[0m[32m+[#<AirbrakeTestError: after_commit>]
[0m>
Completed 500 Internal Server Error in 5.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/" for 127.0.0.1 at 2019-04-12 19:41:34 +0300
Processing by DummyController#index as HTML
  Rendered dummy/index.html.erb within layouts/application (0.2ms)
Completed 200 OK in 1.1ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started HEAD "/crash" for 127.0.0.1 at 2019-04-12 19:41:34 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 0  in 5.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 19:41:34 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 5.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/resque" for 127.0.0.1 at 2019-04-12 19:41:34 +0300
Processing by DummyController#resque as HTML
  Rendered dummy/resque.html.erb within layouts/application (0.2ms)
Completed 200 OK in 1.9ms (Views: 0.8ms | ActiveRecord: 0.0ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 19:42:00 +0300
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.9ms)
Completed 200 OK in 18.5ms (Views: 5.4ms | ActiveRecord: 0.3ms)
Started GET "/breakdown_view_only" for 127.0.0.1 at 2019-04-12 19:42:00 +0300
Processing by DummyController#breakdown_view_only as HTML
  Rendered dummy/breakdown.html.erb within layouts/application (0.2ms)
Completed 200 OK in 1.1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 19:42:00 +0300
Processing by DummyController#breakdown as */*
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.2ms)
Completed 200 OK in 9.5ms (Views: 0.9ms | ActiveRecord: 0.1ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-12 19:42:00 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 19:42:02 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.1ms)[0m  commit transaction
#<RSpec::Mocks::MockExpectationError: Airbrake received :notify with unexpected arguments
  expected: (an instance of Airbrake::Notice)
       got: (#<AirbrakeTestError: after_commit>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of Airbrake::Notice"]
[0m[32m+[#<AirbrakeTestError: after_commit>]
[0m>
Completed 500 Internal Server Error in 17.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/" for 127.0.0.1 at 2019-04-12 19:42:02 +0300
Processing by DummyController#index as HTML
  Rendered dummy/index.html.erb within layouts/application (0.2ms)
Completed 200 OK in 1.1ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/resque" for 127.0.0.1 at 2019-04-12 19:42:02 +0300
Processing by DummyController#resque as HTML
  Rendered dummy/resque.html.erb within layouts/application (0.1ms)
Completed 200 OK in 1.9ms (Views: 0.8ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-12 19:42:02 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 19:42:04 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 5.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started HEAD "/crash" for 127.0.0.1 at 2019-04-12 19:42:04 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 0  in 4.8ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify_request with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"HEAD", :status_code=>500))
       got: ({:end_time=>2019-04-12 19:42:04.373847000 +0300, :method=>"HEAD", :route=>"/crash(.:format)", :start_time=>2019-04-12 19:42:04.368942000 +0300, :status_code=>400})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"HEAD\", :status_code=>500)"]
[0m[32m+[{:end_time=>2019-04-12 19:42:04.373847000 +0300,
[0m[32m+  :method=>"HEAD",
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 19:42:04.368942000 +0300,
[0m[32m+  :status_code=>400}]
[0m):
  lib/airbrake/rails/action_controller_notify_subscriber.rb:15:in `block in call'
  lib/airbrake/rails/action_controller_notify_subscriber.rb:14:in `each'
  lib/airbrake/rails/action_controller_notify_subscriber.rb:14:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/delayed_job" for 127.0.0.1 at 2019-04-12 19:42:04 +0300
Processing by DummyController#delayed_job as HTML
Completed 500 Internal Server Error in 11.6ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007fe604b18f90 @config=#<Airbrake::Config:0x00007fe60305d2a0 @proxy={}, @queue... @hash=67354454445966352>]}>}, @truncator=#<Airbrake::Truncator:0x00007fe60533ca00 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007fe604b18f90 @config=#<Airbrake::Config:0x00007fe60305d2a0 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fe60305d228 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fe60305d1d8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fe60305d188 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fe60305d110>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>88, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>155, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__3669966278992675442__process_action__4341428599387380189__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__2686950624648465309__call__1260334805219340651__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007fe60533c9d8 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007fe603bf59c8>, "rack.errors"=>#<StringIO:0x00007fe603bf5ab8>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fe6033f07c8>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fe60532fcd8 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fe60532fc38 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007fe60532fa58 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007fe60532fbc0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fe60532fb70>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fe603c7ce28 @filters=[#<Proc:0x00007fe603c7cd60@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007fe603c7cd38@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007fe603c7cd10@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007fe603c7c428@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007fe603c7c400@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"48a60b5b8005f61ac93d9b798d6d078d", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fe603bf42a8 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007fe603c0fa80 @app=#<ActionDispatch::Reloader:0x00007fe603c0faa8 @app=#<ActionDispatch::Callbacks:0x00007fe603c0fad0 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007fe603c0fb48 @app=#<Airbrake::Rack::Middleware:0x00007fe603c0fb70 @app=#<ActiveRecord::QueryCache:0x00007fe603c0fd00 @app=#<ActionDispatch::Cookies:0x00007fe603c0fe68 @app=#<ActionDispatch::Session::CookieStore:0x00007fe603c140d0 @secrets=["be5589b8c92edf63ccba557f9ba74c47b08f96ea4a5b49ae9c7232374f8f"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007fe603c16c68>, @app=#<ActionDispatch::Flash:0x00007fe603c140f8 @app=#<ActionDispatch::ParamsParser:0x00007fe603c141e8 @app=#<ActionDispatch::Head:0x00007fe603c14210 @app=#<Rack::ConditionalGet:0x00007fe603c14238 @app=#<Rack::ETag:0x00007fe603c14260 @app=#<ActionDispatch::BestStandardsSupport:0x00007fe603c142b0 @app=#<Warden::Manager:0x00007fe603c14378 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fe6033f07c8>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007fe603b292d8 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=-480174037770645437>=>:xml_simple, #<Mime::Type:0x00007fe603b315a0 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=3285618499899651591>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"be5589b8c92edf63ccba557f9ba74c47b08f96ea4a5b49ae9c7232374f8f", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fe603c16c68>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007fe603cddc50@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3ff301df3b38 not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"be5589b8c92edf63ccba557f9ba74c47b08f96ea4a5b49ae9c7232374f8f", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fe603c16c68>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007fe603be7350 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007fe603be6ea0 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fe603be7350 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007fe603be6e00 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70312941008520 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fe603be4240 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007fe603beff78 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007fe603beff00 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007fe603beff78 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007fe603befa28 @details_key=nil, @details={:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007fe603bef938 @paths=[#<ActionView::FixtureResolver:0x00007fe604ab8dc0 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={#<ActionView::LookupContext::DetailsKey:0x00007fe604ae36d8 @hash=2762328833500171464>=>{"breakdown"=>{"dummy"=>{false=>{[]=>[dummy/breakdown.html.erb]}}}, "application"=>{"layouts"=>{false=>{[]=>[layouts/application.html.erb]}}}, "breakdown.html"=>{"dummy"=>{false=>{[]=>[dummy/breakdown.html.erb]}}}, "index"=>{"dummy"=>{false=>{[]=>[dummy/index.html.erb]}}}, "resque"=>{"dummy"=>{false=>{[]=>[dummy/resque.html.erb]}}}}, #<ActionView::LookupContext::DetailsKey:0x00007fe6033e3cd0 @hash=-2217571795902771623>=>{"breakdown"=>{"dummy"=>{false=>{[]=>[dummy/breakdown.html.erb]}}}}}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown", "dummy/breakdown_view_only.html.erb"=>"breakdown_view_only"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fe603b236d0 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=67354454445966352>]}>}, @truncator=#<Airbrake::Truncator:0x00007fe60533ca00 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 19:42:04 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 4.9ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 19:42:04 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 1.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 19:42:04 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 19:42:06 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 19:42:08 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 19:42:10 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 19:42:12 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 19:42:14 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 19:42:16 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 19.1ms (Views: 12.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 19:42:18 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.6ms)
Completed 200 OK in 29.1ms (Views: 20.5ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 19:42:20 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 22.9ms (Views: 14.4ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 19:42:22 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.3ms)
Completed 200 OK in 14.7ms (Views: 9.5ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 19:42:24 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.6ms (Views: 10.5ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 19:42:26 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.6ms (Views: 8.8ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 19:42:28 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.1ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 19:42:30 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.8ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 19:42:32 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.3ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 19:42:34 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.2ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 19:42:36 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.8ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 19:42:38 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.3ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 19:42:40 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 19:42:43 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 19:42:45 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 19:42:47 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 19:42:49 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 34.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 19:42:51 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 23.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (3.0ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/" for 127.0.0.1 at 2019-04-12 20:00:13 +0300
Processing by DummyController#index as HTML
  Rendered dummy/index.html.erb within layouts/application (0.8ms)
Completed 200 OK in 5.4ms (Views: 5.3ms | ActiveRecord: 0.0ms)

RSpec::Mocks::MockExpectationError ((Airbrake).notify(#<Airbrake::Notice:0x00007fb34456d660 @config=#<Airbrake::Config:0x00007fb342097908 @proxy={}, @queue...ash=-4139664769900011244>]}>}, @truncator=#<Airbrake::Truncator:0x00007fb3423e8058 @max_size=10000>>)
    expected: 0 times with any arguments
    received: 1 time with arguments: (#<Airbrake::Notice:0x00007fb34456d660 @config=#<Airbrake::Config:0x00007fb342097908 @proxy={}, @queue...ash=-4139664769900011244>]}>}, @truncator=#<Airbrake::Truncator:0x00007fb3423e8058 @max_size=10000>>)):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 20:00:13 +0300
Processing by DummyController#crash as HTML
NoMethodError: undefined method `[]' for #<Airbrake::Rails::Event:0x00007fb3421c8160>: PRAGMA table_info("books")
Completed 500 Internal Server Error in 5.5ms

RSpec::Expectations::ExpectationNotMetError (
expected: "AirbrakeTestError"
     got: "NameError"

(compared using ==)
):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/resque" for 127.0.0.1 at 2019-04-12 20:00:13 +0300
Processing by DummyController#resque as HTML
  Rendered dummy/resque.html.erb within layouts/application (0.2ms)
Completed 200 OK in 1.9ms (Views: 0.8ms | ActiveRecord: 0.0ms)

NameError (undefined local variable or method `routes' for #<Airbrake::Rails::ActionControllerNotifySubscriber:0x00007fb341c0d310>):
  lib/airbrake/rails/action_controller_notify_subscriber.rb:12:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 20:00:13 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.5ms (Views: 0.9ms | ActiveRecord: 0.0ms)

NameError (undefined local variable or method `routes' for #<Airbrake::Rails::ActionControllerNotifySubscriber:0x00007fb341c0d310>):
  lib/airbrake/rails/action_controller_notify_subscriber.rb:12:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 20:00:15 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.5ms (Views: 1.0ms | ActiveRecord: 0.0ms)

NameError (undefined local variable or method `routes' for #<Airbrake::Rails::ActionControllerNotifySubscriber:0x00007fb341c0d310>):
  lib/airbrake/rails/action_controller_notify_subscriber.rb:12:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 20:00:17 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.7ms (Views: 1.1ms | ActiveRecord: 0.0ms)

NameError (undefined local variable or method `routes' for #<Airbrake::Rails::ActionControllerNotifySubscriber:0x00007fb341c0d310>):
  lib/airbrake/rails/action_controller_notify_subscriber.rb:12:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 20:00:19 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.0ms (Views: 1.0ms | ActiveRecord: 0.0ms)

NameError (undefined local variable or method `routes' for #<Airbrake::Rails::ActionControllerNotifySubscriber:0x00007fb341c0d310>):
  lib/airbrake/rails/action_controller_notify_subscriber.rb:12:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 20:00:21 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.2ms (Views: 1.0ms | ActiveRecord: 0.0ms)

NameError (undefined local variable or method `routes' for #<Airbrake::Rails::ActionControllerNotifySubscriber:0x00007fb341c0d310>):
  lib/airbrake/rails/action_controller_notify_subscriber.rb:12:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 20:00:23 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.5ms (Views: 1.0ms | ActiveRecord: 0.0ms)

NameError (undefined local variable or method `routes' for #<Airbrake::Rails::ActionControllerNotifySubscriber:0x00007fb341c0d310>):
  lib/airbrake/rails/action_controller_notify_subscriber.rb:12:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/" for 127.0.0.1 at 2019-04-12 20:13:13 +0300
Processing by DummyController#index as HTML
  Rendered dummy/index.html.erb within layouts/application (0.9ms)
Completed 200 OK in 6.5ms (Views: 6.3ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-12 20:13:13 +0300
Processing by DummyController#crash as HTML
NameError: uninitialized constant Airbrake::Rails::BacktraceCleaner: PRAGMA table_info("books")
Completed 500 Internal Server Error in 2.5ms

RSpec::Expectations::ExpectationNotMetError (
expected: "AirbrakeTestError"
     got: "ActiveRecord::StatementInvalid"

(compared using ==)
):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/delayed_job" for 127.0.0.1 at 2019-04-12 20:13:13 +0300
Processing by DummyController#delayed_job as HTML
NameError: uninitialized constant Airbrake::Rails::BacktraceCleaner: PRAGMA table_info("delayed_jobs")
Completed 500 Internal Server Error in 1.8ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007f8c5d86b0a0 @config=#<Airbrake::Config:0x00007f8c5d3c9da8 @proxy={}, @queue...hash=2457169319424233193>]}>}, @truncator=#<Airbrake::Truncator:0x00007f8c5d2561d8 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007f8c5d86b0a0 @config=#<Airbrake::Config:0x00007f8c5d3c9da8 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007f8c5d3c9d30 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007f8c5d3c9ce0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007f8c5d3c9c90 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f8c5d3c9c18>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3">, @payload={:errors=>[{:type=>"ActiveRecord::StatementInvalid", :message=>"NameError: uninitialized constant Airbrake::Rails::BacktraceCleaner: PRAGMA table_info(\"delayed_jobs\")", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record_subscriber.rb", :line=>33, :function=>"last_caller"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record_subscriber.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>47, :function=>"publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"block in publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>25, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract_adapter.rb", :line=>275, :function=>"log"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/sqlite_adapter.rb", :line=>242, :function=>"exec_query"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/sqlite_adapter.rb", :line=>471, :function=>"table_structure"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/sqlite_adapter.rb", :line=>346, :function=>"columns"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/schema_cache.rb", :line=>12, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/model_schema.rb", :line=>229, :function=>"columns"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/model_schema.rb", :line=>244, :function=>"column_defaults"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/base.rb", :line=>482, :function=>"initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"new"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>155, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__3170721553297516023__process_action__3449180551694486630__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__3954186840161886595__call__4538773601869394487__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}, {:type=>"NameError", :message=>"uninitialized constant Airbrake::Rails::BacktraceCleaner", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record_subscriber.rb", :line=>33, :function=>"last_caller"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record_subscriber.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>47, :function=>"publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"block in publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>25, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract_adapter.rb", :line=>275, :function=>"log"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/sqlite_adapter.rb", :line=>242, :function=>"exec_query"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/sqlite_adapter.rb", :line=>471, :function=>"table_structure"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/sqlite_adapter.rb", :line=>346, :function=>"columns"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/schema_cache.rb", :line=>12, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/model_schema.rb", :line=>229, :function=>"columns"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/model_schema.rb", :line=>244, :function=>"column_defaults"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/base.rb", :line=>482, :function=>"initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"new"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>155, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__3170721553297516023__process_action__3449180551694486630__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__3954186840161886595__call__4538773601869394487__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<ActiveRecord::StatementInvalid: NameError: uninitialized constant Airbrake::Rails::BacktraceCleaner: PRAGMA table_info("delayed_jobs")>, :rack_request=>#<ActionDispatch::Request:0x00007f8c5d2561b0 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007f8c5d353450>, "rack.errors"=>#<StringIO:0x00007f8c5d353568>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007f8c61015528>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007f8c5eb226d0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007f8c5eb22630 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007f8c5eb224c8 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007f8c5eb225e0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f8c5eb22590>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007f8c5eae2ff8 @filters=[#<Proc:0x00007f8c5eae2ee0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007f8c5eae2eb8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007f8c5eae2e90@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007f8c5eae2648@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007f8c5eae2620@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"a81dad53c3f04caba964e790c0a66ab8", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007f8c5d350778 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007f8c5d425658 @app=#<ActionDispatch::Reloader:0x00007f8c5d425680 @app=#<ActionDispatch::Callbacks:0x00007f8c5d4256a8 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007f8c5d4256d0 @app=#<Airbrake::Rack::Middleware:0x00007f8c5d4256f8 @app=#<ActiveRecord::QueryCache:0x00007f8c5d4257e8 @app=#<ActionDispatch::Cookies:0x00007f8c5d4258d8 @app=#<ActionDispatch::Session::CookieStore:0x00007f8c5d425bf8 @secrets=["b0e9ccb34120adb9dd99b8773d6f7b746ddebf4ce304689659a7b5a6f828"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007f8c5d4259a0>, @app=#<ActionDispatch::Flash:0x00007f8c5d425c20 @app=#<ActionDispatch::ParamsParser:0x00007f8c5d425d10 @app=#<ActionDispatch::Head:0x00007f8c5d425d38 @app=#<Rack::ConditionalGet:0x00007f8c5d425d60 @app=#<Rack::ETag:0x00007f8c5d425d88 @app=#<ActionDispatch::BestStandardsSupport:0x00007f8c5d425dd8 @app=#<Warden::Manager:0x00007f8c5d425ec8 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007f8c61015528>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007f8c60089a50 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=1343020823082311563>=>:xml_simple, #<Mime::Type:0x00007f8c60093de8 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=3285279659924536782>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"b0e9ccb34120adb9dd99b8773d6f7b746ddebf4ce304689659a7b5a6f828", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007f8c5d4259a0>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007f8c5eb1ac28@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3fc62e9a5644 not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"b0e9ccb34120adb9dd99b8773d6f7b746ddebf4ce304689659a7b5a6f828", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007f8c5d4259a0>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007f8c5d34a9e0 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007f8c5d34a530 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007f8c5d34a9e0 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007f8c5d34a4b8 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70120417939920 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007f8c5d342060 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007f8c5d3419f8 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007f8c5d3419d0 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007f8c5d3419f8 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007f8c5d340940 @details_key=nil, @details={:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007f8c5d340878 @paths=[#<ActionView::FixtureResolver:0x00007f8c5d319570 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={#<ActionView::LookupContext::DetailsKey:0x00007f8c5d40d2b0 @hash=-4117718302682447511>=>{"index"=>{"dummy"=>{false=>{[]=>[dummy/index.html.erb]}}}, "application"=>{"layouts"=>{false=>{[]=>[layouts/application.html.erb]}}}}}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown", "dummy/breakdown_view_only.html.erb"=>"breakdown_view_only"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007f8c60080130 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=2457169319424233193>]}>}, @truncator=#<Airbrake::Truncator:0x00007f8c5d2561d8 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 20:13:13 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.7ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 20:13:15 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.3ms (Views: 1.1ms | ActiveRecord: 0.0ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/delayed_job" for 127.0.0.1 at 2019-04-12 20:16:49 +0300
Processing by DummyController#delayed_job as HTML
NameError: uninitialized constant Airbrake::Rails::BacktraceCleaner: PRAGMA table_info("delayed_jobs")
Completed 500 Internal Server Error in 2.3ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007faaf4b45e28 @config=#<Airbrake::Config:0x00007faaf4ac5728 @proxy={}, @queue...ash=-2636570881713708146>]}>}, @truncator=#<Airbrake::Truncator:0x00007faaf4b152a0 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007faaf4b45e28 @config=#<Airbrake::Config:0x00007faaf4ac5728 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007faaf4ac56b0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007faaf4ac5660 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007faaf4ac5610 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007faaf4ac5598>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3">, @payload={:errors=>[{:type=>"ActiveRecord::StatementInvalid", :message=>"NameError: uninitialized constant Airbrake::Rails::BacktraceCleaner: PRAGMA table_info(\"delayed_jobs\")", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record_subscriber.rb", :line=>33, :function=>"last_caller"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record_subscriber.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>47, :function=>"publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"block in publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>25, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract_adapter.rb", :line=>275, :function=>"log"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/sqlite_adapter.rb", :line=>242, :function=>"exec_query"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/sqlite_adapter.rb", :line=>471, :function=>"table_structure"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/sqlite_adapter.rb", :line=>346, :function=>"columns"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/schema_cache.rb", :line=>12, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/model_schema.rb", :line=>229, :function=>"columns"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/model_schema.rb", :line=>244, :function=>"column_defaults"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/base.rb", :line=>482, :function=>"initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"new"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>155, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__2926545931544244065__process_action__3856814695910299907__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__3622741141225740608__call__1767922265315633437__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}, {:type=>"NameError", :message=>"uninitialized constant Airbrake::Rails::BacktraceCleaner", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record_subscriber.rb", :line=>33, :function=>"last_caller"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record_subscriber.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>47, :function=>"publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"block in publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>25, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract_adapter.rb", :line=>275, :function=>"log"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/sqlite_adapter.rb", :line=>242, :function=>"exec_query"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/sqlite_adapter.rb", :line=>471, :function=>"table_structure"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/sqlite_adapter.rb", :line=>346, :function=>"columns"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/schema_cache.rb", :line=>12, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/model_schema.rb", :line=>229, :function=>"columns"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/model_schema.rb", :line=>244, :function=>"column_defaults"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/base.rb", :line=>482, :function=>"initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"new"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>155, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__2926545931544244065__process_action__3856814695910299907__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__3622741141225740608__call__1767922265315633437__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<ActiveRecord::StatementInvalid: NameError: uninitialized constant Airbrake::Rails::BacktraceCleaner: PRAGMA table_info("delayed_jobs")>, :rack_request=>#<ActionDispatch::Request:0x00007faaf4b15278 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007faaf2625b70>, "rack.errors"=>#<StringIO:0x00007faaf2625c10>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007faaf2c155a8>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007faaf4a04898 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007faaf4a047f8 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007faaf4a04640 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007faaf4a04780 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007faaf4a04730>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007faaf2607b70 @filters=[#<Proc:0x00007faaf2607a80@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007faaf2607a58@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007faaf2607a30@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007faaf2607198@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007faaf2607148@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"854edf5a3e2e1b96e7678feaaf1dfd04", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007faaf2604ab0 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007faaf4b9ee38 @app=#<ActionDispatch::Reloader:0x00007faaf4b9ee60 @app=#<ActionDispatch::Callbacks:0x00007faaf4b9ee88 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007faaf4b9eeb0 @app=#<Airbrake::Rack::Middleware:0x00007faaf4b9ef78 @app=#<ActiveRecord::QueryCache:0x00007faaf4b9f0b8 @app=#<ActionDispatch::Cookies:0x00007faaf4b9f1f8 @app=#<ActionDispatch::Session::CookieStore:0x00007faaf4b9f6a8 @secrets=["ded99d77eef7f421b0ce02c1d14cd604bf07a261e21f6d571b1e618554a6"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007faaf4b9f310>, @app=#<ActionDispatch::Flash:0x00007faaf4b9f6d0 @app=#<ActionDispatch::ParamsParser:0x00007faaf4b9f7c0 @app=#<ActionDispatch::Head:0x00007faaf4b9f860 @app=#<Rack::ConditionalGet:0x00007faaf4b9f888 @app=#<Rack::ETag:0x00007faaf4b9f8b0 @app=#<ActionDispatch::BestStandardsSupport:0x00007faaf4b9f978 @app=#<Warden::Manager:0x00007faaf4b9fa90 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007faaf2c155a8>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007faaf234df38 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=-1680637418919198085>=>:xml_simple, #<Mime::Type:0x00007faaf23578a8 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=-2204318432956949481>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"ded99d77eef7f421b0ce02c1d14cd604bf07a261e21f6d571b1e618554a6", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007faaf4b9f310>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007faaf266fb58@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3fd5792fee80 not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"ded99d77eef7f421b0ce02c1d14cd604bf07a261e21f6d571b1e618554a6", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007faaf4b9f310>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007faaf25fd9e0 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007faaf25fd3c8 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007faaf25fd9e0 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007faaf25ef840 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70186093738900 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007faaf25cf6a8 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007faaf25cf568 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007faaf25cf518 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007faaf25cf568 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007faaf4b86108 @details_key=nil, @details={:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007faaf4b85ff0 @paths=[#<ActionView::FixtureResolver:0x00007faaf4a16570 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown", "dummy/breakdown_view_only.html.erb"=>"breakdown_view_only"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007faaf23479f8 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-2636570881713708146>]}>}, @truncator=#<Airbrake::Truncator:0x00007faaf4b152a0 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.4ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/delayed_job" for 127.0.0.1 at 2019-04-12 20:18:06 +0300
Processing by DummyController#delayed_job as HTML
NameError: uninitialized constant Airbrake::Rails::BacktraceCleaner: PRAGMA table_info("delayed_jobs")
Completed 500 Internal Server Error in 1.9ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007fc2a498e900 @config=#<Airbrake::Config:0x00007fc2a57e6070 @proxy={}, @queue...ash=-3233335608079458470>]}>}, @truncator=#<Airbrake::Truncator:0x00007fc2a494d428 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007fc2a498e900 @config=#<Airbrake::Config:0x00007fc2a57e6070 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fc2a57e5ff8 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fc2a57e5fa8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fc2a57e5f58 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fc2a57e5ee0>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3">, @payload={:errors=>[{:type=>"ActiveRecord::StatementInvalid", :message=>"NameError: uninitialized constant Airbrake::Rails::BacktraceCleaner: PRAGMA table_info(\"delayed_jobs\")", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record_subscriber.rb", :line=>33, :function=>"last_caller"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record_subscriber.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>47, :function=>"publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"block in publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>25, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract_adapter.rb", :line=>275, :function=>"log"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/sqlite_adapter.rb", :line=>242, :function=>"exec_query"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/sqlite_adapter.rb", :line=>471, :function=>"table_structure"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/sqlite_adapter.rb", :line=>346, :function=>"columns"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/schema_cache.rb", :line=>12, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/model_schema.rb", :line=>229, :function=>"columns"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/model_schema.rb", :line=>244, :function=>"column_defaults"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/base.rb", :line=>482, :function=>"initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"new"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>155, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__4471787626456189187__process_action__4212282028740250222__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__2343631598119260559__call__4271180350278758350__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}, {:type=>"NameError", :message=>"uninitialized constant Airbrake::Rails::BacktraceCleaner", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record_subscriber.rb", :line=>33, :function=>"last_caller"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record_subscriber.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>47, :function=>"publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"block in publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>25, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract_adapter.rb", :line=>275, :function=>"log"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/sqlite_adapter.rb", :line=>242, :function=>"exec_query"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/sqlite_adapter.rb", :line=>471, :function=>"table_structure"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/sqlite_adapter.rb", :line=>346, :function=>"columns"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/schema_cache.rb", :line=>12, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/model_schema.rb", :line=>229, :function=>"columns"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/model_schema.rb", :line=>244, :function=>"column_defaults"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/base.rb", :line=>482, :function=>"initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"new"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>155, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__4471787626456189187__process_action__4212282028740250222__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__2343631598119260559__call__4271180350278758350__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<ActiveRecord::StatementInvalid: NameError: uninitialized constant Airbrake::Rails::BacktraceCleaner: PRAGMA table_info("delayed_jobs")>, :rack_request=>#<ActionDispatch::Request:0x00007fc2a494d338 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007fc2a42d1720>, "rack.errors"=>#<StringIO:0x00007fc2a42d17c0>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fc2a42087f8>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fc2a42f22b8 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fc2a42f2218 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007fc2a42f20b0 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007fc2a42f21c8 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fc2a42f2178>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fc2a42bb470 @filters=[#<Proc:0x00007fc2a42bb380@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007fc2a42bb358@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007fc2a42bb330@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007fc2a42ba7c8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007fc2a42ba728@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"23db7b094c7778c30af0283637c4fef4", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fc2a42b2e88 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007fc2a49cd470 @app=#<ActionDispatch::Reloader:0x00007fc2a49cd498 @app=#<ActionDispatch::Callbacks:0x00007fc2a49cd4c0 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007fc2a49cd4e8 @app=#<Airbrake::Rack::Middleware:0x00007fc2a49cd510 @app=#<ActiveRecord::QueryCache:0x00007fc2a49cd600 @app=#<ActionDispatch::Cookies:0x00007fc2a49cd6c8 @app=#<ActionDispatch::Session::CookieStore:0x00007fc2a49cda10 @secrets=["204b70c2846bce8f1c16690bce37157aa52e98eea1a357eb68e0496f5143"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007fc2a49cd790>, @app=#<ActionDispatch::Flash:0x00007fc2a49cda38 @app=#<ActionDispatch::ParamsParser:0x00007fc2a49cdb28 @app=#<ActionDispatch::Head:0x00007fc2a49cdb50 @app=#<Rack::ConditionalGet:0x00007fc2a49cdb78 @app=#<Rack::ETag:0x00007fc2a49cdba0 @app=#<ActionDispatch::BestStandardsSupport:0x00007fc2a49cdc18 @app=#<Warden::Manager:0x00007fc2a49cdd08 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fc2a42087f8>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007fc2a549d1c0 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=902187751270163271>=>:xml_simple, #<Mime::Type:0x00007fc2a54a5cd0 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=-4355961953003381199>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"204b70c2846bce8f1c16690bce37157aa52e98eea1a357eb68e0496f5143", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fc2a49cd790>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007fc2aa07af20@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3fe1521581dc not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"204b70c2846bce8f1c16690bce37157aa52e98eea1a357eb68e0496f5143", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fc2a49cd790>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007fc2a42b0020 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007fc2a42abb60 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fc2a42b0020 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007fc2a4a46398 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70236981309760 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fc2a4a24a68 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007fc2a4a248b0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007fc2a4a247e8 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007fc2a4a248b0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007fc2a49de298 @details_key=nil, @details={:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007fc2a49de180 @paths=[#<ActionView::FixtureResolver:0x00007fc2a4138ff8 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown", "dummy/breakdown_view_only.html.erb"=>"breakdown_view_only"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fc2a5496cd0 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-3233335608079458470>]}>}, @truncator=#<Airbrake::Truncator:0x00007fc2a494d428 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/delayed_job" for 127.0.0.1 at 2019-04-12 20:18:20 +0300
Processing by DummyController#delayed_job as HTML
NameError: uninitialized constant Airbrake::Rails::BacktraceCleaner: PRAGMA table_info("delayed_jobs")
Completed 500 Internal Server Error in 2.0ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007fa624321690 @config=#<Airbrake::Config:0x00007fa6250519a0 @proxy={}, @queue...hash=2413998652511845990>]}>}, @truncator=#<Airbrake::Truncator:0x00007fa6263ef520 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007fa624321690 @config=#<Airbrake::Config:0x00007fa6250519a0 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fa625051928 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fa6250518d8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fa625051888 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fa625051810>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3">, @payload={:errors=>[{:type=>"ActiveRecord::StatementInvalid", :message=>"NameError: uninitialized constant Airbrake::Rails::BacktraceCleaner: PRAGMA table_info(\"delayed_jobs\")", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record_subscriber.rb", :line=>35, :function=>"last_caller"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record_subscriber.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>47, :function=>"publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"block in publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>25, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract_adapter.rb", :line=>275, :function=>"log"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/sqlite_adapter.rb", :line=>242, :function=>"exec_query"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/sqlite_adapter.rb", :line=>471, :function=>"table_structure"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/sqlite_adapter.rb", :line=>346, :function=>"columns"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/schema_cache.rb", :line=>12, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/model_schema.rb", :line=>229, :function=>"columns"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/model_schema.rb", :line=>244, :function=>"column_defaults"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/base.rb", :line=>482, :function=>"initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"new"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>155, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__3418500323653994917__process_action__2084131296276686365__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__3757491420650199496__call__3237686145520712437__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}, {:type=>"NameError", :message=>"uninitialized constant Airbrake::Rails::BacktraceCleaner", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record_subscriber.rb", :line=>35, :function=>"last_caller"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record_subscriber.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>47, :function=>"publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"block in publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>25, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract_adapter.rb", :line=>275, :function=>"log"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/sqlite_adapter.rb", :line=>242, :function=>"exec_query"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/sqlite_adapter.rb", :line=>471, :function=>"table_structure"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/sqlite_adapter.rb", :line=>346, :function=>"columns"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/schema_cache.rb", :line=>12, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/model_schema.rb", :line=>229, :function=>"columns"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/model_schema.rb", :line=>244, :function=>"column_defaults"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/base.rb", :line=>482, :function=>"initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"new"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>155, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__3418500323653994917__process_action__2084131296276686365__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__3757491420650199496__call__3237686145520712437__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<ActiveRecord::StatementInvalid: NameError: uninitialized constant Airbrake::Rails::BacktraceCleaner: PRAGMA table_info("delayed_jobs")>, :rack_request=>#<ActionDispatch::Request:0x00007fa6263ef4f8 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007fa623f26f18>, "rack.errors"=>#<StringIO:0x00007fa623f27008>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fa624398010>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fa623f469d0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fa623f46930 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007fa623f467c8 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007fa623f468e0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fa623f46890>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fa623f14728 @filters=[#<Proc:0x00007fa623f14660@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007fa623f14638@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007fa623f145e8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007fa623f0fd18@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007fa623f0fcf0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"f5cf4acc0839920cf6175c91e5abc4dd", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fa623f0c7d0 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007fa6250fe4c0 @app=#<ActionDispatch::Reloader:0x00007fa6250fe4e8 @app=#<ActionDispatch::Callbacks:0x00007fa6250fe510 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007fa6250fe538 @app=#<Airbrake::Rack::Middleware:0x00007fa6250fe560 @app=#<ActiveRecord::QueryCache:0x00007fa6250fe678 @app=#<ActionDispatch::Cookies:0x00007fa6250fe768 @app=#<ActionDispatch::Session::CookieStore:0x00007fa6250fea88 @secrets=["9bff1bf0688258c15e487c1cd385a24a3ad6697971970056a98106f50829"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007fa6250fe830>, @app=#<ActionDispatch::Flash:0x00007fa6250feab0 @app=#<ActionDispatch::ParamsParser:0x00007fa6250febf0 @app=#<ActionDispatch::Head:0x00007fa6250fec18 @app=#<Rack::ConditionalGet:0x00007fa6250fec40 @app=#<Rack::ETag:0x00007fa6250fec68 @app=#<ActionDispatch::BestStandardsSupport:0x00007fa6250fecb8 @app=#<Warden::Manager:0x00007fa6250feda8 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fa624398010>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007fa623bd24e8 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=1723975365030782394>=>:xml_simple, #<Mime::Type:0x00007fa623bd0918 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=1805704808049395975>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"9bff1bf0688258c15e487c1cd385a24a3ad6697971970056a98106f50829", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fa6250fe830>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007fa623f4f468@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3fd311f82e8c not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"9bff1bf0688258c15e487c1cd385a24a3ad6697971970056a98106f50829", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fa6250fe830>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007fa623f05958 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007fa623f05430 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fa623f05958 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007fa623ef7b78 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70175772097860 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fa623ed6ef0 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007fa623ed6d38 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007fa623ed6ce8 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007fa623ed6d38 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007fa62510fea0 @details_key=nil, @details={:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007fa62510fd38 @paths=[#<ActionView::FixtureResolver:0x00007fa623e3aac8 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown", "dummy/breakdown_view_only.html.erb"=>"breakdown_view_only"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fa623bc0888 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=2413998652511845990>]}>}, @truncator=#<Airbrake::Truncator:0x00007fa6263ef520 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/delayed_job" for 127.0.0.1 at 2019-04-12 20:18:31 +0300
Processing by DummyController#delayed_job as HTML
NameError: uninitialized constant Airbrake::Rails::BacktraceCleaner: PRAGMA table_info("delayed_jobs")
Completed 500 Internal Server Error in 39443.7ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007fc9e06bb0a0 @config=#<Airbrake::Config:0x00007fc9e05497a8 @proxy={}, @queue...ash=-3286564752153592009>]}>}, @truncator=#<Airbrake::Truncator:0x00007fc9e0670e10 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007fc9e06bb0a0 @config=#<Airbrake::Config:0x00007fc9e05497a8 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fc9e0549730 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fc9e05496e0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fc9e0549690 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fc9e0549618>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3">, @payload={:errors=>[{:type=>"ActiveRecord::StatementInvalid", :message=>"NameError: uninitialized constant Airbrake::Rails::BacktraceCleaner: PRAGMA table_info(\"delayed_jobs\")", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record_subscriber.rb", :line=>35, :function=>"last_caller"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record_subscriber.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>47, :function=>"publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"block in publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>25, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract_adapter.rb", :line=>275, :function=>"log"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/sqlite_adapter.rb", :line=>242, :function=>"exec_query"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/sqlite_adapter.rb", :line=>471, :function=>"table_structure"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/sqlite_adapter.rb", :line=>346, :function=>"columns"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/schema_cache.rb", :line=>12, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/model_schema.rb", :line=>229, :function=>"columns"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/model_schema.rb", :line=>244, :function=>"column_defaults"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/base.rb", :line=>482, :function=>"initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"new"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>155, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__4553029340162503430__process_action__3049495138898750921__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__4487930855000489640__call__3830074818261666621__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}, {:type=>"NameError", :message=>"uninitialized constant Airbrake::Rails::BacktraceCleaner", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record_subscriber.rb", :line=>35, :function=>"last_caller"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record_subscriber.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>47, :function=>"publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"block in publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>25, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract_adapter.rb", :line=>275, :function=>"log"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/sqlite_adapter.rb", :line=>242, :function=>"exec_query"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/sqlite_adapter.rb", :line=>471, :function=>"table_structure"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/sqlite_adapter.rb", :line=>346, :function=>"columns"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/schema_cache.rb", :line=>12, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/model_schema.rb", :line=>229, :function=>"columns"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/model_schema.rb", :line=>244, :function=>"column_defaults"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/base.rb", :line=>482, :function=>"initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"new"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>155, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__4553029340162503430__process_action__3049495138898750921__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__4487930855000489640__call__3830074818261666621__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<ActiveRecord::StatementInvalid: NameError: uninitialized constant Airbrake::Rails::BacktraceCleaner: PRAGMA table_info("delayed_jobs")>, :rack_request=>#<ActionDispatch::Request:0x00007fc9e0670d98 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007fc9e34a6a78>, "rack.errors"=>#<StringIO:0x00007fc9e34a6b18>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fc9e0a03b90>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fc9e05f3b40 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fc9e05f3aa0 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007fc9e05f3938 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007fc9e05f3a50 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fc9e05f3a00>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fc9e3487bf0 @filters=[#<Proc:0x00007fc9e3487ad8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007fc9e3487ab0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007fc9e3487a38@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007fc9e3486db8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007fc9e3486d90@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"e59efc4360f32141b726f59f647cf185", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fc9e3484400 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007fc9e3426148 @app=#<ActionDispatch::Reloader:0x00007fc9e3426170 @app=#<ActionDispatch::Callbacks:0x00007fc9e34261e8 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007fc9e3426210 @app=#<Airbrake::Rack::Middleware:0x00007fc9e3426238 @app=#<ActiveRecord::QueryCache:0x00007fc9e3426378 @app=#<ActionDispatch::Cookies:0x00007fc9e34265a8 @app=#<ActionDispatch::Session::CookieStore:0x00007fc9e3426b98 @secrets=["e583bd740a3967b1bd10dae1a7f6cc8c9d57a3a350001f33d34ffd16d154"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007fc9e34266c0>, @app=#<ActionDispatch::Flash:0x00007fc9e3426bc0 @app=#<ActionDispatch::ParamsParser:0x00007fc9e3426d50 @app=#<ActionDispatch::Head:0x00007fc9e3426d78 @app=#<Rack::ConditionalGet:0x00007fc9e3426df0 @app=#<Rack::ETag:0x00007fc9e3426e18 @app=#<ActionDispatch::BestStandardsSupport:0x00007fc9e3426eb8 @app=#<Warden::Manager:0x00007fc9e3427048 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fc9e0a03b90>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007fc9e0389440 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=4151552076561682304>=>:xml_simple, #<Mime::Type:0x00007fc9e03937d8 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=3591692805288197062>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"e583bd740a3967b1bd10dae1a7f6cc8c9d57a3a350001f33d34ffd16d154", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fc9e34266c0>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007fc9e0b20f78@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3fe4f1a3ec68 not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"e583bd740a3967b1bd10dae1a7f6cc8c9d57a3a350001f33d34ffd16d154", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fc9e34266c0>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007fc9e347d5d8 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007fc9e347d088 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fc9e347d5d8 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007fc9e346efb0 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70252539115340 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fc9e344ceb0 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007fc9e344cd70 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007fc9e344cd20 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007fc9e344cd70 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007fc9e340cd10 @details_key=nil, @details={:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007fc9e340cc20 @paths=[#<ActionView::FixtureResolver:0x00007fc9e0a99ca8 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown", "dummy/breakdown_view_only.html.erb"=>"breakdown_view_only"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fc9e0378028 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-3286564752153592009>]}>}, @truncator=#<Airbrake::Truncator:0x00007fc9e0670e10 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/delayed_job" for 127.0.0.1 at 2019-04-12 20:19:15 +0300
Processing by DummyController#delayed_job as HTML
Completed 500 Internal Server Error in 11.9ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007fca7136bbc0 @config=#<Airbrake::Config:0x00007fca71399548 @proxy={}, @queue...hash=4279746220052003248>]}>}, @truncator=#<Airbrake::Truncator:0x00007fca723d62d0 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007fca7136bbc0 @config=#<Airbrake::Config:0x00007fca71399548 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fca713994d0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fca71399480 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fca71399430 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fca713993b8>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3">, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>88, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>155, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__2912959547541574392__process_action__1380952510475670141__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__2927779782290469512__call__767122357122625983__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007fca723d62a8 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007fca71412a10>, "rack.errors"=>#<StringIO:0x00007fca71412ab0>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fca71a802f8>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fca72506150 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fca725060b0 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007fca72505f48 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007fca72506060 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fca72506010>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fca713faaf0 @filters=[#<Proc:0x00007fca713faa28@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007fca713faa00@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007fca713fa9d8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007fca713f9c68@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007fca713f9c40@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"348984bf56eb4ddb2f4db37f6bbf78bf", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fca71a20ce0 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007fca7245dc58 @app=#<ActionDispatch::Reloader:0x00007fca7245dc80 @app=#<ActionDispatch::Callbacks:0x00007fca7245dca8 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007fca7245dcd0 @app=#<Airbrake::Rack::Middleware:0x00007fca7245dcf8 @app=#<ActiveRecord::QueryCache:0x00007fca7245dde8 @app=#<ActionDispatch::Cookies:0x00007fca7245deb0 @app=#<ActionDispatch::Session::CookieStore:0x00007fca7245e1d0 @secrets=["1852ccd47422820a926da8058cc519a076112eb795a9ec3be652d236e2e9"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007fca7245df78>, @app=#<ActionDispatch::Flash:0x00007fca7245e1f8 @app=#<ActionDispatch::ParamsParser:0x00007fca7245e2e8 @app=#<ActionDispatch::Head:0x00007fca7245e338 @app=#<Rack::ConditionalGet:0x00007fca7245e360 @app=#<Rack::ETag:0x00007fca7245e388 @app=#<ActionDispatch::BestStandardsSupport:0x00007fca7245e3d8 @app=#<Warden::Manager:0x00007fca7245e4a0 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fca71a802f8>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007fca721ad800 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=1166618241990049704>=>:xml_simple, #<Mime::Type:0x00007fca721b7328 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=570227328080820359>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"1852ccd47422820a926da8058cc519a076112eb795a9ec3be652d236e2e9", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fca7245df78>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007fca714309c0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3fe538d0d7b8 not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"1852ccd47422820a926da8058cc519a076112eb795a9ec3be652d236e2e9", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fca7245df78>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007fca71a1aca0 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007fca71a1a7a0 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fca71a1aca0 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007fca734ad018 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70253747201940 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fca7249ca20 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007fca7249c890 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007fca7249c7f0 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007fca7249c890 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007fca72456638 @details_key=nil, @details={:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007fca72456570 @paths=[#<ActionView::FixtureResolver:0x00007fca7380f670 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown", "dummy/breakdown_view_only.html.erb"=>"breakdown_view_only"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fca721a6e60 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=4279746220052003248>]}>}, @truncator=#<Airbrake::Truncator:0x00007fca723d62d0 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 20:19:20 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 25.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/delayed_job" for 127.0.0.1 at 2019-04-12 20:19:22 +0300
Processing by DummyController#delayed_job as HTML
Completed 500 Internal Server Error in 11.3ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007fb885b29c70 @config=#<Airbrake::Config:0x00007fb8852590f0 @proxy={}, @queue...hash=1867484325506417246>]}>}, @truncator=#<Airbrake::Truncator:0x00007fb885ae2a28 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007fb885b29c70 @config=#<Airbrake::Config:0x00007fb8852590f0 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fb885259078 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fb885259028 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fb885258fd8 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fb885258f60>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>88, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>155, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__1704214308982887106__process_action__2496881693987700673__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__1798043141358433076__call__4096501298118264180__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007fb885ae2a00 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007fb884355450>, "rack.errors"=>#<StringIO:0x00007fb8843554f0>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fb884e4ff40>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fb8843ed408 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fb8843ed368 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007fb8843ed200 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007fb8843ed318 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fb8843ed2c8>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fb8843652b0 @filters=[#<Proc:0x00007fb884365148@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007fb884365120@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007fb8843650a8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007fb884364428@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007fb884364400@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"920c90c582bd5136b23c693b086e7634", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fb8843544b0 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007fb88801da18 @app=#<ActionDispatch::Reloader:0x00007fb88801da90 @app=#<ActionDispatch::Callbacks:0x00007fb88801db08 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007fb88801dba8 @app=#<Airbrake::Rack::Middleware:0x00007fb88801dc20 @app=#<ActiveRecord::QueryCache:0x00007fb88801ddb0 @app=#<ActionDispatch::Cookies:0x00007fb88801dec8 @app=#<ActionDispatch::Session::CookieStore:0x00007fb88801e1e8 @secrets=["4789423a10e3d97ea6c6438265a154fb9a6206c09c407e96f2d0b0ebbff0"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007fb88801df90>, @app=#<ActionDispatch::Flash:0x00007fb88801e210 @app=#<ActionDispatch::ParamsParser:0x00007fb88801e328 @app=#<ActionDispatch::Head:0x00007fb88801e350 @app=#<Rack::ConditionalGet:0x00007fb88801e378 @app=#<Rack::ETag:0x00007fb88801e3a0 @app=#<ActionDispatch::BestStandardsSupport:0x00007fb88801e3f0 @app=#<Warden::Manager:0x00007fb88801e4b8 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fb884e4ff40>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007fb884b75298 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=-1721736877506362451>=>:xml_simple, #<Mime::Type:0x00007fb884b7d948 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=-335283137678472297>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"4789423a10e3d97ea6c6438265a154fb9a6206c09c407e96f2d0b0ebbff0", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fb88801df90>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007fb884316fe8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3fdc421a7db4 not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"4789423a10e3d97ea6c6438265a154fb9a6206c09c407e96f2d0b0ebbff0", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fb88801df90>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007fb88434f870 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007fb88434f208 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fb88434f870 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007fb88434f190 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70215234385920 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fb884347e18 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007fb884347d28 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007fb884347d00 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007fb884347d28 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007fb884347a30 @details_key=nil, @details={:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007fb8843479b8 @paths=[#<ActionView::FixtureResolver:0x00007fb884c7f2b0 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown", "dummy/breakdown_view_only.html.erb"=>"breakdown_view_only"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fb884b6f438 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=1867484325506417246>]}>}, @truncator=#<Airbrake::Truncator:0x00007fb885ae2a28 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 20:19:22 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/" for 127.0.0.1 at 2019-04-12 20:19:24 +0300
Processing by DummyController#index as HTML
  Rendered dummy/index.html.erb within layouts/application (0.9ms)
Completed 200 OK in 6.5ms (Views: 6.3ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-12 20:19:24 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<RSpec::Mocks::MockExpectationError: Airbrake received :notify with unexpected arguments
  expected: (an instance of Airbrake::Notice)
       got: (#<AirbrakeTestError: after_commit>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of Airbrake::Notice"]
[0m[32m+[#<AirbrakeTestError: after_commit>]
[0m>
Completed 500 Internal Server Error in 7.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started HEAD "/crash" for 127.0.0.1 at 2019-04-12 20:19:24 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 0  in 5.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 20:19:24 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 5.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 20:19:24 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
RSpec::Mocks::MockExpectationError: Airbrake received :notify_query with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :func=>"tap", :file=>"lib/airbrake/rails/active_record_subscriber.rb", :line=>"anything"))
       got: ({:end_time=>2019-04-12 20:19:24.563613000 +0300, :file=>"lib/airbrake/rails/active_record_subscriber....=>"begin transaction", :route=>"/crash(.:format)", :start_time=>2019-04-12 20:19:24.563588000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,9 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :func=>\"tap\", :file=>\"lib/airbrake/rails/active_record_subscriber.rb\", :line=>\"anything\")"]
[0m[32m+[{:end_time=>2019-04-12 20:19:24.563613000 +0300,
[0m[32m+  :file=>"lib/airbrake/rails/active_record_subscriber.rb",
[0m[32m+  :func=>"call",
[0m[32m+  :line=>15,
[0m[32m+  :method=>nil,
[0m[32m+  :query=>"begin transaction",
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 20:19:24.563588000 +0300}]
[0m: begin transaction
Completed 500 Internal Server Error in 2.8ms

ActiveRecord::StatementInvalid (RSpec::Mocks::MockExpectationError: Airbrake received :notify_query with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :func=>"tap", :file=>"lib/airbrake/rails/active_record_subscriber.rb", :line=>"anything"))
       got: ({:end_time=>2019-04-12 20:19:24.563613000 +0300, :file=>"lib/airbrake/rails/active_record_subscriber....=>"begin transaction", :route=>"/crash(.:format)", :start_time=>2019-04-12 20:19:24.563588000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,9 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :func=>\"tap\", :file=>\"lib/airbrake/rails/active_record_subscriber.rb\", :line=>\"anything\")"]
[0m[32m+[{:end_time=>2019-04-12 20:19:24.563613000 +0300,
[0m[32m+  :file=>"lib/airbrake/rails/active_record_subscriber.rb",
[0m[32m+  :func=>"call",
[0m[32m+  :line=>15,
[0m[32m+  :method=>nil,
[0m[32m+  :query=>"begin transaction",
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 20:19:24.563588000 +0300}]
[0m: begin transaction):
  lib/airbrake/rails/active_record_subscriber.rb:18:in `block in call'
  lib/airbrake/rails/active_record_subscriber.rb:17:in `each'
  lib/airbrake/rails/active_record_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 20:19:24 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
RSpec::Mocks::MockExpectationError: Airbrake received :notify_query with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :func=>nil, :file=>nil, :line=>nil))
       got: ({:end_time=>2019-04-12 20:19:24.570823000 +0300, :file=>nil, :func=>nil, :line=>nil, :method=>nil, :q...=>"begin transaction", :route=>"/crash(.:format)", :start_time=>2019-04-12 20:19:24.570637000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,9 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :func=>nil, :file=>nil, :line=>nil)"]
[0m[32m+[{:end_time=>2019-04-12 20:19:24.570823000 +0300,
[0m[32m+  :file=>nil,
[0m[32m+  :func=>nil,
[0m[32m+  :line=>nil,
[0m[32m+  :method=>nil,
[0m[32m+  :query=>"begin transaction",
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 20:19:24.570637000 +0300}]
[0m: begin transaction
Completed 500 Internal Server Error in 1.5ms

ActiveRecord::StatementInvalid (RSpec::Mocks::MockExpectationError: Airbrake received :notify_query with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :func=>nil, :file=>nil, :line=>nil))
       got: ({:end_time=>2019-04-12 20:19:24.570823000 +0300, :file=>nil, :func=>nil, :line=>nil, :method=>nil, :q...=>"begin transaction", :route=>"/crash(.:format)", :start_time=>2019-04-12 20:19:24.570637000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,9 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :func=>nil, :file=>nil, :line=>nil)"]
[0m[32m+[{:end_time=>2019-04-12 20:19:24.570823000 +0300,
[0m[32m+  :file=>nil,
[0m[32m+  :func=>nil,
[0m[32m+  :line=>nil,
[0m[32m+  :method=>nil,
[0m[32m+  :query=>"begin transaction",
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 20:19:24.570637000 +0300}]
[0m: begin transaction):
  lib/airbrake/rails/active_record_subscriber.rb:18:in `block in call'
  lib/airbrake/rails/active_record_subscriber.rb:17:in `each'
  lib/airbrake/rails/active_record_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 20:19:24 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.2ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
Completed 500 Internal Server Error in 2.0ms

ActiveRecord::StatementInvalid (SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 20:19:33 +0300
Processing by DummyController#crash as HTML
RSpec::Mocks::MockExpectationError: Airbrake received :notify_query with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :func=>"tap", :file=>"lib/airbrake/rails/active_record_subscriber.rb", :line=>"anything"))
       got: ({:end_time=>2019-04-12 20:19:33.833009000 +0300, :file=>"lib/airbrake/rails/active_record_subscriber....able_info(\"books\")", :route=>"/crash(.:format)", :start_time=>2019-04-12 20:19:33.832943000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,9 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :func=>\"tap\", :file=>\"lib/airbrake/rails/active_record_subscriber.rb\", :line=>\"anything\")"]
[0m[32m+[{:end_time=>2019-04-12 20:19:33.833009000 +0300,
[0m[32m+  :file=>"lib/airbrake/rails/active_record_subscriber.rb",
[0m[32m+  :func=>"call",
[0m[32m+  :line=>15,
[0m[32m+  :method=>nil,
[0m[32m+  :query=>"PRAGMA table_info(\"books\")",
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 20:19:33.832943000 +0300}]
[0m: PRAGMA table_info("books")
Completed 500 Internal Server Error in 11.9ms

ActiveRecord::StatementInvalid (RSpec::Mocks::MockExpectationError: Airbrake received :notify_query with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :func=>"tap", :file=>"lib/airbrake/rails/active_record_subscriber.rb", :line=>"anything"))
       got: ({:end_time=>2019-04-12 20:19:33.833009000 +0300, :file=>"lib/airbrake/rails/active_record_subscriber....able_info(\"books\")", :route=>"/crash(.:format)", :start_time=>2019-04-12 20:19:33.832943000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,9 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :func=>\"tap\", :file=>\"lib/airbrake/rails/active_record_subscriber.rb\", :line=>\"anything\")"]
[0m[32m+[{:end_time=>2019-04-12 20:19:33.833009000 +0300,
[0m[32m+  :file=>"lib/airbrake/rails/active_record_subscriber.rb",
[0m[32m+  :func=>"call",
[0m[32m+  :line=>15,
[0m[32m+  :method=>nil,
[0m[32m+  :query=>"PRAGMA table_info(\"books\")",
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 20:19:33.832943000 +0300}]
[0m: PRAGMA table_info("books")):
  lib/airbrake/rails/active_record_subscriber.rb:18:in `block in call'
  lib/airbrake/rails/active_record_subscriber.rb:17:in `each'
  lib/airbrake/rails/active_record_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 20:24:07 +0300
Processing by DummyController#crash as HTML
RSpec::Mocks::MockExpectationError: Airbrake received :notify_query with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :func=>"tap", :file=>"lib/airbrake/rails/active_record_subscriber.rb", :line=>"anything"))
       got: ({:end_time=>2019-04-12 20:24:07.960551000 +0300, :file=>"lib/airbrake/rails/active_record_subscriber....able_info(\"books\")", :route=>"/crash(.:format)", :start_time=>2019-04-12 20:24:07.960491000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,9 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :func=>\"tap\", :file=>\"lib/airbrake/rails/active_record_subscriber.rb\", :line=>\"anything\")"]
[0m[32m+[{:end_time=>2019-04-12 20:24:07.960551000 +0300,
[0m[32m+  :file=>"lib/airbrake/rails/active_record_subscriber.rb",
[0m[32m+  :func=>"call",
[0m[32m+  :line=>15,
[0m[32m+  :method=>nil,
[0m[32m+  :query=>"PRAGMA table_info(\"books\")",
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 20:24:07.960491000 +0300}]
[0m: PRAGMA table_info("books")
Completed 500 Internal Server Error in 72829.4ms

ActiveRecord::StatementInvalid (RSpec::Mocks::MockExpectationError: Airbrake received :notify_query with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :func=>"tap", :file=>"lib/airbrake/rails/active_record_subscriber.rb", :line=>"anything"))
       got: ({:end_time=>2019-04-12 20:24:07.960551000 +0300, :file=>"lib/airbrake/rails/active_record_subscriber....able_info(\"books\")", :route=>"/crash(.:format)", :start_time=>2019-04-12 20:24:07.960491000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,9 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :func=>\"tap\", :file=>\"lib/airbrake/rails/active_record_subscriber.rb\", :line=>\"anything\")"]
[0m[32m+[{:end_time=>2019-04-12 20:24:07.960551000 +0300,
[0m[32m+  :file=>"lib/airbrake/rails/active_record_subscriber.rb",
[0m[32m+  :func=>"call",
[0m[32m+  :line=>15,
[0m[32m+  :method=>nil,
[0m[32m+  :query=>"PRAGMA table_info(\"books\")",
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 20:24:07.960491000 +0300}]
[0m: PRAGMA table_info("books")):
  lib/airbrake/rails/active_record_subscriber.rb:19:in `block in call'
  lib/airbrake/rails/active_record_subscriber.rb:17:in `each'
  lib/airbrake/rails/active_record_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 20:25:25 +0300
Processing by DummyController#crash as HTML
RSpec::Mocks::MockExpectationError: Airbrake received :notify_query with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :func=>"tap", :file=>"lib/airbrake/rails/active_record_subscriber.rb", :line=>"anything"))
       got: ({:end_time=>2019-04-12 20:25:25.776950000 +0300, :file=>"lib/airbrake/rails/active_record_subscriber....able_info(\"books\")", :route=>"/crash(.:format)", :start_time=>2019-04-12 20:25:25.776887000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,9 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :func=>\"tap\", :file=>\"lib/airbrake/rails/active_record_subscriber.rb\", :line=>\"anything\")"]
[0m[32m+[{:end_time=>2019-04-12 20:25:25.776950000 +0300,
[0m[32m+  :file=>"lib/airbrake/rails/active_record_subscriber.rb",
[0m[32m+  :func=>"call",
[0m[32m+  :line=>15,
[0m[32m+  :method=>"GET",
[0m[32m+  :query=>"PRAGMA table_info(\"books\")",
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 20:25:25.776887000 +0300}]
[0m: PRAGMA table_info("books")
Completed 500 Internal Server Error in 9311.0ms

ActiveRecord::StatementInvalid (RSpec::Mocks::MockExpectationError: Airbrake received :notify_query with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :func=>"tap", :file=>"lib/airbrake/rails/active_record_subscriber.rb", :line=>"anything"))
       got: ({:end_time=>2019-04-12 20:25:25.776950000 +0300, :file=>"lib/airbrake/rails/active_record_subscriber....able_info(\"books\")", :route=>"/crash(.:format)", :start_time=>2019-04-12 20:25:25.776887000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,9 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :func=>\"tap\", :file=>\"lib/airbrake/rails/active_record_subscriber.rb\", :line=>\"anything\")"]
[0m[32m+[{:end_time=>2019-04-12 20:25:25.776950000 +0300,
[0m[32m+  :file=>"lib/airbrake/rails/active_record_subscriber.rb",
[0m[32m+  :func=>"call",
[0m[32m+  :line=>15,
[0m[32m+  :method=>"GET",
[0m[32m+  :query=>"PRAGMA table_info(\"books\")",
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 20:25:25.776887000 +0300}]
[0m: PRAGMA table_info("books")):
  lib/airbrake/rails/active_record_subscriber.rb:19:in `block in call'
  lib/airbrake/rails/active_record_subscriber.rb:17:in `each'
  lib/airbrake/rails/active_record_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 20:25:40 +0300
Processing by DummyController#crash as HTML
RSpec::Mocks::MockExpectationError: Airbrake received :notify_query with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :func=>"tap", :file=>"lib/airbrake/rails/active_record_subscriber.rb", :line=>"anything"))
       got: ({:end_time=>2019-04-12 20:25:40.795654000 +0300, :file=>"lib/airbrake/rails/active_record_subscriber....able_info(\"books\")", :route=>"/crash(.:format)", :start_time=>2019-04-12 20:25:40.795595000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,9 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :func=>\"tap\", :file=>\"lib/airbrake/rails/active_record_subscriber.rb\", :line=>\"anything\")"]
[0m[32m+[{:end_time=>2019-04-12 20:25:40.795654000 +0300,
[0m[32m+  :file=>"lib/airbrake/rails/active_record_subscriber.rb",
[0m[32m+  :func=>"call",
[0m[32m+  :line=>15,
[0m[32m+  :method=>"GET",
[0m[32m+  :query=>"PRAGMA table_info(\"books\")",
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 20:25:40.795595000 +0300}]
[0m: PRAGMA table_info("books")
Completed 500 Internal Server Error in 221937.2ms

ActiveRecord::StatementInvalid (RSpec::Mocks::MockExpectationError: Airbrake received :notify_query with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :func=>"tap", :file=>"lib/airbrake/rails/active_record_subscriber.rb", :line=>"anything"))
       got: ({:end_time=>2019-04-12 20:25:40.795654000 +0300, :file=>"lib/airbrake/rails/active_record_subscriber....able_info(\"books\")", :route=>"/crash(.:format)", :start_time=>2019-04-12 20:25:40.795595000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,9 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :func=>\"tap\", :file=>\"lib/airbrake/rails/active_record_subscriber.rb\", :line=>\"anything\")"]
[0m[32m+[{:end_time=>2019-04-12 20:25:40.795654000 +0300,
[0m[32m+  :file=>"lib/airbrake/rails/active_record_subscriber.rb",
[0m[32m+  :func=>"call",
[0m[32m+  :line=>15,
[0m[32m+  :method=>"GET",
[0m[32m+  :query=>"PRAGMA table_info(\"books\")",
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 20:25:40.795595000 +0300}]
[0m: PRAGMA table_info("books")):
  lib/airbrake/rails/active_record_subscriber.rb:19:in `block in call'
  lib/airbrake/rails/active_record_subscriber.rb:17:in `each'
  lib/airbrake/rails/active_record_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 20:29:26 +0300
Processing by DummyController#crash as HTML
RSpec::Mocks::MockExpectationError: Airbrake received :notify_query with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :func=>"tap", :file=>"lib/airbrake/rails/active_record_subscriber.rb", :line=>"anything"))
       got: ({:end_time=>2019-04-12 20:29:26.319465000 +0300, :file=>"lib/airbrake/rails/active_record_subscriber....able_info(\"books\")", :route=>"/crash(.:format)", :start_time=>2019-04-12 20:29:26.319332000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,9 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :func=>\"tap\", :file=>\"lib/airbrake/rails/active_record_subscriber.rb\", :line=>\"anything\")"]
[0m[32m+[{:end_time=>2019-04-12 20:29:26.319465000 +0300,
[0m[32m+  :file=>"lib/airbrake/rails/active_record_subscriber.rb",
[0m[32m+  :func=>"call",
[0m[32m+  :line=>15,
[0m[32m+  :method=>"GET",
[0m[32m+  :query=>"PRAGMA table_info(\"books\")",
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 20:29:26.319332000 +0300}]
[0m: PRAGMA table_info("books")
Completed 500 Internal Server Error in 12.9ms

ActiveRecord::StatementInvalid (RSpec::Mocks::MockExpectationError: Airbrake received :notify_query with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :func=>"tap", :file=>"lib/airbrake/rails/active_record_subscriber.rb", :line=>"anything"))
       got: ({:end_time=>2019-04-12 20:29:26.319465000 +0300, :file=>"lib/airbrake/rails/active_record_subscriber....able_info(\"books\")", :route=>"/crash(.:format)", :start_time=>2019-04-12 20:29:26.319332000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,9 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :func=>\"tap\", :file=>\"lib/airbrake/rails/active_record_subscriber.rb\", :line=>\"anything\")"]
[0m[32m+[{:end_time=>2019-04-12 20:29:26.319465000 +0300,
[0m[32m+  :file=>"lib/airbrake/rails/active_record_subscriber.rb",
[0m[32m+  :func=>"call",
[0m[32m+  :line=>15,
[0m[32m+  :method=>"GET",
[0m[32m+  :query=>"PRAGMA table_info(\"books\")",
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 20:29:26.319332000 +0300}]
[0m: PRAGMA table_info("books")):
  lib/airbrake/rails/active_record_subscriber.rb:18:in `block in call'
  lib/airbrake/rails/active_record_subscriber.rb:17:in `each'
  lib/airbrake/rails/active_record_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.3ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 20:30:26 +0300
Processing by DummyController#crash as HTML
RSpec::Mocks::MockExpectationError: Airbrake received :notify_query with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :func=>"tap", :file=>"lib/airbrake/rails/active_record_subscriber.rb", :line=>"anything"))
       got: ({:end_time=>2019-04-12 20:30:26.308987000 +0300, :file=>"lib/airbrake/rails/active_record_subscriber....able_info(\"books\")", :route=>"/crash(.:format)", :start_time=>2019-04-12 20:30:26.308917000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,9 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :func=>\"tap\", :file=>\"lib/airbrake/rails/active_record_subscriber.rb\", :line=>\"anything\")"]
[0m[32m+[{:end_time=>2019-04-12 20:30:26.308987000 +0300,
[0m[32m+  :file=>"lib/airbrake/rails/active_record_subscriber.rb",
[0m[32m+  :func=>"call",
[0m[32m+  :line=>15,
[0m[32m+  :method=>"GET",
[0m[32m+  :query=>"PRAGMA table_info(\"books\")",
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 20:30:26.308917000 +0300}]
[0m: PRAGMA table_info("books")
Completed 500 Internal Server Error in 12.1ms

ActiveRecord::StatementInvalid (RSpec::Mocks::MockExpectationError: Airbrake received :notify_query with unexpected arguments
  expected: (hash_including(:route=>"/crash(.:format)", :method=>"GET", :func=>"tap", :file=>"lib/airbrake/rails/active_record_subscriber.rb", :line=>"anything"))
       got: ({:end_time=>2019-04-12 20:30:26.308987000 +0300, :file=>"lib/airbrake/rails/active_record_subscriber....able_info(\"books\")", :route=>"/crash(.:format)", :start_time=>2019-04-12 20:30:26.308917000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,9 @@
[0m[31m-["hash_including(:route=>\"/crash(.:format)\", :method=>\"GET\", :func=>\"tap\", :file=>\"lib/airbrake/rails/active_record_subscriber.rb\", :line=>\"anything\")"]
[0m[32m+[{:end_time=>2019-04-12 20:30:26.308987000 +0300,
[0m[32m+  :file=>"lib/airbrake/rails/active_record_subscriber.rb",
[0m[32m+  :func=>"call",
[0m[32m+  :line=>15,
[0m[32m+  :method=>"GET",
[0m[32m+  :query=>"PRAGMA table_info(\"books\")",
[0m[32m+  :route=>"/crash(.:format)",
[0m[32m+  :start_time=>2019-04-12 20:30:26.308917000 +0300}]
[0m: PRAGMA table_info("books")):
  lib/airbrake/rails/active_record_subscriber.rb:18:in `block in call'
  lib/airbrake/rails/active_record_subscriber.rb:17:in `each'
  lib/airbrake/rails/active_record_subscriber.rb:17:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.5ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/crash" for 127.0.0.1 at 2019-04-12 20:36:52 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 13.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 20:36:59 +0300
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.1ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.9ms)
Completed 200 OK in 18.5ms (Views: 5.8ms | ActiveRecord: 0.3ms)
Started GET "/breakdown_view_only" for 127.0.0.1 at 2019-04-12 20:36:59 +0300
Processing by DummyController#breakdown_view_only as HTML
  Rendered dummy/breakdown.html.erb within layouts/application (0.2ms)
Completed 200 OK in 1.4ms (Views: 1.3ms | ActiveRecord: 0.0ms)
Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 20:36:59 +0300
Processing by DummyController#breakdown as */*
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.1ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.2ms)
Completed 200 OK in 10.9ms (Views: 1.0ms | ActiveRecord: 0.2ms)
Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 20:36:59 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 20:37:01 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.1ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 20:37:03 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 20:37:05 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 20:37:07 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 20:37:09 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 20:37:11 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.3ms (Views: 9.7ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 20:37:13 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.7ms (Views: 9.2ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 20:37:15 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 19.5ms (Views: 13.3ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 20:37:17 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 17.3ms (Views: 10.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 20:37:19 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.7ms (Views: 9.7ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 20:37:21 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.1ms (Views: 1.2ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 20:37:23 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.8ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 20:37:25 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 17.2ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 20:37:27 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.7ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 20:37:29 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 20:37:31 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.9ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 20:37:33 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.7ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/delayed_job" for 127.0.0.1 at 2019-04-12 20:37:35 +0300
Processing by DummyController#delayed_job as HTML
Completed 500 Internal Server Error in 14.1ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007f96fba74fd8 @config=#<Airbrake::Config:0x00007f96faca54e8 @proxy={}, @queue...hash=3143490518021170295>]}>}, @truncator=#<Airbrake::Truncator:0x00007f96fcc9e740 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007f96fba74fd8 @config=#<Airbrake::Config:0x00007f96faca54e8 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007f96faca5470 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007f96faca5420 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007f96faca53d0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f96faca5358>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>88, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>155, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__2774715495332240901__process_action__3775110520874585343__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__3620375517416957079__call__446354586989281181__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007f96fcc9e718 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007f96fcb740b8>, "rack.errors"=>#<StringIO:0x00007f96fcb74450>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007f96faf248e0>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007f96faea60f8 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007f96faea6058 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007f96faea5ef0 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007f96faea6008 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f96faea5fb8>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007f96fae15738 @filters=[#<Proc:0x00007f96fae155f8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007f96fae155d0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007f96fae15580@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007f96fae14860@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007f96fae14810@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"ec53c87431d4a96facbcf2926a3e2bc9", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007f96fcb6c2a0 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007f96fb9ec5c0 @app=#<ActionDispatch::Reloader:0x00007f96fb9ec5e8 @app=#<ActionDispatch::Callbacks:0x00007f96fb9ec610 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007f96fb9ec638 @app=#<Airbrake::Rack::Middleware:0x00007f96fb9ec660 @app=#<ActiveRecord::QueryCache:0x00007f96fb9ec750 @app=#<ActionDispatch::Cookies:0x00007f96fb9ec818 @app=#<ActionDispatch::Session::CookieStore:0x00007f96fb9ecb38 @secrets=["2a4f683573da9bfaf5b63ca225d23a068c71c68c37cec978ec8d56219316"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007f96fb9ec8e0>, @app=#<ActionDispatch::Flash:0x00007f96fb9ecb60 @app=#<ActionDispatch::ParamsParser:0x00007f96fb9ecc50 @app=#<ActionDispatch::Head:0x00007f96fb9ecc78 @app=#<Rack::ConditionalGet:0x00007f96fb9ecca0 @app=#<Rack::ETag:0x00007f96fb9eccc8 @app=#<ActionDispatch::BestStandardsSupport:0x00007f96fb9ecd18 @app=#<Warden::Manager:0x00007f96fb9ecde0 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007f96faf248e0>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007f96faa56ca0 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=-799934719374344270>=>:xml_simple, #<Mime::Type:0x00007f96faa5fd28 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=3860314765639381392>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"2a4f683573da9bfaf5b63ca225d23a068c71c68c37cec978ec8d56219316", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007f96fb9ec8e0>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007f96fae5ef78@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3fcb7e5b2564 not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"2a4f683573da9bfaf5b63ca225d23a068c71c68c37cec978ec8d56219316", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007f96fb9ec8e0>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007f96fabbfc68 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007f96fabbeef8 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007f96fabbfc68 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007f96fabbed90 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70143214220820 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007f96fabb4570 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007f96fa957c00 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007f96fa957b38 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007f96fa957c00 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007f96fa9540c8 @details_key=nil, @details={:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007f96fb923ad0 @paths=[#<ActionView::FixtureResolver:0x00007f96fb95a580 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={#<ActionView::LookupContext::DetailsKey:0x00007f96fcbaff00 @hash=-1657252819682595797>=>{"breakdown"=>{"dummy"=>{false=>{[]=>[dummy/breakdown.html.erb]}}}, "application"=>{"layouts"=>{false=>{[]=>[layouts/application.html.erb]}}}, "breakdown.html"=>{"dummy"=>{false=>{[]=>[dummy/breakdown.html.erb]}}}, "notify_airbrake_helper"=>{"dummy"=>{false=>{[]=>[dummy/notify_airbrake_helper.html.erb]}}}, "notify_airbrake_sync_helper"=>{"dummy"=>{false=>{[]=>[dummy/notify_airbrake_sync_helper.html.erb]}}}}, #<ActionView::LookupContext::DetailsKey:0x00007f96fb3edbb0 @hash=4455716980097099899>=>{"breakdown"=>{"dummy"=>{false=>{[]=>[dummy/breakdown.html.erb]}}}}}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown", "dummy/breakdown_view_only.html.erb"=>"breakdown_view_only"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007f96faa44488 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=3143490518021170295>]}>}, @truncator=#<Airbrake::Truncator:0x00007f96fcc9e740 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/resque" for 127.0.0.1 at 2019-04-12 20:37:35 +0300
Processing by DummyController#resque as HTML
  Rendered dummy/resque.html.erb within layouts/application (0.2ms)
Completed 200 OK in 1.9ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-12 20:37:35 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 5.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 20:37:35 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 1.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 20:37:35 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 6.9ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started HEAD "/crash" for 127.0.0.1 at 2019-04-12 20:37:35 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 0  in 5.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 20:37:35 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 17.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 20:37:38 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 20:37:40 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 20:37:42 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 20:37:44 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 20:37:46 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.9ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 20:37:48 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/" for 127.0.0.1 at 2019-04-12 20:37:50 +0300
Processing by DummyController#index as HTML
  Rendered dummy/index.html.erb within layouts/application (0.2ms)
Completed 200 OK in 1.3ms (Views: 1.1ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-12 20:37:50 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<RSpec::Mocks::MockExpectationError: Airbrake received :notify with unexpected arguments
  expected: (an instance of Airbrake::Notice)
       got: (#<AirbrakeTestError: after_commit>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of Airbrake::Notice"]
[0m[32m+[#<AirbrakeTestError: after_commit>]
[0m>
Completed 500 Internal Server Error in 6.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-12 20:37:50 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
Connecting to database specified by DATABASE_URL
  [1m[36m (3.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-16 18:59:26 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (1.2ms)
Completed 200 OK in 21.2ms (Views: 15.3ms | ActiveRecord: 0.0ms)

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-16 18:59:28 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 18.0ms (Views: 9.8ms | ActiveRecord: 0.0ms)

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-16 18:59:30 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.7ms (Views: 9.0ms | ActiveRecord: 0.0ms)

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-16 18:59:32 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.9ms (Views: 9.3ms | ActiveRecord: 0.0ms)

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-16 18:59:34 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.0ms (Views: 10.6ms | ActiveRecord: 0.0ms)

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-16 18:59:36 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.7ms (Views: 9.6ms | ActiveRecord: 0.0ms)

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-16 18:59:38 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 26.6ms

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-16 18:59:40 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.3ms

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-16 18:59:42 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.2ms

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-16 18:59:44 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 23.3ms

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-16 18:59:46 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.1ms

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-16 18:59:49 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.2ms

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-16 18:59:51 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 28.3ms (Views: 1.7ms | ActiveRecord: 0.0ms)

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-16 18:59:53 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.5ms (Views: 0.9ms | ActiveRecord: 0.0ms)

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-16 18:59:55 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.7ms (Views: 0.9ms | ActiveRecord: 0.0ms)

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-16 18:59:57 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.2ms (Views: 0.9ms | ActiveRecord: 0.0ms)

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-16 18:59:59 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 13.6ms (Views: 1.0ms | ActiveRecord: 0.0ms)

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-16 19:00:01 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 17.9ms (Views: 1.0ms | ActiveRecord: 0.0ms)

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/delayed_job" for 127.0.0.1 at 2019-04-16 19:00:03 +0300
Processing by DummyController#delayed_job as HTML
Completed 500 Internal Server Error in 14.6ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007ff3dd043020 @config=#<Airbrake::Config:0x00007ff3dad12a10 @proxy={}, @queue...hash=2616986480019080859>]}>}, @truncator=#<Airbrake::Truncator:0x00007ff3dae28b48 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007ff3dd043020 @config=#<Airbrake::Config:0x00007ff3dad12a10 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007ff3dad12998 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007ff3dad12948 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007ff3dad128f8 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007ff3dad12880>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"TypeError", :message=>"no implicit conversion of nil into Hash", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb", :line=>14, :function=>"merge"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb", :line=>14, :function=>"block in call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb", :line=>13, :function=>"each"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb", :line=>13, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>47, :function=>"publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"block in publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/fanout.rb", :line=>25, :function=>"publish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>25, :function=>"ensure in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>25, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__3181085627949085257__call__1054119342240340653__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}, {:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>89, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>162, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__1925053402297380974__process_action__3719222544436343465__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__3181085627949085257__call__1054119342240340653__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<TypeError: no implicit conversion of nil into Hash>, :rack_request=>#<ActionDispatch::Request:0x00007ff3dae28b20 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007ff3da234850>, "rack.errors"=>#<StringIO:0x00007ff3da234968>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007ff3db937cc8>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007ff3dac59d30 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007ff3dac59ba0 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007ff3dac59998 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007ff3dac59b28 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007ff3dac59ad8>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007ff3da35e000 @filters=[#<Proc:0x00007ff3da35df38@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007ff3da35df10@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007ff3da35dee8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007ff3da35d3f8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007ff3da35d3d0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"dac7756dc110b11b8335315fc197fc58", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007ff3da22daf0 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007ff3dbb0a7a8 @app=#<ActionDispatch::Reloader:0x00007ff3dbb0a7d0 @app=#<ActionDispatch::Callbacks:0x00007ff3dbb0a7f8 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007ff3dbb0a820 @app=#<Airbrake::Rack::Middleware:0x00007ff3dbb0a8c0 @app=#<ActiveRecord::QueryCache:0x00007ff3dbb0aaa0 @app=#<ActionDispatch::Cookies:0x00007ff3dbb0abe0 @app=#<ActionDispatch::Session::CookieStore:0x00007ff3dbb0af28 @secrets=["a1492b3b62961e5c30539790597997b29344e6a7f72d6b6639800723342f"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007ff3dbb0aca8>, @app=#<ActionDispatch::Flash:0x00007ff3dbb0af50 @app=#<ActionDispatch::ParamsParser:0x00007ff3dbb0b040 @app=#<ActionDispatch::Head:0x00007ff3dbb0b068 @app=#<Rack::ConditionalGet:0x00007ff3dbb0b090 @app=#<Rack::ETag:0x00007ff3dbb0b0b8 @app=#<ActionDispatch::BestStandardsSupport:0x00007ff3dbb0b108 @app=#<Warden::Manager:0x00007ff3dbb0b1d0 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007ff3db937cc8>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007ff3daae0eb8 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=-1854925113954872911>=>:xml_simple, #<Mime::Type:0x00007ff3daaeb0c0 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=4257884462416282862>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"a1492b3b62961e5c30539790597997b29344e6a7f72d6b6639800723342f", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007ff3dbb0aca8>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007ff3dad89390@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3ff9ed11629c not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"a1492b3b62961e5c30539790597997b29344e6a7f72d6b6639800723342f", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007ff3dbb0aca8>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007ff3da22c268 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007ff3da227bf0 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007ff3da22c268 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007ff3da227b78 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70342656736540 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007ff3da21fae0 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007ff3da21f928 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007ff3da21f900 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007ff3da21f928 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007ff3da21f590 @details_key=nil, @details={:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007ff3da21f4f0 @paths=[#<ActionView::FixtureResolver:0x00007ff3d9cee6c0 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={#<ActionView::LookupContext::DetailsKey:0x00007ff3d9d954c0 @hash=-2734437633030721736>=>{"notify_airbrake_helper"=>{"dummy"=>{false=>{[]=>[dummy/notify_airbrake_helper.html.erb]}}}, "application"=>{"layouts"=>{false=>{[]=>[layouts/application.html.erb]}}}, "notify_airbrake_sync_helper"=>{"dummy"=>{false=>{[]=>[dummy/notify_airbrake_sync_helper.html.erb]}}}}}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown", "dummy/breakdown_view_only.html.erb"=>"breakdown_view_only", "dummy/breakdown_http.html.erb"=>"breakdown_http"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007ff3daad9730 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=2616986480019080859>]}>}, @truncator=#<Airbrake::Truncator:0x00007ff3dae28b48 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started HEAD "/crash" for 127.0.0.1 at 2019-04-16 19:00:03 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 0  in 5.1ms

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-16 19:00:03 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 5.1ms

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-16 19:00:03 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.3ms

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-16 19:00:05 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.1ms)[0m  commit transaction
#<RSpec::Mocks::MockExpectationError: Airbrake received :notify with unexpected arguments
  expected: (an instance of Airbrake::Notice)
       got: (#<AirbrakeTestError: after_commit>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of Airbrake::Notice"]
[0m[32m+[#<AirbrakeTestError: after_commit>]
[0m>
Completed 500 Internal Server Error in 6.1ms

RSpec::Expectations::ExpectationNotMetError (
expected: "AirbrakeTestError"
     got: "TypeError"

(compared using ==)
):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/" for 127.0.0.1 at 2019-04-16 19:00:05 +0300
Processing by DummyController#index as HTML
  Rendered dummy/index.html.erb within layouts/application (0.2ms)
Completed 200 OK in 1.1ms (Views: 0.9ms | ActiveRecord: 0.0ms)

RSpec::Mocks::MockExpectationError ((Airbrake).notify(#<Airbrake::Notice:0x00007ff3da2ffc80 @config=#<Airbrake::Config:0x00007ff3dad12a10 @proxy={}, @queue...hash=2616986480019080859>]}>}, @truncator=#<Airbrake::Truncator:0x00007ff3dbb08e58 @max_size=10000>>)
    expected: 0 times with any arguments
    received: 1 time with arguments: (#<Airbrake::Notice:0x00007ff3da2ffc80 @config=#<Airbrake::Config:0x00007ff3dad12a10 @proxy={}, @queue...hash=2616986480019080859>]}>}, @truncator=#<Airbrake::Truncator:0x00007ff3dbb08e58 @max_size=10000>>)):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-16 19:00:05 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.4ms

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-16 19:00:07 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 29.5ms

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-16 19:00:09 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.6ms

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-16 19:00:11 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.9ms

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-16 19:00:13 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.2ms

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-16 19:00:15 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.1ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.5ms

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-16 19:00:17 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 23.9ms

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-16 19:00:19 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 6.0ms

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-16 19:00:19 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 1.3ms

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/breakdown" for 127.0.0.1 at 2019-04-16 19:00:19 +0300
Processing by DummyController#breakdown as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "breakdown"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT "books".* FROM "books" [0m
  Rendered dummy/breakdown.html.erb within layouts/application (0.2ms)
Completed 200 OK in 8.8ms (Views: 0.9ms | ActiveRecord: 0.2ms)

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/breakdown_view_only" for 127.0.0.1 at 2019-04-16 19:00:19 +0300
Processing by DummyController#breakdown_view_only as HTML
  Rendered dummy/breakdown.html.erb within layouts/application (0.1ms)
Completed 200 OK in 1.1ms (Views: 1.0ms | ActiveRecord: 0.0ms)

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/breakdown_http" for 127.0.0.1 at 2019-04-16 19:00:19 +0300
Processing by DummyController#breakdown_http as HTML
  Rendered dummy/breakdown_http.html.erb within layouts/application (0.3ms)
Completed 200 OK in 4926.8ms (Views: 1.6ms | ActiveRecord: 0.0ms)

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/breakdown" for 127.0.0.1 at 2019-04-16 19:00:24 +0300
Processing by DummyController#breakdown as */*
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "breakdown"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT "books".* FROM "books" [0m
  Rendered dummy/breakdown.html.erb within layouts/application (0.2ms)
Completed 200 OK in 9.7ms (Views: 1.1ms | ActiveRecord: 0.2ms)

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/resque" for 127.0.0.1 at 2019-04-16 19:00:24 +0300
Processing by DummyController#resque as HTML
  Rendered dummy/resque.html.erb within layouts/application (0.2ms)
Completed 200 OK in 2.5ms (Views: 1.0ms | ActiveRecord: 0.0ms)

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-16 19:00:39 +0300
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.1ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.8ms)
Completed 200 OK in 17.9ms (Views: 5.4ms | ActiveRecord: 0.4ms)

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-16 19:00:52 +0300
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.9ms)
Completed 200 OK in 19.2ms (Views: 5.6ms | ActiveRecord: 0.3ms)

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-16 19:02:53 +0300
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.9ms)
Completed 200 OK in 23.2ms (Views: 6.6ms | ActiveRecord: 0.3ms)

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.4ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-16 19:03:12 +0300
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.9ms)
Completed 200 OK in 18.2ms (Views: 5.6ms | ActiveRecord: 0.3ms)

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-16 19:03:24 +0300
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.9ms)
Completed 200 OK in 22.5ms (Views: 5.9ms | ActiveRecord: 0.4ms)

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/breakdown" for 127.0.0.1 at 2019-04-16 19:03:36 +0300
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.1ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.2ms)
Completed 200 OK in 8.5ms (Views: 0.9ms | ActiveRecord: 0.2ms)

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-16 19:03:40 +0300
Processing by DummyController#breakdown as HTML
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.1ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.9ms)
Completed 200 OK in 20.4ms (Views: 6.1ms | ActiveRecord: 0.5ms)

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-16 19:04:01 +0300
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.9ms)
Completed 200 OK in 18.4ms (Views: 5.6ms | ActiveRecord: 0.3ms)

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-16 19:04:44 +0300
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.1ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.9ms)
Completed 200 OK in 19.1ms (Views: 5.4ms | ActiveRecord: 0.4ms)

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-16 19:05:16 +0300
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.9ms)
Completed 200 OK in 19.2ms (Views: 5.9ms | ActiveRecord: 0.4ms)

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:14:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-16 19:05:27 +0300
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.9ms)
Completed 200 OK in 19.3ms (Views: 5.7ms | ActiveRecord: 0.3ms)

TypeError (no implicit conversion of nil into Hash):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:15:in `merge'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:15:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.4ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown" for 127.0.0.1 at 2019-04-16 19:06:47 +0300
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.9ms)
Completed 200 OK in 18.6ms (Views: 5.6ms | ActiveRecord: 0.3ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (1.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started HEAD "/crash" for 127.0.0.1 at 2019-04-16 19:07:47 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 0  in 12.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-16 19:07:47 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 4.9ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-16 19:07:47 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-16 19:07:49 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-16 19:07:51 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-16 19:07:53 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 10.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-16 19:07:55 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-16 19:07:57 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-16 19:07:59 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
#<RSpec::Mocks::MockExpectationError: Airbrake received :notify with unexpected arguments
  expected: (an instance of Airbrake::Notice)
       got: (#<AirbrakeTestError: after_commit>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of Airbrake::Notice"]
[0m[32m+[#<AirbrakeTestError: after_commit>]
[0m>
Completed 500 Internal Server Error in 16.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/" for 127.0.0.1 at 2019-04-16 19:07:59 +0300
Processing by DummyController#index as HTML
  Rendered dummy/index.html.erb within layouts/application (0.8ms)
Completed 200 OK in 5.4ms (Views: 5.3ms | ActiveRecord: 0.0ms)
Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-16 19:07:59 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 23.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-16 19:08:01 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-16 19:08:03 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.1ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-16 19:08:05 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-16 19:08:07 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 11.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-16 19:08:09 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-16 19:08:11 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.5ms (Views: 9.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-16 19:08:13 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.9ms (Views: 12.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-16 19:08:15 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 20.6ms (Views: 15.2ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-16 19:08:17 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 29.8ms (Views: 20.6ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-16 19:08:19 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.2ms (Views: 9.2ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-16 19:08:21 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.6ms (Views: 9.8ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-16 19:08:23 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 18.1ms (Views: 1.2ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-16 19:08:25 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.7ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-16 19:08:27 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.8ms (Views: 2.3ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-16 19:08:29 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.7ms (Views: 1.1ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-16 19:08:31 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.0ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-16 19:08:33 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.1ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/breakdown" for 127.0.0.1 at 2019-04-16 19:08:36 +0300
Processing by DummyController#breakdown as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "breakdown"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT "books".* FROM "books" [0m
  Rendered dummy/breakdown.html.erb within layouts/application (0.2ms)
Completed 200 OK in 9.6ms (Views: 1.0ms | ActiveRecord: 0.2ms)
Started GET "/breakdown" for 127.0.0.1 at 2019-04-16 19:08:36 +0300
Processing by DummyController#breakdown as */*
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "breakdown"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT "books".* FROM "books" [0m
  Rendered dummy/breakdown.html.erb within layouts/application (0.2ms)
Completed 200 OK in 8.6ms (Views: 0.9ms | ActiveRecord: 0.2ms)
Started GET "/breakdown_http" for 127.0.0.1 at 2019-04-16 19:08:36 +0300
Processing by DummyController#breakdown_http as HTML
  Rendered dummy/breakdown_http.html.erb within layouts/application (0.4ms)
Completed 200 OK in 682114.4ms (Views: 4.1ms | ActiveRecord: 0.0ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:groups=>{:view=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007ffbc0078aa0 @expected...=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007ffbc00789d8 @expected=0, @operator=:>, @args=[]>}))
       got: ({:groups=>{:view=>4.0969999972730875}, :method=>"GET", :response_type=>:html, :route=>"/breakdown_http(.:format)", :start_time=>2019-04-16 19:08:36.043757000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:groups=>{:view=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007ffbc0078aa0 @expected=0, @operator=:>, @args=[]>, :http=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007ffbc00789d8 @expected=0, @operator=:>, @args=[]>})"]
[0m[32m+[{:groups=>{:view=>4.0969999972730875},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>:html,
[0m[32m+  :route=>"/breakdown_http(.:format)",
[0m[32m+  :start_time=>2019-04-16 19:08:36.043757000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:17:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/breakdown_view_only" for 127.0.0.1 at 2019-04-16 19:19:58 +0300
Processing by DummyController#breakdown_view_only as HTML
  Rendered dummy/breakdown.html.erb within layouts/application (0.1ms)
Completed 200 OK in 1.1ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-16 19:19:58 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 10.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.4ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.4ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_http" for 127.0.0.1 at 2019-04-16 19:20:07 +0300
Processing by DummyController#breakdown_http as HTML
Completed 500 Internal Server Error in 12836.9ms

NameError (uninitialized constant Airbrake::Benchmark):
  lib/airbrake/rails/net_http.rb:13:in `request'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_http" for 127.0.0.1 at 2019-04-16 19:20:49 +0300
Processing by DummyController#breakdown_http as HTML
Completed 500 Internal Server Error in 15587.2ms

NameError (uninitialized constant Airbrake::Benchmark):
  lib/airbrake/rails/net_http.rb:13:in `request'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_http" for 127.0.0.1 at 2019-04-16 19:21:22 +0300
Processing by DummyController#breakdown_http as HTML
Completed 500 Internal Server Error in 19570.9ms

NameError (uninitialized constant Airbrake::Benchmark):
  lib/airbrake/rails/net_http.rb:13:in `request'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (2.8ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_http" for 127.0.0.1 at 2019-04-16 19:33:45 +0300
Processing by DummyController#breakdown_http as HTML
Completed 500 Internal Server Error in 18026.8ms

WebMock::NetConnectNotAllowedError (Real HTTP connections are disabled. Unregistered request: GET http://example.com/ with headers {'Accept'=>'*/*', 'Accept-Encoding'=>'gzip;q=1.0,deflate;q=0.6,identity;q=0.3', 'User-Agent'=>'Ruby'}

You can stub this request with the following snippet:

stub_request(:get, "http://example.com/").
  with(:headers => {'Accept'=>'*/*', 'Accept-Encoding'=>'gzip;q=1.0,deflate;q=0.6,identity;q=0.3', 'User-Agent'=>'Ruby'}).
  to_return(:status => 200, :body => "", :headers => {})

registered request stubs:

stub_request(:post, "https://api.airbrake.io/api/v3/projects/113743/notices")

============================================================):
  lib/airbrake/rails/net_http.rb:14:in `block in request'
  lib/airbrake/rails/net_http.rb:13:in `request'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_http" for 127.0.0.1 at 2019-04-16 19:34:12 +0300
Processing by DummyController#breakdown_http as HTML
Completed 500 Internal Server Error in 1.3ms

WebMock::NetConnectNotAllowedError (Real HTTP connections are disabled. Unregistered request: GET http://example.com/ with headers {'Accept'=>'*/*', 'Accept-Encoding'=>'gzip;q=1.0,deflate;q=0.6,identity;q=0.3', 'User-Agent'=>'Ruby'}

You can stub this request with the following snippet:

stub_request(:get, "http://example.com/").
  with(:headers => {'Accept'=>'*/*', 'Accept-Encoding'=>'gzip;q=1.0,deflate;q=0.6,identity;q=0.3', 'User-Agent'=>'Ruby'}).
  to_return(:status => 200, :body => "", :headers => {})

registered request stubs:

stub_request(:post, "https://api.airbrake.io/api/v3/projects/113743/notices")

============================================================):
  lib/airbrake/rails/net_http.rb:13:in `block in request'
  lib/airbrake/rails/net_http.rb:12:in `request'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_http" for 127.0.0.1 at 2019-04-16 19:34:35 +0300
Processing by DummyController#breakdown_http as HTML
Completed 500 Internal Server Error in 1.4ms

WebMock::NetConnectNotAllowedError (Real HTTP connections are disabled. Unregistered request: GET http://example.com/ with headers {'Accept'=>'*/*', 'Accept-Encoding'=>'gzip;q=1.0,deflate;q=0.6,identity;q=0.3', 'User-Agent'=>'Ruby'}

You can stub this request with the following snippet:

stub_request(:get, "http://example.com/").
  with(:headers => {'Accept'=>'*/*', 'Accept-Encoding'=>'gzip;q=1.0,deflate;q=0.6,identity;q=0.3', 'User-Agent'=>'Ruby'}).
  to_return(:status => 200, :body => "", :headers => {})

registered request stubs:

stub_request(:post, "https://api.airbrake.io/api/v3/projects/113743/notices")

============================================================):
  lib/airbrake/rails/net_http.rb:13:in `block in request'
  lib/airbrake/rails/net_http.rb:12:in `request'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_http" for 127.0.0.1 at 2019-04-16 19:40:11 +0300
Processing by DummyController#breakdown_http as HTML
  Rendered dummy/breakdown_http.html.erb within layouts/application (1.1ms)
Completed 200 OK in 10.7ms (Views: 9.0ms | ActiveRecord: 0.0ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:groups=>{:view=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007f98f3fc18e8 @expected...=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007f98f3fc1730 @expected=0, @operator=:>, @args=[]>}))
       got: ({:groups=>{:view=>9.0290000080131}, :method=>"GET", :response_type=>:html, :route=>"/breakdown_http(.:format)", :start_time=>2019-04-16 19:40:11.194878000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:groups=>{:view=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007f98f3fc18e8 @expected=0, @operator=:>, @args=[]>, :http=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007f98f3fc1730 @expected=0, @operator=:>, @args=[]>})"]
[0m[32m+[{:groups=>{:view=>9.0290000080131},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>:html,
[0m[32m+  :route=>"/breakdown_http(.:format)",
[0m[32m+  :start_time=>2019-04-16 19:40:11.194878000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:18:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_http" for 127.0.0.1 at 2019-04-16 19:40:17 +0300
Processing by DummyController#breakdown_http as HTML
  Rendered dummy/breakdown_http.html.erb within layouts/application (1.1ms)
Completed 200 OK in 7.7ms (Views: 6.3ms | ActiveRecord: 0.0ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:groups=>{:view=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007fd01841eac0 @expected...=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007fd01841e9a8 @expected=0, @operator=:>, @args=[]>}))
       got: ({:groups=>{:view=>6.251999991945922}, :method=>"GET", :response_type=>:html, :route=>"/breakdown_http(.:format)", :start_time=>2019-04-16 19:40:17.412085000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:groups=>{:view=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007fd01841eac0 @expected=0, @operator=:>, @args=[]>, :http=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007fd01841e9a8 @expected=0, @operator=:>, @args=[]>})"]
[0m[32m+[{:groups=>{:view=>6.251999991945922},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>:html,
[0m[32m+  :route=>"/breakdown_http(.:format)",
[0m[32m+  :start_time=>2019-04-16 19:40:17.412085000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:18:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_http" for 127.0.0.1 at 2019-04-16 19:40:39 +0300
Processing by DummyController#breakdown_http as HTML
  Rendered dummy/breakdown_http.html.erb within layouts/application (1.0ms)
Completed 200 OK in 25080.1ms (Views: 7.6ms | ActiveRecord: 0.0ms)

RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:groups=>{:view=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007fd5377b7870 @expected...=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007fd5377b7780 @expected=0, @operator=:>, @args=[]>}))
       got: ({:groups=>{:view=>7.627999992109835}, :method=>"GET", :response_type=>:html, :route=>"/breakdown_http(.:format)", :start_time=>2019-04-16 19:40:40.006203000 +0300})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:groups=>{:view=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007fd5377b7870 @expected=0, @operator=:>, @args=[]>, :http=>#<RSpec::Matchers::BuiltIn::BeComparedTo:0x00007fd5377b7780 @expected=0, @operator=:>, @args=[]>})"]
[0m[32m+[{:groups=>{:view=>7.627999992109835},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>:html,
[0m[32m+  :route=>"/breakdown_http(.:format)",
[0m[32m+  :start_time=>2019-04-16 19:40:40.006203000 +0300}]
[0m):
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:18:in `block in call'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `each'
  lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:13:in `call'
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (0.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/breakdown_http" for 127.0.0.1 at 2019-04-16 19:41:23 +0300
Processing by DummyController#breakdown_http as HTML
  Rendered dummy/breakdown_http.html.erb within layouts/application (0.9ms)
Completed 200 OK in 7.8ms (Views: 6.1ms | ActiveRecord: 0.0ms)
Connecting to database specified by DATABASE_URL
  [1m[36m (1.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/resque" for 127.0.0.1 at 2019-04-16 19:41:50 +0300
Processing by DummyController#resque as HTML
  Rendered dummy/resque.html.erb within layouts/application (0.9ms)
Completed 200 OK in 6.5ms (Views: 5.3ms | ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2019-04-16 19:41:50 +0300
Processing by DummyController#index as HTML
  Rendered dummy/index.html.erb within layouts/application (0.2ms)
Completed 200 OK in 1.0ms (Views: 0.8ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-16 19:41:50 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<RSpec::Mocks::MockExpectationError: Airbrake received :notify with unexpected arguments
  expected: (an instance of Airbrake::Notice)
       got: (#<AirbrakeTestError: after_commit>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of Airbrake::Notice"]
[0m[32m+[#<AirbrakeTestError: after_commit>]
[0m>
Completed 500 Internal Server Error in 22.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-16 19:41:50 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.2ms (Views: 10.7ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-16 19:41:52 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.7ms (Views: 9.3ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-16 19:41:54 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.5ms (Views: 10.5ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-16 19:41:56 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.5ms (Views: 9.7ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-16 19:41:58 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.3ms (Views: 9.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-16 19:42:00 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 18.2ms (Views: 11.2ms | ActiveRecord: 0.0ms)
Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-16 19:42:02 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 24.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-16 19:42:04 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-16 19:42:06 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-16 19:42:09 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-16 19:42:11 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-16 19:42:13 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 11.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-16 19:42:15 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 19.8ms (Views: 1.1ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-16 19:42:17 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.5ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-16 19:42:19 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.0ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-16 19:42:21 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.5ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-16 19:42:23 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.6ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-16 19:42:25 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 16.0ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-16 19:42:27 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 5.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started HEAD "/crash" for 127.0.0.1 at 2019-04-16 19:42:27 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 0  in 5.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-16 19:42:27 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/breakdown" for 127.0.0.1 at 2019-04-16 19:42:29 +0300
Processing by DummyController#breakdown as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.1ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.2ms)
Completed 200 OK in 9.0ms (Views: 1.0ms | ActiveRecord: 0.2ms)
Started GET "/breakdown_view_only" for 127.0.0.1 at 2019-04-16 19:42:29 +0300
Processing by DummyController#breakdown_view_only as HTML
  Rendered dummy/breakdown.html.erb within layouts/application (0.2ms)
Completed 200 OK in 1.4ms (Views: 1.2ms | ActiveRecord: 0.0ms)
Started GET "/breakdown_http" for 127.0.0.1 at 2019-04-16 19:42:29 +0300
Processing by DummyController#breakdown_http as HTML
  Rendered dummy/breakdown_http.html.erb within layouts/application (0.2ms)
Completed 200 OK in 2.1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/breakdown" for 127.0.0.1 at 2019-04-16 19:42:29 +0300
Processing by DummyController#breakdown as */*
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "breakdown"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" 
  Rendered dummy/breakdown.html.erb within layouts/application (0.2ms)
Completed 200 OK in 7.8ms (Views: 1.0ms | ActiveRecord: 0.1ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-16 19:42:29 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 4.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-16 19:42:29 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 1.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/delayed_job" for 127.0.0.1 at 2019-04-16 19:42:29 +0300
Processing by DummyController#delayed_job as HTML
Completed 500 Internal Server Error in 13.7ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007f960289edc0 @config=#<Airbrake::Config:0x00007f9602ce1338 @proxy={}, @queue...hash=1491216587675971065>]}>}, @truncator=#<Airbrake::Truncator:0x00007f96014f4950 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007f960289edc0 @config=#<Airbrake::Config:0x00007f9602ce1338 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007f9602ce12c0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007f9602ce1270 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007f9602ce1220 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f9602ce11a8>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>89, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>162, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__1692480013397482825__process_action__3097670573497951035__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__808678352375306834__call__3684583513792529706__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.5", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007f96014f4928 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007f96002d1a20>, "rack.errors"=>#<StringIO:0x00007f96002d1b10>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007f96014ee618>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007f960148d638 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007f960148d598 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007f960148d430 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007f960148d548 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f960148d4f8>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007f9602d981f0 @filters=[#<Proc:0x00007f9602d9aa90@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007f9602d93fb0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007f9602d93f88@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007f9602d93790@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007f9602d93768@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"1b3f390f6b5a23db80b49839551a78b6", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007f96002d0080 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007f9601056498 @app=#<ActionDispatch::Reloader:0x00007f96010564c0 @app=#<ActionDispatch::Callbacks:0x00007f9601056510 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007f9601056538 @app=#<Airbrake::Rack::Middleware:0x00007f9601056560 @app=#<ActiveRecord::QueryCache:0x00007f9601056650 @app=#<ActionDispatch::Cookies:0x00007f9601056718 @app=#<ActionDispatch::Session::CookieStore:0x00007f9601056a88 @secrets=["e61e9d024ed6cd0cb5e4c61cbf23d944fbd304e36a1108d6c7d6ae92dbd7"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007f96010567e0>, @app=#<ActionDispatch::Flash:0x00007f9601056ab0 @app=#<ActionDispatch::ParamsParser:0x00007f9601056ba0 @app=#<ActionDispatch::Head:0x00007f9601056bc8 @app=#<Rack::ConditionalGet:0x00007f9601056bf0 @app=#<Rack::ETag:0x00007f9601056c18 @app=#<ActionDispatch::BestStandardsSupport:0x00007f9601056c68 @app=#<Warden::Manager:0x00007f9601056d30 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007f96014ee618>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007f9602ade388 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=4178461604053009048>=>:xml_simple, #<Mime::Type:0x00007f9602ae7d98 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=-1616919368455611395>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"e61e9d024ed6cd0cb5e4c61cbf23d944fbd304e36a1108d6c7d6ae92dbd7", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007f96010567e0>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007f9602dfaee0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3fcb000f7728 not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"e61e9d024ed6cd0cb5e4c61cbf23d944fbd304e36a1108d6c7d6ae92dbd7", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007f96010567e0>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007f96001eeba8 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007f96001ee4a0 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007f96001eeba8 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007f96001ee388 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70141111922740 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007f95ffaaae00 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007f95ffaaacc0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007f95ffaaac98 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007f95ffaaacc0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007f95ffaaa978 @details_key=nil, @details={:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007f95ffaaa900 @paths=[#<ActionView::FixtureResolver:0x00007f9602b9f3a8 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={#<ActionView::LookupContext::DetailsKey:0x00007f96001ed230 @hash=4575736924260619077>=>{"resque"=>{"dummy"=>{false=>{[]=>[dummy/resque.html.erb]}}}, "application"=>{"layouts"=>{false=>{[]=>[layouts/application.html.erb]}}}, "index"=>{"dummy"=>{false=>{[]=>[dummy/index.html.erb]}}}, "notify_airbrake_helper"=>{"dummy"=>{false=>{[]=>[dummy/notify_airbrake_helper.html.erb]}}}, "notify_airbrake_sync_helper"=>{"dummy"=>{false=>{[]=>[dummy/notify_airbrake_sync_helper.html.erb]}}}, "breakdown"=>{"dummy"=>{false=>{[]=>[dummy/breakdown.html.erb]}}}, "breakdown.html"=>{"dummy"=>{false=>{[]=>[dummy/breakdown.html.erb]}}}, "breakdown_http.html"=>{"dummy"=>{false=>{[]=>[dummy/breakdown_http.html.erb]}}}}, #<ActionView::LookupContext::DetailsKey:0x00007f960144cf70 @hash=-2641706109697521090>=>{"breakdown"=>{"dummy"=>{false=>{[]=>[dummy/breakdown.html.erb]}}}}}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown", "dummy/breakdown_view_only.html.erb"=>"breakdown_view_only", "dummy/breakdown_http.html.erb"=>"breakdown_http"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007f9602acdec0 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=1491216587675971065>]}>}, @truncator=#<Airbrake::Truncator:0x00007f96014f4950 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-16 19:42:29 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 26.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-16 19:42:31 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-16 19:42:33 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-16 19:42:35 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-16 19:42:37 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 23.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-16 19:42:39 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.5ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-16 19:42:41 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Connecting to database specified by DATABASE_URL
  [1m[36m (3.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")
Started GET "/delayed_job" for 127.0.0.1 at 2019-04-17 15:32:44 +0300
Processing by DummyController#delayed_job as HTML
Completed 500 Internal Server Error in 12.7ms

RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, {"job"=>hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")})
       got: (#<Airbrake::Notice:0x00007fe8dd94d680 @config=#<Airbrake::Config:0x00007fe8dbbd29c0 @proxy={}, @queue...hash=1791753392830513621>]}>}, @truncator=#<Airbrake::Truncator:0x00007fe8dce95850 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,4 +1,8 @@
[0m[31m-["anything",
[0m[31m- {"job"=>
[0m[31m-   hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n")}]
[0m[32m+[#<Airbrake::Notice:0x00007fe8dd94d680 @config=#<Airbrake::Config:0x00007fe8dbbd29c0 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fe8dbbd2948 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fe8dbbd28f8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fe8dbbd28a8 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fe8dbbd2830>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3">, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>89, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/delayed_job-4.1.5/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>162, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/implicit_render.rb", :line=>4, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>167, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rendering.rb", :line=>10, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>18, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>403, :function=>"_run__1331729261264501381__process_action__2943679682932834350__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_process_action_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/callbacks.rb", :line=>17, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rescue.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications/instrumenter.rb", :line=>20, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/notifications.rb", :line=>123, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/instrumentation.rb", :line=>29, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/params_wrapper.rb", :line=>207, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/railties/controller_runtime.rb", :line=>18, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/base.rb", :line=>121, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/abstract_controller/rendering.rb", :line=>46, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>203, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal/rack_delegation.rb", :line=>14, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_controller/metal.rb", :line=>246, :function=>"block in action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>73, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>36, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>68, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/journey-1.0.4/lib/journey/router.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/route_set.rb", :line=>608, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.7/lib/warden/manager.rb", :line=>35, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/best_standards_support.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/etag.rb", :line=>23, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/conditionalget.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/head.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/params_parser.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/flash.rb", :line=>242, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>210, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/session/abstract/id.rb", :line=>205, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/cookies.rb", :line=>341, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/query_cache.rb", :line=>64, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-3.2.22.5/lib/active_record/connection_adapters/abstract/connection_pool.rb", :line=>479, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"_run__331945009813431424__call__752185537284113585__callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>405, :function=>"__run_callback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>385, :function=>"_run_call_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/callbacks.rb", :line=>81, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/callbacks.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/reloader.rb", :line=>65, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/remote_ip.rb", :line=>31, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>16, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/show_exceptions.rb", :line=>56, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>32, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/rack/logger.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/request_id.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/methodoverride.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/runtime.rb", :line=>17, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-3.2.22.5/lib/active_support/cache/strategy/local_cache.rb", :line=>72, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-1.4.7/lib/rack/lock.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-3.2.22.5/lib/action_dispatch/middleware/static.rb", :line=>83, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/engine.rb", :line=>484, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb", :line=>231, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>183, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.5", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007fe8dce95828 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x00007fe8dd9f1550>, "rack.errors"=>#<StringIO:0x00007fe8dd9f15f0>, "rack.multithread"=>false, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fe8dce8eeb0>, "action_dispatch.parameter_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fe8dcdb4940 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fe8dcdb48a0 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x00007fe8dcdb4738 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x00007fe8dcdb4850 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/32.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fe8dcdb4800>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fe8dcbc47e8 @filters=[#<Proc:0x00007fe8dcbc46a8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:10>, #<Proc:0x00007fe8dcbc4680@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:11>, #<Proc:0x00007fe8dcbc4630@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:12>, #<Proc:0x00007fe8dcbbf9c8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:26>], @silencers=[#<Proc:0x00007fe8dcbbf9a0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/backtrace_cleaner.rb:15>]>, "action_dispatch.request_id"=>"47c84e218258d64ab794fa4a36dca8f5", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fe8dcbbd1f0 @env={...}, @middleware=#<ActionDispatch::RemoteIp:0x00007fe8dcb7f1e8 @app=#<ActionDispatch::Reloader:0x00007fe8dcb7f210 @app=#<ActionDispatch::Callbacks:0x00007fe8dcb7f238 @app=#<ActiveRecord::ConnectionAdapters::ConnectionManagement:0x00007fe8dcb7f260 @app=#<Airbrake::Rack::Middleware:0x00007fe8dcb7f288 @app=#<ActiveRecord::QueryCache:0x00007fe8dcb7f378 @app=#<ActionDispatch::Cookies:0x00007fe8dcb7f440 @app=#<ActionDispatch::Session::CookieStore:0x00007fe8dcb7fd50 @secrets=["7c54efc0fc1e38e890577e4148a9be72d891aee163ebfd6aca0bf0a860f3"], @coder=#<Rack::Session::Cookie::Base64::Marshal:0x00007fe8dcb7f670>, @app=#<ActionDispatch::Flash:0x00007fe8dcb7fd78 @app=#<ActionDispatch::ParamsParser:0x00007fe8dcb7ffa8 @app=#<ActionDispatch::Head:0x00007fe8dcb81330 @app=#<Rack::ConditionalGet:0x00007fe8dcb80700 @app=#<Rack::ETag:0x00007fe8dcb829d8 @app=#<ActionDispatch::BestStandardsSupport:0x00007fe8dcb80098 @app=#<Warden::Manager:0x00007fe8dcb80160 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fe8dce8eeb0>>, @header="IE=Edge,chrome=1">, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>, @parsers={#<Mime::Type:0x00007fe8dba41fe8 @synonyms=["text/xml", "application/x-xml"], @symbol=:xml, @string="application/xml", @hash=-4282718334754392661>=>:xml_simple, #<Mime::Type:0x00007fe8dba40878 @synonyms=["text/x-json", "application/jsonrequest"], @symbol=:json, @string="application/json", @hash=855566136585440802>=>:json}>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"7c54efc0fc1e38e890577e4148a9be72d891aee163ebfd6aca0bf0a860f3", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fe8dcb7f670>}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>>>>>>, @condition=#<Proc:0x00007fe8dcc2d6a8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-3.2.22.5/lib/rails/application.rb:275 (lambda)>, @validated=false>, @check_ip=true, @proxies=/
[0m[32m+      ^127\.0\.0\.1$                | # localhost
[0m[32m+      ^(10                          | # private IP 10.x.x.x
[0m[32m+        172\.(1[6-9]|2[0-9]|3[0-1]) | # private IP in the range 172.16.0.0 .. 172.31.255.255
[0m[32m+        192\.168                      # private IP 192.168.x.x
[0m[32m+       )\.
[0m[32m+    /x>, @calculated_ip=false>, "rack.session"=>#<Rack::Session::Abstract::SessionHash:0x3ff46e5dbae0 not yet loaded>, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"7c54efc0fc1e38e890577e4148a9be72d891aee163ebfd6aca0bf0a860f3", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x00007fe8dcb7f670>, :id=>nil}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007fe8dcbb7020 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @set_cookies={}, @delete_cookies={}, @host="example.org", @secure=false, @closed=false, @cookies={}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x00007fe8dcbb6b20 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fe8dcbb7020 ...>, @verifier=#<ActiveSupport::MessageVerifier:0x00007fe8dcb80890 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=Marshal>>>, "action_dispatch.request.unsigned_session_cookie"=>{}, "warden"=>Warden::Proxy:70319056093960 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fe8dbbc06a8 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=#<ActionDispatch::Request:0x00007fe8dbbc2ed0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">, @_response=#<ActionDispatch::Response:0x00007fe8dbbc06d0 @body=[], @header={}, @status=200, @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x00007fe8dbbc2ed0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @method="GET", @fullpath="/delayed_job">>, @_env={...}, @_prefixes=["dummy"], @_lookup_context=#<ActionView::LookupContext:0x00007fe8dbb822b8 @details_key=nil, @details={:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}, @skip_default_locale=false, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @view_paths=#<ActionView::PathSet:0x00007fe8dbb82858 @paths=[#<ActionView::FixtureResolver:0x00007fe8dce6f650 @pattern=":prefix/:action{.:locale,}{.:formats,}{.:handlers,}", @cached={}, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown", "dummy/breakdown_view_only.html.erb"=>"breakdown_view_only", "dummy/breakdown_http.html.erb"=>"breakdown_http"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fe8dba3a568 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=1791753392830513621>]}>}, @truncator=#<Airbrake::Truncator:0x00007fe8dce95850 @max_size=10000>>]
[0m):
  lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
  lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
  lib/airbrake/rack/middleware.rb:40:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started HEAD "/crash" for 127.0.0.1 at 2019-04-17 15:32:44 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 0  in 11.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-17 15:32:44 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 4.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-17 15:32:44 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-17 15:32:46 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-17 15:32:48 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-17 15:32:50 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-17 15:32:52 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.7ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-17 15:32:54 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-17 15:32:56 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 18.4ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-17 15:32:58 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (1.0ms)
Completed 200 OK in 24.1ms (Views: 8.3ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-17 15:33:00 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.7ms (Views: 1.1ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-17 15:33:02 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 17.4ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-17 15:33:04 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.7ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-17 15:33:06 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 17.4ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-17 15:33:09 +0300
Processing by DummyController#notify_airbrake_sync_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.6ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-17 15:33:11 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.4ms (Views: 9.6ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-17 15:33:13 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 14.4ms (Views: 9.5ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-17 15:33:15 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 15.0ms (Views: 9.7ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-17 15:33:17 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 18.6ms (Views: 11.5ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-17 15:33:19 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
Completed 200 OK in 29.7ms (Views: 23.4ms | ActiveRecord: 0.0ms)
Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-17 15:33:21 +0300
Processing by DummyController#notify_airbrake_helper as HTML
  Parameters: {"foo"=>"bar"}
  Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.3ms)
Completed 200 OK in 23.8ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-17 15:33:23 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 20.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-17 15:33:25 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-17 15:33:27 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 19.8ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-17 15:33:29 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 11.6ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-17 15:33:31 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.1ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 21.9ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-17 15:33:33 +0300
Processing by DummyController#crash as HTML
  Parameters: {"foo"=>"bar"}
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.1ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/resque" for 127.0.0.1 at 2019-04-17 15:33:35 +0300
Processing by DummyController#resque as HTML
  Rendered dummy/resque.html.erb within layouts/application (0.2ms)
Completed 200 OK in 2.3ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-17 15:33:35 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 7.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-17 15:33:35 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 1.2ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/breakdown" for 127.0.0.1 at 2019-04-17 15:33:35 +0300
Processing by DummyController#breakdown as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "breakdown"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT "books".* FROM "books" [0m
  Rendered dummy/breakdown.html.erb within layouts/application (0.2ms)
Completed 200 OK in 7.8ms (Views: 0.9ms | ActiveRecord: 0.2ms)
Started GET "/breakdown_http" for 127.0.0.1 at 2019-04-17 15:33:35 +0300
Processing by DummyController#breakdown_http as HTML
  Rendered dummy/breakdown_http.html.erb within layouts/application (0.2ms)
Completed 200 OK in 2.0ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/breakdown_view_only" for 127.0.0.1 at 2019-04-17 15:33:35 +0300
Processing by DummyController#breakdown_view_only as HTML
  Rendered dummy/breakdown.html.erb within layouts/application (0.2ms)
Completed 200 OK in 1.1ms (Views: 0.9ms | ActiveRecord: 0.0ms)
Started GET "/breakdown" for 127.0.0.1 at 2019-04-17 15:33:35 +0300
Processing by DummyController#breakdown as */*
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "breakdown"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT "books".* FROM "books" [0m
  Rendered dummy/breakdown.html.erb within layouts/application (0.2ms)
Completed 200 OK in 8.3ms (Views: 1.0ms | ActiveRecord: 0.2ms)
Started GET "/crash" for 127.0.0.1 at 2019-04-17 15:33:35 +0300
Processing by DummyController#crash as HTML
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
  [1m[35m (0.0ms)[0m  commit transaction
#<AirbrakeTestError: after_commit>
Completed 500 Internal Server Error in 22.3ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/crash" for 127.0.0.1 at 2019-04-17 15:33:37 +0300
Processing by DummyController#crash as HTML
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "book"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
#<RSpec::Mocks::MockExpectationError: Airbrake received :notify with unexpected arguments
  expected: (an instance of Airbrake::Notice)
       got: (#<AirbrakeTestError: after_commit>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of Airbrake::Notice"]
[0m[32m+[#<AirbrakeTestError: after_commit>]
[0m>
Completed 500 Internal Server Error in 13.0ms

AirbrakeTestError (AirbrakeTestError):
  lib/airbrake/rack/middleware.rb:33:in `call!'
  lib/airbrake/rack/middleware.rb:21:in `call'


Started GET "/" for 127.0.0.1 at 2019-04-17 15:33:37 +0300
Processing by DummyController#index as HTML
  Rendered dummy/index.html.erb within layouts/application (0.2ms)
Completed 200 OK in 1.0ms (Views: 0.9ms | ActiveRecord: 0.0ms)
