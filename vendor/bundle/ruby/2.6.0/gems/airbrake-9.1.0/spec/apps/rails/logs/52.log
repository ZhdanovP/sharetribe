# Logfile created on 2019-03-01 19:53:21 +0200 by logger.rb/56815
D, [2019-03-01T19:53:22.292741 #26529] DEBUG -- :   [1m[35m (1.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T19:53:22.293172 #26529] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T19:53:22.295885 #26529] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T19:53:22.296451 #26529] DEBUG -- :   [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T19:53:22.296914 #26529] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T19:53:22.298297 #26529] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T19:53:22.307985 #26529] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T19:53:22.310945 #26529] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T19:53:22.311819 #26529] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 17:53:22.311227"], ["updated_at", "2019-03-01 17:53:22.311227"]]
D, [2019-03-01T19:53:22.312052 #26529] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T19:53:22.349654 #26529]  INFO -- : Started GET "/active_record_after_commit" for 127.0.0.1 at 2019-03-01 19:53:22 +0200
I, [2019-03-01T19:53:22.351609 #26529]  INFO -- : Processing by DummyController#active_record_after_commit as HTML
D, [2019-03-01T19:53:22.359392 #26529] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T19:53:22.360930 #26529] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "Bingo"]]
D, [2019-03-01T19:53:22.362225 #26529] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T19:55:27.677412 #26529]  INFO -- : Completed 500 Internal Server Error in 125326ms (ActiveRecord: 0.6ms)
F, [2019-03-01T19:55:27.705201 #26529] FATAL -- :   
F, [2019-03-01T19:55:27.705312 #26529] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (an instance of AirbrakeTestError)
       got: (#<Airbrake::Notice:0x00007fb252738e10 @config=#<Airbrake::Config:0x00007fb2523a6248 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fb252721378 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of AirbrakeTestError"]
[0m[32m+[#<Airbrake::Notice:0x00007fb252738e10 @config=#<Airbrake::Config:0x00007fb2523a6248 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fb2523a61d0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fb2523a6180 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fb2523a6108 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fb2523a6090>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3">, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"after_commit", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>48, :function=>"raise_error_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_commit_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>346, :function=>"committed!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>128, :function=>"commit_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>223, :function=>"block in commit_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>213, :function=>"commit_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>252, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>385, :function=>"with_transaction_returning_status"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>310, :function=>"block in save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>325, :function=>"rollback_active_record_state!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>309, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/suppressor.rb", :line=>44, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/persistence.rb", :line=>36, :function=>"create"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>123, :function=>"active_record_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>101, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: after_commit>, :rack_request=>#<ActionDispatch::Request:0x00007fb252721350 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fb2535971c8>, "rack.errors"=>#<StringIO:0x00007fb253597240>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/active_record_after_commit", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fb253227420 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fb2532273d0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fb253227330 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fb2532272e0>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fb25357f708 @filters=[#<Proc:0x00007fb25357f5f0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fb25357f5c8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fb25357f5a0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fb25357ee70@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fb25357ee48@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fb25357ec40 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fb25357ec68 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fb25357ec18 entries=0 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fb25299a848 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fb251ac57a0>, "ROUTES_70201925577680_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/active_record_after_commit", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"83d5fcdb-6c55-48f3-96ec-f0868e0c0392", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fb25355fd40 @req=#<ActionDispatch::Request:0x00007fb25355fd68 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7fb25355eb48 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fb25355eaf8 @by=#<ActionDispatch::Session::CookieStore:0x00007fb258216aa8 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fb258216ad0 @app=#<Rack::Head:0x00007fb258216af8 @app=#<Rack::ConditionalGet:0x00007fb258216b20 @app=#<Rack::ETag:0x00007fb258216b48 @app=#<Rack::TempfileReaper:0x00007fb258216b70 @app=#<Warden::Manager:0x00007fb258216c38 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fb251ac57a0>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70201939522840 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"active_record_after_commit"}, "action_controller.instance"=>#<DummyController:0x00007fb25354f648 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fb25355e670 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_commit"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_commit", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fb25354de88 @req=#<ActionDispatch::Request:0x00007fb25355e670 ...>>>, @_response=#<ActionDispatch::Response:0x00007fb25354fa80 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fb25354f9e0>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fb25354f918 @response=#<ActionDispatch::Response:0x00007fb25354fa80 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fb25354f878 @monitor=#<ActionDispatch::Response:0x00007fb25354fa80 ...>, @cond=#<Thread::ConditionVariable:0x00007fb25354f850>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fb25355e670 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_commit"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_commit", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fb25354de88 @req=#<ActionDispatch::Request:0x00007fb25355e670 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fb25354f3a0 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fb25354f210 @paths=[#<ActionView::FixtureResolver:0x00007fb252d345f8 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fb252d34558 keys=0 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="active_record_after_commit", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"active_record_after_commit"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fb2533b7f88 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=4235822075502273089>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fb252721378 @max_size=10000>>]
[0m):
F, [2019-03-01T19:55:27.705420 #26529] FATAL -- :   
F, [2019-03-01T19:55:27.705461 #26529] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
D, [2019-03-01T19:55:34.769427 #26558] DEBUG -- :   [1m[35m (0.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T19:55:34.769868 #26558] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T19:55:34.772389 #26558] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T19:55:34.772919 #26558] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T19:55:34.773436 #26558] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T19:55:34.774671 #26558] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T19:55:34.784576 #26558] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T19:55:34.787931 #26558] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T19:55:34.788823 #26558] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 17:55:34.788271"], ["updated_at", "2019-03-01 17:55:34.788271"]]
D, [2019-03-01T19:55:34.789027 #26558] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T19:55:34.819452 #26558]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 19:55:34 +0200
I, [2019-03-01T19:55:34.821458 #26558]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T19:55:34.829501 #26558] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T19:55:34.831117 #26558] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T19:55:34.832452 #26558] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T19:55:34.838846 #26558]  INFO -- : Completed 500 Internal Server Error in 17ms (ActiveRecord: 0.6ms)
F, [2019-03-01T19:55:34.855760 #26558] FATAL -- :   
F, [2019-03-01T19:55:34.860271 #26558] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T19:55:34.860315 #26558] FATAL -- :   
F, [2019-03-01T19:55:34.860346 #26558] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T19:55:36.864502 #26558]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 19:55:36 +0200
I, [2019-03-01T19:55:36.865638 #26558]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T19:55:36.866282 #26558] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T19:55:36.868218 #26558] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T19:55:36.869821 #26558] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T19:55:36.880557 #26558]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms)
F, [2019-03-01T19:55:36.886503 #26558] FATAL -- :   
F, [2019-03-01T19:55:36.890888 #26558] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T19:55:36.890948 #26558] FATAL -- :   
F, [2019-03-01T19:55:36.891009 #26558] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T19:55:38.898425 #26558]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 19:55:38 +0200
I, [2019-03-01T19:55:38.899519 #26558]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T19:55:38.900089 #26558] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T19:55:38.901890 #26558] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T19:55:38.903367 #26558] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T19:55:38.914395 #26558]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms)
F, [2019-03-01T19:55:38.920626 #26558] FATAL -- :   
F, [2019-03-01T19:55:38.927694 #26558] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T19:55:38.927738 #26558] FATAL -- :   
F, [2019-03-01T19:55:38.927762 #26558] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T19:55:40.933213 #26558]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 19:55:40 +0200
I, [2019-03-01T19:55:40.934246 #26558]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T19:55:40.934853 #26558] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T19:55:40.936609 #26558] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T19:55:40.938130 #26558] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T19:55:40.949557 #26558]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms)
F, [2019-03-01T19:55:40.955517 #26558] FATAL -- :   
F, [2019-03-01T19:55:40.959814 #26558] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T19:55:40.959852 #26558] FATAL -- :   
F, [2019-03-01T19:55:40.959939 #26558] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T19:55:42.967402 #26558]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 19:55:42 +0200
I, [2019-03-01T19:55:42.968785 #26558]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T19:55:42.969350 #26558] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T19:55:42.971046 #26558] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T19:55:42.972460 #26558] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T19:55:42.983333 #26558]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-01T19:55:42.989141 #26558] FATAL -- :   
F, [2019-03-01T19:55:42.993745 #26558] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T19:55:42.993791 #26558] FATAL -- :   
F, [2019-03-01T19:55:42.993827 #26558] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T19:55:44.996747 #26558]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 19:55:44 +0200
I, [2019-03-01T19:55:44.997915 #26558]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T19:55:44.998532 #26558] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T19:55:45.000308 #26558] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T19:55:45.001856 #26558] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T19:55:45.013271 #26558]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms)
F, [2019-03-01T19:55:45.018982 #26558] FATAL -- :   
F, [2019-03-01T19:55:45.024280 #26558] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T19:55:45.024326 #26558] FATAL -- :   
F, [2019-03-01T19:55:45.024354 #26558] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T19:55:47.031154 #26558]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 19:55:47 +0200
I, [2019-03-01T19:55:47.034431 #26558]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T19:55:47.034917 #26558] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T19:55:47.036451 #26558] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T19:55:47.037662 #26558] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T19:55:47.047752 #26558]  INFO -- : Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.2ms)
F, [2019-03-01T19:55:47.053032 #26558] FATAL -- :   
F, [2019-03-01T19:55:47.057646 #26558] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T19:55:47.057692 #26558] FATAL -- :   
F, [2019-03-01T19:55:47.057716 #26558] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T19:55:49.066475 #26558]  INFO -- : Started GET "/delayed_job" for 127.0.0.1 at 2019-03-01 19:55:49 +0200
I, [2019-03-01T19:55:49.067335 #26558]  INFO -- : Processing by DummyController#delayed_job as HTML
I, [2019-03-01T19:55:49.079694 #26558]  INFO -- : Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.3ms)
F, [2019-03-01T19:55:49.097415 #26558] FATAL -- :   
F, [2019-03-01T19:55:49.097502 #26558] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n"))
       got: (#<Airbrake::Notice:0x00007fabfad5dec0 @config=#<Airbrake::Config:0x00007fabfa36e2c0 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fabfad463d8 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,3 +1,2 @@
[0m[31m-["anything",
[0m[31m- "hash_including(\"handler\"=>\"--- !ruby/struct:BangoJob\\nbingo: bingo\\nbongo: bongo\\n\")"]
[0m[32m+[#<Airbrake::Notice:0x00007fabfad5dec0 @config=#<Airbrake::Config:0x00007fabfa36e2c0 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fabfa36e248 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fabfa36e1f8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fabfa36e1a8 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fabfa36e130>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>86, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>142, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>187, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007fabfad463b0 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fabfb628d70>, "rack.errors"=>#<StringIO:0x00007fabfb628de8>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fabfa384d90 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fabfa384ca0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fabfa384c50 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fabfa384c00>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fac009de690 @filters=[#<Proc:0x00007fac009de578@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fac009de550@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fac009de528@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fac009ddbf0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fac009ddbc8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fac009dd9c0 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fac009dd9e8 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fac009dd998 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fabfb3599a0 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fabfb419048>, "ROUTES_70188315756580_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"a318b492-57cd-4653-b633-bb63ef150cec", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fabfb6238c0 @req=#<ActionDispatch::Request:0x00007fabfb6238e8 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7fabfb621f98 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fabfb621f48 @by=#<ActionDispatch::Session::CookieStore:0x00007fac008b3810 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fac008b3838 @app=#<Rack::Head:0x00007fac008b3860 @app=#<Rack::ConditionalGet:0x00007fac008b3888 @app=#<Rack::ETag:0x00007fac008b38b0 @app=#<Rack::TempfileReaper:0x00007fac008b38d8 @app=#<Warden::Manager:0x00007fac008b39a0 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fabfb419048>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70188316823360 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fabfb620a30 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fabfb621b88 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/delayed_job", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fabfb61bcd8 @req=#<ActionDispatch::Request:0x00007fabfb621b88 ...>>>, @_response=#<ActionDispatch::Response:0x00007fabfb620c60 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fabfb620c10>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fabfb620bc0 @response=#<ActionDispatch::Response:0x00007fabfb620c60 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fabfb620b98 @monitor=#<ActionDispatch::Response:0x00007fabfb620c60 ...>, @cond=#<Thread::ConditionVariable:0x00007fabfb620b70>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fabfb621b88 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/delayed_job", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fabfb61bcd8 @req=#<ActionDispatch::Request:0x00007fabfb621b88 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fabfb6208c8 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fabfb6207d8 @paths=[#<ActionView::FixtureResolver:0x00007fabfe0e3b78 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fabfe0e3b50 keys=0 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fabfa58e6e0 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=1162195555303744519>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fabfad463d8 @max_size=10000>>]
[0m):
F, [2019-03-01T19:55:49.097575 #26558] FATAL -- :   
F, [2019-03-01T19:55:49.097598 #26558] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T19:55:49.099795 #26558]  INFO -- : Started GET "/active_job" for 127.0.0.1 at 2019-03-01 19:55:49 +0200
I, [2019-03-01T19:55:49.100512 #26558]  INFO -- : Processing by DummyController#active_job as HTML
I, [2019-03-01T19:55:49.103392 #26558]  INFO -- :   Rendering dummy/active_job.html.erb within layouts/application
I, [2019-03-01T19:55:49.104216 #26558]  INFO -- :   Rendered dummy/active_job.html.erb within layouts/application (0.8ms)
I, [2019-03-01T19:55:49.104589 #26558]  INFO -- : Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
I, [2019-03-01T19:55:51.111436 #26558]  INFO -- : Started GET "/active_job" for 127.0.0.1 at 2019-03-01 19:55:51 +0200
I, [2019-03-01T19:55:51.112372 #26558]  INFO -- : Processing by DummyController#active_job as HTML
I, [2019-03-01T19:55:51.113566 #26558]  INFO -- :   Rendering dummy/active_job.html.erb within layouts/application
I, [2019-03-01T19:55:51.115375 #26558]  INFO -- :   Rendered dummy/active_job.html.erb within layouts/application (0.3ms)
I, [2019-03-01T19:55:51.115803 #26558]  INFO -- : Completed 200 OK in 3ms (Views: 2.7ms | ActiveRecord: 0.0ms)
I, [2019-03-01T19:55:53.122841 #26558]  INFO -- : Started GET "/resque" for 127.0.0.1 at 2019-03-01 19:55:53 +0200
I, [2019-03-01T19:55:53.123939 #26558]  INFO -- : Processing by DummyController#resque as HTML
I, [2019-03-01T19:55:53.125767 #26558]  INFO -- :   Rendering dummy/resque.html.erb within layouts/application
I, [2019-03-01T19:55:53.126108 #26558]  INFO -- :   Rendered dummy/resque.html.erb within layouts/application (0.3ms)
I, [2019-03-01T19:55:53.126496 #26558]  INFO -- : Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.0ms)
I, [2019-03-01T19:55:53.128436 #26558]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 19:55:53 +0200
I, [2019-03-01T19:55:53.129244 #26558]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T19:55:53.129759 #26558] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T19:55:53.131158 #26558] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T19:55:53.132251 #26558] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T19:55:53.133432 #26558]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-01T19:55:53.134675 #26558] FATAL -- :   
F, [2019-03-01T19:55:53.134714 #26558] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T19:55:53.134741 #26558] FATAL -- :   
F, [2019-03-01T19:55:53.134765 #26558] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T19:55:53.136079 #26558]  INFO -- : Started HEAD "/crash" for 127.0.0.1 at 2019-03-01 19:55:53 +0200
I, [2019-03-01T19:55:53.140472 #26558]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T19:55:53.140834 #26558] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T19:55:53.142372 #26558] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T19:55:53.143732 #26558] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T19:55:53.144941 #26558]  INFO -- : Completed 0  in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-01T19:55:53.146241 #26558] FATAL -- :   
F, [2019-03-01T19:55:53.146274 #26558] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T19:55:53.146297 #26558] FATAL -- :   
F, [2019-03-01T19:55:53.146318 #26558] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T19:55:53.147568 #26558]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 19:55:53 +0200
I, [2019-03-01T19:55:53.148175 #26558]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T19:55:53.148513 #26558] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T19:55:53.149656 #26558] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T19:55:53.150911 #26558] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T19:55:53.167892 #26558]  INFO -- : Completed 500 Internal Server Error in 20ms (ActiveRecord: 0.1ms)
F, [2019-03-01T19:55:53.179356 #26558] FATAL -- :   
F, [2019-03-01T19:55:53.188985 #26558] FATAL -- : RSpec::Expectations::ExpectationNotMetError (
expected: "AirbrakeTestError"
     got: "RSpec::Mocks::MockExpectationError"

(compared using ==)
):
F, [2019-03-01T19:55:53.189062 #26558] FATAL -- :   
F, [2019-03-01T19:55:53.189098 #26558] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T19:55:53.191018 #26558]  INFO -- : Started GET "/" for 127.0.0.1 at 2019-03-01 19:55:53 +0200
I, [2019-03-01T19:55:53.191982 #26558]  INFO -- : Processing by DummyController#index as HTML
I, [2019-03-01T19:55:53.192877 #26558]  INFO -- :   Rendering dummy/index.html.erb within layouts/application
I, [2019-03-01T19:55:53.193219 #26558]  INFO -- :   Rendered dummy/index.html.erb within layouts/application (0.3ms)
I, [2019-03-01T19:55:53.193633 #26558]  INFO -- : Completed 200 OK in 1ms (Views: 1.1ms | ActiveRecord: 0.0ms)
I, [2019-03-01T19:55:53.195707 #26558]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 19:55:53 +0200
I, [2019-03-01T19:55:53.199387 #26558]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T19:55:53.199849 #26558] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T19:55:53.201286 #26558] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T19:55:53.202689 #26558] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T19:55:53.204137 #26558]  INFO -- : Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms)
F, [2019-03-01T19:55:53.205606 #26558] FATAL -- :   
F, [2019-03-01T19:55:53.205644 #26558] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T19:55:53.205669 #26558] FATAL -- :   
F, [2019-03-01T19:55:53.205691 #26558] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T19:55:53.208431 #26558]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 19:55:53 +0200
I, [2019-03-01T19:55:53.209526 #26558]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T19:55:53.209924 #26558] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T19:55:53.211234 #26558] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T19:55:53.212355 #26558] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T19:55:53.222681 #26558]  INFO -- : Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.2ms)
F, [2019-03-01T19:55:53.228960 #26558] FATAL -- :   
F, [2019-03-01T19:55:53.233187 #26558] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T19:55:53.233223 #26558] FATAL -- :   
F, [2019-03-01T19:55:53.233275 #26558] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T19:55:55.241824 #26558]  INFO -- : Started GET "/active_record_after_commit" for 127.0.0.1 at 2019-03-01 19:55:55 +0200
I, [2019-03-01T19:55:55.242901 #26558]  INFO -- : Processing by DummyController#active_record_after_commit as HTML
D, [2019-03-01T19:55:55.243379 #26558] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T19:55:55.245158 #26558] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "Bingo"]]
D, [2019-03-01T19:55:55.246579 #26558] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T19:55:55.247860 #26558]  INFO -- : Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms)
F, [2019-03-01T19:55:55.258188 #26558] FATAL -- :   
F, [2019-03-01T19:55:55.258256 #26558] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (an instance of AirbrakeTestError)
       got: (#<Airbrake::Notice:0x00007fabfadf6f58 @config=#<Airbrake::Config:0x00007fabfa36e2c0 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fabfaddc9c8 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of AirbrakeTestError"]
[0m[32m+[#<Airbrake::Notice:0x00007fabfadf6f58 @config=#<Airbrake::Config:0x00007fabfa36e2c0 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fabfa36e248 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fabfa36e1f8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fabfa36e1a8 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fabfa36e130>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"after_commit", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>48, :function=>"raise_error_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_commit_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>346, :function=>"committed!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>128, :function=>"commit_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>223, :function=>"block in commit_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>213, :function=>"commit_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>252, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>385, :function=>"with_transaction_returning_status"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>310, :function=>"block in save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>325, :function=>"rollback_active_record_state!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>309, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/suppressor.rb", :line=>44, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/persistence.rb", :line=>36, :function=>"create"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>123, :function=>"active_record_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>100, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: after_commit>, :rack_request=>#<ActionDispatch::Request:0x00007fabfaddc950 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fabfae67690>, "rack.errors"=>#<StringIO:0x00007fabfae67708>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/active_record_after_commit", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fabfa384d90 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fabfa384ca0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fabfa384c50 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fabfa384c00>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fac009de690 @filters=[#<Proc:0x00007fac009de578@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fac009de550@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fac009de528@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fac009ddbf0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fac009ddbc8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fac009dd9c0 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fac009dd9e8 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fac009dd998 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fabfb3599a0 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fabfb419048>, "ROUTES_70188315756580_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/active_record_after_commit", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"cb01e608-bfd7-4fe8-985b-00c4ef0e73e7", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fabfae663a8 @req=#<ActionDispatch::Request:0x00007fabfae663d0 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7fabfae65160 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fabfae65110 @by=#<ActionDispatch::Session::CookieStore:0x00007fac008b3810 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fac008b3838 @app=#<Rack::Head:0x00007fac008b3860 @app=#<Rack::ConditionalGet:0x00007fac008b3888 @app=#<Rack::ETag:0x00007fac008b38b0 @app=#<Rack::TempfileReaper:0x00007fac008b38d8 @app=#<Warden::Manager:0x00007fac008b39a0 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fabfb419048>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70188312766500 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"active_record_after_commit"}, "action_controller.instance"=>#<DummyController:0x00007fabfae5f3f0 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fabfae64cb0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_commit"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_commit", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fabfae5e540 @req=#<ActionDispatch::Request:0x00007fabfae64cb0 ...>>>, @_response=#<ActionDispatch::Response:0x00007fabfae5fa58 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fabfae5fa08>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fabfae5f580 @response=#<ActionDispatch::Response:0x00007fabfae5fa58 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fabfae5f558 @monitor=#<ActionDispatch::Response:0x00007fabfae5fa58 ...>, @cond=#<Thread::ConditionVariable:0x00007fabfae5f530>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fabfae64cb0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_commit"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_commit", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fabfae5e540 @req=#<ActionDispatch::Request:0x00007fabfae64cb0 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fabfae5f238 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fabfae5f148 @paths=[#<ActionView::FixtureResolver:0x00007fabfe0e3b78 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fabfe0e3b50 keys=4 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="active_record_after_commit", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"active_record_after_commit"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fabfa58e6e0 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=1162195555303744519>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fabfaddc9c8 @max_size=10000>>]
[0m):
F, [2019-03-01T19:55:55.258311 #26558] FATAL -- :   
F, [2019-03-01T19:55:55.258334 #26558] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T19:55:55.259746 #26558]  INFO -- : Started GET "/active_record_after_rollback" for 127.0.0.1 at 2019-03-01 19:55:55 +0200
I, [2019-03-01T19:55:55.260675 #26558]  INFO -- : Processing by DummyController#active_record_after_rollback as HTML
D, [2019-03-01T19:55:55.260930 #26558] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T19:55:55.262266 #26558] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "Bango"]]
D, [2019-03-01T19:55:55.263644 #26558] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
I, [2019-03-01T19:55:55.264852 #26558]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-01T19:55:55.280938 #26558] FATAL -- :   
F, [2019-03-01T19:55:55.281027 #26558] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (an instance of AirbrakeTestError)
       got: (#<Airbrake::Notice:0x00007fabfb529848 @config=#<Airbrake::Config:0x00007fabfa36e2c0 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fabfb4dda60 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of AirbrakeTestError"]
[0m[32m+[#<Airbrake::Notice:0x00007fabfb529848 @config=#<Airbrake::Config:0x00007fabfa36e2c0 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fabfa36e248 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fabfa36e1f8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fabfa36e1a8 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fabfa36e130>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"after_rollback", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>52, :function=>"raise_error_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_rollback_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>357, :function=>"rolledback!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>112, :function=>"rollback_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>231, :function=>"block in rollback_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>228, :function=>"rollback_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>242, :function=>"rescue in block in within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>259, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>127, :function=>"active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>110, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}, {:type=>"ActiveRecord::Rollback", :message=>"ActiveRecord::Rollback", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>129, :function=>"block in active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"block in transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>239, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>127, :function=>"active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>110, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: after_rollback>, :rack_request=>#<ActionDispatch::Request:0x00007fabfb4dda38 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fabfb591510>, "rack.errors"=>#<StringIO:0x00007fabfb591588>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/active_record_after_rollback", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fabfa384d90 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fabfa384ca0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fabfa384c50 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fabfa384c00>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fac009de690 @filters=[#<Proc:0x00007fac009de578@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fac009de550@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fac009de528@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fac009ddbf0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fac009ddbc8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fac009dd9c0 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fac009dd9e8 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fac009dd998 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fabfb3599a0 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fabfb419048>, "ROUTES_70188315756580_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/active_record_after_rollback", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"c27e0684-9ff6-448b-904c-75b8e1ecaa66", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fabfb58bdb8 @req=#<ActionDispatch::Request:0x00007fabfb58bde0 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7fabfb58a670 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fabfb58a620 @by=#<ActionDispatch::Session::CookieStore:0x00007fac008b3810 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fac008b3838 @app=#<Rack::Head:0x00007fac008b3860 @app=#<Rack::ConditionalGet:0x00007fac008b3888 @app=#<Rack::ETag:0x00007fac008b38b0 @app=#<Rack::TempfileReaper:0x00007fac008b38d8 @app=#<Warden::Manager:0x00007fac008b39a0 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fabfb419048>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70188316512940 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"active_record_after_rollback"}, "action_controller.instance"=>#<DummyController:0x00007fabfb589130 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fabfb58a210 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_rollback"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_rollback", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fabfb5883e8 @req=#<ActionDispatch::Request:0x00007fabfb58a210 ...>>>, @_response=#<ActionDispatch::Response:0x00007fabfb589388 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fabfb589338>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fabfb5892e8 @response=#<ActionDispatch::Response:0x00007fabfb589388 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fabfb5892c0 @monitor=#<ActionDispatch::Response:0x00007fabfb589388 ...>, @cond=#<Thread::ConditionVariable:0x00007fabfb589298>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fabfb58a210 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_rollback"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_rollback", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fabfb5883e8 @req=#<ActionDispatch::Request:0x00007fabfb58a210 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fabfb588fc8 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fabfb588ed8 @paths=[#<ActionView::FixtureResolver:0x00007fabfe0e3b78 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fabfe0e3b50 keys=4 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="active_record_after_rollback", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"active_record_after_rollback"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fabfa58e6e0 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=1162195555303744519>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fabfb4dda60 @max_size=10000>>]
[0m):
F, [2019-03-01T19:55:55.281102 #26558] FATAL -- :   
F, [2019-03-01T19:55:55.281153 #26558] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
D, [2019-03-01T19:56:56.553750 #26583] DEBUG -- :   [1m[35m (1.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T19:56:56.554360 #26583] DEBUG -- :   [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T19:56:56.557449 #26583] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T19:56:56.558138 #26583] DEBUG -- :   [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T19:56:56.558691 #26583] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T19:56:56.560131 #26583] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T19:56:56.570345 #26583] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T19:56:56.577206 #26583] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T19:56:56.578162 #26583] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 17:56:56.577550"], ["updated_at", "2019-03-01 17:56:56.577550"]]
D, [2019-03-01T19:56:56.578360 #26583] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T19:56:56.611999 #26583]  INFO -- : Started GET "/resque" for 127.0.0.1 at 2019-03-01 19:56:56 +0200
I, [2019-03-01T19:56:56.614027 #26583]  INFO -- : Processing by DummyController#resque as HTML
I, [2019-03-01T19:56:56.617396 #26583]  INFO -- :   Rendering dummy/resque.html.erb within layouts/application
I, [2019-03-01T19:56:56.618068 #26583]  INFO -- :   Rendered dummy/resque.html.erb within layouts/application (0.6ms)
I, [2019-03-01T19:56:56.618502 #26583]  INFO -- : Completed 200 OK in 4ms (Views: 3.2ms | ActiveRecord: 0.0ms)
I, [2019-03-01T19:56:56.620572 #26583]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 19:56:56 +0200
I, [2019-03-01T19:56:56.621363 #26583]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T19:56:56.629022 #26583] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T19:56:56.630531 #26583] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T19:56:56.631764 #26583] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T19:56:56.633072 #26583]  INFO -- : Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.6ms)
F, [2019-03-01T19:56:56.634424 #26583] FATAL -- :   
F, [2019-03-01T19:56:56.634465 #26583] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T19:56:56.634491 #26583] FATAL -- :   
F, [2019-03-01T19:56:56.634515 #26583] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T19:56:56.635762 #26583]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 19:56:56 +0200
I, [2019-03-01T19:56:56.636414 #26583]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T19:56:56.636780 #26583] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T19:56:56.638190 #26583] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T19:56:56.639501 #26583] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T19:56:56.645830 #26583]  INFO -- : Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.2ms)
F, [2019-03-01T19:56:56.661926 #26583] FATAL -- :   
F, [2019-03-01T19:56:56.666485 #26583] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T19:56:56.666523 #26583] FATAL -- :   
F, [2019-03-01T19:56:56.666549 #26583] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T19:56:58.670660 #26583]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 19:56:58 +0200
I, [2019-03-01T19:56:58.671928 #26583]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T19:56:58.672469 #26583] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T19:56:58.674253 #26583] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T19:56:58.675842 #26583] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T19:56:58.686490 #26583]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-01T19:56:58.692366 #26583] FATAL -- :   
F, [2019-03-01T19:56:58.697354 #26583] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T19:56:58.697410 #26583] FATAL -- :   
F, [2019-03-01T19:56:58.697438 #26583] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T19:57:00.704475 #26583]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 19:57:00 +0200
I, [2019-03-01T19:57:00.705802 #26583]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T19:57:00.706443 #26583] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T19:57:00.708383 #26583] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T19:57:00.713105 #26583] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T19:57:00.723852 #26583]  INFO -- : Completed 500 Internal Server Error in 18ms (ActiveRecord: 0.2ms)
F, [2019-03-01T19:57:00.729929 #26583] FATAL -- :   
F, [2019-03-01T19:57:00.734290 #26583] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T19:57:00.734329 #26583] FATAL -- :   
F, [2019-03-01T19:57:00.734356 #26583] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T19:57:02.741589 #26583]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 19:57:02 +0200
I, [2019-03-01T19:57:02.742520 #26583]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T19:57:02.743050 #26583] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T19:57:02.744723 #26583] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T19:57:02.746037 #26583] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T19:57:02.756853 #26583]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-01T19:57:02.762923 #26583] FATAL -- :   
F, [2019-03-01T19:57:02.767438 #26583] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T19:57:02.767518 #26583] FATAL -- :   
F, [2019-03-01T19:57:02.767559 #26583] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T19:57:04.775580 #26583]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 19:57:04 +0200
I, [2019-03-01T19:57:04.780206 #26583]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T19:57:04.780788 #26583] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T19:57:04.782485 #26583] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T19:57:04.783877 #26583] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T19:57:04.795229 #26583]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms)
F, [2019-03-01T19:57:04.801304 #26583] FATAL -- :   
F, [2019-03-01T19:57:04.806366 #26583] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T19:57:04.806409 #26583] FATAL -- :   
F, [2019-03-01T19:57:04.806437 #26583] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T19:57:06.813654 #26583]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 19:57:06 +0200
I, [2019-03-01T19:57:06.814580 #26583]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T19:57:06.815078 #26583] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T19:57:06.816640 #26583] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T19:57:06.817916 #26583] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T19:57:06.830095 #26583]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms)
F, [2019-03-01T19:57:06.835773 #26583] FATAL -- :   
F, [2019-03-01T19:57:06.840498 #26583] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T19:57:06.840533 #26583] FATAL -- :   
F, [2019-03-01T19:57:06.840557 #26583] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T19:57:08.848872 #26583]  INFO -- : Started GET "/active_record_after_rollback" for 127.0.0.1 at 2019-03-01 19:57:08 +0200
I, [2019-03-01T19:57:08.849828 #26583]  INFO -- : Processing by DummyController#active_record_after_rollback as HTML
D, [2019-03-01T19:57:08.850182 #26583] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T19:57:08.851678 #26583] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "Bango"]]
D, [2019-03-01T19:57:08.852878 #26583] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
I, [2019-03-01T19:57:08.854057 #26583]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-01T19:57:08.877929 #26583] FATAL -- :   
F, [2019-03-01T19:57:08.878037 #26583] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (an instance of AirbrakeTestError)
       got: (#<Airbrake::Notice:0x00007ff0ff2a5588 @config=#<Airbrake::Config:0x00007ff0fdc24070 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007ff0ff83f598 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of AirbrakeTestError"]
[0m[32m+[#<Airbrake::Notice:0x00007ff0ff2a5588 @config=#<Airbrake::Config:0x00007ff0fdc24070 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007ff0fe9e3f80 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007ff0fe9e3f30 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007ff0fe9e3e18 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007ff0fe9e3d50>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"after_rollback", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>52, :function=>"raise_error_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_rollback_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>357, :function=>"rolledback!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>112, :function=>"rollback_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>231, :function=>"block in rollback_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>228, :function=>"rollback_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>242, :function=>"rescue in block in within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>259, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>127, :function=>"active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>110, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}, {:type=>"ActiveRecord::Rollback", :message=>"ActiveRecord::Rollback", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>129, :function=>"block in active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"block in transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>239, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>127, :function=>"active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>110, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: after_rollback>, :rack_request=>#<ActionDispatch::Request:0x00007ff0ff83f570 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007ff0fdf41758>, "rack.errors"=>#<StringIO:0x00007ff0fdf417d0>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/active_record_after_rollback", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007ff0fdb55ab8 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007ff0fdb55888 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007ff0fdb55838 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007ff0fdb556f8>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007ff0fed829e8 @filters=[#<Proc:0x00007ff0fed82830@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007ff0fed82808@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007ff0fed82790@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007ff0fed81b38@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007ff0fed81b10@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007ff0fed81750 @key_generator=#<ActiveSupport::KeyGenerator:0x00007ff0fed81778 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007ff0fed81728 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007ff0fdb9f938 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007ff0ff10a278>, "ROUTES_70336524079420_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/active_record_after_rollback", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"4860c103-333b-4988-af92-a327ff46b273", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007ff0fdf40240 @req=#<ActionDispatch::Request:0x00007ff0fdf40268 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7ff0fdf3aca0 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007ff0fdf3ac50 @by=#<ActionDispatch::Session::CookieStore:0x00007ff1038443c8 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007ff1038443f0 @app=#<Rack::Head:0x00007ff103844418 @app=#<Rack::ConditionalGet:0x00007ff103844440 @app=#<Rack::ETag:0x00007ff103844468 @app=#<Rack::TempfileReaper:0x00007ff103844490 @app=#<Warden::Manager:0x00007ff103844558 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007ff0ff10a278>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70336514741680 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"active_record_after_rollback"}, "action_controller.instance"=>#<DummyController:0x00007ff0fdf39580 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007ff0fdf3a818 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_rollback"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_rollback", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007ff0fdf38720 @req=#<ActionDispatch::Request:0x00007ff0fdf3a818 ...>>>, @_response=#<ActionDispatch::Response:0x00007ff0fdf39828 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007ff0fdf397d8>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007ff0fdf39788 @response=#<ActionDispatch::Response:0x00007ff0fdf39828 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007ff0fdf39738 @monitor=#<ActionDispatch::Response:0x00007ff0fdf39828 ...>, @cond=#<Thread::ConditionVariable:0x00007ff0fdf39710>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007ff0fdf3a818 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_rollback"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_rollback", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007ff0fdf38720 @req=#<ActionDispatch::Request:0x00007ff0fdf3a818 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007ff0fdf393f0 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007ff0fdf39300 @paths=[#<ActionView::FixtureResolver:0x00007ff0fecaaa70 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7ff0fecaa9f8 keys=1 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="active_record_after_rollback", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"active_record_after_rollback"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007ff0fdd35298 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=3589523291688210186>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007ff0ff83f598 @max_size=10000>>]
[0m):
F, [2019-03-01T19:57:08.878136 #26583] FATAL -- :   
F, [2019-03-01T19:57:08.878163 #26583] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T19:57:08.879530 #26583]  INFO -- : Started GET "/active_record_after_commit" for 127.0.0.1 at 2019-03-01 19:57:08 +0200
I, [2019-03-01T19:57:08.880357 #26583]  INFO -- : Processing by DummyController#active_record_after_commit as HTML
D, [2019-03-01T19:57:08.880756 #26583] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T19:57:08.882149 #26583] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "Bingo"]]
D, [2019-03-01T19:57:08.883287 #26583] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T19:57:08.884498 #26583]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-01T19:57:08.894999 #26583] FATAL -- :   
F, [2019-03-01T19:57:08.895096 #26583] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (an instance of AirbrakeTestError)
       got: (#<Airbrake::Notice:0x00007ff10304bbd0 @config=#<Airbrake::Config:0x00007ff0fdc24070 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007ff10302fe30 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of AirbrakeTestError"]
[0m[32m+[#<Airbrake::Notice:0x00007ff10304bbd0 @config=#<Airbrake::Config:0x00007ff0fdc24070 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007ff0fe9e3f80 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007ff0fe9e3f30 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007ff0fe9e3e18 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007ff0fe9e3d50>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"after_commit", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>48, :function=>"raise_error_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_commit_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>346, :function=>"committed!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>128, :function=>"commit_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>223, :function=>"block in commit_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>213, :function=>"commit_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>252, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>385, :function=>"with_transaction_returning_status"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>310, :function=>"block in save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>325, :function=>"rollback_active_record_state!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>309, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/suppressor.rb", :line=>44, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/persistence.rb", :line=>36, :function=>"create"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>123, :function=>"active_record_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>100, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: after_commit>, :rack_request=>#<ActionDispatch::Request:0x00007ff10302fe08 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007ff0fd75cfd8>, "rack.errors"=>#<StringIO:0x00007ff0fd75d0c8>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/active_record_after_commit", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007ff0fdb55ab8 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007ff0fdb55888 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007ff0fdb55838 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007ff0fdb556f8>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007ff0fed829e8 @filters=[#<Proc:0x00007ff0fed82830@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007ff0fed82808@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007ff0fed82790@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007ff0fed81b38@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007ff0fed81b10@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007ff0fed81750 @key_generator=#<ActiveSupport::KeyGenerator:0x00007ff0fed81778 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007ff0fed81728 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007ff0fdb9f938 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007ff0ff10a278>, "ROUTES_70336524079420_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/active_record_after_commit", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"a8916f0a-1fa1-418b-9589-96a0606e6d77", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007ff0ff1fb4e8 @req=#<ActionDispatch::Request:0x00007ff0ff1fb510 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7ff0ff1fa480 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007ff0ff1fa430 @by=#<ActionDispatch::Session::CookieStore:0x00007ff1038443c8 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007ff1038443f0 @app=#<Rack::Head:0x00007ff103844418 @app=#<Rack::ConditionalGet:0x00007ff103844440 @app=#<Rack::ETag:0x00007ff103844468 @app=#<Rack::TempfileReaper:0x00007ff103844490 @app=#<Warden::Manager:0x00007ff103844558 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007ff0ff10a278>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70336524571060 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"active_record_after_commit"}, "action_controller.instance"=>#<DummyController:0x00007ff0ff1f8d10 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007ff0ff1fa070 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_commit"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_commit", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007ff0fed1f780 @req=#<ActionDispatch::Request:0x00007ff0ff1fa070 ...>>>, @_response=#<ActionDispatch::Response:0x00007ff0ff1f9058 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007ff0ff1f9008>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007ff0ff1f8fb8 @response=#<ActionDispatch::Response:0x00007ff0ff1f9058 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007ff0ff1f8f90 @monitor=#<ActionDispatch::Response:0x00007ff0ff1f9058 ...>, @cond=#<Thread::ConditionVariable:0x00007ff0ff1f8f68>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007ff0ff1fa070 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_commit"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_commit", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007ff0fed1f780 @req=#<ActionDispatch::Request:0x00007ff0ff1fa070 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007ff0ff1f8888 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007ff0ff1f8630 @paths=[#<ActionView::FixtureResolver:0x00007ff0fecaaa70 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7ff0fecaa9f8 keys=1 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="active_record_after_commit", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"active_record_after_commit"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007ff0fdd35298 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=3589523291688210186>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007ff10302fe30 @max_size=10000>>]
[0m):
F, [2019-03-01T19:57:08.895150 #26583] FATAL -- :   
F, [2019-03-01T19:57:08.895171 #26583] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T19:57:08.897693 #26583]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 19:57:08 +0200
I, [2019-03-01T19:57:08.898825 #26583]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T19:57:08.899276 #26583] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T19:57:08.900746 #26583] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T19:57:08.901974 #26583] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T19:57:08.912371 #26583]  INFO -- : Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.2ms)
F, [2019-03-01T19:57:08.919046 #26583] FATAL -- :   
F, [2019-03-01T19:57:08.926485 #26583] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T19:57:08.926534 #26583] FATAL -- :   
F, [2019-03-01T19:57:08.926558 #26583] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T19:57:10.932948 #26583]  INFO -- : Started HEAD "/crash" for 127.0.0.1 at 2019-03-01 19:57:10 +0200
I, [2019-03-01T19:57:10.937757 #26583]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T19:57:10.938231 #26583] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T19:57:10.939707 #26583] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T19:57:10.940952 #26583] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T19:57:10.942266 #26583]  INFO -- : Completed 0  in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-01T19:57:10.943731 #26583] FATAL -- :   
F, [2019-03-01T19:57:10.943772 #26583] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T19:57:10.943854 #26583] FATAL -- :   
F, [2019-03-01T19:57:10.943876 #26583] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T19:57:10.945405 #26583]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 19:57:10 +0200
I, [2019-03-01T19:57:10.946484 #26583]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T19:57:10.946951 #26583] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T19:57:10.948394 #26583] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T19:57:10.949560 #26583] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T19:57:10.951350 #26583]  INFO -- : Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms)
F, [2019-03-01T19:57:10.952842 #26583] FATAL -- :   
F, [2019-03-01T19:57:10.952908 #26583] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T19:57:10.952933 #26583] FATAL -- :   
F, [2019-03-01T19:57:10.952954 #26583] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T19:57:10.954562 #26583]  INFO -- : Started GET "/active_job" for 127.0.0.1 at 2019-03-01 19:57:10 +0200
I, [2019-03-01T19:57:10.955338 #26583]  INFO -- : Processing by DummyController#active_job as HTML
I, [2019-03-01T19:57:10.956463 #26583]  INFO -- :   Rendering dummy/active_job.html.erb within layouts/application
I, [2019-03-01T19:57:10.956754 #26583]  INFO -- :   Rendered dummy/active_job.html.erb within layouts/application (0.2ms)
I, [2019-03-01T19:57:10.957092 #26583]  INFO -- : Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.0ms)
I, [2019-03-01T19:57:12.960626 #26583]  INFO -- : Started GET "/active_job" for 127.0.0.1 at 2019-03-01 19:57:12 +0200
I, [2019-03-01T19:57:12.961707 #26583]  INFO -- : Processing by DummyController#active_job as HTML
I, [2019-03-01T19:57:12.962885 #26583]  INFO -- :   Rendering dummy/active_job.html.erb within layouts/application
I, [2019-03-01T19:57:12.963238 #26583]  INFO -- :   Rendered dummy/active_job.html.erb within layouts/application (0.3ms)
I, [2019-03-01T19:57:12.963589 #26583]  INFO -- : Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.0ms)
I, [2019-03-01T19:57:14.966085 #26583]  INFO -- : Started GET "/delayed_job" for 127.0.0.1 at 2019-03-01 19:57:14 +0200
I, [2019-03-01T19:57:14.967096 #26583]  INFO -- : Processing by DummyController#delayed_job as HTML
I, [2019-03-01T19:57:14.980517 #26583]  INFO -- : Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.4ms)
F, [2019-03-01T19:57:14.989415 #26583] FATAL -- :   
F, [2019-03-01T19:57:14.989529 #26583] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n"))
       got: (#<Airbrake::Notice:0x00007ff0ff258d28 @config=#<Airbrake::Config:0x00007ff0fdc24070 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007ff0fed460d8 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,3 +1,2 @@
[0m[31m-["anything",
[0m[31m- "hash_including(\"handler\"=>\"--- !ruby/struct:BangoJob\\nbingo: bingo\\nbongo: bongo\\n\")"]
[0m[32m+[#<Airbrake::Notice:0x00007ff0ff258d28 @config=#<Airbrake::Config:0x00007ff0fdc24070 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007ff0fe9e3f80 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007ff0fe9e3f30 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007ff0fe9e3e18 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007ff0fe9e3d50>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>86, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>142, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>187, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007ff0fed460b0 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007ff0fdf31740>, "rack.errors"=>#<StringIO:0x00007ff0fdf317b8>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007ff0fdb55ab8 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007ff0fdb55888 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007ff0fdb55838 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007ff0fdb556f8>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007ff0fed829e8 @filters=[#<Proc:0x00007ff0fed82830@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007ff0fed82808@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007ff0fed82790@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007ff0fed81b38@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007ff0fed81b10@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007ff0fed81750 @key_generator=#<ActiveSupport::KeyGenerator:0x00007ff0fed81778 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007ff0fed81728 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007ff0fdb9f938 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007ff0ff10a278>, "ROUTES_70336524079420_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"2feb86d5-86c5-4a9b-bcf4-41628f9bea0a", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007ff0fdf30480 @req=#<ActionDispatch::Request:0x00007ff0fdf304a8 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7ff0fdf2b228 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007ff0fdf2b1d8 @by=#<ActionDispatch::Session::CookieStore:0x00007ff1038443c8 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007ff1038443f0 @app=#<Rack::Head:0x00007ff103844418 @app=#<Rack::ConditionalGet:0x00007ff103844440 @app=#<Rack::ETag:0x00007ff103844468 @app=#<Rack::TempfileReaper:0x00007ff103844490 @app=#<Warden::Manager:0x00007ff103844558 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007ff0ff10a278>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70336514709620 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007ff0fdf29ae0 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007ff0fdf2ada0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/delayed_job", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007ff0fdf28c80 @req=#<ActionDispatch::Request:0x00007ff0fdf2ada0 ...>>>, @_response=#<ActionDispatch::Response:0x00007ff0fdf29dd8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007ff0fdf29d88>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007ff0fdf29ce8 @response=#<ActionDispatch::Response:0x00007ff0fdf29dd8 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007ff0fdf29cc0 @monitor=#<ActionDispatch::Response:0x00007ff0fdf29dd8 ...>, @cond=#<Thread::ConditionVariable:0x00007ff0fdf29c98>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007ff0fdf2ada0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/delayed_job", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007ff0fdf28c80 @req=#<ActionDispatch::Request:0x00007ff0fdf2ada0 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007ff0fdf29950 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007ff0fdf29838 @paths=[#<ActionView::FixtureResolver:0x00007ff0fecaaa70 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7ff0fecaa9f8 keys=3 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007ff0fdd35298 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=3589523291688210186>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007ff0fed460d8 @max_size=10000>>]
[0m):
F, [2019-03-01T19:57:14.989600 #26583] FATAL -- :   
F, [2019-03-01T19:57:14.989622 #26583] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T19:57:14.991464 #26583]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 19:57:14 +0200
I, [2019-03-01T19:57:14.992253 #26583]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T19:57:14.992739 #26583] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T19:57:14.994339 #26583] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T19:57:14.995563 #26583] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T19:57:14.997174 #26583]  INFO -- : Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms)
F, [2019-03-01T19:57:14.999046 #26583] FATAL -- :   
F, [2019-03-01T19:57:14.999084 #26583] FATAL -- : RSpec::Expectations::ExpectationNotMetError (
expected: "AirbrakeTestError"
     got: "RSpec::Mocks::MockExpectationError"

(compared using ==)
):
F, [2019-03-01T19:57:14.999108 #26583] FATAL -- :   
F, [2019-03-01T19:57:14.999131 #26583] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T19:57:15.000480 #26583]  INFO -- : Started GET "/" for 127.0.0.1 at 2019-03-01 19:57:15 +0200
I, [2019-03-01T19:57:15.001229 #26583]  INFO -- : Processing by DummyController#index as HTML
I, [2019-03-01T19:57:15.001944 #26583]  INFO -- :   Rendering dummy/index.html.erb within layouts/application
I, [2019-03-01T19:57:15.002271 #26583]  INFO -- :   Rendered dummy/index.html.erb within layouts/application (0.3ms)
I, [2019-03-01T19:57:15.002602 #26583]  INFO -- : Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
I, [2019-03-01T19:57:15.003880 #26583]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 19:57:15 +0200
I, [2019-03-01T19:57:15.004641 #26583]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T19:57:15.004992 #26583] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T19:57:15.006292 #26583] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T19:57:15.007460 #26583] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T19:57:15.017149 #26583]  INFO -- : Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.2ms)
F, [2019-03-01T19:57:15.022906 #26583] FATAL -- :   
F, [2019-03-01T19:57:15.027065 #26583] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T19:57:15.027103 #26583] FATAL -- :   
F, [2019-03-01T19:57:15.027128 #26583] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
D, [2019-03-01T20:02:26.773058 #26647] DEBUG -- :   [1m[35m (0.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T20:02:26.773502 #26647] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T20:02:26.776134 #26647] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T20:02:26.776749 #26647] DEBUG -- :   [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T20:02:26.777281 #26647] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T20:02:26.778638 #26647] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T20:02:26.788426 #26647] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T20:02:26.795234 #26647] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:02:26.796094 #26647] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 18:02:26.795556"], ["updated_at", "2019-03-01 18:02:26.795556"]]
D, [2019-03-01T20:02:26.796311 #26647] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:02:26.831298 #26647]  INFO -- : Started GET "/delayed_job" for 127.0.0.1 at 2019-03-01 20:02:26 +0200
I, [2019-03-01T20:02:26.833259 #26647]  INFO -- : Processing by DummyController#delayed_job as HTML
I, [2019-03-01T20:02:26.848463 #26647]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.5ms)
F, [2019-03-01T20:02:26.866490 #26647] FATAL -- :   
F, [2019-03-01T20:02:26.866594 #26647] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n"))
       got: (#<Airbrake::Notice:0x00007fa2f0df8398 @config=#<Airbrake::Config:0x00007fa2f0b439e0 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fa2f0de1788 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,3 +1,2 @@
[0m[31m-["anything",
[0m[31m- "hash_including(\"handler\"=>\"--- !ruby/struct:BangoJob\\nbingo: bingo\\nbongo: bongo\\n\")"]
[0m[32m+[#<Airbrake::Notice:0x00007fa2f0df8398 @config=#<Airbrake::Config:0x00007fa2f0b439e0 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fa2f0b43940 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fa2f0b438f0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fa2f0b438a0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fa2f0b43828>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3">, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>86, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>142, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>195, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007fa2f0de1760 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fa2f1b089e8>, "rack.errors"=>#<StringIO:0x00007fa2f1b08a60>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fa2f0bdb060 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fa2f0bdb010 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fa2f0bdafc0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fa2f0bdaf70>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fa2f1af1a68 @filters=[#<Proc:0x00007fa2f1af1950@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fa2f1af1928@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fa2f1af1900@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fa2f1af11a8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fa2f1af1180@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fa2f1af0f78 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fa2f1af0fa0 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fa2f1af0f50 entries=0 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fa2f0587c68 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fa2f1a47a90>, "ROUTES_70168907758920_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"278049e3-10c7-4d4c-a0c9-9607f36509b1", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fa2f1ad0f20 @req=#<ActionDispatch::Request:0x00007fa2f1ad0f48 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7fa2f1acbe08 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fa2f1acbdb8 @by=#<ActionDispatch::Session::CookieStore:0x00007fa2f1b1aa58 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fa2f1b1aa80 @app=#<Rack::Head:0x00007fa2f1b1aaa8 @app=#<Rack::ConditionalGet:0x00007fa2f1b1aad0 @app=#<Rack::ETag:0x00007fa2f1b1aaf8 @app=#<Rack::TempfileReaper:0x00007fa2f1b1ab20 @app=#<Warden::Manager:0x00007fa2f1b1abe8 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fa2f1a47a90>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70168908029560 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fa2f1ac13e0 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fa2f1acb980 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/delayed_job", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fa2f1abbcd8 @req=#<ActionDispatch::Request:0x00007fa2f1acb980 ...>>>, @_response=#<ActionDispatch::Response:0x00007fa2f1ac1818 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fa2f1ac1778>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fa2f1ac16b0 @response=#<ActionDispatch::Response:0x00007fa2f1ac1818 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fa2f1ac1610 @monitor=#<ActionDispatch::Response:0x00007fa2f1ac1818 ...>, @cond=#<Thread::ConditionVariable:0x00007fa2f1ac15e8>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fa2f1acb980 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/delayed_job", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fa2f1abbcd8 @req=#<ActionDispatch::Request:0x00007fa2f1acb980 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fa2f1ac1138 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fa2f1ac0fa8 @paths=[#<ActionView::FixtureResolver:0x00007fa2f04e7920 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fa2f04e78f8 keys=0 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fa2f0c81fc8 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=17347602900737154>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fa2f0de1788 @max_size=10000>>]
[0m):
F, [2019-03-01T20:02:26.866739 #26647] FATAL -- :   
F, [2019-03-01T20:02:26.866772 #26647] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:02:26.869366 #26647]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:02:26 +0200
I, [2019-03-01T20:02:26.870999 #26647]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:02:26.878128 #26647] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:02:26.879780 #26647] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:02:26.881122 #26647] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:02:26.887064 #26647]  INFO -- : Completed 500 Internal Server Error in 16ms (ActiveRecord: 0.6ms)
F, [2019-03-01T20:02:26.903534 #26647] FATAL -- :   
F, [2019-03-01T20:02:26.909203 #26647] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:02:26.909264 #26647] FATAL -- :   
F, [2019-03-01T20:02:26.909297 #26647] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:02:28.917556 #26647]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:02:28 +0200
I, [2019-03-01T20:02:28.918524 #26647]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:02:28.918978 #26647] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:02:28.920510 #26647] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:02:28.921884 #26647] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:02:28.923162 #26647]  INFO -- : Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:02:28.924599 #26647] FATAL -- :   
F, [2019-03-01T20:02:28.924636 #26647] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:02:28.924664 #26647] FATAL -- :   
F, [2019-03-01T20:02:28.924687 #26647] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:02:28.926146 #26647]  INFO -- : Started HEAD "/crash" for 127.0.0.1 at 2019-03-01 20:02:28 +0200
I, [2019-03-01T20:02:28.930461 #26647]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:02:28.930911 #26647] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:02:28.932276 #26647] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:02:28.933506 #26647] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:02:28.937793 #26647]  INFO -- : Completed 0  in 7ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:02:28.939350 #26647] FATAL -- :   
F, [2019-03-01T20:02:28.939402 #26647] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:02:28.939428 #26647] FATAL -- :   
F, [2019-03-01T20:02:28.939452 #26647] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:02:28.941700 #26647]  INFO -- : Started GET "/active_job" for 127.0.0.1 at 2019-03-01 20:02:28 +0200
I, [2019-03-01T20:02:28.942582 #26647]  INFO -- : Processing by DummyController#active_job as HTML
I, [2019-03-01T20:02:28.945402 #26647]  INFO -- :   Rendering dummy/active_job.html.erb within layouts/application
I, [2019-03-01T20:02:28.946391 #26647]  INFO -- :   Rendered dummy/active_job.html.erb within layouts/application (0.6ms)
I, [2019-03-01T20:02:28.948150 #26647]  INFO -- : Completed 200 OK in 5ms (Views: 4.8ms | ActiveRecord: 0.0ms)
I, [2019-03-01T20:02:30.954521 #26647]  INFO -- : Started GET "/active_job" for 127.0.0.1 at 2019-03-01 20:02:30 +0200
I, [2019-03-01T20:02:30.955584 #26647]  INFO -- : Processing by DummyController#active_job as HTML
I, [2019-03-01T20:02:30.956865 #26647]  INFO -- :   Rendering dummy/active_job.html.erb within layouts/application
I, [2019-03-01T20:02:30.958085 #26647]  INFO -- :   Rendered dummy/active_job.html.erb within layouts/application (0.3ms)
I, [2019-03-01T20:02:30.958515 #26647]  INFO -- : Completed 200 OK in 3ms (Views: 2.1ms | ActiveRecord: 0.0ms)
I, [2019-03-01T20:02:32.962420 #26647]  INFO -- : Started GET "/active_record_after_commit" for 127.0.0.1 at 2019-03-01 20:02:32 +0200
I, [2019-03-01T20:02:32.963372 #26647]  INFO -- : Processing by DummyController#active_record_after_commit as HTML
D, [2019-03-01T20:02:32.963902 #26647] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:02:32.965591 #26647] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "Bingo"]]
D, [2019-03-01T20:02:32.967152 #26647] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:02:32.968555 #26647]  INFO -- : Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:02:32.980337 #26647] FATAL -- :   
F, [2019-03-01T20:02:32.980442 #26647] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (an instance of AirbrakeTestError)
       got: (#<Airbrake::Notice:0x00007fa2efeb0e08 @config=#<Airbrake::Config:0x00007fa2f0b439e0 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fa2f1b73130 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of AirbrakeTestError"]
[0m[32m+[#<Airbrake::Notice:0x00007fa2efeb0e08 @config=#<Airbrake::Config:0x00007fa2f0b439e0 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fa2f0b43940 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fa2f0b438f0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fa2f0b438a0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fa2f0b43828>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"after_commit", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>48, :function=>"raise_error_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_commit_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>346, :function=>"committed!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>128, :function=>"commit_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>223, :function=>"block in commit_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>213, :function=>"commit_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>252, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>385, :function=>"with_transaction_returning_status"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>310, :function=>"block in save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>325, :function=>"rollback_active_record_state!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>309, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/suppressor.rb", :line=>44, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/persistence.rb", :line=>36, :function=>"create"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>123, :function=>"active_record_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>108, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: after_commit>, :rack_request=>#<ActionDispatch::Request:0x00007fa2f1b73108 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fa2f0f317c8>, "rack.errors"=>#<StringIO:0x00007fa2f0f31840>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/active_record_after_commit", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fa2f0bdb060 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fa2f0bdb010 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fa2f0bdafc0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fa2f0bdaf70>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fa2f1af1a68 @filters=[#<Proc:0x00007fa2f1af1950@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fa2f1af1928@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fa2f1af1900@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fa2f1af11a8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fa2f1af1180@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fa2f1af0f78 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fa2f1af0fa0 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fa2f1af0f50 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fa2f0587c68 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fa2f1a47a90>, "ROUTES_70168907758920_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/active_record_after_commit", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"596127c5-961e-4eab-a52a-a1f4b50a8753", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fa2f0f30648 @req=#<ActionDispatch::Request:0x00007fa2f0f30670 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7fa2f0f2b5a8 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fa2f0f2b558 @by=#<ActionDispatch::Session::CookieStore:0x00007fa2f1b1aa58 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fa2f1b1aa80 @app=#<Rack::Head:0x00007fa2f1b1aaa8 @app=#<Rack::ConditionalGet:0x00007fa2f1b1aad0 @app=#<Rack::ETag:0x00007fa2f1b1aaf8 @app=#<Rack::TempfileReaper:0x00007fa2f1b1ab20 @app=#<Warden::Manager:0x00007fa2f1b1abe8 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fa2f1a47a90>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70168901933620 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"active_record_after_commit"}, "action_controller.instance"=>#<DummyController:0x00007fa2f0f29b90 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fa2f0f2b170 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_commit"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_commit", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fa2f0f28e48 @req=#<ActionDispatch::Request:0x00007fa2f0f2b170 ...>>>, @_response=#<ActionDispatch::Response:0x00007fa2f0f29dc0 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fa2f0f29d70>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fa2f0f29d20 @response=#<ActionDispatch::Response:0x00007fa2f0f29dc0 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fa2f0f29cf8 @monitor=#<ActionDispatch::Response:0x00007fa2f0f29dc0 ...>, @cond=#<Thread::ConditionVariable:0x00007fa2f0f29cd0>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fa2f0f2b170 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_commit"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_commit", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fa2f0f28e48 @req=#<ActionDispatch::Request:0x00007fa2f0f2b170 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fa2f0f29a28 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fa2f0f29938 @paths=[#<ActionView::FixtureResolver:0x00007fa2f04e7920 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fa2f04e78f8 keys=2 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="active_record_after_commit", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"active_record_after_commit"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fa2f0c81fc8 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=17347602900737154>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fa2f1b73130 @max_size=10000>>]
[0m):
F, [2019-03-01T20:02:32.980520 #26647] FATAL -- :   
F, [2019-03-01T20:02:32.980547 #26647] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:02:32.982009 #26647]  INFO -- : Started GET "/active_record_after_rollback" for 127.0.0.1 at 2019-03-01 20:02:32 +0200
I, [2019-03-01T20:02:32.982977 #26647]  INFO -- : Processing by DummyController#active_record_after_rollback as HTML
D, [2019-03-01T20:02:32.983279 #26647] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:02:32.984910 #26647] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "Bango"]]
D, [2019-03-01T20:02:32.986093 #26647] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
I, [2019-03-01T20:02:32.987394 #26647]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:02:33.002782 #26647] FATAL -- :   
F, [2019-03-01T20:02:33.002877 #26647] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (an instance of AirbrakeTestError)
       got: (#<Airbrake::Notice:0x00007fa2f0e62e78 @config=#<Airbrake::Config:0x00007fa2f0b439e0 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fa2f0e30d38 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of AirbrakeTestError"]
[0m[32m+[#<Airbrake::Notice:0x00007fa2f0e62e78 @config=#<Airbrake::Config:0x00007fa2f0b439e0 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fa2f0b43940 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fa2f0b438f0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fa2f0b438a0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fa2f0b43828>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"after_rollback", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>52, :function=>"raise_error_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_rollback_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>357, :function=>"rolledback!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>112, :function=>"rollback_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>231, :function=>"block in rollback_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>228, :function=>"rollback_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>242, :function=>"rescue in block in within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>259, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>127, :function=>"active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>118, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}, {:type=>"ActiveRecord::Rollback", :message=>"ActiveRecord::Rollback", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>129, :function=>"block in active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"block in transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>239, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>127, :function=>"active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>118, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: after_rollback>, :rack_request=>#<ActionDispatch::Request:0x00007fa2f0e30d10 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fa2f0ef00c0>, "rack.errors"=>#<StringIO:0x00007fa2f0ef0160>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/active_record_after_rollback", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fa2f0bdb060 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fa2f0bdb010 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fa2f0bdafc0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fa2f0bdaf70>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fa2f1af1a68 @filters=[#<Proc:0x00007fa2f1af1950@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fa2f1af1928@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fa2f1af1900@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fa2f1af11a8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fa2f1af1180@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fa2f1af0f78 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fa2f1af0fa0 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fa2f1af0f50 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fa2f0587c68 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fa2f1a47a90>, "ROUTES_70168907758920_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/active_record_after_rollback", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"5a720006-decf-43b3-a6d0-72bc701d63f8", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fa2f0eea940 @req=#<ActionDispatch::Request:0x00007fa2f0eea968 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7fa2f0ee95e0 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fa2f0ee9590 @by=#<ActionDispatch::Session::CookieStore:0x00007fa2f1b1aa58 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fa2f1b1aa80 @app=#<Rack::Head:0x00007fa2f1b1aaa8 @app=#<Rack::ConditionalGet:0x00007fa2f1b1aad0 @app=#<Rack::ETag:0x00007fa2f1b1aaf8 @app=#<Rack::TempfileReaper:0x00007fa2f1b1ab20 @app=#<Warden::Manager:0x00007fa2f1b1abe8 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fa2f1a47a90>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70168901798460 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"active_record_after_rollback"}, "action_controller.instance"=>#<DummyController:0x00007fa2f0ee3f78 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fa2f0ee90e0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_rollback"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_rollback", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fa2f0ee3028 @req=#<ActionDispatch::Request:0x00007fa2f0ee90e0 ...>>>, @_response=#<ActionDispatch::Response:0x00007fa2f0ee8078 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fa2f0ee8028>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fa2f0ee8640 @response=#<ActionDispatch::Response:0x00007fa2f0ee8078 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fa2f0ee8d20 @monitor=#<ActionDispatch::Response:0x00007fa2f0ee8078 ...>, @cond=#<Thread::ConditionVariable:0x00007fa2f0ee9428>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fa2f0ee90e0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_rollback"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_rollback", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fa2f0ee3028 @req=#<ActionDispatch::Request:0x00007fa2f0ee90e0 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fa2f0ee3e10 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fa2f0ee3c58 @paths=[#<ActionView::FixtureResolver:0x00007fa2f04e7920 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fa2f04e78f8 keys=2 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="active_record_after_rollback", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"active_record_after_rollback"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fa2f0c81fc8 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=17347602900737154>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fa2f0e30d38 @max_size=10000>>]
[0m):
F, [2019-03-01T20:02:33.002921 #26647] FATAL -- :   
F, [2019-03-01T20:02:33.002944 #26647] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:02:33.004577 #26647]  INFO -- : Started GET "/" for 127.0.0.1 at 2019-03-01 20:02:33 +0200
I, [2019-03-01T20:02:33.005374 #26647]  INFO -- : Processing by DummyController#index as HTML
I, [2019-03-01T20:02:33.006053 #26647]  INFO -- :   Rendering dummy/index.html.erb within layouts/application
I, [2019-03-01T20:02:33.006309 #26647]  INFO -- :   Rendered dummy/index.html.erb within layouts/application (0.2ms)
I, [2019-03-01T20:02:33.006597 #26647]  INFO -- : Completed 200 OK in 1ms (Views: 0.9ms | ActiveRecord: 0.0ms)
I, [2019-03-01T20:02:33.007904 #26647]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:02:33 +0200
I, [2019-03-01T20:02:33.008516 #26647]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:02:33.008889 #26647] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:02:33.010174 #26647] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:02:33.011346 #26647] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:02:33.012884 #26647]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:02:33.014885 #26647] FATAL -- :   
F, [2019-03-01T20:02:33.014935 #26647] FATAL -- : RSpec::Expectations::ExpectationNotMetError (
expected: "AirbrakeTestError"
     got: "RSpec::Mocks::MockExpectationError"

(compared using ==)
):
F, [2019-03-01T20:02:33.014959 #26647] FATAL -- :   
F, [2019-03-01T20:02:33.014982 #26647] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:02:33.016448 #26647]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:02:33 +0200
I, [2019-03-01T20:02:33.017245 #26647]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:02:33.017634 #26647] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:02:33.018998 #26647] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:02:33.020248 #26647] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:02:33.030547 #26647]  INFO -- : Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:02:33.036964 #26647] FATAL -- :   
F, [2019-03-01T20:02:33.041014 #26647] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:02:33.041050 #26647] FATAL -- :   
F, [2019-03-01T20:02:33.041074 #26647] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:02:35.047498 #26647]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:02:35 +0200
I, [2019-03-01T20:02:35.052432 #26647]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:02:35.052984 #26647] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:02:35.054834 #26647] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:02:35.056277 #26647] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:02:35.070412 #26647]  INFO -- : Completed 500 Internal Server Error in 18ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:02:35.078639 #26647] FATAL -- :   
F, [2019-03-01T20:02:35.078746 #26647] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:02:35.078793 #26647] FATAL -- :   
F, [2019-03-01T20:02:35.079144 #26647] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:02:37.084560 #26647]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:02:37 +0200
I, [2019-03-01T20:02:37.085464 #26647]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:02:37.085882 #26647] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:02:37.087530 #26647] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:02:37.088967 #26647] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:02:37.100717 #26647]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:02:37.107315 #26647] FATAL -- :   
F, [2019-03-01T20:02:37.113956 #26647] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:02:37.114034 #26647] FATAL -- :   
F, [2019-03-01T20:02:37.114066 #26647] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:02:39.121910 #26647]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:02:39 +0200
I, [2019-03-01T20:02:39.123140 #26647]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:02:39.123605 #26647] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:02:39.125908 #26647] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:02:39.127872 #26647] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:02:39.144777 #26647]  INFO -- : Completed 500 Internal Server Error in 21ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:02:39.152195 #26647] FATAL -- :   
F, [2019-03-01T20:02:39.159217 #26647] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:02:39.159271 #26647] FATAL -- :   
F, [2019-03-01T20:02:39.159299 #26647] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:02:41.162521 #26647]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:02:41 +0200
I, [2019-03-01T20:02:41.163507 #26647]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:02:41.163985 #26647] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:02:41.166082 #26647] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:02:41.167842 #26647] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:02:41.175477 #26647]  INFO -- : Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:02:41.198044 #26647] FATAL -- :   
F, [2019-03-01T20:02:41.202456 #26647] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:02:41.202494 #26647] FATAL -- :   
F, [2019-03-01T20:02:41.202522 #26647] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:02:43.209579 #26647]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:02:43 +0200
I, [2019-03-01T20:02:43.210618 #26647]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:02:43.211158 #26647] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:02:43.212923 #26647] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:02:43.214296 #26647] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:02:43.224230 #26647]  INFO -- : Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:02:43.229666 #26647] FATAL -- :   
F, [2019-03-01T20:02:43.234052 #26647] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:02:43.234106 #26647] FATAL -- :   
F, [2019-03-01T20:02:43.234137 #26647] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:02:45.241204 #26647]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:02:45 +0200
I, [2019-03-01T20:02:45.242349 #26647]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:02:45.242866 #26647] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:02:45.244367 #26647] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:02:45.245714 #26647] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:02:45.254984 #26647]  INFO -- : Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:02:45.260385 #26647] FATAL -- :   
F, [2019-03-01T20:02:45.265570 #26647] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:02:45.265615 #26647] FATAL -- :   
F, [2019-03-01T20:02:45.265645 #26647] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:02:47.273237 #26647]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:02:47 +0200
I, [2019-03-01T20:02:47.274480 #26647]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:02:47.274546 #26647]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:02:47.275044 #26647] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:02:47.276768 #26647] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:02:47.278167 #26647] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:02:47.288899 #26647]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:02:47.297274 #26647] FATAL -- :   
F, [2019-03-01T20:02:47.301649 #26647] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:02:47.301678 #26647] FATAL -- :   
F, [2019-03-01T20:02:47.301702 #26647] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:02:47.303522 #26647]  INFO -- : Started GET "/resque" for 127.0.0.1 at 2019-03-01 20:02:47 +0200
I, [2019-03-01T20:02:47.304214 #26647]  INFO -- : Processing by DummyController#resque as HTML
I, [2019-03-01T20:02:47.305444 #26647]  INFO -- :   Rendering dummy/resque.html.erb within layouts/application
I, [2019-03-01T20:02:47.305722 #26647]  INFO -- :   Rendered dummy/resque.html.erb within layouts/application (0.2ms)
I, [2019-03-01T20:02:47.305981 #26647]  INFO -- : Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.0ms)
I, [2019-03-01T20:02:47.307199 #26647]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:02:47 +0200
I, [2019-03-01T20:02:47.308052 #26647]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:02:47.308548 #26647] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:02:47.310201 #26647] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:02:47.311543 #26647] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:02:47.312737 #26647]  INFO -- : Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:02:47.314001 #26647] FATAL -- :   
F, [2019-03-01T20:02:47.314052 #26647] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:02:47.314077 #26647] FATAL -- :   
F, [2019-03-01T20:02:47.314100 #26647] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
D, [2019-03-01T20:03:16.564078 #26665] DEBUG -- :   [1m[35m (0.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T20:03:16.564552 #26665] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T20:03:16.567310 #26665] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T20:03:16.567931 #26665] DEBUG -- :   [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T20:03:16.568443 #26665] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T20:03:16.569788 #26665] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T20:03:16.580628 #26665] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T20:03:16.588314 #26665] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:03:16.589228 #26665] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 18:03:16.588642"], ["updated_at", "2019-03-01 18:03:16.588642"]]
D, [2019-03-01T20:03:16.589415 #26665] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:03:16.617952 #26665]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:03:16 +0200
I, [2019-03-01T20:03:16.625149 #26665]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:03:16.625221 #26665]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:03:16.633711 #26665] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:03:16.635453 #26665] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:03:16.636939 #26665] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:03:16.643834 #26665]  INFO -- : Completed 500 Internal Server Error in 18ms (ActiveRecord: 0.8ms)
F, [2019-03-01T20:03:16.656324 #26665] FATAL -- :   
F, [2019-03-01T20:03:16.661006 #26665] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:03:16.661047 #26665] FATAL -- :   
F, [2019-03-01T20:03:16.661076 #26665] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
D, [2019-03-01T20:03:28.506840 #26679] DEBUG -- :   [1m[35m (1.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T20:03:28.507310 #26679] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T20:03:28.510005 #26679] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T20:03:28.510557 #26679] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T20:03:28.511059 #26679] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T20:03:28.512351 #26679] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T20:03:28.522150 #26679] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T20:03:28.529834 #26679] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:03:28.530755 #26679] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 18:03:28.530151"], ["updated_at", "2019-03-01 18:03:28.530151"]]
D, [2019-03-01T20:03:28.530945 #26679] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
D, [2019-03-01T20:03:37.338990 #26693] DEBUG -- :   [1m[35m (0.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T20:03:37.339420 #26693] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T20:03:37.342291 #26693] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T20:03:37.342966 #26693] DEBUG -- :   [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T20:03:37.343641 #26693] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T20:03:37.345209 #26693] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T20:03:37.354539 #26693] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T20:03:37.357743 #26693] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:03:37.358532 #26693] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 18:03:37.358034"], ["updated_at", "2019-03-01 18:03:37.358034"]]
D, [2019-03-01T20:03:37.358710 #26693] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:03:37.387328 #26693]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:03:37 +0200
I, [2019-03-01T20:03:37.394313 #26693]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:03:37.394372 #26693]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:03:37.401729 #26693] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:03:37.403404 #26693] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:03:37.404879 #26693] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:03:37.411469 #26693]  INFO -- : Completed 500 Internal Server Error in 17ms (ActiveRecord: 0.6ms)
F, [2019-03-01T20:03:37.423128 #26693] FATAL -- :   
F, [2019-03-01T20:03:37.427934 #26693] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:03:37.427994 #26693] FATAL -- :   
F, [2019-03-01T20:03:37.428030 #26693] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
D, [2019-03-01T20:03:46.803543 #26705] DEBUG -- :   [1m[35m (0.8ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T20:03:46.803947 #26705] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T20:03:46.806480 #26705] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T20:03:46.806948 #26705] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T20:03:46.807433 #26705] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T20:03:46.808741 #26705] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T20:03:46.818752 #26705] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T20:03:46.822032 #26705] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:03:46.822891 #26705] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 18:03:46.822360"], ["updated_at", "2019-03-01 18:03:46.822360"]]
D, [2019-03-01T20:03:46.823095 #26705] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
D, [2019-03-01T20:03:59.205050 #26718] DEBUG -- :   [1m[35m (1.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T20:03:59.205498 #26718] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T20:03:59.208181 #26718] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T20:03:59.208816 #26718] DEBUG -- :   [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T20:03:59.209343 #26718] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T20:03:59.210717 #26718] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T20:03:59.220995 #26718] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T20:03:59.228480 #26718] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:03:59.229494 #26718] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 18:03:59.228841"], ["updated_at", "2019-03-01 18:03:59.228841"]]
D, [2019-03-01T20:03:59.229716 #26718] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:03:59.258395 #26718]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:03:59 +0200
I, [2019-03-01T20:03:59.266147 #26718]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:03:59.266223 #26718]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:03:59.274198 #26718] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:03:59.275888 #26718] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:03:59.277233 #26718] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:03:59.283957 #26718]  INFO -- : Completed 500 Internal Server Error in 18ms (ActiveRecord: 0.6ms)
F, [2019-03-01T20:03:59.296892 #26718] FATAL -- :   
F, [2019-03-01T20:03:59.301379 #26718] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:03:59.301420 #26718] FATAL -- :   
F, [2019-03-01T20:03:59.301449 #26718] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
D, [2019-03-01T20:04:24.048945 #26733] DEBUG -- :   [1m[35m (1.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T20:04:24.049556 #26733] DEBUG -- :   [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T20:04:24.052564 #26733] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T20:04:24.053162 #26733] DEBUG -- :   [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T20:04:24.053734 #26733] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T20:04:24.055124 #26733] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T20:04:24.065097 #26733] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T20:04:24.071931 #26733] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:04:24.072782 #26733] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 18:04:24.072258"], ["updated_at", "2019-03-01 18:04:24.072258"]]
D, [2019-03-01T20:04:24.072958 #26733] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:04:24.100473 #26733]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:04:24 +0200
I, [2019-03-01T20:04:24.107421 #26733]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:04:24.107483 #26733]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:04:24.115631 #26733] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:04:24.117223 #26733] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:04:24.118540 #26733] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:04:24.125000 #26733]  INFO -- : Completed 500 Internal Server Error in 17ms (ActiveRecord: 0.8ms)
F, [2019-03-01T20:04:24.136798 #26733] FATAL -- :   
F, [2019-03-01T20:04:24.141570 #26733] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:04:24.141630 #26733] FATAL -- :   
F, [2019-03-01T20:04:24.141669 #26733] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
D, [2019-03-01T20:05:11.065315 #26763] DEBUG -- :   [1m[35m (0.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T20:05:11.065786 #26763] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T20:05:11.068478 #26763] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T20:05:11.069089 #26763] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T20:05:11.069680 #26763] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T20:05:11.070999 #26763] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T20:05:11.081126 #26763] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T20:05:11.084364 #26763] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:05:11.085196 #26763] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 18:05:11.084657"], ["updated_at", "2019-03-01 18:05:11.084657"]]
D, [2019-03-01T20:05:11.085358 #26763] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:05:14.170242 #26763]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:05:14 +0200
I, [2019-03-01T20:05:14.177297 #26763]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:05:14.177349 #26763]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:05:14.186335 #26763] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:05:14.188279 #26763] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:05:14.189761 #26763] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:05:14.191722 #26763]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.8ms)
F, [2019-03-01T20:05:14.220668 #26763] FATAL -- :   
F, [2019-03-01T20:05:14.220788 #26763] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (a notice with [] and "dummy")
       got: (#<Airbrake::Notice:0x00007fd1ddf51390 @config=#<Airbrake::Config:0x00007fd1dcafe0c8 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fd1de02ee20 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["a notice with [] and \"dummy\""]
[0m[32m+[#<Airbrake::Notice:0x00007fd1ddf51390 @config=#<Airbrake::Config:0x00007fd1dcafe0c8 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fd1dcafe050 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fd1dcafe000 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fd1dcafdfb0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fd1dcafdf38>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3">, @payload={:errors=>[{:type=>"NoMethodError", :message=>"undefined method `[]' for #<AirbrakeTestError: after_commit>", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/support/matchers/a_notice_with.rb", :line=>3, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-expectations-3.8.2/lib/rspec/matchers/dsl.rb", :line=>133, :function=>"block (2 levels) in match"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support.rb", :line=>113, :function=>"with_failure_notifier"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-expectations-3.8.2/lib/rspec/matchers/dsl.rb", :line=>131, :function=>"block in match"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-expectations-3.8.2/lib/rspec/matchers/composable.rb", :line=>46, :function=>"==="}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>18, :function=>"values_match?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>31, :function=>"block in arrays_match?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>30, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>30, :function=>"all?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>30, :function=>"arrays_match?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>12, :function=>"values_match?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/argument_list_matcher.rb", :line=>58, :function=>"args_match?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/message_expectation.rb", :line=>414, :function=>"matches?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>245, :function=>"block in find_matching_expectation"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>259, :function=>"block in find_best_matching_expectation_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>258, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>258, :function=>"find_best_matching_expectation_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>244, :function=>"find_matching_expectation"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>172, :function=>"message_received"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>327, :function=>"message_received"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/method_double.rb", :line=>77, :function=>"proxy_method_invoked"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/method_double.rb", :line=>64, :function=>"block (2 levels) in define_proxy_method"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>27, :function=>"rescue in run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>24, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_commit_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>346, :function=>"committed!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>128, :function=>"commit_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>223, :function=>"block in commit_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>213, :function=>"commit_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>252, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>385, :function=>"with_transaction_returning_status"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>310, :function=>"block in save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>325, :function=>"rollback_active_record_state!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>309, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/suppressor.rb", :line=>44, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/persistence.rb", :line=>36, :function=>"create"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>110, :function=>"crash"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>43, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}, {:type=>"AirbrakeTestError", :message=>"after_commit", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>48, :function=>"raise_error_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_commit_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>346, :function=>"committed!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>128, :function=>"commit_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>223, :function=>"block in commit_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>213, :function=>"commit_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>252, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>385, :function=>"with_transaction_returning_status"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>310, :function=>"block in save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>325, :function=>"rollback_active_record_state!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>309, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/suppressor.rb", :line=>44, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/persistence.rb", :line=>36, :function=>"create"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>110, :function=>"crash"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>43, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<NoMethodError: undefined method `[]' for #<AirbrakeTestError: after_commit>>, :rack_request=>#<ActionDispatch::Request:0x00007fd1de02edd0 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fd1dcc8eff0>, "rack.errors"=>#<StringIO:0x00007fd1dcc8f068>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"foo=bar", "PATH_INFO"=>"/crash", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fd1dbb17240 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fd1dbb171f0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fd1dbb171a0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fd1dbb17150>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fd1dcc7cc10 @filters=[#<Proc:0x00007fd1dcc7caf8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fd1dcc7cad0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fd1dcc7caa8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fd1dcc7c350@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fd1dcc7c328@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fd1dcc77fa8 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fd1dcc7fb90 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fd1dcc77f80 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fd1dd908740 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fd1dbd4e3b0>, "ROUTES_70269656527320_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/crash?foo=bar", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"b6d7470b-1fbb-47fa-a463-6e9d22a6a92d", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fd1dcc58d38 @req=#<ActionDispatch::Request:0x00007fd1dcc58d60 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x00007fd1dcc536a8 @by=#<ActionDispatch::Session::CookieStore:0x00007fd1dbeb4e20 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fd1dbeb4e48 @app=#<Rack::Head:0x00007fd1dbeb4e70 @app=#<Rack::ConditionalGet:0x00007fd1dbeb4e98 @app=#<Rack::ETag:0x00007fd1dbeb4ec0 @app=#<Rack::TempfileReaper:0x00007fd1dbeb4ee8 @app=#<Warden::Manager:0x00007fd1dbeb4fb0 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fd1dbd4e3b0>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @req=#<ActionDispatch::Request:0x00007fd1dcc536f8 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @delegate={"session_id"=>"9fa24de6932f6e2d0a05106785f66aa5", "warden.user.default.key"=>#<OpenStruct id=1, email="qa@example.com", username="qa-dept">}, @loaded=true, @exists=nil>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fd1dcc53658 @by=#<ActionDispatch::Session::CookieStore:0x00007fd1dbeb4e20 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fd1dbeb4e48 @app=#<Rack::Head:0x00007fd1dbeb4e70 @app=#<Rack::ConditionalGet:0x00007fd1dbeb4e98 @app=#<Rack::ETag:0x00007fd1dbeb4ec0 @app=#<Rack::TempfileReaper:0x00007fd1dbeb4ee8 @app=#<Warden::Manager:0x00007fd1dbeb4fb0 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fd1dbd4e3b0>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>true, :id=>"9fa24de6932f6e2d0a05106785f66aa5"}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70269664402120 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007fd1dcc52d20 @set_cookies={}, @delete_cookies={}, @request=#<ActionDispatch::Request:0x00007fd1dcc536f8 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @cookies={}, @committed=false, @encrypted=#<ActionDispatch::Cookies::EncryptedKeyRotatingCookieJar:0x00007fd1dcc52c08 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fd1dcc52d20 ...>, @encryptor=#<ActiveSupport::MessageEncryptor:0x00007fd1dcc529d8 @secret="\x1D\x0Ecc\x81\xCE\xD3\xBE\x16\b\xA4 \xBE\xB0\xAF\b\xCA\xAFtlV\xA7jQ\x06\xEFV\x88\xC3\xE6~\xA0", @sign_secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @cipher="aes-256-cbc", @aead_mode=false, @digest="SHA1", @verifier=#<ActiveSupport::MessageVerifier:0x00007fd1dcc52708 @secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:cipher=>"aes-256-cbc", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @legacy_verifier=#<ActiveSupport::MessageVerifier:0x00007fd1dcc52488 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>>, @signed_or_encrypted=#<ActionDispatch::Cookies::EncryptedKeyRotatingCookieJar:0x00007fd1dcc52c08 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fd1dcc52d20 ...>, @encryptor=#<ActiveSupport::MessageEncryptor:0x00007fd1dcc529d8 @secret="\x1D\x0Ecc\x81\xCE\xD3\xBE\x16\b\xA4 \xBE\xB0\xAF\b\xCA\xAFtlV\xA7jQ\x06\xEFV\x88\xC3\xE6~\xA0", @sign_secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @cipher="aes-256-cbc", @aead_mode=false, @digest="SHA1", @verifier=#<ActiveSupport::MessageVerifier:0x00007fd1dcc52708 @secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:cipher=>"aes-256-cbc", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @legacy_verifier=#<ActiveSupport::MessageVerifier:0x00007fd1dcc52488 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>>>, "action_dispatch.request.unsigned_session_cookie"=>{"session_id"=>"9fa24de6932f6e2d0a05106785f66aa5"}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"crash"}, "action_controller.instance"=>#<DummyController:0x00007fd1dc2ffe30 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fd1dcc51f38 @env={...}, @filtered_parameters={"foo"=>"bar", "controller"=>"dummy", "action"=>"crash"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/crash?foo=bar", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fd1dc2fe120 @req=#<ActionDispatch::Request:0x00007fd1dcc51f38 ...>>>, @_response=#<ActionDispatch::Response:0x00007fd1dcc48118 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fd1dcc48078>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fd1dcc48a50 @response=#<ActionDispatch::Response:0x00007fd1dcc48118 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fd1dcc49e50 @monitor=#<ActionDispatch::Response:0x00007fd1dcc48118 ...>, @cond=#<Thread::ConditionVariable:0x00007fd1dcc49e78>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fd1dcc51f38 @env={...}, @filtered_parameters={"foo"=>"bar", "controller"=>"dummy", "action"=>"crash"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/crash?foo=bar", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fd1dc2fe120 @req=#<ActionDispatch::Request:0x00007fd1dcc51f38 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fd1dc2ffb38 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fd1dc2ff9a8 @paths=[#<ActionView::FixtureResolver:0x00007fd1ddcdd780 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fd1ddcdd2f8 keys=0 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="crash", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"foo=bar", "rack.request.query_hash"=>{"foo"=>"bar"}, "action_dispatch.request.query_parameters"=>{"foo"=>"bar"}, "action_dispatch.request.parameters"=>{"foo"=>"bar", "controller"=>"dummy", "action"=>"crash"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fd1dcb64b70 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-3280157527022842310>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fd1de02ee20 @max_size=10000>>]
[0m):
F, [2019-03-01T20:05:14.220891 #26763] FATAL -- :   
F, [2019-03-01T20:05:14.220921 #26763] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:05:14.223448 #26763]  INFO -- : Started GET "/resque" for 127.0.0.1 at 2019-03-01 20:05:14 +0200
I, [2019-03-01T20:05:14.224280 #26763]  INFO -- : Processing by DummyController#resque as HTML
I, [2019-03-01T20:05:14.227948 #26763]  INFO -- :   Rendering dummy/resque.html.erb within layouts/application
I, [2019-03-01T20:05:14.228663 #26763]  INFO -- :   Rendered dummy/resque.html.erb within layouts/application (0.6ms)
I, [2019-03-01T20:05:14.229028 #26763]  INFO -- : Completed 200 OK in 5ms (Views: 3.3ms | ActiveRecord: 0.0ms)
I, [2019-03-01T20:05:14.230591 #26763]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:05:14 +0200
I, [2019-03-01T20:05:14.231260 #26763]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:05:14.231707 #26763] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:05:14.233273 #26763] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:05:14.234641 #26763] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:05:14.236154 #26763]  INFO -- : Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:05:14.237709 #26763] FATAL -- :   
F, [2019-03-01T20:05:14.237758 #26763] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:05:14.237795 #26763] FATAL -- :   
F, [2019-03-01T20:05:14.237820 #26763] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:05:14.240786 #26763]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:05:14 +0200
I, [2019-03-01T20:05:14.242023 #26763]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:05:14.242562 #26763] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:05:14.244602 #26763] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:05:14.246177 #26763] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:05:14.254248 #26763]  INFO -- : Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.3ms)
F, [2019-03-01T20:05:14.271100 #26763] FATAL -- :   
F, [2019-03-01T20:05:14.275624 #26763] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:05:14.275667 #26763] FATAL -- :   
F, [2019-03-01T20:05:14.275695 #26763] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:05:16.283324 #26763]  INFO -- : Started HEAD "/crash" for 127.0.0.1 at 2019-03-01 20:05:16 +0200
I, [2019-03-01T20:05:16.288401 #26763]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:05:16.288942 #26763] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:05:16.290495 #26763] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:05:16.291664 #26763] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:05:16.293049 #26763]  INFO -- : Completed 0  in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:05:16.294472 #26763] FATAL -- :   
F, [2019-03-01T20:05:16.294528 #26763] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:05:16.294548 #26763] FATAL -- :   
F, [2019-03-01T20:05:16.294568 #26763] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:05:16.296158 #26763]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:05:16 +0200
I, [2019-03-01T20:05:16.296855 #26763]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:05:16.297172 #26763] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:05:16.298383 #26763] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:05:16.299566 #26763] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:05:16.300670 #26763]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:05:16.302192 #26763] FATAL -- :   
F, [2019-03-01T20:05:16.302238 #26763] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:05:16.302263 #26763] FATAL -- :   
F, [2019-03-01T20:05:16.302284 #26763] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:05:16.303528 #26763]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:05:16 +0200
I, [2019-03-01T20:05:16.304335 #26763]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:05:16.304700 #26763] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:05:16.306271 #26763] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:05:16.307543 #26763] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:05:16.312830 #26763]  INFO -- : Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:05:16.318495 #26763] FATAL -- :   
F, [2019-03-01T20:05:16.327254 #26763] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:05:16.327325 #26763] FATAL -- :   
F, [2019-03-01T20:05:16.327359 #26763] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:05:18.331391 #26763]  INFO -- : Started GET "/active_record_after_rollback" for 127.0.0.1 at 2019-03-01 20:05:18 +0200
I, [2019-03-01T20:05:18.332556 #26763]  INFO -- : Processing by DummyController#active_record_after_rollback as HTML
D, [2019-03-01T20:05:18.332918 #26763] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:05:18.334680 #26763] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "Bango"]]
D, [2019-03-01T20:05:18.336071 #26763] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
I, [2019-03-01T20:05:18.337424 #26763]  INFO -- : Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:05:18.353087 #26763] FATAL -- :   
F, [2019-03-01T20:05:18.353185 #26763] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (an instance of AirbrakeTestError)
       got: (#<Airbrake::Notice:0x00007fd1df88dbd8 @config=#<Airbrake::Config:0x00007fd1dcafe0c8 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fd1dbd869e0 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of AirbrakeTestError"]
[0m[32m+[#<Airbrake::Notice:0x00007fd1df88dbd8 @config=#<Airbrake::Config:0x00007fd1dcafe0c8 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fd1dcafe050 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fd1dcafe000 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fd1dcafdfb0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fd1dcafdf38>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"after_rollback", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>52, :function=>"raise_error_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_rollback_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>357, :function=>"rolledback!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>112, :function=>"rollback_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>231, :function=>"block in rollback_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>228, :function=>"rollback_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>242, :function=>"rescue in block in within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>259, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>127, :function=>"active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>117, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}, {:type=>"ActiveRecord::Rollback", :message=>"ActiveRecord::Rollback", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>129, :function=>"block in active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"block in transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>239, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>127, :function=>"active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>117, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: after_rollback>, :rack_request=>#<ActionDispatch::Request:0x00007fd1dbd869b8 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fd1de025a50>, "rack.errors"=>#<StringIO:0x00007fd1de025ac8>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/active_record_after_rollback", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fd1dbb17240 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fd1dbb171f0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fd1dbb171a0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fd1dbb17150>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fd1dcc7cc10 @filters=[#<Proc:0x00007fd1dcc7caf8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fd1dcc7cad0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fd1dcc7caa8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fd1dcc7c350@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fd1dcc7c328@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fd1dcc77fa8 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fd1dcc7fb90 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fd1dcc77f80 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fd1dd908740 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fd1dbd4e3b0>, "ROUTES_70269656527320_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/active_record_after_rollback", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"957fddda-991c-4de5-8ab0-e7e8f4089cc2", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fd1de024740 @req=#<ActionDispatch::Request:0x00007fd1de024768 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7fd1ddefb7d8 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fd1ddefb788 @by=#<ActionDispatch::Session::CookieStore:0x00007fd1dbeb4e20 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fd1dbeb4e48 @app=#<Rack::Head:0x00007fd1dbeb4e70 @app=#<Rack::ConditionalGet:0x00007fd1dbeb4e98 @app=#<Rack::ETag:0x00007fd1dbeb4ec0 @app=#<Rack::TempfileReaper:0x00007fd1dbeb4ee8 @app=#<Warden::Manager:0x00007fd1dbeb4fb0 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fd1dbd4e3b0>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70269674183520 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"active_record_after_rollback"}, "action_controller.instance"=>#<DummyController:0x00007fd1ddef9c58 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fd1ddefb3a0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_rollback"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_rollback", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fd1ddef8330 @req=#<ActionDispatch::Request:0x00007fd1ddefb3a0 ...>>>, @_response=#<ActionDispatch::Response:0x00007fd1ddef9f28 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fd1ddef9eb0>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fd1ddef9e60 @response=#<ActionDispatch::Response:0x00007fd1ddef9f28 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fd1ddef9e38 @monitor=#<ActionDispatch::Response:0x00007fd1ddef9f28 ...>, @cond=#<Thread::ConditionVariable:0x00007fd1ddef9e10>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fd1ddefb3a0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_rollback"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_rollback", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fd1ddef8330 @req=#<ActionDispatch::Request:0x00007fd1ddefb3a0 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fd1ddef9aa0 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fd1ddef9960 @paths=[#<ActionView::FixtureResolver:0x00007fd1ddcdd780 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fd1ddcdd2f8 keys=1 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="active_record_after_rollback", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"active_record_after_rollback"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fd1dcb64b70 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-3280157527022842310>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fd1dbd869e0 @max_size=10000>>]
[0m):
F, [2019-03-01T20:05:18.353236 #26763] FATAL -- :   
F, [2019-03-01T20:05:18.353266 #26763] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:05:18.355046 #26763]  INFO -- : Started GET "/active_record_after_commit" for 127.0.0.1 at 2019-03-01 20:05:18 +0200
I, [2019-03-01T20:05:18.355861 #26763]  INFO -- : Processing by DummyController#active_record_after_commit as HTML
D, [2019-03-01T20:05:18.356349 #26763] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:05:18.357792 #26763] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "Bingo"]]
D, [2019-03-01T20:05:18.359134 #26763] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:05:18.360339 #26763]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:05:18.374478 #26763] FATAL -- :   
F, [2019-03-01T20:05:18.374573 #26763] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (an instance of AirbrakeTestError)
       got: (#<Airbrake::Notice:0x00007fd1dca9dc50 @config=#<Airbrake::Config:0x00007fd1dcafe0c8 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fd1dc9f4c68 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of AirbrakeTestError"]
[0m[32m+[#<Airbrake::Notice:0x00007fd1dca9dc50 @config=#<Airbrake::Config:0x00007fd1dcafe0c8 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fd1dcafe050 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fd1dcafe000 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fd1dcafdfb0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fd1dcafdf38>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"after_commit", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>48, :function=>"raise_error_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_commit_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>346, :function=>"committed!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>128, :function=>"commit_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>223, :function=>"block in commit_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>213, :function=>"commit_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>252, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>385, :function=>"with_transaction_returning_status"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>310, :function=>"block in save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>325, :function=>"rollback_active_record_state!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>309, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/suppressor.rb", :line=>44, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/persistence.rb", :line=>36, :function=>"create"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>123, :function=>"active_record_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>107, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: after_commit>, :rack_request=>#<ActionDispatch::Request:0x00007fd1dc9f4bf0 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fd1dbb8d5f8>, "rack.errors"=>#<StringIO:0x00007fd1dbb8d6c0>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/active_record_after_commit", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fd1dbb17240 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fd1dbb171f0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fd1dbb171a0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fd1dbb17150>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fd1dcc7cc10 @filters=[#<Proc:0x00007fd1dcc7caf8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fd1dcc7cad0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fd1dcc7caa8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fd1dcc7c350@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fd1dcc7c328@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fd1dcc77fa8 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fd1dcc7fb90 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fd1dcc77f80 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fd1dd908740 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fd1dbd4e3b0>, "ROUTES_70269656527320_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/active_record_after_commit", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"f97a1e19-1ba6-4cb4-a91f-8575d2cf2254", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fd1dbb86c80 @req=#<ActionDispatch::Request:0x00007fd1dbb86ca8 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7fd1dbb85308 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fd1dbb852b8 @by=#<ActionDispatch::Session::CookieStore:0x00007fd1dbeb4e20 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fd1dbeb4e48 @app=#<Rack::Head:0x00007fd1dbeb4e70 @app=#<Rack::ConditionalGet:0x00007fd1dbeb4e98 @app=#<Rack::ETag:0x00007fd1dbeb4ec0 @app=#<Rack::TempfileReaper:0x00007fd1dbeb4ee8 @app=#<Warden::Manager:0x00007fd1dbeb4fb0 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fd1dbd4e3b0>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70269655591160 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"active_record_after_commit"}, "action_controller.instance"=>#<DummyController:0x00007fd1dbb7ed28 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fd1dbb84ea8 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_commit"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_commit", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fd1dbb7c0a0 @req=#<ActionDispatch::Request:0x00007fd1dbb84ea8 ...>>>, @_response=#<ActionDispatch::Response:0x00007fd1dbb7f340 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fd1dbb7f2f0>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fd1dbb7f200 @response=#<ActionDispatch::Response:0x00007fd1dbb7f340 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fd1dbb7f1d8 @monitor=#<ActionDispatch::Response:0x00007fd1dbb7f340 ...>, @cond=#<Thread::ConditionVariable:0x00007fd1dbb7f138>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fd1dbb84ea8 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_commit"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_commit", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fd1dbb7c0a0 @req=#<ActionDispatch::Request:0x00007fd1dbb84ea8 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fd1dbb7e8c8 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fd1dbb7e620 @paths=[#<ActionView::FixtureResolver:0x00007fd1ddcdd780 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fd1ddcdd2f8 keys=1 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="active_record_after_commit", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"active_record_after_commit"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fd1dcb64b70 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-3280157527022842310>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fd1dc9f4c68 @max_size=10000>>]
[0m):
F, [2019-03-01T20:05:18.374632 #26763] FATAL -- :   
F, [2019-03-01T20:05:18.374657 #26763] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:05:18.375925 #26763]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:05:18 +0200
I, [2019-03-01T20:05:18.376647 #26763]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:05:18.377188 #26763] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:05:18.378627 #26763] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:05:18.379762 #26763] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:05:18.390495 #26763]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:05:18.396079 #26763] FATAL -- :   
F, [2019-03-01T20:05:18.396123 #26763] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:05:18.396148 #26763] FATAL -- :   
F, [2019-03-01T20:05:18.396171 #26763] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:05:20.402276 #26763]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:05:20 +0200
I, [2019-03-01T20:05:20.403210 #26763]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:05:20.403741 #26763] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:05:20.405404 #26763] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:05:20.406767 #26763] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:05:20.418732 #26763]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:05:20.424738 #26763] FATAL -- :   
F, [2019-03-01T20:05:20.429323 #26763] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:05:20.429364 #26763] FATAL -- :   
F, [2019-03-01T20:05:20.429391 #26763] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:05:22.433805 #26763]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:05:22 +0200
I, [2019-03-01T20:05:22.434813 #26763]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:05:22.435327 #26763] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:05:22.437251 #26763] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:05:22.438727 #26763] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:05:22.450055 #26763]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:05:22.456051 #26763] FATAL -- :   
F, [2019-03-01T20:05:22.461166 #26763] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:05:22.461221 #26763] FATAL -- :   
F, [2019-03-01T20:05:22.461248 #26763] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:05:24.467260 #26763]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:05:24 +0200
I, [2019-03-01T20:05:24.468033 #26763]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:05:24.468460 #26763] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:05:24.469994 #26763] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:05:24.471244 #26763] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:05:24.477594 #26763]  INFO -- : Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:05:24.487881 #26763] FATAL -- :   
F, [2019-03-01T20:05:24.492376 #26763] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:05:24.492418 #26763] FATAL -- :   
F, [2019-03-01T20:05:24.492445 #26763] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:05:26.499044 #26763]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:05:26 +0200
I, [2019-03-01T20:05:26.499845 #26763]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:05:26.500323 #26763] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:05:26.501934 #26763] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:05:26.503674 #26763] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:05:26.516567 #26763]  INFO -- : Completed 500 Internal Server Error in 17ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:05:26.522732 #26763] FATAL -- :   
F, [2019-03-01T20:05:26.527462 #26763] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:05:26.527519 #26763] FATAL -- :   
F, [2019-03-01T20:05:26.527549 #26763] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:05:28.533739 #26763]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:05:28 +0200
I, [2019-03-01T20:05:28.534582 #26763]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:05:28.535033 #26763] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:05:28.536692 #26763] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:05:28.537904 #26763] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:05:28.547879 #26763]  INFO -- : Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:05:28.553737 #26763] FATAL -- :   
F, [2019-03-01T20:05:28.558764 #26763] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:05:28.558820 #26763] FATAL -- :   
F, [2019-03-01T20:05:28.558863 #26763] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:05:30.566263 #26763]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:05:30 +0200
I, [2019-03-01T20:05:30.569040 #26763]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:05:30.569546 #26763] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:05:30.571149 #26763] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:05:30.573076 #26763] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:05:30.574855 #26763]  INFO -- : Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:05:30.577932 #26763] FATAL -- :   
F, [2019-03-01T20:05:30.578045 #26763] FATAL -- : RSpec::Expectations::ExpectationNotMetError (
expected: "AirbrakeTestError"
     got: "RSpec::Mocks::MockExpectationError"

(compared using ==)
):
F, [2019-03-01T20:05:30.578086 #26763] FATAL -- :   
F, [2019-03-01T20:05:30.578111 #26763] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:05:30.579737 #26763]  INFO -- : Started GET "/" for 127.0.0.1 at 2019-03-01 20:05:30 +0200
I, [2019-03-01T20:05:30.580616 #26763]  INFO -- : Processing by DummyController#index as HTML
I, [2019-03-01T20:05:30.581734 #26763]  INFO -- :   Rendering dummy/index.html.erb within layouts/application
I, [2019-03-01T20:05:30.582016 #26763]  INFO -- :   Rendered dummy/index.html.erb within layouts/application (0.2ms)
I, [2019-03-01T20:05:30.582509 #26763]  INFO -- : Completed 200 OK in 2ms (Views: 1.2ms | ActiveRecord: 0.0ms)
I, [2019-03-01T20:05:30.584728 #26763]  INFO -- : Started GET "/delayed_job" for 127.0.0.1 at 2019-03-01 20:05:30 +0200
I, [2019-03-01T20:05:30.585521 #26763]  INFO -- : Processing by DummyController#delayed_job as HTML
I, [2019-03-01T20:05:30.602202 #26763]  INFO -- : Completed 500 Internal Server Error in 17ms (ActiveRecord: 0.4ms)
F, [2019-03-01T20:05:30.612477 #26763] FATAL -- :   
F, [2019-03-01T20:05:30.612540 #26763] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n"))
       got: (#<Airbrake::Notice:0x00007fd1dc3a4fe8 @config=#<Airbrake::Config:0x00007fd1dcafe0c8 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fd1dbeaf740 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,3 +1,2 @@
[0m[31m-["anything",
[0m[31m- "hash_including(\"handler\"=>\"--- !ruby/struct:BangoJob\\nbingo: bingo\\nbongo: bongo\\n\")"]
[0m[32m+[#<Airbrake::Notice:0x00007fd1dc3a4fe8 @config=#<Airbrake::Config:0x00007fd1dcafe0c8 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fd1dcafe050 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fd1dcafe000 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fd1dcafdfb0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fd1dcafdf38>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>86, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>142, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>194, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007fd1dbeaf718 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fd1dc4c3410>, "rack.errors"=>#<StringIO:0x00007fd1dc4c3488>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fd1dbb17240 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fd1dbb171f0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fd1dbb171a0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fd1dbb17150>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fd1dcc7cc10 @filters=[#<Proc:0x00007fd1dcc7caf8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fd1dcc7cad0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fd1dcc7caa8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fd1dcc7c350@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fd1dcc7c328@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fd1dcc77fa8 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fd1dcc7fb90 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fd1dcc77f80 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fd1dd908740 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fd1dbd4e3b0>, "ROUTES_70269656527320_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"7616eb57-04b6-4dd6-a0b7-8b5d4bab70ff", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fd1dc4c2330 @req=#<ActionDispatch::Request:0x00007fd1dc4c2358 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7fd1dc4c12c8 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fd1dc4c1278 @by=#<ActionDispatch::Session::CookieStore:0x00007fd1dbeb4e20 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fd1dbeb4e48 @app=#<Rack::Head:0x00007fd1dbeb4e70 @app=#<Rack::ConditionalGet:0x00007fd1dbeb4e98 @app=#<Rack::ETag:0x00007fd1dbeb4ec0 @app=#<Rack::TempfileReaper:0x00007fd1dbeb4ee8 @app=#<Warden::Manager:0x00007fd1dbeb4fb0 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fd1dbd4e3b0>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70269660432600 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fd1dc4bbdf0 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fd1dc4c0eb8 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/delayed_job", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fd1dc4bb0d0 @req=#<ActionDispatch::Request:0x00007fd1dc4c0eb8 ...>>>, @_response=#<ActionDispatch::Response:0x00007fd1dc4c0058 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fd1dc4c0008>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fd1dc4bbf80 @response=#<ActionDispatch::Response:0x00007fd1dc4c0058 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fd1dc4bbf58 @monitor=#<ActionDispatch::Response:0x00007fd1dc4c0058 ...>, @cond=#<Thread::ConditionVariable:0x00007fd1dc4bbf30>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fd1dc4c0eb8 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/delayed_job", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fd1dc4bb0d0 @req=#<ActionDispatch::Request:0x00007fd1dc4c0eb8 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fd1dc4bbc88 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fd1dc4bbb70 @paths=[#<ActionView::FixtureResolver:0x00007fd1ddcdd780 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fd1ddcdd2f8 keys=2 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fd1dcb64b70 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-3280157527022842310>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fd1dbeaf740 @max_size=10000>>]
[0m):
F, [2019-03-01T20:05:30.612604 #26763] FATAL -- :   
F, [2019-03-01T20:05:30.612631 #26763] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:05:30.614715 #26763]  INFO -- : Started GET "/active_job" for 127.0.0.1 at 2019-03-01 20:05:30 +0200
I, [2019-03-01T20:05:30.615486 #26763]  INFO -- : Processing by DummyController#active_job as HTML
I, [2019-03-01T20:05:30.617454 #26763]  INFO -- :   Rendering dummy/active_job.html.erb within layouts/application
I, [2019-03-01T20:05:30.617874 #26763]  INFO -- :   Rendered dummy/active_job.html.erb within layouts/application (0.3ms)
I, [2019-03-01T20:05:30.618938 #26763]  INFO -- : Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.0ms)
I, [2019-03-01T20:05:32.628187 #26763]  INFO -- : Started GET "/active_job" for 127.0.0.1 at 2019-03-01 20:05:32 +0200
I, [2019-03-01T20:05:32.629129 #26763]  INFO -- : Processing by DummyController#active_job as HTML
I, [2019-03-01T20:05:32.630507 #26763]  INFO -- :   Rendering dummy/active_job.html.erb within layouts/application
I, [2019-03-01T20:05:32.631516 #26763]  INFO -- :   Rendered dummy/active_job.html.erb within layouts/application (0.2ms)
I, [2019-03-01T20:05:32.631901 #26763]  INFO -- : Completed 200 OK in 3ms (Views: 1.9ms | ActiveRecord: 0.0ms)
D, [2019-03-01T20:08:08.661679 #26796] DEBUG -- :   [1m[35m (0.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T20:08:08.662249 #26796] DEBUG -- :   [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T20:08:08.664954 #26796] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T20:08:08.665523 #26796] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T20:08:08.666080 #26796] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T20:08:08.667706 #26796] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T20:08:08.677408 #26796] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T20:08:08.684955 #26796] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:08:08.686049 #26796] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 18:08:08.685415"], ["updated_at", "2019-03-01 18:08:08.685415"]]
D, [2019-03-01T20:08:08.686276 #26796] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:08:08.720010 #26796]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:08:08 +0200
I, [2019-03-01T20:08:08.727025 #26796]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:08:08.727095 #26796]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:08:08.735494 #26796] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:08:08.737036 #26796] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:08:08.738324 #26796] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:08:15.242158 #26796]  INFO -- : Completed 500 Internal Server Error in 6515ms (ActiveRecord: 0.8ms)
F, [2019-03-01T20:09:28.402962 #26796] FATAL -- :   
F, [2019-03-01T20:09:28.403061 #26796] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:09:28.403095 #26796] FATAL -- :   
F, [2019-03-01T20:09:28.403130 #26796] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
D, [2019-03-01T20:09:32.238073 #26820] DEBUG -- :   [1m[35m (0.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T20:09:32.238532 #26820] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T20:09:32.240993 #26820] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T20:09:32.241546 #26820] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T20:09:32.242061 #26820] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T20:09:32.243358 #26820] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T20:09:32.253241 #26820] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T20:09:32.256414 #26820] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:09:32.257346 #26820] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 18:09:32.256736"], ["updated_at", "2019-03-01 18:09:32.256736"]]
D, [2019-03-01T20:09:32.257572 #26820] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:09:32.296012 #26820]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:09:32 +0200
I, [2019-03-01T20:09:32.302783 #26820]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:09:32.302841 #26820]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:09:32.309971 #26820] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:09:32.311400 #26820] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:09:32.312733 #26820] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:09:32.314158 #26820]  INFO -- : Completed 500 Internal Server Error in 11ms (ActiveRecord: 0.6ms)
F, [2019-03-01T20:09:36.540375 #26820] FATAL -- :   
F, [2019-03-01T20:09:36.540482 #26820] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:09:36.540518 #26820] FATAL -- :   
F, [2019-03-01T20:09:36.540564 #26820] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
D, [2019-03-01T20:09:59.200456 #26836] DEBUG -- :   [1m[35m (0.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T20:09:59.200860 #26836] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T20:09:59.203401 #26836] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T20:09:59.203926 #26836] DEBUG -- :   [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T20:09:59.204415 #26836] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T20:09:59.205679 #26836] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T20:09:59.216816 #26836] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T20:09:59.223433 #26836] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:09:59.224336 #26836] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 18:09:59.223771"], ["updated_at", "2019-03-01 18:09:59.223771"]]
D, [2019-03-01T20:09:59.224519 #26836] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:09:59.258401 #26836]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:09:59 +0200
I, [2019-03-01T20:09:59.265325 #26836]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:09:59.265403 #26836]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:09:59.272935 #26836] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:09:59.274566 #26836] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:09:59.275849 #26836] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:09:59.277484 #26836]  INFO -- : Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.7ms)
F, [2019-03-01T20:09:59.279133 #26836] FATAL -- :   
F, [2019-03-01T20:09:59.279191 #26836] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:09:59.279228 #26836] FATAL -- :   
F, [2019-03-01T20:09:59.279262 #26836] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
D, [2019-03-01T20:12:41.296332 #26877] DEBUG -- :   [1m[35m (1.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T20:12:41.296889 #26877] DEBUG -- :   [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T20:12:41.299778 #26877] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T20:12:41.300366 #26877] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T20:12:41.300861 #26877] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T20:12:41.302131 #26877] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T20:12:41.311856 #26877] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T20:12:41.318379 #26877] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:12:41.319208 #26877] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 18:12:41.318667"], ["updated_at", "2019-03-01 18:12:41.318667"]]
D, [2019-03-01T20:12:41.319375 #26877] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:12:41.352944 #26877]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:12:41 +0200
I, [2019-03-01T20:12:41.359682 #26877]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:12:41.359750 #26877]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:12:41.367034 #26877] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:12:41.368596 #26877] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:12:41.369932 #26877] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:12:41.371352 #26877]  INFO -- : Completed 500 Internal Server Error in 11ms (ActiveRecord: 0.6ms)
F, [2019-03-01T20:12:41.372843 #26877] FATAL -- :   
F, [2019-03-01T20:12:41.372894 #26877] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:12:41.372922 #26877] FATAL -- :   
F, [2019-03-01T20:12:41.372948 #26877] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
D, [2019-03-01T20:12:55.757238 #26889] DEBUG -- :   [1m[35m (0.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T20:12:55.757643 #26889] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T20:12:55.760128 #26889] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T20:12:55.760600 #26889] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T20:12:55.761058 #26889] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T20:12:55.762328 #26889] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T20:12:55.772869 #26889] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T20:12:55.776417 #26889] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:12:55.777340 #26889] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 18:12:55.776767"], ["updated_at", "2019-03-01 18:12:55.776767"]]
D, [2019-03-01T20:12:55.777566 #26889] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:12:55.815631 #26889]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:12:55 +0200
I, [2019-03-01T20:12:55.822515 #26889]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:12:55.822579 #26889]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:12:55.830751 #26889] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:12:55.832559 #26889] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:12:55.833898 #26889] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:12:55.835242 #26889]  INFO -- : Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.7ms)
F, [2019-03-01T20:12:55.836682 #26889] FATAL -- :   
F, [2019-03-01T20:12:55.836725 #26889] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:12:55.836753 #26889] FATAL -- :   
F, [2019-03-01T20:12:55.836781 #26889] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
D, [2019-03-01T20:13:04.460907 #26902] DEBUG -- :   [1m[35m (0.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T20:13:04.461341 #26902] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T20:13:04.463997 #26902] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T20:13:04.464530 #26902] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T20:13:04.465020 #26902] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T20:13:04.466494 #26902] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T20:13:04.476935 #26902] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T20:13:04.483717 #26902] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:13:04.484631 #26902] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 18:13:04.484067"], ["updated_at", "2019-03-01 18:13:04.484067"]]
D, [2019-03-01T20:13:04.484821 #26902] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:13:04.520069 #26902]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:13:04 +0200
I, [2019-03-01T20:13:04.527377 #26902]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:13:04.527435 #26902]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:13:04.534655 #26902] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:13:04.536234 #26902] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:13:04.537501 #26902] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:13:04.539568 #26902]  INFO -- : Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.6ms)
F, [2019-03-01T20:13:04.565825 #26902] FATAL -- :   
F, [2019-03-01T20:13:04.565950 #26902] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (a notice with [] and "dummy")
       got: (#<Airbrake::Notice:0x00007fd8e746b8c0 @config=#<Airbrake::Config:0x00007fd8e71ef448 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fd8e7433240 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["a notice with [] and \"dummy\""]
[0m[32m+[#<Airbrake::Notice:0x00007fd8e746b8c0 @config=#<Airbrake::Config:0x00007fd8e71ef448 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fd8e71ef3a8 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fd8e71ef330 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fd8e71ef2e0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fd8e71ef268>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3">, @payload={:errors=>[{:type=>"NoMethodError", :message=>"undefined method `[]' for #<AirbrakeTestError: after_commit>", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/support/matchers/a_notice_with.rb", :line=>3, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-expectations-3.8.2/lib/rspec/matchers/dsl.rb", :line=>133, :function=>"block (2 levels) in match"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support.rb", :line=>113, :function=>"with_failure_notifier"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-expectations-3.8.2/lib/rspec/matchers/dsl.rb", :line=>131, :function=>"block in match"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-expectations-3.8.2/lib/rspec/matchers/composable.rb", :line=>46, :function=>"==="}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>18, :function=>"values_match?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>31, :function=>"block in arrays_match?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>30, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>30, :function=>"all?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>30, :function=>"arrays_match?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>12, :function=>"values_match?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/argument_list_matcher.rb", :line=>58, :function=>"args_match?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/message_expectation.rb", :line=>414, :function=>"matches?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>245, :function=>"block in find_matching_expectation"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>259, :function=>"block in find_best_matching_expectation_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>258, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>258, :function=>"find_best_matching_expectation_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>244, :function=>"find_matching_expectation"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>172, :function=>"message_received"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>327, :function=>"message_received"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/method_double.rb", :line=>77, :function=>"proxy_method_invoked"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/method_double.rb", :line=>64, :function=>"block (2 levels) in define_proxy_method"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>27, :function=>"rescue in run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>24, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_commit_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>346, :function=>"committed!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>128, :function=>"commit_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>223, :function=>"block in commit_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>213, :function=>"commit_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>252, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>385, :function=>"with_transaction_returning_status"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>310, :function=>"block in save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>325, :function=>"rollback_active_record_state!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>309, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/suppressor.rb", :line=>44, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/persistence.rb", :line=>36, :function=>"create"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>110, :function=>"crash"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>42, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}, {:type=>"AirbrakeTestError", :message=>"after_commit", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>48, :function=>"raise_error_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_commit_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>346, :function=>"committed!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>128, :function=>"commit_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>223, :function=>"block in commit_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>213, :function=>"commit_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>252, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>385, :function=>"with_transaction_returning_status"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>310, :function=>"block in save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>325, :function=>"rollback_active_record_state!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>309, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/suppressor.rb", :line=>44, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/persistence.rb", :line=>36, :function=>"create"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>110, :function=>"crash"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>42, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<NoMethodError: undefined method `[]' for #<AirbrakeTestError: after_commit>>, :rack_request=>#<ActionDispatch::Request:0x00007fd8e74331f0 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fd8e75c3628>, "rack.errors"=>#<StringIO:0x00007fd8e75c36a0>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"foo=bar", "PATH_INFO"=>"/crash", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fd8e6b2b9b8 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fd8e6b2b918 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fd8e6b2b828 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fd8e6b2b788>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fd8e75abb68 @filters=[#<Proc:0x00007fd8e75aba50@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fd8e75aba28@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fd8e75aba00@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fd8e75ab258@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fd8e75ab230@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fd8e75aaf88 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fd8e75aafb0 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fd8e75aaf60 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fd8e71c7ad8 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fd8e73278d8>, "ROUTES_70284784254060_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/crash?foo=bar", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"bcb25b08-4e0d-4f70-a8ba-2fdf7ef2cc18", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fd8e7591560 @req=#<ActionDispatch::Request:0x00007fd8e7591588 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x00007fd8e7593e78 @by=#<ActionDispatch::Session::CookieStore:0x00007fd8e6e41bc0 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fd8e6e41be8 @app=#<Rack::Head:0x00007fd8e6e41c10 @app=#<Rack::ConditionalGet:0x00007fd8e6e41c38 @app=#<Rack::ETag:0x00007fd8e6e41c60 @app=#<Rack::TempfileReaper:0x00007fd8e6e41c88 @app=#<Warden::Manager:0x00007fd8e6e41d50 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fd8e73278d8>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @req=#<ActionDispatch::Request:0x00007fd8e7593ab8 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @delegate={"session_id"=>"f7e22cfdad496e8538696627662f7e95", "warden.user.default.key"=>#<OpenStruct id=1, email="qa@example.com", username="qa-dept">}, @loaded=true, @exists=nil>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fd8e758bf48 @by=#<ActionDispatch::Session::CookieStore:0x00007fd8e6e41bc0 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fd8e6e41be8 @app=#<Rack::Head:0x00007fd8e6e41c10 @app=#<Rack::ConditionalGet:0x00007fd8e6e41c38 @app=#<Rack::ETag:0x00007fd8e6e41c60 @app=#<Rack::TempfileReaper:0x00007fd8e6e41c88 @app=#<Warden::Manager:0x00007fd8e6e41d50 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fd8e73278d8>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>true, :id=>"f7e22cfdad496e8538696627662f7e95"}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70284785508160 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007fd8e758b5c0 @set_cookies={}, @delete_cookies={}, @request=#<ActionDispatch::Request:0x00007fd8e7593ab8 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @cookies={}, @committed=false, @encrypted=#<ActionDispatch::Cookies::EncryptedKeyRotatingCookieJar:0x00007fd8e758b4a8 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fd8e758b5c0 ...>, @encryptor=#<ActiveSupport::MessageEncryptor:0x00007fd8e758b278 @secret="\x1D\x0Ecc\x81\xCE\xD3\xBE\x16\b\xA4 \xBE\xB0\xAF\b\xCA\xAFtlV\xA7jQ\x06\xEFV\x88\xC3\xE6~\xA0", @sign_secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @cipher="aes-256-cbc", @aead_mode=false, @digest="SHA1", @verifier=#<ActiveSupport::MessageVerifier:0x00007fd8e758b020 @secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:cipher=>"aes-256-cbc", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @legacy_verifier=#<ActiveSupport::MessageVerifier:0x00007fd8e758ada0 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>>, @signed_or_encrypted=#<ActionDispatch::Cookies::EncryptedKeyRotatingCookieJar:0x00007fd8e758b4a8 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fd8e758b5c0 ...>, @encryptor=#<ActiveSupport::MessageEncryptor:0x00007fd8e758b278 @secret="\x1D\x0Ecc\x81\xCE\xD3\xBE\x16\b\xA4 \xBE\xB0\xAF\b\xCA\xAFtlV\xA7jQ\x06\xEFV\x88\xC3\xE6~\xA0", @sign_secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @cipher="aes-256-cbc", @aead_mode=false, @digest="SHA1", @verifier=#<ActiveSupport::MessageVerifier:0x00007fd8e758b020 @secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:cipher=>"aes-256-cbc", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @legacy_verifier=#<ActiveSupport::MessageVerifier:0x00007fd8e758ada0 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>>>, "action_dispatch.request.unsigned_session_cookie"=>{"session_id"=>"f7e22cfdad496e8538696627662f7e95"}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"crash"}, "action_controller.instance"=>#<DummyController:0x00007fd8e757bc10 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fd8e758a8f0 @env={...}, @filtered_parameters={"foo"=>"bar", "controller"=>"dummy", "action"=>"crash"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/crash?foo=bar", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fd8e7579de8 @req=#<ActionDispatch::Request:0x00007fd8e758a8f0 ...>>>, @_response=#<ActionDispatch::Response:0x00007fd8e7580210 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fd8e7580170>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fd8e7580080 @response=#<ActionDispatch::Response:0x00007fd8e7580210 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fd8e7581110 @monitor=#<ActionDispatch::Response:0x00007fd8e7580210 ...>, @cond=#<Thread::ConditionVariable:0x00007fd8e7581408>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fd8e758a8f0 @env={...}, @filtered_parameters={"foo"=>"bar", "controller"=>"dummy", "action"=>"crash"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/crash?foo=bar", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fd8e7579de8 @req=#<ActionDispatch::Request:0x00007fd8e758a8f0 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fd8e757b968 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fd8e757b760 @paths=[#<ActionView::FixtureResolver:0x00007fd8e69a8348 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fd8e69a82a8 keys=0 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="crash", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"foo=bar", "rack.request.query_hash"=>{"foo"=>"bar"}, "action_dispatch.request.query_parameters"=>{"foo"=>"bar"}, "action_dispatch.request.parameters"=>{"foo"=>"bar", "controller"=>"dummy", "action"=>"crash"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fd8e6c715e8 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=3332367789121705643>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fd8e7433240 @max_size=10000>>]
[0m):
F, [2019-03-01T20:13:04.566066 #26902] FATAL -- :   
F, [2019-03-01T20:13:04.566098 #26902] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
D, [2019-03-01T20:14:33.633742 #26928] DEBUG -- :   [1m[35m (0.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T20:14:33.634228 #26928] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T20:14:33.636759 #26928] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T20:14:33.637253 #26928] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T20:14:33.637740 #26928] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T20:14:33.639111 #26928] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T20:14:33.648312 #26928] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T20:14:33.655937 #26928] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:14:33.656941 #26928] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 18:14:33.656340"], ["updated_at", "2019-03-01 18:14:33.656340"]]
D, [2019-03-01T20:14:33.657125 #26928] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:14:33.690064 #26928]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:14:33 +0200
I, [2019-03-01T20:14:33.697064 #26928]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:14:33.697126 #26928]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:14:33.704508 #26928] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:14:33.706119 #26928] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:14:33.707328 #26928] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:14:33.709095 #26928]  INFO -- : Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.6ms)
F, [2019-03-01T20:14:45.015831 #26928] FATAL -- :   
F, [2019-03-01T20:14:45.015963 #26928] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (a notice with [] and "dummy")
       got: (#<Airbrake::Notice:0x00007fa58eaa2658 @config=#<Airbrake::Config:0x00007fa59038f580 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fa58f553520 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["a notice with [] and \"dummy\""]
[0m[32m+[#<Airbrake::Notice:0x00007fa58eaa2658 @config=#<Airbrake::Config:0x00007fa59038f580 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fa59038f508 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fa59038f4b8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fa59038f468 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fa59038f3f0>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3">, @payload={:errors=>[{:type=>"NoMethodError", :message=>"undefined method `[]' for #<AirbrakeTestError: after_commit>", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/support/matchers/a_notice_with.rb", :line=>3, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-expectations-3.8.2/lib/rspec/matchers/dsl.rb", :line=>133, :function=>"block (2 levels) in match"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support.rb", :line=>113, :function=>"with_failure_notifier"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-expectations-3.8.2/lib/rspec/matchers/dsl.rb", :line=>131, :function=>"block in match"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-expectations-3.8.2/lib/rspec/matchers/composable.rb", :line=>46, :function=>"==="}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>18, :function=>"values_match?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>31, :function=>"block in arrays_match?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>30, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>30, :function=>"all?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>30, :function=>"arrays_match?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>12, :function=>"values_match?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/argument_list_matcher.rb", :line=>58, :function=>"args_match?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/message_expectation.rb", :line=>414, :function=>"matches?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>245, :function=>"block in find_matching_expectation"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>259, :function=>"block in find_best_matching_expectation_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>258, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>258, :function=>"find_best_matching_expectation_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>244, :function=>"find_matching_expectation"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>172, :function=>"message_received"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>327, :function=>"message_received"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/method_double.rb", :line=>77, :function=>"proxy_method_invoked"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/method_double.rb", :line=>64, :function=>"block (2 levels) in define_proxy_method"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>27, :function=>"rescue in run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>24, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_commit_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>346, :function=>"committed!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>128, :function=>"commit_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>223, :function=>"block in commit_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>213, :function=>"commit_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>252, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>385, :function=>"with_transaction_returning_status"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>310, :function=>"block in save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>325, :function=>"rollback_active_record_state!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>309, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/suppressor.rb", :line=>44, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/persistence.rb", :line=>36, :function=>"create"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>110, :function=>"crash"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>42, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}, {:type=>"AirbrakeTestError", :message=>"after_commit", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>48, :function=>"raise_error_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_commit_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>346, :function=>"committed!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>128, :function=>"commit_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>223, :function=>"block in commit_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>213, :function=>"commit_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>252, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>385, :function=>"with_transaction_returning_status"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>310, :function=>"block in save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>325, :function=>"rollback_active_record_state!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>309, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/suppressor.rb", :line=>44, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/persistence.rb", :line=>36, :function=>"create"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>110, :function=>"crash"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>42, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<NoMethodError: undefined method `[]' for #<AirbrakeTestError: after_commit>>, :rack_request=>#<ActionDispatch::Request:0x00007fa58f5534f8 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fa58ebea128>, "rack.errors"=>#<StringIO:0x00007fa58ebea1a0>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"foo=bar", "PATH_INFO"=>"/crash", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fa58e5fc130 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fa58e5fc0e0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fa58e5fc090 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fa58e5fc018>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fa5949ef070 @filters=[#<Proc:0x00007fa5949eef30@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fa5949eef08@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fa5949eeeb8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fa5949ee710@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fa5949ee6e8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fa5949ee4b8 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fa5949ee4e0 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fa5949ee490 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fa5903675f8 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fa58e05d300>, "ROUTES_70174514538880_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/crash?foo=bar", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"68a4ec25-13bc-40eb-8bb0-1870e06166f0", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fa58ebd3018 @req=#<ActionDispatch::Request:0x00007fa58ebd3040 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x00007fa58ebd1330 @by=#<ActionDispatch::Session::CookieStore:0x00007fa58ebfb310 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fa58ebfb338 @app=#<Rack::Head:0x00007fa58ebfb360 @app=#<Rack::ConditionalGet:0x00007fa58ebfb388 @app=#<Rack::ETag:0x00007fa58ebfb3b0 @app=#<Rack::TempfileReaper:0x00007fa58ebfb3d8 @app=#<Warden::Manager:0x00007fa58ebfb4a0 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fa58e05d300>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @req=#<ActionDispatch::Request:0x00007fa58ebd1380 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @delegate={"session_id"=>"26a05b7224d86406c10f4cf70ff52931", "warden.user.default.key"=>#<OpenStruct id=1, email="qa@example.com", username="qa-dept">}, @loaded=true, @exists=nil>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fa58ebd12e0 @by=#<ActionDispatch::Session::CookieStore:0x00007fa58ebfb310 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fa58ebfb338 @app=#<Rack::Head:0x00007fa58ebfb360 @app=#<Rack::ConditionalGet:0x00007fa58ebfb388 @app=#<Rack::ETag:0x00007fa58ebfb3b0 @app=#<Rack::TempfileReaper:0x00007fa58ebfb3d8 @app=#<Warden::Manager:0x00007fa58ebfb4a0 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fa58e05d300>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>true, :id=>"26a05b7224d86406c10f4cf70ff52931"}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70174520543480 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007fa58ebd09a8 @set_cookies={}, @delete_cookies={}, @request=#<ActionDispatch::Request:0x00007fa58ebd1380 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @cookies={}, @committed=false, @encrypted=#<ActionDispatch::Cookies::EncryptedKeyRotatingCookieJar:0x00007fa58ebd0890 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fa58ebd09a8 ...>, @encryptor=#<ActiveSupport::MessageEncryptor:0x00007fa58ebd0660 @secret="\x1D\x0Ecc\x81\xCE\xD3\xBE\x16\b\xA4 \xBE\xB0\xAF\b\xCA\xAFtlV\xA7jQ\x06\xEFV\x88\xC3\xE6~\xA0", @sign_secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @cipher="aes-256-cbc", @aead_mode=false, @digest="SHA1", @verifier=#<ActiveSupport::MessageVerifier:0x00007fa58ebd0408 @secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:cipher=>"aes-256-cbc", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @legacy_verifier=#<ActiveSupport::MessageVerifier:0x00007fa58ebd0188 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>>, @signed_or_encrypted=#<ActionDispatch::Cookies::EncryptedKeyRotatingCookieJar:0x00007fa58ebd0890 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fa58ebd09a8 ...>, @encryptor=#<ActiveSupport::MessageEncryptor:0x00007fa58ebd0660 @secret="\x1D\x0Ecc\x81\xCE\xD3\xBE\x16\b\xA4 \xBE\xB0\xAF\b\xCA\xAFtlV\xA7jQ\x06\xEFV\x88\xC3\xE6~\xA0", @sign_secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @cipher="aes-256-cbc", @aead_mode=false, @digest="SHA1", @verifier=#<ActiveSupport::MessageVerifier:0x00007fa58ebd0408 @secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:cipher=>"aes-256-cbc", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @legacy_verifier=#<ActiveSupport::MessageVerifier:0x00007fa58ebd0188 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>>>, "action_dispatch.request.unsigned_session_cookie"=>{"session_id"=>"26a05b7224d86406c10f4cf70ff52931"}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"crash"}, "action_controller.instance"=>#<DummyController:0x00007fa58ebc1548 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fa58ebcbe30 @env={...}, @filtered_parameters={"foo"=>"bar", "controller"=>"dummy", "action"=>"crash"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/crash?foo=bar", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fa58ebbb968 @req=#<ActionDispatch::Request:0x00007fa58ebcbe30 ...>>>, @_response=#<ActionDispatch::Response:0x00007fa58ebc1980 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fa58ebc18e0>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fa58ebc1818 @response=#<ActionDispatch::Response:0x00007fa58ebc1980 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fa58ebc1778 @monitor=#<ActionDispatch::Response:0x00007fa58ebc1980 ...>, @cond=#<Thread::ConditionVariable:0x00007fa58ebc1750>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fa58ebcbe30 @env={...}, @filtered_parameters={"foo"=>"bar", "controller"=>"dummy", "action"=>"crash"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/crash?foo=bar", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fa58ebbb968 @req=#<ActionDispatch::Request:0x00007fa58ebcbe30 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fa58ebc12a0 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fa58ebc1110 @paths=[#<ActionView::FixtureResolver:0x00007fa58e544620 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fa58e5445f8 keys=0 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="crash", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"foo=bar", "rack.request.query_hash"=>{"foo"=>"bar"}, "action_dispatch.request.query_parameters"=>{"foo"=>"bar"}, "action_dispatch.request.parameters"=>{"foo"=>"bar", "controller"=>"dummy", "action"=>"crash"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fa58e6ed940 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=4201721773212727098>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fa58f553520 @max_size=10000>>]
[0m):
F, [2019-03-01T20:14:45.016064 #26928] FATAL -- :   
F, [2019-03-01T20:14:45.016128 #26928] FATAL -- : lib/airbrake/rack/middleware.rb:85:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
D, [2019-03-01T20:15:12.674519 #26945] DEBUG -- :   [1m[35m (0.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T20:15:12.675052 #26945] DEBUG -- :   [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T20:15:12.677836 #26945] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T20:15:12.678415 #26945] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T20:15:12.678946 #26945] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T20:15:12.680216 #26945] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T20:15:12.689731 #26945] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T20:15:12.693305 #26945] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:15:12.694445 #26945] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 18:15:12.693814"], ["updated_at", "2019-03-01 18:15:12.693814"]]
D, [2019-03-01T20:15:12.694661 #26945] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:15:12.734089 #26945]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:15:12 +0200
I, [2019-03-01T20:15:12.741022 #26945]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:15:12.741083 #26945]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:15:12.748732 #26945] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:15:12.750341 #26945] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:15:12.751662 #26945] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:15:12.753041 #26945]  INFO -- : Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.7ms)
F, [2019-03-01T20:15:18.475428 #26945] FATAL -- :   
F, [2019-03-01T20:15:18.475538 #26945] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (a notice with [] and "dummy")
       got: (#<Airbrake::Notice:0x00007f8bc4386060 @config=#<Airbrake::Config:0x00007f8bc3bfb6d8 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007f8bc4371480 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["a notice with [] and \"dummy\""]
[0m[32m+[#<Airbrake::Notice:0x00007f8bc4386060 @config=#<Airbrake::Config:0x00007f8bc3bfb6d8 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007f8bc3bfb638 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007f8bc3bfb5e8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007f8bc3bfb598 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f8bc3bfb520>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3">, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"after_commit", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>48, :function=>"raise_error_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_commit_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>346, :function=>"committed!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>128, :function=>"commit_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>223, :function=>"block in commit_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>213, :function=>"commit_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>252, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>385, :function=>"with_transaction_returning_status"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>310, :function=>"block in save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>325, :function=>"rollback_active_record_state!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>309, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/suppressor.rb", :line=>44, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/persistence.rb", :line=>36, :function=>"create"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>110, :function=>"crash"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>43, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: after_commit>, :rack_request=>#<ActionDispatch::Request:0x00007f8bc4371458 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007f8bc3d1c940>, "rack.errors"=>#<StringIO:0x00007f8bc3d1c9b8>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"foo=bar", "PATH_INFO"=>"/crash", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007f8bc333f8a0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007f8bc333f850 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007f8bc333f7d8 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f8bc333f788>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007f8bc3ce5a30 @filters=[#<Proc:0x00007f8bc3ce5918@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007f8bc3ce58f0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007f8bc3ce58c8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007f8bc3ce5170@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007f8bc3ce5148@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007f8bc3ce4ec8 @key_generator=#<ActiveSupport::KeyGenerator:0x00007f8bc3ce4f18 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007f8bc3ce4ea0 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007f8bc6025950 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007f8bc6650578>, "ROUTES_70119152845500_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/crash?foo=bar", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"ba3bf86e-822e-47b1-9c13-e1ad705312e1", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007f8bc3cc4830 @req=#<ActionDispatch::Request:0x00007f8bc3cc48a8 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x00007f8bc3cb84b8 @by=#<ActionDispatch::Session::CookieStore:0x00007f8bc439f9e8 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007f8bc439fa10 @app=#<Rack::Head:0x00007f8bc439fa38 @app=#<Rack::ConditionalGet:0x00007f8bc439fa60 @app=#<Rack::ETag:0x00007f8bc439fa88 @app=#<Rack::TempfileReaper:0x00007f8bc439fab0 @app=#<Warden::Manager:0x00007f8bc439fb78 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007f8bc6650578>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @req=#<ActionDispatch::Request:0x00007f8bc3cb8508 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @delegate={"session_id"=>"6430375178e8b41d5bc651cf71348899", "warden.user.default.key"=>#<OpenStruct id=1, email="qa@example.com", username="qa-dept">}, @loaded=true, @exists=nil>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007f8bc3cb83c8 @by=#<ActionDispatch::Session::CookieStore:0x00007f8bc439f9e8 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007f8bc439fa10 @app=#<Rack::Head:0x00007f8bc439fa38 @app=#<Rack::ConditionalGet:0x00007f8bc439fa60 @app=#<Rack::ETag:0x00007f8bc439fa88 @app=#<Rack::TempfileReaper:0x00007f8bc439fab0 @app=#<Warden::Manager:0x00007f8bc439fb78 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007f8bc6650578>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>true, :id=>"6430375178e8b41d5bc651cf71348899"}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70119131038060 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007f8bc3cb3878 @set_cookies={}, @delete_cookies={}, @request=#<ActionDispatch::Request:0x00007f8bc3cb8508 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @cookies={}, @committed=false, @encrypted=#<ActionDispatch::Cookies::EncryptedKeyRotatingCookieJar:0x00007f8bc3cb3738 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007f8bc3cb3878 ...>, @encryptor=#<ActiveSupport::MessageEncryptor:0x00007f8bc3cb3508 @secret="\x1D\x0Ecc\x81\xCE\xD3\xBE\x16\b\xA4 \xBE\xB0\xAF\b\xCA\xAFtlV\xA7jQ\x06\xEFV\x88\xC3\xE6~\xA0", @sign_secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @cipher="aes-256-cbc", @aead_mode=false, @digest="SHA1", @verifier=#<ActiveSupport::MessageVerifier:0x00007f8bc3cb32b0 @secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:cipher=>"aes-256-cbc", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @legacy_verifier=#<ActiveSupport::MessageVerifier:0x00007f8bc3cb3030 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>>, @signed_or_encrypted=#<ActionDispatch::Cookies::EncryptedKeyRotatingCookieJar:0x00007f8bc3cb3738 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007f8bc3cb3878 ...>, @encryptor=#<ActiveSupport::MessageEncryptor:0x00007f8bc3cb3508 @secret="\x1D\x0Ecc\x81\xCE\xD3\xBE\x16\b\xA4 \xBE\xB0\xAF\b\xCA\xAFtlV\xA7jQ\x06\xEFV\x88\xC3\xE6~\xA0", @sign_secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @cipher="aes-256-cbc", @aead_mode=false, @digest="SHA1", @verifier=#<ActiveSupport::MessageVerifier:0x00007f8bc3cb32b0 @secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:cipher=>"aes-256-cbc", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @legacy_verifier=#<ActiveSupport::MessageVerifier:0x00007f8bc3cb3030 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>>>, "action_dispatch.request.unsigned_session_cookie"=>{"session_id"=>"6430375178e8b41d5bc651cf71348899"}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"crash"}, "action_controller.instance"=>#<DummyController:0x00007f8bc3ca9058 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007f8bc3cb2ba8 @env={...}, @filtered_parameters={"foo"=>"bar", "controller"=>"dummy", "action"=>"crash"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/crash?foo=bar", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007f8bc3ca1a10 @req=#<ActionDispatch::Request:0x00007f8bc3cb2ba8 ...>>>, @_response=#<ActionDispatch::Response:0x00007f8bc3ca8428 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f8bc3ca8338>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007f8bc3ca8270 @response=#<ActionDispatch::Response:0x00007f8bc3ca8428 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007f8bc3ca81d0 @monitor=#<ActionDispatch::Response:0x00007f8bc3ca8428 ...>, @cond=#<Thread::ConditionVariable:0x00007f8bc3ca81a8>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007f8bc3cb2ba8 @env={...}, @filtered_parameters={"foo"=>"bar", "controller"=>"dummy", "action"=>"crash"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/crash?foo=bar", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007f8bc3ca1a10 @req=#<ActionDispatch::Request:0x00007f8bc3cb2ba8 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007f8bc3ca3e00 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007f8bc3ca3bd0 @paths=[#<ActionView::FixtureResolver:0x00007f8bc6321780 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7f8bc63215f0 keys=0 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="crash", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"foo=bar", "rack.request.query_hash"=>{"foo"=>"bar"}, "action_dispatch.request.query_parameters"=>{"foo"=>"bar"}, "action_dispatch.request.parameters"=>{"foo"=>"bar", "controller"=>"dummy", "action"=>"crash"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007f8bc3486f60 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=488602649896551604>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007f8bc4371480 @max_size=10000>>]
[0m):
F, [2019-03-01T20:15:18.475600 #26945] FATAL -- :   
F, [2019-03-01T20:15:18.475628 #26945] FATAL -- : lib/airbrake/rack/middleware.rb:85:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
D, [2019-03-01T20:15:30.213506 #26958] DEBUG -- :   [1m[35m (1.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T20:15:30.214019 #26958] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T20:15:30.216875 #26958] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T20:15:30.217584 #26958] DEBUG -- :   [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T20:15:30.218107 #26958] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T20:15:30.219395 #26958] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T20:15:30.229204 #26958] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T20:15:30.232421 #26958] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:15:30.233230 #26958] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 18:15:30.232737"], ["updated_at", "2019-03-01 18:15:30.232737"]]
D, [2019-03-01T20:15:30.233421 #26958] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:15:30.272790 #26958]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:15:30 +0200
I, [2019-03-01T20:15:30.279683 #26958]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:15:30.279754 #26958]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:15:30.287357 #26958] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:15:30.288912 #26958] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:15:30.290222 #26958] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:15:30.291621 #26958]  INFO -- : Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.6ms)
F, [2019-03-01T20:16:15.455060 #26958] FATAL -- :   
F, [2019-03-01T20:16:15.455167 #26958] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (a notice with [] and "dummy")
       got: (#<Airbrake::Notice:0x00007f9447d4d130 @config=#<Airbrake::Config:0x00007f9446c74138 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007f9447d35b20 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["a notice with [] and \"dummy\""]
[0m[32m+[#<Airbrake::Notice:0x00007f9447d4d130 @config=#<Airbrake::Config:0x00007f9446c74138 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007f9446c740c0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007f9446c74070 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007f9446c74020 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f94469ffd58>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3">, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"after_commit", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>48, :function=>"raise_error_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_commit_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>346, :function=>"committed!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>128, :function=>"commit_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>223, :function=>"block in commit_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>213, :function=>"commit_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>252, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>385, :function=>"with_transaction_returning_status"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>310, :function=>"block in save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>325, :function=>"rollback_active_record_state!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>309, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/suppressor.rb", :line=>44, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/persistence.rb", :line=>36, :function=>"create"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>110, :function=>"crash"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>43, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: after_commit>, :rack_request=>#<ActionDispatch::Request:0x00007f9447d35af8 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007f944673e8f8>, "rack.errors"=>#<StringIO:0x00007f944673e970>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"foo=bar", "PATH_INFO"=>"/crash", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007f9445b210c0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007f9445b21070 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007f9445b21020 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f9445b20f80>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007f944672c9a0 @filters=[#<Proc:0x00007f944672c888@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007f944672c860@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007f944672c838@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007f944672c040@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007f944672c018@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007f944672e0c0 @key_generator=#<ActiveSupport::KeyGenerator:0x00007f944672e020 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007f944672e458 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007f9446c07d58 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007f9446d14340>, "ROUTES_70137410003360_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/crash?foo=bar", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"7c46d8b6-17d8-4c06-b462-fd2e08af7c7a", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007f9446716628 @req=#<ActionDispatch::Request:0x00007f9446716650 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x00007f9446714dc8 @by=#<ActionDispatch::Session::CookieStore:0x00007f9447de2050 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007f9447de2078 @app=#<Rack::Head:0x00007f9447de20a0 @app=#<Rack::ConditionalGet:0x00007f9447de20c8 @app=#<Rack::ETag:0x00007f9447de20f0 @app=#<Rack::TempfileReaper:0x00007f9447de2118 @app=#<Warden::Manager:0x00007f9447de21e0 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007f9446d14340>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @req=#<ActionDispatch::Request:0x00007f9446714e18 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @delegate={"session_id"=>"ccf28d7a7fc7552b17f06babd563bab1", "warden.user.default.key"=>#<OpenStruct id=1, email="qa@example.com", username="qa-dept">}, @loaded=true, @exists=nil>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007f9446714d78 @by=#<ActionDispatch::Session::CookieStore:0x00007f9447de2050 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007f9447de2078 @app=#<Rack::Head:0x00007f9447de20a0 @app=#<Rack::ConditionalGet:0x00007f9447de20c8 @app=#<Rack::ETag:0x00007f9447de20f0 @app=#<Rack::TempfileReaper:0x00007f9447de2118 @app=#<Warden::Manager:0x00007f9447de21e0 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007f9446d14340>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>true, :id=>"ccf28d7a7fc7552b17f06babd563bab1"}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70137406858820 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007f9446714440 @set_cookies={}, @delete_cookies={}, @request=#<ActionDispatch::Request:0x00007f9446714e18 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @cookies={}, @committed=false, @encrypted=#<ActionDispatch::Cookies::EncryptedKeyRotatingCookieJar:0x00007f9446714328 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007f9446714440 ...>, @encryptor=#<ActiveSupport::MessageEncryptor:0x00007f94467140a8 @secret="\x1D\x0Ecc\x81\xCE\xD3\xBE\x16\b\xA4 \xBE\xB0\xAF\b\xCA\xAFtlV\xA7jQ\x06\xEFV\x88\xC3\xE6~\xA0", @sign_secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @cipher="aes-256-cbc", @aead_mode=false, @digest="SHA1", @verifier=#<ActiveSupport::MessageVerifier:0x00007f9446716e98 @secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:cipher=>"aes-256-cbc", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @legacy_verifier=#<ActiveSupport::MessageVerifier:0x00007f9445dbbe48 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>>, @signed_or_encrypted=#<ActionDispatch::Cookies::EncryptedKeyRotatingCookieJar:0x00007f9446714328 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007f9446714440 ...>, @encryptor=#<ActiveSupport::MessageEncryptor:0x00007f94467140a8 @secret="\x1D\x0Ecc\x81\xCE\xD3\xBE\x16\b\xA4 \xBE\xB0\xAF\b\xCA\xAFtlV\xA7jQ\x06\xEFV\x88\xC3\xE6~\xA0", @sign_secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @cipher="aes-256-cbc", @aead_mode=false, @digest="SHA1", @verifier=#<ActiveSupport::MessageVerifier:0x00007f9446716e98 @secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:cipher=>"aes-256-cbc", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @legacy_verifier=#<ActiveSupport::MessageVerifier:0x00007f9445dbbe48 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>>>, "action_dispatch.request.unsigned_session_cookie"=>{"session_id"=>"ccf28d7a7fc7552b17f06babd563bab1"}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"crash"}, "action_controller.instance"=>#<DummyController:0x00007f9445db15b0 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007f9445dbb970 @env={...}, @filtered_parameters={"foo"=>"bar", "controller"=>"dummy", "action"=>"crash"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/crash?foo=bar", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007f9445dab980 @req=#<ActionDispatch::Request:0x00007f9445dbb970 ...>>>, @_response=#<ActionDispatch::Response:0x00007f9445db19e8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f9445db1948>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007f9445db1880 @response=#<ActionDispatch::Response:0x00007f9445db19e8 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007f9445db17e0 @monitor=#<ActionDispatch::Response:0x00007f9445db19e8 ...>, @cond=#<Thread::ConditionVariable:0x00007f9445db17b8>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007f9445dbb970 @env={...}, @filtered_parameters={"foo"=>"bar", "controller"=>"dummy", "action"=>"crash"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/crash?foo=bar", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007f9445dab980 @req=#<ActionDispatch::Request:0x00007f9445dbb970 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007f9445db1308 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007f9445db1150 @paths=[#<ActionView::FixtureResolver:0x00007f9446bbe4a0 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7f9446bbe428 keys=0 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="crash", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"foo=bar", "rack.request.query_hash"=>{"foo"=>"bar"}, "action_dispatch.request.query_parameters"=>{"foo"=>"bar"}, "action_dispatch.request.parameters"=>{"foo"=>"bar", "controller"=>"dummy", "action"=>"crash"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007f9446c9f6a8 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=1642910686867831653>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007f9447d35b20 @max_size=10000>>]
[0m):
F, [2019-03-01T20:16:15.455252 #26958] FATAL -- :   
F, [2019-03-01T20:16:15.455277 #26958] FATAL -- : lib/airbrake/rack/middleware.rb:85:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
D, [2019-03-01T20:16:33.693486 #26977] DEBUG -- :   [1m[35m (0.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T20:16:33.693947 #26977] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T20:16:33.696667 #26977] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T20:16:33.697278 #26977] DEBUG -- :   [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T20:16:33.697862 #26977] DEBUG -- :   [1m[35m (0.2ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T20:16:33.699232 #26977] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T20:16:33.709675 #26977] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T20:16:33.717544 #26977] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:16:33.718575 #26977] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 18:16:33.717958"], ["updated_at", "2019-03-01 18:16:33.717958"]]
D, [2019-03-01T20:16:33.718789 #26977] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:16:33.754002 #26977]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:16:33 +0200
I, [2019-03-01T20:16:33.755808 #26977]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:16:33.763563 #26977] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:16:33.765461 #26977] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:16:33.766854 #26977] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:16:33.768208 #26977]  INFO -- : Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.7ms)
F, [2019-03-01T20:16:36.224355 #26977] FATAL -- :   
F, [2019-03-01T20:16:36.224466 #26977] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:16:36.224500 #26977] FATAL -- :   
F, [2019-03-01T20:16:36.224537 #26977] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:16:36.227725 #26977]  INFO -- : Started HEAD "/crash" for 127.0.0.1 at 2019-03-01 20:16:36 +0200
I, [2019-03-01T20:16:36.233114 #26977]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:16:36.233841 #26977] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:16:36.235521 #26977] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:16:36.236774 #26977] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:16:36.238065 #26977]  INFO -- : Completed 0  in 5ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:16:36.915780 #26977] FATAL -- :   
F, [2019-03-01T20:16:36.915869 #26977] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:16:36.915901 #26977] FATAL -- :   
F, [2019-03-01T20:16:36.915931 #26977] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:16:36.917764 #26977]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:16:36 +0200
I, [2019-03-01T20:16:36.918672 #26977]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:16:36.919141 #26977] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:16:36.920891 #26977] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:16:36.922343 #26977] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:16:36.923636 #26977]  INFO -- : Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:16:41.156925 #26977] FATAL -- :   
F, [2019-03-01T20:16:41.157023 #26977] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:16:41.157056 #26977] FATAL -- :   
F, [2019-03-01T20:16:41.157086 #26977] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:16:41.159439 #26977]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:16:41 +0200
I, [2019-03-01T20:16:41.160179 #26977]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:16:41.160673 #26977] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:16:41.162100 #26977] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:16:41.163261 #26977] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:16:41.174659 #26977]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
D, [2019-03-01T20:16:45.924554 #26990] DEBUG -- :   [1m[35m (1.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T20:16:45.925013 #26990] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T20:16:45.927968 #26990] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T20:16:45.928529 #26990] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T20:16:45.929031 #26990] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T20:16:45.930433 #26990] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T20:16:45.940503 #26990] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T20:16:45.943736 #26990] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:16:45.944565 #26990] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 18:16:45.944062"], ["updated_at", "2019-03-01 18:16:45.944062"]]
D, [2019-03-01T20:16:45.944791 #26990] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:16:45.984908 #26990]  INFO -- : Started GET "/active_record_after_commit" for 127.0.0.1 at 2019-03-01 20:16:45 +0200
I, [2019-03-01T20:16:45.987195 #26990]  INFO -- : Processing by DummyController#active_record_after_commit as HTML
D, [2019-03-01T20:16:45.996285 #26990] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:16:45.997778 #26990] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "Bingo"]]
D, [2019-03-01T20:16:45.998952 #26990] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:16:46.000405 #26990]  INFO -- : Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.8ms)
F, [2019-03-01T20:16:46.020475 #26990] FATAL -- :   
F, [2019-03-01T20:16:46.020557 #26990] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (an instance of AirbrakeTestError)
       got: (#<Airbrake::Notice:0x00007fe04824b938 @config=#<Airbrake::Config:0x00007fe043515da8 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fe048231ec0 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of AirbrakeTestError"]
[0m[32m+[#<Airbrake::Notice:0x00007fe04824b938 @config=#<Airbrake::Config:0x00007fe043515da8 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fe043515d30 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fe043515ce0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fe043515c90 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fe043515c18>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3">, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"after_commit", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>48, :function=>"raise_error_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_commit_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>346, :function=>"committed!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>128, :function=>"commit_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>223, :function=>"block in commit_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>213, :function=>"commit_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>252, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>385, :function=>"with_transaction_returning_status"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>310, :function=>"block in save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>325, :function=>"rollback_active_record_state!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>309, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/suppressor.rb", :line=>44, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/persistence.rb", :line=>36, :function=>"create"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>123, :function=>"active_record_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>107, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: after_commit>, :rack_request=>#<ActionDispatch::Request:0x00007fe048231e98 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fe041caea08>, "rack.errors"=>#<StringIO:0x00007fe041caea80>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/active_record_after_commit", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fe042b54648 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fe042b545f8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fe042b545a8 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fe042b54558>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fe048397058 @filters=[#<Proc:0x00007fe048396f40@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fe048396f18@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fe048396ef0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fe048396798@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fe048396770@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fe048396568 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fe048396590 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fe048396540 entries=0 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fe0419b7b60 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fe04364d4a0>, "ROUTES_70300590041680_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/active_record_after_commit", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"fe59fac9-7d69-45c5-ab18-fb655089bae1", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fe048377e10 @req=#<ActionDispatch::Request:0x00007fe048377e38 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7fe048376c18 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fe048376bc8 @by=#<ActionDispatch::Session::CookieStore:0x00007fe042b75870 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fe042b758e8 @app=#<Rack::Head:0x00007fe042b75938 @app=#<Rack::ConditionalGet:0x00007fe042b759b0 @app=#<Rack::ETag:0x00007fe042b759d8 @app=#<Rack::TempfileReaper:0x00007fe042b75a00 @app=#<Warden::Manager:0x00007fe042b75b40 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fe04364d4a0>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70300630496640 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"active_record_after_commit"}, "action_controller.instance"=>#<DummyController:0x00007fe048367920 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fe048376790 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_commit"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_commit", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fe0483655f8 @req=#<ActionDispatch::Request:0x00007fe048376790 ...>>>, @_response=#<ActionDispatch::Response:0x00007fe048367f88 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fe048367ee8>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fe048367dd0 @response=#<ActionDispatch::Response:0x00007fe048367f88 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fe048367ce0 @monitor=#<ActionDispatch::Response:0x00007fe048367f88 ...>, @cond=#<Thread::ConditionVariable:0x00007fe048367c68>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fe048376790 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_commit"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_commit", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fe0483655f8 @req=#<ActionDispatch::Request:0x00007fe048376790 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fe048367560 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fe048367308 @paths=[#<ActionView::FixtureResolver:0x00007fe042adcdf0 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fe042adcc60 keys=0 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="active_record_after_commit", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"active_record_after_commit"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fe042314d20 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=482249207343762202>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fe048231ec0 @max_size=10000>>]
[0m):
F, [2019-03-01T20:16:46.020621 #26990] FATAL -- :   
F, [2019-03-01T20:16:46.020651 #26990] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:16:46.022197 #26990]  INFO -- : Started GET "/active_record_after_rollback" for 127.0.0.1 at 2019-03-01 20:16:46 +0200
I, [2019-03-01T20:16:46.022991 #26990]  INFO -- : Processing by DummyController#active_record_after_rollback as HTML
D, [2019-03-01T20:16:46.023356 #26990] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:16:46.024740 #26990] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "Bango"]]
D, [2019-03-01T20:16:46.025987 #26990] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
I, [2019-03-01T20:16:46.027255 #26990]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:16:46.043621 #26990] FATAL -- :   
F, [2019-03-01T20:16:46.043733 #26990] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (an instance of AirbrakeTestError)
       got: (#<Airbrake::Notice:0x00007fe04805b5b0 @config=#<Airbrake::Config:0x00007fe043515da8 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fe04802bf68 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of AirbrakeTestError"]
[0m[32m+[#<Airbrake::Notice:0x00007fe04805b5b0 @config=#<Airbrake::Config:0x00007fe043515da8 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fe043515d30 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fe043515ce0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fe043515c90 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fe043515c18>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3">, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"after_rollback", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>52, :function=>"raise_error_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_rollback_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>357, :function=>"rolledback!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>112, :function=>"rollback_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>231, :function=>"block in rollback_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>228, :function=>"rollback_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>242, :function=>"rescue in block in within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>259, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>127, :function=>"active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>117, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}, {:type=>"ActiveRecord::Rollback", :message=>"ActiveRecord::Rollback", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>129, :function=>"block in active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"block in transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>239, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>127, :function=>"active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>117, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: after_rollback>, :rack_request=>#<ActionDispatch::Request:0x00007fe04802bf40 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fe0480c1450>, "rack.errors"=>#<StringIO:0x00007fe0480c14c8>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/active_record_after_rollback", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fe042b54648 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fe042b545f8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fe042b545a8 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fe042b54558>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fe048397058 @filters=[#<Proc:0x00007fe048396f40@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fe048396f18@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fe048396ef0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fe048396798@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fe048396770@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fe048396568 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fe048396590 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fe048396540 entries=0 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fe0419b7b60 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fe04364d4a0>, "ROUTES_70300590041680_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/active_record_after_rollback", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"d003203f-1226-43b5-9c88-6da9ca7c68c0", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fe0480c02f8 @req=#<ActionDispatch::Request:0x00007fe0480c0320 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7fe0480bac68 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fe0480bac18 @by=#<ActionDispatch::Session::CookieStore:0x00007fe042b75870 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fe042b758e8 @app=#<Rack::Head:0x00007fe042b75938 @app=#<Rack::ConditionalGet:0x00007fe042b759b0 @app=#<Rack::ETag:0x00007fe042b759d8 @app=#<Rack::TempfileReaper:0x00007fe042b75a00 @app=#<Warden::Manager:0x00007fe042b75b40 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fe04364d4a0>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70300629063080 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"active_record_after_rollback"}, "action_controller.instance"=>#<DummyController:0x00007fe0480b96b0 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fe0480ba830 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_rollback"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_rollback", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fe0480b85d0 @req=#<ActionDispatch::Request:0x00007fe0480ba830 ...>>>, @_response=#<ActionDispatch::Response:0x00007fe0480b99d0 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fe0480b9980>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fe0480b9930 @response=#<ActionDispatch::Response:0x00007fe0480b99d0 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fe0480b9908 @monitor=#<ActionDispatch::Response:0x00007fe0480b99d0 ...>, @cond=#<Thread::ConditionVariable:0x00007fe0480b98e0>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fe0480ba830 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_rollback"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_rollback", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fe0480b85d0 @req=#<ActionDispatch::Request:0x00007fe0480ba830 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fe0480b9430 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fe0480b9340 @paths=[#<ActionView::FixtureResolver:0x00007fe042adcdf0 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fe042adcc60 keys=0 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="active_record_after_rollback", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"active_record_after_rollback"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fe042314d20 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=482249207343762202>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fe04802bf68 @max_size=10000>>]
[0m):
F, [2019-03-01T20:16:46.043859 #26990] FATAL -- :   
F, [2019-03-01T20:16:46.043890 #26990] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:16:46.045455 #26990]  INFO -- : Started GET "/resque" for 127.0.0.1 at 2019-03-01 20:16:46 +0200
I, [2019-03-01T20:16:46.046287 #26990]  INFO -- : Processing by DummyController#resque as HTML
I, [2019-03-01T20:16:46.049663 #26990]  INFO -- :   Rendering dummy/resque.html.erb within layouts/application
I, [2019-03-01T20:16:46.050434 #26990]  INFO -- :   Rendered dummy/resque.html.erb within layouts/application (0.7ms)
I, [2019-03-01T20:16:46.050820 #26990]  INFO -- : Completed 200 OK in 4ms (Views: 3.2ms | ActiveRecord: 0.0ms)
I, [2019-03-01T20:16:46.052908 #26990]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:16:46 +0200
I, [2019-03-01T20:16:46.059166 #26990]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:16:46.059628 #26990] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:16:46.060940 #26990] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:16:46.062097 #26990] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:16:46.068067 #26990]  INFO -- : Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:16:46.079468 #26990] FATAL -- :   
F, [2019-03-01T20:16:46.083954 #26990] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:16:46.083993 #26990] FATAL -- :   
F, [2019-03-01T20:16:46.084019 #26990] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:16:48.090407 #26990]  INFO -- : Started GET "/" for 127.0.0.1 at 2019-03-01 20:16:48 +0200
I, [2019-03-01T20:16:48.091317 #26990]  INFO -- : Processing by DummyController#index as HTML
I, [2019-03-01T20:16:48.092160 #26990]  INFO -- :   Rendering dummy/index.html.erb within layouts/application
I, [2019-03-01T20:16:48.092466 #26990]  INFO -- :   Rendered dummy/index.html.erb within layouts/application (0.2ms)
I, [2019-03-01T20:16:48.092823 #26990]  INFO -- : Completed 200 OK in 1ms (Views: 1.1ms | ActiveRecord: 0.0ms)
I, [2019-03-01T20:16:48.094360 #26990]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:16:48 +0200
I, [2019-03-01T20:16:48.095119 #26990]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:16:48.095581 #26990] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:16:48.097145 #26990] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:16:48.098491 #26990] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:16:48.100293 #26990]  INFO -- : Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:16:48.105053 #26990] FATAL -- :   
F, [2019-03-01T20:16:48.105119 #26990] FATAL -- : RSpec::Expectations::ExpectationNotMetError (
expected: "AirbrakeTestError"
     got: "RSpec::Mocks::MockExpectationError"

(compared using ==)
):
F, [2019-03-01T20:16:48.105144 #26990] FATAL -- :   
F, [2019-03-01T20:16:48.105170 #26990] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:16:48.106742 #26990]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:16:48 +0200
I, [2019-03-01T20:16:48.107521 #26990]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:16:48.107961 #26990] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:16:48.109413 #26990] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:16:48.110673 #26990] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:16:48.111947 #26990]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:16:48.113278 #26990] FATAL -- :   
F, [2019-03-01T20:16:48.113317 #26990] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:16:48.113340 #26990] FATAL -- :   
F, [2019-03-01T20:16:48.113361 #26990] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:16:48.114788 #26990]  INFO -- : Started GET "/active_job" for 127.0.0.1 at 2019-03-01 20:16:48 +0200
I, [2019-03-01T20:16:48.115542 #26990]  INFO -- : Processing by DummyController#active_job as HTML
I, [2019-03-01T20:16:48.116773 #26990]  INFO -- :   Rendering dummy/active_job.html.erb within layouts/application
I, [2019-03-01T20:16:48.118684 #26990]  INFO -- :   Rendered dummy/active_job.html.erb within layouts/application (0.3ms)
I, [2019-03-01T20:16:48.119799 #26990]  INFO -- : Completed 200 OK in 4ms (Views: 3.3ms | ActiveRecord: 0.0ms)
I, [2019-03-01T20:16:50.126289 #26990]  INFO -- : Started GET "/active_job" for 127.0.0.1 at 2019-03-01 20:16:50 +0200
I, [2019-03-01T20:16:50.127587 #26990]  INFO -- : Processing by DummyController#active_job as HTML
I, [2019-03-01T20:16:50.128917 #26990]  INFO -- :   Rendering dummy/active_job.html.erb within layouts/application
I, [2019-03-01T20:16:50.129278 #26990]  INFO -- :   Rendered dummy/active_job.html.erb within layouts/application (0.3ms)
I, [2019-03-01T20:16:50.129662 #26990]  INFO -- : Completed 200 OK in 2ms (Views: 1.2ms | ActiveRecord: 0.0ms)
I, [2019-03-01T20:16:52.134565 #26990]  INFO -- : Started HEAD "/crash" for 127.0.0.1 at 2019-03-01 20:16:52 +0200
I, [2019-03-01T20:16:52.139913 #26990]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:16:52.140374 #26990] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:16:52.141880 #26990] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:16:52.143012 #26990] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:16:52.144140 #26990]  INFO -- : Completed 0  in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:16:52.145620 #26990] FATAL -- :   
F, [2019-03-01T20:16:52.145652 #26990] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:16:52.145674 #26990] FATAL -- :   
F, [2019-03-01T20:16:52.145695 #26990] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:16:52.146988 #26990]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:16:52 +0200
I, [2019-03-01T20:16:52.147636 #26990]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:16:52.147913 #26990] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:16:52.149147 #26990] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:16:52.150280 #26990] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:16:52.151494 #26990]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.1ms)
F, [2019-03-01T20:16:52.152792 #26990] FATAL -- :   
F, [2019-03-01T20:16:52.152833 #26990] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:16:52.152866 #26990] FATAL -- :   
F, [2019-03-01T20:16:52.152889 #26990] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:16:52.155397 #26990]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:16:52 +0200
I, [2019-03-01T20:16:52.156500 #26990]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:16:52.156915 #26990] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:16:52.158225 #26990] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:16:52.159511 #26990] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:16:52.169247 #26990]  INFO -- : Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:16:52.175389 #26990] FATAL -- :   
F, [2019-03-01T20:16:52.180433 #26990] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:16:52.180482 #26990] FATAL -- :   
F, [2019-03-01T20:16:52.180506 #26990] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:16:54.187239 #26990]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:16:54 +0200
I, [2019-03-01T20:16:54.188252 #26990]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:16:54.188698 #26990] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:16:54.190207 #26990] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:16:54.191568 #26990] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:16:54.197153 #26990]  INFO -- : Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:16:54.202918 #26990] FATAL -- :   
F, [2019-03-01T20:16:54.212674 #26990] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:16:54.212727 #26990] FATAL -- :   
F, [2019-03-01T20:16:54.212754 #26990] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:16:56.219481 #26990]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:16:56 +0200
I, [2019-03-01T20:16:56.220458 #26990]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:16:56.220972 #26990] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:16:56.222843 #26990] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:16:56.224583 #26990] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:16:56.239072 #26990]  INFO -- : Completed 500 Internal Server Error in 18ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:16:56.245070 #26990] FATAL -- :   
F, [2019-03-01T20:16:56.249939 #26990] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:16:56.249987 #26990] FATAL -- :   
F, [2019-03-01T20:16:56.250011 #26990] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:16:58.255870 #26990]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:16:58 +0200
I, [2019-03-01T20:16:58.256837 #26990]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:16:58.257348 #26990] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:16:58.259016 #26990] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:16:58.260493 #26990] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:16:58.270731 #26990]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:16:58.276681 #26990] FATAL -- :   
F, [2019-03-01T20:16:58.281315 #26990] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:16:58.281366 #26990] FATAL -- :   
F, [2019-03-01T20:16:58.281393 #26990] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:17:00.284773 #26990]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:17:00 +0200
I, [2019-03-01T20:17:00.285730 #26990]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:17:00.286223 #26990] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:17:00.288063 #26990] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:17:00.289585 #26990] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:17:00.300792 #26990]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:17:00.306373 #26990] FATAL -- :   
F, [2019-03-01T20:17:00.310660 #26990] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:17:00.310695 #26990] FATAL -- :   
F, [2019-03-01T20:17:00.310718 #26990] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:17:02.316148 #26990]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:17:02 +0200
I, [2019-03-01T20:17:02.317031 #26990]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:17:02.317467 #26990] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:17:02.319165 #26990] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:17:02.320577 #26990] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:17:02.333146 #26990]  INFO -- : Completed 500 Internal Server Error in 16ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:17:02.339276 #26990] FATAL -- :   
F, [2019-03-01T20:17:02.343500 #26990] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:17:02.343538 #26990] FATAL -- :   
F, [2019-03-01T20:17:02.343563 #26990] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:17:04.347685 #26990]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:17:04 +0200
I, [2019-03-01T20:17:04.348641 #26990]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:17:04.349108 #26990] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:17:04.350754 #26990] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:17:04.352102 #26990] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:17:04.363988 #26990]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:17:04.370324 #26990] FATAL -- :   
F, [2019-03-01T20:17:04.374463 #26990] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:17:04.374501 #26990] FATAL -- :   
F, [2019-03-01T20:17:04.374527 #26990] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:17:06.379000 #26990]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:17:06 +0200
I, [2019-03-01T20:17:06.380134 #26990]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:17:06.380188 #26990]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:17:06.380632 #26990] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:17:06.382273 #26990] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:17:06.383540 #26990] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:17:06.384869 #26990]  INFO -- : Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:17:06.395186 #26990] FATAL -- :   
F, [2019-03-01T20:17:06.395282 #26990] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (a notice with [] and "dummy")
       got: (#<Airbrake::Notice:0x00007fe0458d3e20 @config=#<Airbrake::Config:0x00007fe043515da8 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fe0458ba0b0 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["a notice with [] and \"dummy\""]
[0m[32m+[#<Airbrake::Notice:0x00007fe0458d3e20 @config=#<Airbrake::Config:0x00007fe043515da8 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fe043515d30 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fe043515ce0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fe043515c90 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fe043515c18>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"after_commit", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>48, :function=>"raise_error_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_commit_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>346, :function=>"committed!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>128, :function=>"commit_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>223, :function=>"block in commit_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>213, :function=>"commit_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>252, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>385, :function=>"with_transaction_returning_status"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>310, :function=>"block in save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>325, :function=>"rollback_active_record_state!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>309, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/suppressor.rb", :line=>44, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/persistence.rb", :line=>36, :function=>"create"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>110, :function=>"crash"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>43, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: after_commit>, :rack_request=>#<ActionDispatch::Request:0x00007fe0458ba088 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fe042484110>, "rack.errors"=>#<StringIO:0x00007fe042484188>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"foo=bar", "PATH_INFO"=>"/crash", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fe042b54648 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fe042b545f8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fe042b545a8 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fe042b54558>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fe048397058 @filters=[#<Proc:0x00007fe048396f40@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fe048396f18@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fe048396ef0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fe048396798@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fe048396770@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fe048396568 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fe048396590 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fe048396540 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fe0419b7b60 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fe04364d4a0>, "ROUTES_70300590041680_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/crash?foo=bar", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"b92ea09a-7df1-4abf-8a96-699561451a68", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fe04247ef30 @req=#<ActionDispatch::Request:0x00007fe04247ef58 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x00007fe04247dae0 @by=#<ActionDispatch::Session::CookieStore:0x00007fe042b75870 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fe042b758e8 @app=#<Rack::Head:0x00007fe042b75938 @app=#<Rack::ConditionalGet:0x00007fe042b759b0 @app=#<Rack::ETag:0x00007fe042b759d8 @app=#<Rack::TempfileReaper:0x00007fe042b75a00 @app=#<Warden::Manager:0x00007fe042b75b40 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fe04364d4a0>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @req=#<ActionDispatch::Request:0x00007fe04247db08 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @delegate={"session_id"=>"84b4aa9e6e2efaf9a1ac40ba35964164", "warden.user.default.key"=>#<OpenStruct id=1, email="qa@example.com", username="qa-dept">}, @loaded=true, @exists=nil>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fe04247da90 @by=#<ActionDispatch::Session::CookieStore:0x00007fe042b75870 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fe042b758e8 @app=#<Rack::Head:0x00007fe042b75938 @app=#<Rack::ConditionalGet:0x00007fe042b759b0 @app=#<Rack::ETag:0x00007fe042b759d8 @app=#<Rack::TempfileReaper:0x00007fe042b75a00 @app=#<Warden::Manager:0x00007fe042b75b40 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fe04364d4a0>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>true, :id=>"84b4aa9e6e2efaf9a1ac40ba35964164"}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70300580703460 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007fe04247d2c0 @set_cookies={}, @delete_cookies={}, @request=#<ActionDispatch::Request:0x00007fe04247db08 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @cookies={}, @committed=false, @encrypted=#<ActionDispatch::Cookies::EncryptedKeyRotatingCookieJar:0x00007fe04247d1f8 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fe04247d2c0 ...>, @encryptor=#<ActiveSupport::MessageEncryptor:0x00007fe04247d068 @secret="\x1D\x0Ecc\x81\xCE\xD3\xBE\x16\b\xA4 \xBE\xB0\xAF\b\xCA\xAFtlV\xA7jQ\x06\xEFV\x88\xC3\xE6~\xA0", @sign_secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @cipher="aes-256-cbc", @aead_mode=false, @digest="SHA1", @verifier=#<ActiveSupport::MessageVerifier:0x00007fe04247ce38 @secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:cipher=>"aes-256-cbc", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @legacy_verifier=#<ActiveSupport::MessageVerifier:0x00007fe04247cc58 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>>, @signed_or_encrypted=#<ActionDispatch::Cookies::EncryptedKeyRotatingCookieJar:0x00007fe04247d1f8 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fe04247d2c0 ...>, @encryptor=#<ActiveSupport::MessageEncryptor:0x00007fe04247d068 @secret="\x1D\x0Ecc\x81\xCE\xD3\xBE\x16\b\xA4 \xBE\xB0\xAF\b\xCA\xAFtlV\xA7jQ\x06\xEFV\x88\xC3\xE6~\xA0", @sign_secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @cipher="aes-256-cbc", @aead_mode=false, @digest="SHA1", @verifier=#<ActiveSupport::MessageVerifier:0x00007fe04247ce38 @secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:cipher=>"aes-256-cbc", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @legacy_verifier=#<ActiveSupport::MessageVerifier:0x00007fe04247cc58 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>>>, "action_dispatch.request.unsigned_session_cookie"=>{"session_id"=>"84b4aa9e6e2efaf9a1ac40ba35964164"}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"crash"}, "action_controller.instance"=>#<DummyController:0x00007fe042477a50 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fe04247c7a8 @env={...}, @filtered_parameters={"foo"=>"bar", "controller"=>"dummy", "action"=>"crash"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/crash?foo=bar", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fe0424766c8 @req=#<ActionDispatch::Request:0x00007fe04247c7a8 ...>>>, @_response=#<ActionDispatch::Response:0x00007fe042477c80 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fe042477c30>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fe042477be0 @response=#<ActionDispatch::Response:0x00007fe042477c80 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fe042477bb8 @monitor=#<ActionDispatch::Response:0x00007fe042477c80 ...>, @cond=#<Thread::ConditionVariable:0x00007fe042477b90>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fe04247c7a8 @env={...}, @filtered_parameters={"foo"=>"bar", "controller"=>"dummy", "action"=>"crash"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/crash?foo=bar", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fe0424766c8 @req=#<ActionDispatch::Request:0x00007fe04247c7a8 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fe0424777d0 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fe0424776e0 @paths=[#<ActionView::FixtureResolver:0x00007fe042adcdf0 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fe042adcc60 keys=4 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="crash", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"foo=bar", "rack.request.query_hash"=>{"foo"=>"bar"}, "action_dispatch.request.query_parameters"=>{"foo"=>"bar"}, "action_dispatch.request.parameters"=>{"foo"=>"bar", "controller"=>"dummy", "action"=>"crash"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fe042314d20 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=482249207343762202>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fe0458ba0b0 @max_size=10000>>]
[0m):
F, [2019-03-01T20:17:06.395375 #26990] FATAL -- :   
F, [2019-03-01T20:17:06.395401 #26990] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:17:06.397519 #26990]  INFO -- : Started GET "/delayed_job" for 127.0.0.1 at 2019-03-01 20:17:06 +0200
I, [2019-03-01T20:17:06.398450 #26990]  INFO -- : Processing by DummyController#delayed_job as HTML
I, [2019-03-01T20:17:06.412474 #26990]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.4ms)
F, [2019-03-01T20:17:06.422112 #26990] FATAL -- :   
F, [2019-03-01T20:17:06.422188 #26990] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n"))
       got: (#<Airbrake::Notice:0x00007fe041b6e648 @config=#<Airbrake::Config:0x00007fe043515da8 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fe041b54978 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,3 +1,2 @@
[0m[31m-["anything",
[0m[31m- "hash_including(\"handler\"=>\"--- !ruby/struct:BangoJob\\nbingo: bingo\\nbongo: bongo\\n\")"]
[0m[32m+[#<Airbrake::Notice:0x00007fe041b6e648 @config=#<Airbrake::Config:0x00007fe043515da8 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fe043515d30 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fe043515ce0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fe043515c90 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fe043515c18>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>86, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>142, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>194, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007fe041b54950 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fe04369d1a8>, "rack.errors"=>#<StringIO:0x00007fe04369d270>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fe042b54648 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fe042b545f8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fe042b545a8 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fe042b54558>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fe048397058 @filters=[#<Proc:0x00007fe048396f40@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fe048396f18@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fe048396ef0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fe048396798@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fe048396770@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fe048396568 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fe048396590 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fe048396540 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fe0419b7b60 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fe04364d4a0>, "ROUTES_70300590041680_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"7364a9d8-e5ea-47cf-8490-d9c9e65e222a", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fe043697730 @req=#<ActionDispatch::Request:0x00007fe043697758 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7fe04368e5b8 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fe04368e568 @by=#<ActionDispatch::Session::CookieStore:0x00007fe042b75870 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fe042b758e8 @app=#<Rack::Head:0x00007fe042b75938 @app=#<Rack::ConditionalGet:0x00007fe042b759b0 @app=#<Rack::ETag:0x00007fe042b759d8 @app=#<Rack::TempfileReaper:0x00007fe042b75a00 @app=#<Warden::Manager:0x00007fe042b75b40 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fe04364d4a0>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70300590174800 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fe04368c808 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fe04368dd20 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/delayed_job", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fe043687790 @req=#<ActionDispatch::Request:0x00007fe04368dd20 ...>>>, @_response=#<ActionDispatch::Response:0x00007fe04368ca60 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fe04368ca10>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fe04368c998 @response=#<ActionDispatch::Response:0x00007fe04368ca60 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fe04368c970 @monitor=#<ActionDispatch::Response:0x00007fe04368ca60 ...>, @cond=#<Thread::ConditionVariable:0x00007fe04368c948>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fe04368dd20 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/delayed_job", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fe043687790 @req=#<ActionDispatch::Request:0x00007fe04368dd20 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fe04368c678 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fe04368c588 @paths=[#<ActionView::FixtureResolver:0x00007fe042adcdf0 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fe042adcc60 keys=4 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fe042314d20 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=482249207343762202>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fe041b54978 @max_size=10000>>]
[0m):
F, [2019-03-01T20:17:06.422232 #26990] FATAL -- :   
F, [2019-03-01T20:17:06.422256 #26990] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
D, [2019-03-01T20:24:04.413316 #27064] DEBUG -- :   [1m[35m (0.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T20:24:04.413747 #27064] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T20:24:04.416307 #27064] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T20:24:04.416836 #27064] DEBUG -- :   [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T20:24:04.417313 #27064] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T20:24:04.418681 #27064] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T20:24:04.428740 #27064] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T20:24:04.435714 #27064] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:24:04.436721 #27064] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 18:24:04.436109"], ["updated_at", "2019-03-01 18:24:04.436109"]]
D, [2019-03-01T20:24:04.436928 #27064] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:24:04.471790 #27064]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:24:04 +0200
I, [2019-03-01T20:24:04.478816 #27064]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:24:04.478875 #27064]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:24:04.485701 #27064] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:24:04.487167 #27064] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:24:04.488544 #27064] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:24:04.490246 #27064]  INFO -- : Completed 500 Internal Server Error in 11ms (ActiveRecord: 0.5ms)
F, [2019-03-01T20:24:04.516014 #27064] FATAL -- :   
F, [2019-03-01T20:24:04.516149 #27064] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (a notice with [] and "dummy")
       got: (#<Airbrake::Notice:0x00007feda882b9f8 @config=#<Airbrake::Config:0x00007feda2d273e0 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007feda338b038 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["a notice with [] and \"dummy\""]
[0m[32m+[#<Airbrake::Notice:0x00007feda882b9f8 @config=#<Airbrake::Config:0x00007feda2d273e0 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007feda2d27368 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007feda2d27318 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007feda2d272c8 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007feda2d27250>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3">, @payload={:errors=>[{:type=>"NoMethodError", :message=>"undefined method `[]' for #<AirbrakeTestError: after_commit>", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/support/matchers/a_notice_with.rb", :line=>3, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-expectations-3.8.2/lib/rspec/matchers/dsl.rb", :line=>133, :function=>"block (2 levels) in match"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support.rb", :line=>113, :function=>"with_failure_notifier"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-expectations-3.8.2/lib/rspec/matchers/dsl.rb", :line=>131, :function=>"block in match"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-expectations-3.8.2/lib/rspec/matchers/composable.rb", :line=>46, :function=>"==="}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>18, :function=>"values_match?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>31, :function=>"block in arrays_match?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>30, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>30, :function=>"all?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>30, :function=>"arrays_match?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>12, :function=>"values_match?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/argument_list_matcher.rb", :line=>58, :function=>"args_match?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/message_expectation.rb", :line=>414, :function=>"matches?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>245, :function=>"block in find_matching_expectation"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>259, :function=>"block in find_best_matching_expectation_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>258, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>258, :function=>"find_best_matching_expectation_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>244, :function=>"find_matching_expectation"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>172, :function=>"message_received"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>327, :function=>"message_received"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/method_double.rb", :line=>77, :function=>"proxy_method_invoked"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/method_double.rb", :line=>64, :function=>"block (2 levels) in define_proxy_method"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>27, :function=>"rescue in run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>24, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_commit_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>346, :function=>"committed!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>128, :function=>"commit_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>223, :function=>"block in commit_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>213, :function=>"commit_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>252, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>385, :function=>"with_transaction_returning_status"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>310, :function=>"block in save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>325, :function=>"rollback_active_record_state!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>309, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/suppressor.rb", :line=>44, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/persistence.rb", :line=>36, :function=>"create"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>110, :function=>"crash"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>43, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}, {:type=>"AirbrakeTestError", :message=>"after_commit", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>48, :function=>"raise_error_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_commit_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>346, :function=>"committed!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>128, :function=>"commit_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>223, :function=>"block in commit_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>213, :function=>"commit_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>252, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>385, :function=>"with_transaction_returning_status"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>310, :function=>"block in save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>325, :function=>"rollback_active_record_state!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>309, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/suppressor.rb", :line=>44, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/persistence.rb", :line=>36, :function=>"create"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>110, :function=>"crash"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>43, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<NoMethodError: undefined method `[]' for #<AirbrakeTestError: after_commit>>, :rack_request=>#<ActionDispatch::Request:0x00007feda338b010 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007feda42c04e0>, "rack.errors"=>#<StringIO:0x00007feda42c0558>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"foo=bar", "PATH_INFO"=>"/crash", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007feda336a888 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007feda336a838 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007feda336a7e8 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007feda336a770>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007feda8969a90 @filters=[#<Proc:0x00007feda8969950@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007feda8969928@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007feda8969900@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007feda8969108@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007feda89690b8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007feda8968e88 @key_generator=#<ActiveSupport::KeyGenerator:0x00007feda8968eb0 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007feda8968e60 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007feda2cf46c0 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007feda2371918>, "ROUTES_70329302748300_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/crash?foo=bar", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"89bbaa0a-f869-4cb3-8176-a5adc5d05bd0", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007feda8945c80 @req=#<ActionDispatch::Request:0x00007feda8945ca8 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x00007feda8944510 @by=#<ActionDispatch::Session::CookieStore:0x00007feda437aa48 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007feda437aa70 @app=#<Rack::Head:0x00007feda437aa98 @app=#<Rack::ConditionalGet:0x00007feda437aac0 @app=#<Rack::ETag:0x00007feda437aae8 @app=#<Rack::TempfileReaper:0x00007feda437ab10 @app=#<Warden::Manager:0x00007feda437abd8 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007feda2371918>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @req=#<ActionDispatch::Request:0x00007feda8944560 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @delegate={"session_id"=>"b3102519aab73380c7634e820ff13a1c", "warden.user.default.key"=>#<OpenStruct id=1, email="qa@example.com", username="qa-dept">}, @loaded=true, @exists=nil>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007feda89444c0 @by=#<ActionDispatch::Session::CookieStore:0x00007feda437aa48 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007feda437aa70 @app=#<Rack::Head:0x00007feda437aa98 @app=#<Rack::ConditionalGet:0x00007feda437aac0 @app=#<Rack::ETag:0x00007feda437aae8 @app=#<Rack::TempfileReaper:0x00007feda437ab10 @app=#<Warden::Manager:0x00007feda437abd8 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007feda2371918>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>true, :id=>"b3102519aab73380c7634e820ff13a1c"}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70329356132840 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007feda893fd30 @set_cookies={}, @delete_cookies={}, @request=#<ActionDispatch::Request:0x00007feda8944560 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @cookies={}, @committed=false, @encrypted=#<ActionDispatch::Cookies::EncryptedKeyRotatingCookieJar:0x00007feda893fc18 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007feda893fd30 ...>, @encryptor=#<ActiveSupport::MessageEncryptor:0x00007feda893f998 @secret="\x1D\x0Ecc\x81\xCE\xD3\xBE\x16\b\xA4 \xBE\xB0\xAF\b\xCA\xAFtlV\xA7jQ\x06\xEFV\x88\xC3\xE6~\xA0", @sign_secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @cipher="aes-256-cbc", @aead_mode=false, @digest="SHA1", @verifier=#<ActiveSupport::MessageVerifier:0x00007feda893f718 @secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:cipher=>"aes-256-cbc", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @legacy_verifier=#<ActiveSupport::MessageVerifier:0x00007feda893f498 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>>, @signed_or_encrypted=#<ActionDispatch::Cookies::EncryptedKeyRotatingCookieJar:0x00007feda893fc18 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007feda893fd30 ...>, @encryptor=#<ActiveSupport::MessageEncryptor:0x00007feda893f998 @secret="\x1D\x0Ecc\x81\xCE\xD3\xBE\x16\b\xA4 \xBE\xB0\xAF\b\xCA\xAFtlV\xA7jQ\x06\xEFV\x88\xC3\xE6~\xA0", @sign_secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @cipher="aes-256-cbc", @aead_mode=false, @digest="SHA1", @verifier=#<ActiveSupport::MessageVerifier:0x00007feda893f718 @secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:cipher=>"aes-256-cbc", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @legacy_verifier=#<ActiveSupport::MessageVerifier:0x00007feda893f498 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>>>, "action_dispatch.request.unsigned_session_cookie"=>{"session_id"=>"b3102519aab73380c7634e820ff13a1c"}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"crash"}, "action_controller.instance"=>#<DummyController:0x00007feda8934d40 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007feda893f010 @env={...}, @filtered_parameters={"foo"=>"bar", "controller"=>"dummy", "action"=>"crash"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/crash?foo=bar", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007feda8927190 @req=#<ActionDispatch::Request:0x00007feda893f010 ...>>>, @_response=#<ActionDispatch::Response:0x00007feda8935178 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007feda89350d8>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007feda8935010 @response=#<ActionDispatch::Response:0x00007feda8935178 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007feda8934f70 @monitor=#<ActionDispatch::Response:0x00007feda8935178 ...>, @cond=#<Thread::ConditionVariable:0x00007feda8934f48>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007feda893f010 @env={...}, @filtered_parameters={"foo"=>"bar", "controller"=>"dummy", "action"=>"crash"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/crash?foo=bar", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007feda8927190 @req=#<ActionDispatch::Request:0x00007feda893f010 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007feda8934a98 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007feda89348e0 @paths=[#<ActionView::FixtureResolver:0x00007feda4269938 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7feda4269708 keys=0 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="crash", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"foo=bar", "rack.request.query_hash"=>{"foo"=>"bar"}, "action_dispatch.request.query_parameters"=>{"foo"=>"bar"}, "action_dispatch.request.parameters"=>{"foo"=>"bar", "controller"=>"dummy", "action"=>"crash"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007feda2df7018 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-3826131184499766800>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007feda338b038 @max_size=10000>>]
[0m):
F, [2019-03-01T20:24:04.516279 #27064] FATAL -- :   
F, [2019-03-01T20:24:04.516312 #27064] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
D, [2019-03-01T20:24:54.488747 #27080] DEBUG -- :   [1m[35m (0.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T20:24:54.489213 #27080] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T20:24:54.491803 #27080] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T20:24:54.492374 #27080] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T20:24:54.492909 #27080] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T20:24:54.494165 #27080] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T20:24:54.503609 #27080] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T20:24:54.507049 #27080] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:24:54.508001 #27080] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 18:24:54.507422"], ["updated_at", "2019-03-01 18:24:54.507422"]]
D, [2019-03-01T20:24:54.508197 #27080] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:24:54.546844 #27080]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:24:54 +0200
I, [2019-03-01T20:24:54.553944 #27080]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:24:54.554024 #27080]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:24:54.561606 #27080] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:24:54.563133 #27080] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:24:54.564517 #27080] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:24:54.574376 #27080]  INFO -- : Completed 500 Internal Server Error in 20ms (ActiveRecord: 0.5ms)
F, [2019-03-01T20:24:54.585119 #27080] FATAL -- :   
F, [2019-03-01T20:24:54.585195 #27080] FATAL -- : RSpec::Expectations::ExpectationNotMetError (
expected: 1
     got: #<Airbrake::Notice:0x00007fb703c35e80 @config=#<Airbrake::Config:0x00007fb7038605d0 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fb703bffa10 @max_size=10000>>

(compared using ==)
):
F, [2019-03-01T20:24:54.585224 #27080] FATAL -- :   
F, [2019-03-01T20:24:54.585251 #27080] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
D, [2019-03-01T20:25:05.751030 #27092] DEBUG -- :   [1m[35m (1.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T20:25:05.751602 #27092] DEBUG -- :   [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T20:25:05.754677 #27092] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T20:25:05.755374 #27092] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T20:25:05.755984 #27092] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T20:25:05.757476 #27092] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T20:25:05.767405 #27092] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T20:25:05.770702 #27092] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:25:05.771559 #27092] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 18:25:05.771018"], ["updated_at", "2019-03-01 18:25:05.771018"]]
D, [2019-03-01T20:25:05.771753 #27092] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:25:05.810001 #27092]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:25:05 +0200
I, [2019-03-01T20:25:05.817300 #27092]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:25:05.817392 #27092]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:25:05.824472 #27092] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:25:05.825931 #27092] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:25:05.827112 #27092] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:25:05.838710 #27092]  INFO -- : Completed 500 Internal Server Error in 21ms (ActiveRecord: 0.5ms)
F, [2019-03-01T20:25:05.848455 #27092] FATAL -- :   
F, [2019-03-01T20:25:05.848514 #27092] FATAL -- : RSpec::Expectations::ExpectationNotMetError (
expected: 1
     got: #<Airbrake::Notice:0x00007fd6fffe5d70 @config=#<Airbrake::Config:0x00007fd6fdb15cc0 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fd6fff8e660 @max_size=10000>>

(compared using ==)
):
F, [2019-03-01T20:25:05.848549 #27092] FATAL -- :   
F, [2019-03-01T20:25:05.848576 #27092] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
D, [2019-03-01T20:25:25.490577 #27105] DEBUG -- :   [1m[35m (1.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T20:25:25.491019 #27105] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T20:25:25.493730 #27105] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T20:25:25.494328 #27105] DEBUG -- :   [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T20:25:25.494862 #27105] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T20:25:25.496239 #27105] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T20:25:25.506682 #27105] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T20:25:25.513706 #27105] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:25:25.514768 #27105] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 18:25:25.514101"], ["updated_at", "2019-03-01 18:25:25.514101"]]
D, [2019-03-01T20:25:25.514996 #27105] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:25:25.550371 #27105]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:25:25 +0200
I, [2019-03-01T20:25:25.557346 #27105]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:25:25.557416 #27105]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:25:25.565042 #27105] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:25:25.566660 #27105] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:25:25.568103 #27105] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:25:25.578103 #27105]  INFO -- : Completed 500 Internal Server Error in 21ms (ActiveRecord: 0.6ms)
F, [2019-03-01T20:25:25.587938 #27105] FATAL -- :   
F, [2019-03-01T20:25:25.588002 #27105] FATAL -- : RSpec::Expectations::ExpectationNotMetError (
expected: 1
     got: #<Airbrake::Notice:0x00007ff936600f68 @config=#<Airbrake::Config:0x00007ff9351eb730 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007ff9365c99f0 @max_size=10000>>

(compared using ==)
):
F, [2019-03-01T20:25:25.588034 #27105] FATAL -- :   
F, [2019-03-01T20:25:25.588061 #27105] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
D, [2019-03-01T20:26:20.507175 #27122] DEBUG -- :   [1m[35m (1.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T20:26:20.507658 #27122] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T20:26:20.510358 #27122] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T20:26:20.510870 #27122] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T20:26:20.511341 #27122] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T20:26:20.512737 #27122] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T20:26:20.522362 #27122] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T20:26:20.529759 #27122] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:26:20.530752 #27122] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 18:26:20.530135"], ["updated_at", "2019-03-01 18:26:20.530135"]]
D, [2019-03-01T20:26:20.530924 #27122] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:26:20.565728 #27122]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:26:20 +0200
I, [2019-03-01T20:26:20.572451 #27122]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:26:20.572509 #27122]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:26:20.579950 #27122] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:26:20.581587 #27122] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:26:20.582861 #27122] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:26:20.584650 #27122]  INFO -- : Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.6ms)
F, [2019-03-01T20:26:20.610702 #27122] FATAL -- :   
F, [2019-03-01T20:26:20.610827 #27122] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (a notice with [] and "dummy")
       got: (#<Airbrake::Notice:0x00007fac6cc4d9f0 @config=#<Airbrake::Config:0x00007fac6b973848 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fac6cc15118 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["a notice with [] and \"dummy\""]
[0m[32m+[#<Airbrake::Notice:0x00007fac6cc4d9f0 @config=#<Airbrake::Config:0x00007fac6b973848 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fac6b9737d0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fac6b973780 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fac6b973730 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fac6b9736b8>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3">, @payload={:errors=>[{:type=>"NoMethodError", :message=>"undefined method `[]' for #<AirbrakeTestError: after_commit>", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/support/matchers/a_notice_with.rb", :line=>3, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-expectations-3.8.2/lib/rspec/matchers/dsl.rb", :line=>133, :function=>"block (2 levels) in match"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support.rb", :line=>113, :function=>"with_failure_notifier"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-expectations-3.8.2/lib/rspec/matchers/dsl.rb", :line=>131, :function=>"block in match"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-expectations-3.8.2/lib/rspec/matchers/composable.rb", :line=>46, :function=>"==="}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>18, :function=>"values_match?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>31, :function=>"block in arrays_match?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>30, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>30, :function=>"all?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>30, :function=>"arrays_match?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>12, :function=>"values_match?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/argument_list_matcher.rb", :line=>58, :function=>"args_match?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/message_expectation.rb", :line=>414, :function=>"matches?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>245, :function=>"block in find_matching_expectation"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>259, :function=>"block in find_best_matching_expectation_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>258, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>258, :function=>"find_best_matching_expectation_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>244, :function=>"find_matching_expectation"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>172, :function=>"message_received"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>327, :function=>"message_received"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/method_double.rb", :line=>77, :function=>"proxy_method_invoked"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/method_double.rb", :line=>64, :function=>"block (2 levels) in define_proxy_method"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>27, :function=>"rescue in run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>24, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_commit_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>346, :function=>"committed!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>128, :function=>"commit_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>223, :function=>"block in commit_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>213, :function=>"commit_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>252, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>385, :function=>"with_transaction_returning_status"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>310, :function=>"block in save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>325, :function=>"rollback_active_record_state!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>309, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/suppressor.rb", :line=>44, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/persistence.rb", :line=>36, :function=>"create"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>110, :function=>"crash"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>42, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}, {:type=>"AirbrakeTestError", :message=>"after_commit", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>48, :function=>"raise_error_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_commit_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>346, :function=>"committed!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>128, :function=>"commit_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>223, :function=>"block in commit_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>213, :function=>"commit_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>252, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>385, :function=>"with_transaction_returning_status"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>310, :function=>"block in save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>325, :function=>"rollback_active_record_state!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>309, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/suppressor.rb", :line=>44, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/persistence.rb", :line=>36, :function=>"create"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>110, :function=>"crash"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>42, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<NoMethodError: undefined method `[]' for #<AirbrakeTestError: after_commit>>, :rack_request=>#<ActionDispatch::Request:0x00007fac6cc150f0 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fac6b406e50>, "rack.errors"=>#<StringIO:0x00007fac6b406ec8>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"foo=bar", "PATH_INFO"=>"/crash", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fac6b18fca8 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fac6b18fc58 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fac6b18fb18 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fac6b18f7d0>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fac70a78568 @filters=[#<Proc:0x00007fac70a78310@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fac70a782e8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fac70a782c0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fac70a73bf8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fac70a73bd0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fac70a73950 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fac70a73978 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fac70a73928 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fac6aec0ea0 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fac70880940>, "ROUTES_70189299532960_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/crash?foo=bar", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"b1e84674-ba0b-49b1-8f1f-f69b6b96fd39", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fac6b3ec668 @req=#<ActionDispatch::Request:0x00007fac6b3ec690 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x00007fac6b3e6dd0 @by=#<ActionDispatch::Session::CookieStore:0x00007fac6b42ebf8 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fac6b42ec20 @app=#<Rack::Head:0x00007fac6b42ec48 @app=#<Rack::ConditionalGet:0x00007fac6b42ec70 @app=#<Rack::ETag:0x00007fac6b42ec98 @app=#<Rack::TempfileReaper:0x00007fac6b42ecc0 @app=#<Warden::Manager:0x00007fac6b42ed88 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fac70880940>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @req=#<ActionDispatch::Request:0x00007fac6b3e6e20 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @delegate={"session_id"=>"c120f537b9ee775a7d51fe429b7c4a7a", "warden.user.default.key"=>#<OpenStruct id=1, email="qa@example.com", username="qa-dept">}, @loaded=true, @exists=nil>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fac6b3e6d80 @by=#<ActionDispatch::Session::CookieStore:0x00007fac6b42ebf8 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fac6b42ec20 @app=#<Rack::Head:0x00007fac6b42ec48 @app=#<Rack::ConditionalGet:0x00007fac6b42ec70 @app=#<Rack::ETag:0x00007fac6b42ec98 @app=#<Rack::TempfileReaper:0x00007fac6b42ecc0 @app=#<Warden::Manager:0x00007fac6b42ed88 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fac70880940>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>true, :id=>"c120f537b9ee775a7d51fe429b7c4a7a"}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70189255177820 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007fac6b3e6498 @set_cookies={}, @delete_cookies={}, @request=#<ActionDispatch::Request:0x00007fac6b3e6e20 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @cookies={}, @committed=false, @encrypted=#<ActionDispatch::Cookies::EncryptedKeyRotatingCookieJar:0x00007fac6b3e6380 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fac6b3e6498 ...>, @encryptor=#<ActiveSupport::MessageEncryptor:0x00007fac6b3e6128 @secret="\x1D\x0Ecc\x81\xCE\xD3\xBE\x16\b\xA4 \xBE\xB0\xAF\b\xCA\xAFtlV\xA7jQ\x06\xEFV\x88\xC3\xE6~\xA0", @sign_secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @cipher="aes-256-cbc", @aead_mode=false, @digest="SHA1", @verifier=#<ActiveSupport::MessageVerifier:0x00007fac6b3e5ed0 @secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:cipher=>"aes-256-cbc", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @legacy_verifier=#<ActiveSupport::MessageVerifier:0x00007fac6b3e5c28 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>>, @signed_or_encrypted=#<ActionDispatch::Cookies::EncryptedKeyRotatingCookieJar:0x00007fac6b3e6380 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fac6b3e6498 ...>, @encryptor=#<ActiveSupport::MessageEncryptor:0x00007fac6b3e6128 @secret="\x1D\x0Ecc\x81\xCE\xD3\xBE\x16\b\xA4 \xBE\xB0\xAF\b\xCA\xAFtlV\xA7jQ\x06\xEFV\x88\xC3\xE6~\xA0", @sign_secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @cipher="aes-256-cbc", @aead_mode=false, @digest="SHA1", @verifier=#<ActiveSupport::MessageVerifier:0x00007fac6b3e5ed0 @secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:cipher=>"aes-256-cbc", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @legacy_verifier=#<ActiveSupport::MessageVerifier:0x00007fac6b3e5c28 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>>>, "action_dispatch.request.unsigned_session_cookie"=>{"session_id"=>"c120f537b9ee775a7d51fe429b7c4a7a"}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"crash"}, "action_controller.instance"=>#<DummyController:0x00007fac6b3d7538 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fac6b3e56d8 @env={...}, @filtered_parameters={"foo"=>"bar", "controller"=>"dummy", "action"=>"crash"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/crash?foo=bar", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fac6b3d58c8 @req=#<ActionDispatch::Request:0x00007fac6b3e56d8 ...>>>, @_response=#<ActionDispatch::Response:0x00007fac6b3d7998 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fac6b3d78f8>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fac6b3d7808 @response=#<ActionDispatch::Response:0x00007fac6b3d7998 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fac6b3d7768 @monitor=#<ActionDispatch::Response:0x00007fac6b3d7998 ...>, @cond=#<Thread::ConditionVariable:0x00007fac6b3d7740>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fac6b3e56d8 @env={...}, @filtered_parameters={"foo"=>"bar", "controller"=>"dummy", "action"=>"crash"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/crash?foo=bar", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fac6b3d58c8 @req=#<ActionDispatch::Request:0x00007fac6b3e56d8 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fac6b3d7268 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fac6b3d70b0 @paths=[#<ActionView::FixtureResolver:0x00007fac6c9fd380 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fac6c9fd358 keys=0 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="crash", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"foo=bar", "rack.request.query_hash"=>{"foo"=>"bar"}, "action_dispatch.request.query_parameters"=>{"foo"=>"bar"}, "action_dispatch.request.parameters"=>{"foo"=>"bar", "controller"=>"dummy", "action"=>"crash"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fac6ba52cc8 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=17232127029040565>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fac6cc15118 @max_size=10000>>]
[0m):
F, [2019-03-01T20:26:20.610961 #27122] FATAL -- :   
F, [2019-03-01T20:26:20.610995 #27122] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
D, [2019-03-01T20:28:52.718116 #27149] DEBUG -- :   [1m[35m (1.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T20:28:52.718566 #27149] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T20:28:52.721161 #27149] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T20:28:52.721680 #27149] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T20:28:52.722156 #27149] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T20:28:52.723561 #27149] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T20:28:52.732938 #27149] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T20:28:52.736501 #27149] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:28:52.737600 #27149] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 18:28:52.736881"], ["updated_at", "2019-03-01 18:28:52.736881"]]
D, [2019-03-01T20:28:52.737823 #27149] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:28:52.775939 #27149]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:28:52 +0200
I, [2019-03-01T20:28:52.782923 #27149]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:28:52.782988 #27149]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:28:52.790435 #27149] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:28:52.791951 #27149] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:28:52.793228 #27149] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:28:52.795095 #27149]  INFO -- : Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.6ms)
F, [2019-03-01T20:28:58.000391 #27149] FATAL -- :   
F, [2019-03-01T20:28:58.000508 #27149] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (a notice with [] and "dummy")
       got: (#<Airbrake::Notice:0x00007ffdcf15f890 @config=#<Airbrake::Config:0x00007ffdc9245d00 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007ffdcf12df20 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["a notice with [] and \"dummy\""]
[0m[32m+[#<Airbrake::Notice:0x00007ffdcf15f890 @config=#<Airbrake::Config:0x00007ffdc9245d00 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007ffdc9245c88 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007ffdc9245c38 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007ffdc9245bc0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007ffdc9245b48>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3">, @payload={:errors=>[{:type=>"NoMethodError", :message=>"undefined method `[]' for #<AirbrakeTestError: after_commit>", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/support/matchers/a_notice_with.rb", :line=>3, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-expectations-3.8.2/lib/rspec/matchers/dsl.rb", :line=>133, :function=>"block (2 levels) in match"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support.rb", :line=>113, :function=>"with_failure_notifier"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-expectations-3.8.2/lib/rspec/matchers/dsl.rb", :line=>131, :function=>"block in match"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-expectations-3.8.2/lib/rspec/matchers/composable.rb", :line=>46, :function=>"==="}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>18, :function=>"values_match?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>31, :function=>"block in arrays_match?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>30, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>30, :function=>"all?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>30, :function=>"arrays_match?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>12, :function=>"values_match?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/argument_list_matcher.rb", :line=>58, :function=>"args_match?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/message_expectation.rb", :line=>414, :function=>"matches?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>245, :function=>"block in find_matching_expectation"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>259, :function=>"block in find_best_matching_expectation_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>258, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>258, :function=>"find_best_matching_expectation_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>244, :function=>"find_matching_expectation"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>172, :function=>"message_received"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>327, :function=>"message_received"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/method_double.rb", :line=>77, :function=>"proxy_method_invoked"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/method_double.rb", :line=>64, :function=>"block (2 levels) in define_proxy_method"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>27, :function=>"rescue in run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>24, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_commit_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>346, :function=>"committed!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>128, :function=>"commit_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>223, :function=>"block in commit_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>213, :function=>"commit_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>252, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>385, :function=>"with_transaction_returning_status"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>310, :function=>"block in save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>325, :function=>"rollback_active_record_state!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>309, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/suppressor.rb", :line=>44, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/persistence.rb", :line=>36, :function=>"create"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>110, :function=>"crash"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>42, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}, {:type=>"AirbrakeTestError", :message=>"after_commit", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>48, :function=>"raise_error_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_commit_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>346, :function=>"committed!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>128, :function=>"commit_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>223, :function=>"block in commit_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>213, :function=>"commit_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>252, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>385, :function=>"with_transaction_returning_status"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>310, :function=>"block in save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>325, :function=>"rollback_active_record_state!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>309, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/suppressor.rb", :line=>44, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/persistence.rb", :line=>36, :function=>"create"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>110, :function=>"crash"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>42, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<NoMethodError: undefined method `[]' for #<AirbrakeTestError: after_commit>>, :rack_request=>#<ActionDispatch::Request:0x00007ffdcf12c0f8 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007ffdc938aeb8>, "rack.errors"=>#<StringIO:0x00007ffdc938af30>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"foo=bar", "PATH_INFO"=>"/crash", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007ffdc8286798 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007ffdc8286748 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007ffdc82866f8 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007ffdc82866a8>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007ffdc936f6b8 @filters=[#<Proc:0x00007ffdc936f5a0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007ffdc936f578@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007ffdc936f550@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007ffdc936edf8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007ffdc936edd0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007ffdc936ebc8 @key_generator=#<ActiveSupport::KeyGenerator:0x00007ffdc936ebf0 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007ffdc936eba0 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007ffdc81be3b0 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007ffdc8602818>, "ROUTES_70363982599180_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/crash?foo=bar", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"0b9a2baa-a313-43fb-917e-27b3e7741f37", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007ffdc93584b8 @req=#<ActionDispatch::Request:0x00007ffdc93584e0 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x00007ffdc9352d88 @by=#<ActionDispatch::Session::CookieStore:0x00007ffdcf126f68 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007ffdcf126f90 @app=#<Rack::Head:0x00007ffdcf126fb8 @app=#<Rack::ConditionalGet:0x00007ffdcf126fe0 @app=#<Rack::ETag:0x00007ffdcf127008 @app=#<Rack::TempfileReaper:0x00007ffdcf127030 @app=#<Warden::Manager:0x00007ffdcf1270f8 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007ffdc8602818>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @req=#<ActionDispatch::Request:0x00007ffdc9352dd8 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @delegate={"session_id"=>"e0ebee470a707270e87db743e3bb691a", "warden.user.default.key"=>#<OpenStruct id=1, email="qa@example.com", username="qa-dept">}, @loaded=true, @exists=nil>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007ffdc9352d38 @by=#<ActionDispatch::Session::CookieStore:0x00007ffdcf126f68 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007ffdcf126f90 @app=#<Rack::Head:0x00007ffdcf126fb8 @app=#<Rack::ConditionalGet:0x00007ffdcf126fe0 @app=#<Rack::ETag:0x00007ffdcf127008 @app=#<Rack::TempfileReaper:0x00007ffdcf127030 @app=#<Warden::Manager:0x00007ffdcf1270f8 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007ffdc8602818>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>true, :id=>"e0ebee470a707270e87db743e3bb691a"}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70363989579320 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007ffdc9352450 @set_cookies={}, @delete_cookies={}, @request=#<ActionDispatch::Request:0x00007ffdc9352dd8 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @cookies={}, @committed=false, @encrypted=#<ActionDispatch::Cookies::EncryptedKeyRotatingCookieJar:0x00007ffdc9352338 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007ffdc9352450 ...>, @encryptor=#<ActiveSupport::MessageEncryptor:0x00007ffdc9352108 @secret="\x1D\x0Ecc\x81\xCE\xD3\xBE\x16\b\xA4 \xBE\xB0\xAF\b\xCA\xAFtlV\xA7jQ\x06\xEFV\x88\xC3\xE6~\xA0", @sign_secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @cipher="aes-256-cbc", @aead_mode=false, @digest="SHA1", @verifier=#<ActiveSupport::MessageVerifier:0x00007ffdc9351eb0 @secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:cipher=>"aes-256-cbc", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @legacy_verifier=#<ActiveSupport::MessageVerifier:0x00007ffdc9351c30 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>>, @signed_or_encrypted=#<ActionDispatch::Cookies::EncryptedKeyRotatingCookieJar:0x00007ffdc9352338 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007ffdc9352450 ...>, @encryptor=#<ActiveSupport::MessageEncryptor:0x00007ffdc9352108 @secret="\x1D\x0Ecc\x81\xCE\xD3\xBE\x16\b\xA4 \xBE\xB0\xAF\b\xCA\xAFtlV\xA7jQ\x06\xEFV\x88\xC3\xE6~\xA0", @sign_secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @cipher="aes-256-cbc", @aead_mode=false, @digest="SHA1", @verifier=#<ActiveSupport::MessageVerifier:0x00007ffdc9351eb0 @secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:cipher=>"aes-256-cbc", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @legacy_verifier=#<ActiveSupport::MessageVerifier:0x00007ffdc9351c30 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>>>, "action_dispatch.request.unsigned_session_cookie"=>{"session_id"=>"e0ebee470a707270e87db743e3bb691a"}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"crash"}, "action_controller.instance"=>#<DummyController:0x00007ffdcf269998 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007ffdc9351780 @env={...}, @filtered_parameters={"foo"=>"bar", "controller"=>"dummy", "action"=>"crash"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/crash?foo=bar", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007ffdcf262f30 @req=#<ActionDispatch::Request:0x00007ffdc9351780 ...>>>, @_response=#<ActionDispatch::Response:0x00007ffdcf269fd8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007ffdcf269f38>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007ffdcf269dd0 @response=#<ActionDispatch::Response:0x00007ffdcf269fd8 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007ffdcf269ce0 @monitor=#<ActionDispatch::Response:0x00007ffdcf269fd8 ...>, @cond=#<Thread::ConditionVariable:0x00007ffdcf269cb8>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007ffdc9351780 @env={...}, @filtered_parameters={"foo"=>"bar", "controller"=>"dummy", "action"=>"crash"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/crash?foo=bar", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007ffdcf262f30 @req=#<ActionDispatch::Request:0x00007ffdc9351780 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007ffdcf269588 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007ffdcf269330 @paths=[#<ActionView::FixtureResolver:0x00007ffdc8e49ff8 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7ffdc8e49f80 keys=0 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="crash", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"foo=bar", "rack.request.query_hash"=>{"foo"=>"bar"}, "action_dispatch.request.query_parameters"=>{"foo"=>"bar"}, "action_dispatch.request.parameters"=>{"foo"=>"bar", "controller"=>"dummy", "action"=>"crash"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007ffdc83d7138 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=3989490284166123355>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007ffdcf12df20 @max_size=10000>>]
[0m):
F, [2019-03-01T20:28:58.000593 #27149] FATAL -- :   
F, [2019-03-01T20:28:58.000622 #27149] FATAL -- : lib/airbrake/rack/middleware.rb:85:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
D, [2019-03-01T20:29:42.569843 #27166] DEBUG -- :   [1m[35m (0.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T20:29:42.570269 #27166] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T20:29:42.573063 #27166] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T20:29:42.573681 #27166] DEBUG -- :   [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T20:29:42.574209 #27166] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T20:29:42.575842 #27166] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T20:29:42.586845 #27166] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T20:29:42.590349 #27166] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:29:42.591347 #27166] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 18:29:42.590711"], ["updated_at", "2019-03-01 18:29:42.590711"]]
D, [2019-03-01T20:29:42.591550 #27166] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:29:42.629445 #27166]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:29:42 +0200
I, [2019-03-01T20:29:42.636202 #27166]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:29:42.636260 #27166]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:29:42.644158 #27166] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:29:42.645914 #27166] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:29:42.647365 #27166] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:29:42.649411 #27166]  INFO -- : Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.7ms)
F, [2019-03-01T20:29:48.759171 #27166] FATAL -- :   
F, [2019-03-01T20:29:48.759261 #27166] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (a notice with [] and "dummy")
       got: (#<Airbrake::Notice:0x00007fec94b46b48 @config=#<Airbrake::Config:0x00007fec92eeae40 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fec97922a58 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["a notice with [] and \"dummy\""]
[0m[32m+[#<Airbrake::Notice:0x00007fec94b46b48 @config=#<Airbrake::Config:0x00007fec92eeae40 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fec92eeadc8 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fec92eead78 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fec92eead28 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fec92eeacb0>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3">, @payload={:errors=>[{:type=>"NoMethodError", :message=>"undefined method `[]' for #<AirbrakeTestError: after_commit>", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/support/matchers/a_notice_with.rb", :line=>3, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-expectations-3.8.2/lib/rspec/matchers/dsl.rb", :line=>133, :function=>"block (2 levels) in match"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support.rb", :line=>113, :function=>"with_failure_notifier"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-expectations-3.8.2/lib/rspec/matchers/dsl.rb", :line=>131, :function=>"block in match"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-expectations-3.8.2/lib/rspec/matchers/composable.rb", :line=>46, :function=>"==="}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>18, :function=>"values_match?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>31, :function=>"block in arrays_match?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>30, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>30, :function=>"all?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>30, :function=>"arrays_match?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-support-3.8.0/lib/rspec/support/fuzzy_matcher.rb", :line=>12, :function=>"values_match?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/argument_list_matcher.rb", :line=>58, :function=>"args_match?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/message_expectation.rb", :line=>414, :function=>"matches?"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>245, :function=>"block in find_matching_expectation"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>259, :function=>"block in find_best_matching_expectation_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>258, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>258, :function=>"find_best_matching_expectation_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>244, :function=>"find_matching_expectation"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>172, :function=>"message_received"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/proxy.rb", :line=>327, :function=>"message_received"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/method_double.rb", :line=>77, :function=>"proxy_method_invoked"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-mocks-3.8.0/lib/rspec/mocks/method_double.rb", :line=>64, :function=>"block (2 levels) in define_proxy_method"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>27, :function=>"rescue in run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>24, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_commit_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>346, :function=>"committed!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>128, :function=>"commit_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>223, :function=>"block in commit_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>213, :function=>"commit_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>252, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>385, :function=>"with_transaction_returning_status"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>310, :function=>"block in save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>325, :function=>"rollback_active_record_state!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>309, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/suppressor.rb", :line=>44, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/persistence.rb", :line=>36, :function=>"create"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>110, :function=>"crash"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>43, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}, {:type=>"AirbrakeTestError", :message=>"after_commit", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>48, :function=>"raise_error_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_commit_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>346, :function=>"committed!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>128, :function=>"commit_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>223, :function=>"block in commit_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>213, :function=>"commit_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>252, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>385, :function=>"with_transaction_returning_status"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>310, :function=>"block in save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>325, :function=>"rollback_active_record_state!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>309, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/suppressor.rb", :line=>44, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/persistence.rb", :line=>36, :function=>"create"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>110, :function=>"crash"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>43, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<NoMethodError: undefined method `[]' for #<AirbrakeTestError: after_commit>>, :rack_request=>#<ActionDispatch::Request:0x00007fec97922a30 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fec94c9b6d8>, "rack.errors"=>#<StringIO:0x00007fec94c9b778>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"foo=bar", "PATH_INFO"=>"/crash", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fec94a3d558 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fec94a3d508 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fec94a3d4b8 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fec94a3d468>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fec94c88a60 @filters=[#<Proc:0x00007fec94c88920@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fec94c888f8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fec94c888d0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fec94c88100@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fec94c880d8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fec94c67ea0 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fec94c67f18 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fec94c67e78 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fec921cdde8 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fec923a37d0>, "ROUTES_70327021149160_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/crash?foo=bar", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"6faa4b89-1010-48fe-a8be-d0f97444c434", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fec94c46e80 @req=#<ActionDispatch::Request:0x00007fec94c46ea8 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x00007fec94c45530 @by=#<ActionDispatch::Session::CookieStore:0x00007fec94b62a28 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fec94b62a50 @app=#<Rack::Head:0x00007fec94b62a78 @app=#<Rack::ConditionalGet:0x00007fec94b62aa0 @app=#<Rack::ETag:0x00007fec94b62ac8 @app=#<Rack::TempfileReaper:0x00007fec94b62af0 @app=#<Warden::Manager:0x00007fec94b62bb8 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fec923a37d0>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @req=#<ActionDispatch::Request:0x00007fec94c455d0 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @delegate={"session_id"=>"8600bc4e2d73e87245af3ab8fdd7c176", "warden.user.default.key"=>#<OpenStruct id=1, email="qa@example.com", username="qa-dept">}, @loaded=true, @exists=nil>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fec94c454e0 @by=#<ActionDispatch::Session::CookieStore:0x00007fec94b62a28 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fec94b62a50 @app=#<Rack::Head:0x00007fec94b62a78 @app=#<Rack::ConditionalGet:0x00007fec94b62aa0 @app=#<Rack::ETag:0x00007fec94b62ac8 @app=#<Rack::TempfileReaper:0x00007fec94b62af0 @app=#<Warden::Manager:0x00007fec94b62bb8 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fec923a37d0>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>true, :id=>"8600bc4e2d73e87245af3ab8fdd7c176"}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70327042451920 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "rack.request.cookie_hash"=>{}, "rack.request.cookie_string"=>"", "action_dispatch.cookies"=>#<ActionDispatch::Cookies::CookieJar:0x00007fec94c448d8 @set_cookies={}, @delete_cookies={}, @request=#<ActionDispatch::Request:0x00007fec94c455d0 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @cookies={}, @committed=false, @encrypted=#<ActionDispatch::Cookies::EncryptedKeyRotatingCookieJar:0x00007fec94c44680 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fec94c448d8 ...>, @encryptor=#<ActiveSupport::MessageEncryptor:0x00007fec94c44338 @secret="\x1D\x0Ecc\x81\xCE\xD3\xBE\x16\b\xA4 \xBE\xB0\xAF\b\xCA\xAFtlV\xA7jQ\x06\xEFV\x88\xC3\xE6~\xA0", @sign_secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @cipher="aes-256-cbc", @aead_mode=false, @digest="SHA1", @verifier=#<ActiveSupport::MessageVerifier:0x00007fec94c440e0 @secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:cipher=>"aes-256-cbc", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @legacy_verifier=#<ActiveSupport::MessageVerifier:0x00007fec94c3fbd0 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>>, @signed_or_encrypted=#<ActionDispatch::Cookies::EncryptedKeyRotatingCookieJar:0x00007fec94c44680 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x00007fec94c448d8 ...>, @encryptor=#<ActiveSupport::MessageEncryptor:0x00007fec94c44338 @secret="\x1D\x0Ecc\x81\xCE\xD3\xBE\x16\b\xA4 \xBE\xB0\xAF\b\xCA\xAFtlV\xA7jQ\x06\xEFV\x88\xC3\xE6~\xA0", @sign_secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @cipher="aes-256-cbc", @aead_mode=false, @digest="SHA1", @verifier=#<ActiveSupport::MessageVerifier:0x00007fec94c440e0 @secret="b\x8D\xD9M,1\xBFB\xEB\x83\xA8%\x18\xFCj\x82\xD6>N\x94-\xDB\xE5\xB1}Uj\xE5u\xFB\x916\x15\xD2\xEE\xD2\x1C\xEC`\xA7\xB1\xCC\x9D\x12\xC6\x9B\x7F\a4>\xE2\xC04N\xFD\x84\xEEV~\x11\xFB\x85\xEE\xE7", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:cipher=>"aes-256-cbc", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>, @legacy_verifier=#<ActiveSupport::MessageVerifier:0x00007fec94c3fbd0 @secret="ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", @digest="SHA1", @serializer=ActiveSupport::MessageEncryptor::NullSerializer, @options={:digest=>"SHA1", :serializer=>ActiveSupport::MessageEncryptor::NullSerializer}, @rotations=[]>>>, "action_dispatch.request.unsigned_session_cookie"=>{"session_id"=>"8600bc4e2d73e87245af3ab8fdd7c176"}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"crash"}, "action_controller.instance"=>#<DummyController:0x00007fec94c21928 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fec94c3f3b0 @env={...}, @filtered_parameters={"foo"=>"bar", "controller"=>"dummy", "action"=>"crash"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/crash?foo=bar", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fec94c1bac8 @req=#<ActionDispatch::Request:0x00007fec94c3f3b0 ...>>>, @_response=#<ActionDispatch::Response:0x00007fec94c21d60 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fec94c21cc0>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fec94c21bf8 @response=#<ActionDispatch::Response:0x00007fec94c21d60 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fec94c21b58 @monitor=#<ActionDispatch::Response:0x00007fec94c21d60 ...>, @cond=#<Thread::ConditionVariable:0x00007fec94c21b30>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fec94c3f3b0 @env={...}, @filtered_parameters={"foo"=>"bar", "controller"=>"dummy", "action"=>"crash"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/crash?foo=bar", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fec94c1bac8 @req=#<ActionDispatch::Request:0x00007fec94c3f3b0 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fec94c21680 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fec94c214f0 @paths=[#<ActionView::FixtureResolver:0x00007fec92df1c00 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fec92df1bd8 keys=0 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="crash", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"foo=bar", "rack.request.query_hash"=>{"foo"=>"bar"}, "action_dispatch.request.query_parameters"=>{"foo"=>"bar"}, "action_dispatch.request.parameters"=>{"foo"=>"bar", "controller"=>"dummy", "action"=>"crash"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fec92298340 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-4089156215875109460>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fec97922a58 @max_size=10000>>]
[0m):
F, [2019-03-01T20:29:48.759332 #27166] FATAL -- :   
F, [2019-03-01T20:29:48.759362 #27166] FATAL -- : lib/airbrake/rack/middleware.rb:85:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
D, [2019-03-01T20:32:41.814776 #27204] DEBUG -- :   [1m[35m (1.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T20:32:41.815258 #27204] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T20:32:41.818127 #27204] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T20:32:41.818682 #27204] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T20:32:41.819184 #27204] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T20:32:41.820903 #27204] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T20:32:41.831072 #27204] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T20:32:41.834290 #27204] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:32:41.835137 #27204] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 18:32:41.834647"], ["updated_at", "2019-03-01 18:32:41.834647"]]
D, [2019-03-01T20:32:41.835320 #27204] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:32:41.873841 #27204]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:32:41 +0200
I, [2019-03-01T20:32:41.881366 #27204]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:32:41.881467 #27204]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:32:41.889092 #27204] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:32:41.890906 #27204] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:32:41.892293 #27204] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:32:41.894169 #27204]  INFO -- : Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.7ms)
F, [2019-03-01T20:32:41.903472 #27204] FATAL -- :   
F, [2019-03-01T20:32:41.903532 #27204] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :build_notice with unexpected arguments
  expected: (an instance of AirbrakeTestError)
       got: (#<NoMethodError: undefined method `[]' for #<AirbrakeTestError: after_commit>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of AirbrakeTestError"]
[0m[32m+[#<NoMethodError: undefined method `[]' for #<AirbrakeTestError: after_commit>>]
[0m
 Please stub a default value first if message might be received with other args as well. 
):
F, [2019-03-01T20:32:41.903562 #27204] FATAL -- :   
F, [2019-03-01T20:32:41.903588 #27204] FATAL -- : lib/airbrake/rack/middleware.rb:70:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
D, [2019-03-01T20:32:56.805192 #27217] DEBUG -- :   [1m[35m (0.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T20:32:56.805674 #27217] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T20:32:56.808543 #27217] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T20:32:56.809153 #27217] DEBUG -- :   [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T20:32:56.809655 #27217] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T20:32:56.811002 #27217] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T20:32:56.820501 #27217] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T20:32:56.823558 #27217] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:32:56.824315 #27217] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 18:32:56.823837"], ["updated_at", "2019-03-01 18:32:56.823837"]]
D, [2019-03-01T20:32:56.824491 #27217] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:32:56.862115 #27217]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:32:56 +0200
I, [2019-03-01T20:32:56.868827 #27217]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:32:56.868887 #27217]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:32:56.876370 #27217] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:32:56.877941 #27217] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:32:56.879214 #27217] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:32:56.880968 #27217]  INFO -- : Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.6ms)
F, [2019-03-01T20:32:56.890145 #27217] FATAL -- :   
F, [2019-03-01T20:32:56.890214 #27217] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :build_notice with unexpected arguments
  expected: (an instance of AirbrakeTestError)
       got: (#<NoMethodError: undefined method `[]' for #<AirbrakeTestError: after_commit>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of AirbrakeTestError"]
[0m[32m+[#<NoMethodError: undefined method `[]' for #<AirbrakeTestError: after_commit>>]
[0m
 Please stub a default value first if message might be received with other args as well. 
):
F, [2019-03-01T20:32:56.890250 #27217] FATAL -- :   
F, [2019-03-01T20:32:56.890277 #27217] FATAL -- : lib/airbrake/rack/middleware.rb:70:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
D, [2019-03-01T20:33:14.365633 #27230] DEBUG -- :   [1m[35m (0.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T20:33:14.366082 #27230] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T20:33:14.368726 #27230] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T20:33:14.369240 #27230] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T20:33:14.369900 #27230] DEBUG -- :   [1m[35m (0.2ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T20:33:14.371259 #27230] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T20:33:14.381405 #27230] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T20:33:14.384790 #27230] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:33:14.385714 #27230] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 18:33:14.385138"], ["updated_at", "2019-03-01 18:33:14.385138"]]
D, [2019-03-01T20:33:14.385900 #27230] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:33:14.424325 #27230]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:33:14 +0200
I, [2019-03-01T20:33:14.431683 #27230]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:33:14.431751 #27230]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:33:14.439778 #27230] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:33:14.441937 #27230] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:33:14.443573 #27230] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:33:14.445801 #27230]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.8ms)
F, [2019-03-01T20:33:14.456487 #27230] FATAL -- :   
F, [2019-03-01T20:33:14.456547 #27230] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :build_notice with unexpected arguments
  expected: (an instance of AirbrakeTestError)
       got: (#<NoMethodError: undefined method `[]' for #<AirbrakeTestError: after_commit>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of AirbrakeTestError"]
[0m[32m+[#<NoMethodError: undefined method `[]' for #<AirbrakeTestError: after_commit>>]
[0m
 Please stub a default value first if message might be received with other args as well. 
):
F, [2019-03-01T20:33:14.456579 #27230] FATAL -- :   
F, [2019-03-01T20:33:14.456607 #27230] FATAL -- : lib/airbrake/rack/middleware.rb:70:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
D, [2019-03-01T20:33:23.686975 #27242] DEBUG -- :   [1m[35m (0.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T20:33:23.687394 #27242] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T20:33:23.690086 #27242] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T20:33:23.690620 #27242] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T20:33:23.691262 #27242] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T20:33:23.692773 #27242] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T20:33:23.703287 #27242] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T20:33:23.706596 #27242] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:33:23.707437 #27242] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 18:33:23.706900"], ["updated_at", "2019-03-01 18:33:23.706900"]]
D, [2019-03-01T20:33:23.707613 #27242] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:33:23.746823 #27242]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:33:23 +0200
I, [2019-03-01T20:33:23.753737 #27242]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:33:23.753797 #27242]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:33:23.761152 #27242] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:33:23.762641 #27242] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:33:23.763930 #27242] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:33:23.765702 #27242]  INFO -- : Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.6ms)
F, [2019-03-01T20:35:13.131561 #27242] FATAL -- :   
F, [2019-03-01T20:35:13.131662 #27242] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :build_notice with unexpected arguments
  expected: (an instance of AirbrakeTestError)
       got: (#<NoMethodError: undefined method `[]' for #<AirbrakeTestError: after_commit>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of AirbrakeTestError"]
[0m[32m+[#<NoMethodError: undefined method `[]' for #<AirbrakeTestError: after_commit>>]
[0m
 Please stub a default value first if message might be received with other args as well. 
):
F, [2019-03-01T20:35:13.131697 #27242] FATAL -- :   
F, [2019-03-01T20:35:13.131731 #27242] FATAL -- : lib/airbrake/rack/middleware.rb:71:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
D, [2019-03-01T20:35:17.721549 #27266] DEBUG -- :   [1m[35m (1.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T20:35:17.722055 #27266] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T20:35:17.724948 #27266] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T20:35:17.725563 #27266] DEBUG -- :   [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T20:35:17.726111 #27266] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T20:35:17.727503 #27266] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T20:35:17.737696 #27266] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T20:35:17.744155 #27266] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:35:17.745028 #27266] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 18:35:17.744485"], ["updated_at", "2019-03-01 18:35:17.744485"]]
D, [2019-03-01T20:35:17.745227 #27266] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:35:17.773311 #27266]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:35:17 +0200
I, [2019-03-01T20:35:17.775346 #27266]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:35:17.775410 #27266]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:35:17.784045 #27266] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:35:17.785785 #27266] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:35:17.787580 #27266] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:35:17.794519 #27266]  INFO -- : Completed 500 Internal Server Error in 19ms (ActiveRecord: 0.7ms)
F, [2019-03-01T20:35:19.557913 #27266] FATAL -- :   
F, [2019-03-01T20:35:19.557982 #27266] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:35:19.558007 #27266] FATAL -- :   
F, [2019-03-01T20:35:19.558037 #27266] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
D, [2019-03-01T20:36:32.797952 #27288] DEBUG -- :   [1m[35m (0.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T20:36:32.798424 #27288] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T20:36:32.800973 #27288] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T20:36:32.801520 #27288] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T20:36:32.802026 #27288] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T20:36:32.803336 #27288] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T20:36:32.812947 #27288] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T20:36:32.816460 #27288] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:36:32.817374 #27288] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 18:36:32.816854"], ["updated_at", "2019-03-01 18:36:32.816854"]]
D, [2019-03-01T20:36:32.817548 #27288] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:36:32.851149 #27288]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:36:32 +0200
I, [2019-03-01T20:36:32.853110 #27288]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:36:32.860810 #27288] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:36:32.862602 #27288] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:36:32.863892 #27288] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:36:32.870120 #27288]  INFO -- : Completed 500 Internal Server Error in 17ms (ActiveRecord: 0.6ms)
F, [2019-03-01T20:36:32.886152 #27288] FATAL -- :   
F, [2019-03-01T20:36:32.890816 #27288] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:36:32.890875 #27288] FATAL -- :   
F, [2019-03-01T20:36:32.890909 #27288] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:36:34.895472 #27288]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:36:34 +0200
I, [2019-03-01T20:36:34.896393 #27288]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:36:34.896913 #27288] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:36:34.898405 #27288] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:36:34.899678 #27288] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:36:34.909576 #27288]  INFO -- : Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:36:34.915620 #27288] FATAL -- :   
F, [2019-03-01T20:36:34.920207 #27288] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:36:34.920252 #27288] FATAL -- :   
F, [2019-03-01T20:36:34.920281 #27288] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:36:36.924338 #27288]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:36:36 +0200
I, [2019-03-01T20:36:36.925667 #27288]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:36:36.926211 #27288] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:36:36.928060 #27288] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:36:36.929529 #27288] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:36:36.940598 #27288]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:36:36.947004 #27288] FATAL -- :   
F, [2019-03-01T20:36:36.954148 #27288] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:36:36.954193 #27288] FATAL -- :   
F, [2019-03-01T20:36:36.954222 #27288] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:36:38.958672 #27288]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:36:38 +0200
I, [2019-03-01T20:36:38.959827 #27288]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:36:38.960345 #27288] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:36:38.962054 #27288] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:36:38.963475 #27288] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:36:38.974200 #27288]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:36:38.979780 #27288] FATAL -- :   
F, [2019-03-01T20:36:38.984331 #27288] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:36:38.984378 #27288] FATAL -- :   
F, [2019-03-01T20:36:38.984407 #27288] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:36:40.991416 #27288]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:36:40 +0200
I, [2019-03-01T20:36:40.992392 #27288]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:36:40.992888 #27288] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:36:40.994717 #27288] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:36:40.996148 #27288] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:36:41.007346 #27288]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:36:41.012904 #27288] FATAL -- :   
F, [2019-03-01T20:36:41.017420 #27288] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:36:41.017466 #27288] FATAL -- :   
F, [2019-03-01T20:36:41.017496 #27288] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:36:43.025109 #27288]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:36:43 +0200
I, [2019-03-01T20:36:43.026044 #27288]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:36:43.026516 #27288] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:36:43.027997 #27288] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:36:43.029299 #27288] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:36:43.039459 #27288]  INFO -- : Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:36:43.044854 #27288] FATAL -- :   
F, [2019-03-01T20:36:43.049705 #27288] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:36:43.049750 #27288] FATAL -- :   
F, [2019-03-01T20:36:43.049779 #27288] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:36:45.062014 #27288]  INFO -- : Started GET "/resque" for 127.0.0.1 at 2019-03-01 20:36:45 +0200
I, [2019-03-01T20:36:45.062986 #27288]  INFO -- : Processing by DummyController#resque as HTML
I, [2019-03-01T20:36:45.066148 #27288]  INFO -- :   Rendering dummy/resque.html.erb within layouts/application
I, [2019-03-01T20:36:45.066890 #27288]  INFO -- :   Rendered dummy/resque.html.erb within layouts/application (0.7ms)
I, [2019-03-01T20:36:45.067264 #27288]  INFO -- : Completed 200 OK in 4ms (Views: 2.9ms | ActiveRecord: 0.0ms)
I, [2019-03-01T20:36:45.068880 #27288]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:36:45 +0200
I, [2019-03-01T20:36:45.069751 #27288]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:36:45.070163 #27288] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:36:45.071497 #27288] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:36:45.072757 #27288] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:36:45.082383 #27288]  INFO -- : Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:36:45.088500 #27288] FATAL -- :   
F, [2019-03-01T20:36:45.092842 #27288] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:36:45.092888 #27288] FATAL -- :   
F, [2019-03-01T20:36:45.092917 #27288] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:36:47.097510 #27288]  INFO -- : Started GET "/delayed_job" for 127.0.0.1 at 2019-03-01 20:36:47 +0200
I, [2019-03-01T20:36:47.098843 #27288]  INFO -- : Processing by DummyController#delayed_job as HTML
I, [2019-03-01T20:36:47.113996 #27288]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.5ms)
F, [2019-03-01T20:36:47.131961 #27288] FATAL -- :   
F, [2019-03-01T20:36:47.132044 #27288] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n"))
       got: (#<Airbrake::Notice:0x00007fee0bf37360 @config=#<Airbrake::Config:0x00007fee0cb25d98 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fee0bf1c358 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,3 +1,2 @@
[0m[31m-["anything",
[0m[31m- "hash_including(\"handler\"=>\"--- !ruby/struct:BangoJob\\nbingo: bingo\\nbongo: bongo\\n\")"]
[0m[32m+[#<Airbrake::Notice:0x00007fee0bf37360 @config=#<Airbrake::Config:0x00007fee0cb25d98 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fee0cb25d20 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fee0cb25cd0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fee0cb25c80 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fee0cb25c08>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>86, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>142, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>191, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007fee0bf1c330 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fee0c224cf8>, "rack.errors"=>#<StringIO:0x00007fee0c224d70>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fee0cb6ffb0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fee0cb6ff60 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fee0cb6fec0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fee0cb6fe70>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fee12800b08 @filters=[#<Proc:0x00007fee128009a0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fee12800978@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fee12800900@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fee0bff3df8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fee0bff3dd0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fee0bff3bc8 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fee0bff3bf0 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fee0bff3ba0 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fee0b8d47e8 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fee0e6150b8>, "ROUTES_70330210101340_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"089106d2-4318-470f-a747-fbdc21e49230", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fee0c21f870 @req=#<ActionDispatch::Request:0x00007fee0c21f898 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7fee0c21e1f0 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fee0c21e1a0 @by=#<ActionDispatch::Session::CookieStore:0x00007fee0cebc330 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fee0cebc358 @app=#<Rack::Head:0x00007fee0cebc380 @app=#<Rack::ConditionalGet:0x00007fee0cebc3a8 @app=#<Rack::ETag:0x00007fee0cebc3d0 @app=#<Rack::TempfileReaper:0x00007fee0cebc3f8 @app=#<Warden::Manager:0x00007fee0cebc4c0 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fee0e6150b8>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70330191245420 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fee0c21c8f0 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fee0c21dde0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/delayed_job", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fee0c217ad0 @req=#<ActionDispatch::Request:0x00007fee0c21dde0 ...>>>, @_response=#<ActionDispatch::Response:0x00007fee0c21cb48 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fee0c21caf8>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fee0c21caa8 @response=#<ActionDispatch::Response:0x00007fee0c21cb48 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fee0c21ca80 @monitor=#<ActionDispatch::Response:0x00007fee0c21cb48 ...>, @cond=#<Thread::ConditionVariable:0x00007fee0c21ca58>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fee0c21dde0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/delayed_job", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fee0c217ad0 @req=#<ActionDispatch::Request:0x00007fee0c21dde0 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fee0c21c788 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fee0c21c698 @paths=[#<ActionView::FixtureResolver:0x00007fee0c906760 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fee0c9066c0 keys=1 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fee0e58e6a8 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-2340366647459730698>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fee0bf1c358 @max_size=10000>>]
[0m):
F, [2019-03-01T20:36:47.132115 #27288] FATAL -- :   
F, [2019-03-01T20:36:47.132142 #27288] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:36:47.134557 #27288]  INFO -- : Started GET "/active_job" for 127.0.0.1 at 2019-03-01 20:36:47 +0200
I, [2019-03-01T20:36:47.135371 #27288]  INFO -- : Processing by DummyController#active_job as HTML
I, [2019-03-01T20:36:47.136860 #27288]  INFO -- :   Rendering dummy/active_job.html.erb within layouts/application
I, [2019-03-01T20:36:47.137156 #27288]  INFO -- :   Rendered dummy/active_job.html.erb within layouts/application (0.2ms)
I, [2019-03-01T20:36:47.137472 #27288]  INFO -- : Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.0ms)
I, [2019-03-01T20:36:49.142743 #27288]  INFO -- : Started GET "/active_job" for 127.0.0.1 at 2019-03-01 20:36:49 +0200
I, [2019-03-01T20:36:49.143988 #27288]  INFO -- : Processing by DummyController#active_job as HTML
I, [2019-03-01T20:36:49.145167 #27288]  INFO -- :   Rendering dummy/active_job.html.erb within layouts/application
I, [2019-03-01T20:36:49.146324 #27288]  INFO -- :   Rendered dummy/active_job.html.erb within layouts/application (0.3ms)
I, [2019-03-01T20:36:49.146801 #27288]  INFO -- : Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.0ms)
I, [2019-03-01T20:36:51.151959 #27288]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:36:51 +0200
I, [2019-03-01T20:36:51.152937 #27288]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:36:51.153439 #27288] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:36:51.154840 #27288] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:36:51.156181 #27288] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:36:51.157278 #27288]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:36:51.158548 #27288] FATAL -- :   
F, [2019-03-01T20:36:51.158590 #27288] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:36:51.158617 #27288] FATAL -- :   
F, [2019-03-01T20:36:51.158642 #27288] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:36:51.159858 #27288]  INFO -- : Started HEAD "/crash" for 127.0.0.1 at 2019-03-01 20:36:51 +0200
I, [2019-03-01T20:36:51.164238 #27288]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:36:51.164756 #27288] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:36:51.166368 #27288] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:36:51.167720 #27288] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:36:51.169002 #27288]  INFO -- : Completed 0  in 5ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:36:51.170599 #27288] FATAL -- :   
F, [2019-03-01T20:36:51.170663 #27288] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:36:51.170726 #27288] FATAL -- :   
F, [2019-03-01T20:36:51.170752 #27288] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:36:51.172638 #27288]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:36:51 +0200
I, [2019-03-01T20:36:51.173610 #27288]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:36:51.174043 #27288] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:36:51.175527 #27288] DEBUG -- :   [1m[36mBook Create (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:36:51.176724 #27288] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:36:51.178423 #27288]  INFO -- : Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.3ms)
F, [2019-03-01T20:36:51.180634 #27288] FATAL -- :   
F, [2019-03-01T20:36:51.180686 #27288] FATAL -- : RSpec::Expectations::ExpectationNotMetError (
expected: "AirbrakeTestError"
     got: "RSpec::Mocks::MockExpectationError"

(compared using ==)
):
F, [2019-03-01T20:36:51.180714 #27288] FATAL -- :   
F, [2019-03-01T20:36:51.180738 #27288] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:36:51.182182 #27288]  INFO -- : Started GET "/" for 127.0.0.1 at 2019-03-01 20:36:51 +0200
I, [2019-03-01T20:36:51.182852 #27288]  INFO -- : Processing by DummyController#index as HTML
I, [2019-03-01T20:36:51.183610 #27288]  INFO -- :   Rendering dummy/index.html.erb within layouts/application
I, [2019-03-01T20:36:51.186571 #27288]  INFO -- :   Rendered dummy/index.html.erb within layouts/application (2.9ms)
I, [2019-03-01T20:36:51.186915 #27288]  INFO -- : Completed 200 OK in 4ms (Views: 3.7ms | ActiveRecord: 0.0ms)
I, [2019-03-01T20:36:51.189788 #27288]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:36:51 +0200
I, [2019-03-01T20:36:51.190901 #27288]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:36:51.191251 #27288] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:36:51.192551 #27288] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:36:51.193897 #27288] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:36:51.204551 #27288]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:36:51.210395 #27288] FATAL -- :   
F, [2019-03-01T20:36:51.214949 #27288] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:36:51.215010 #27288] FATAL -- :   
F, [2019-03-01T20:36:51.215040 #27288] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:36:53.221447 #27288]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:36:53 +0200
I, [2019-03-01T20:36:53.222406 #27288]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:36:53.222460 #27288]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:36:53.222904 #27288] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:36:53.224407 #27288] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:36:53.225687 #27288] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:36:53.232204 #27288]  INFO -- : Completed 500 Internal Server Error in 10ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:36:53.243783 #27288] FATAL -- :   
F, [2019-03-01T20:36:53.248587 #27288] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:36:53.248637 #27288] FATAL -- :   
F, [2019-03-01T20:36:53.248666 #27288] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:36:53.250609 #27288]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:36:53 +0200
I, [2019-03-01T20:36:53.251397 #27288]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:36:53.251458 #27288]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:36:53.251866 #27288] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:36:53.253315 #27288] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:36:53.254639 #27288] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:36:53.261109 #27288]  INFO -- : Completed 500 Internal Server Error in 10ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:36:53.272716 #27288] FATAL -- :   
F, [2019-03-01T20:36:53.280587 #27288] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:36:53.280647 #27288] FATAL -- :   
F, [2019-03-01T20:36:53.280678 #27288] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:36:53.282908 #27288]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:36:53 +0200
I, [2019-03-01T20:36:53.283725 #27288]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:36:53.284145 #27288] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:36:53.285539 #27288] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:36:53.286781 #27288] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:36:53.288021 #27288]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:36:53.289640 #27288] FATAL -- :   
F, [2019-03-01T20:36:53.289692 #27288] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:36:53.289775 #27288] FATAL -- :   
F, [2019-03-01T20:36:53.289801 #27288] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:36:53.291420 #27288]  INFO -- : Started GET "/active_record_after_commit" for 127.0.0.1 at 2019-03-01 20:36:53 +0200
I, [2019-03-01T20:36:53.292300 #27288]  INFO -- : Processing by DummyController#active_record_after_commit as HTML
D, [2019-03-01T20:36:53.292732 #27288] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:36:53.294162 #27288] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "Bingo"]]
D, [2019-03-01T20:36:53.295413 #27288] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:36:53.296613 #27288]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:36:53.307283 #27288] FATAL -- :   
F, [2019-03-01T20:36:53.307359 #27288] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (an instance of AirbrakeTestError)
       got: (#<Airbrake::Notice:0x00007fee0c2d6b60 @config=#<Airbrake::Config:0x00007fee0cb25d98 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fee0e7bf800 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of AirbrakeTestError"]
[0m[32m+[#<Airbrake::Notice:0x00007fee0c2d6b60 @config=#<Airbrake::Config:0x00007fee0cb25d98 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fee0cb25d20 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fee0cb25cd0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fee0cb25c80 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fee0cb25c08>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"after_commit", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>48, :function=>"raise_error_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_commit_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>346, :function=>"committed!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>128, :function=>"commit_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>223, :function=>"block in commit_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>213, :function=>"commit_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>252, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>385, :function=>"with_transaction_returning_status"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>310, :function=>"block in save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>325, :function=>"rollback_active_record_state!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>309, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/suppressor.rb", :line=>44, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/persistence.rb", :line=>36, :function=>"create"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>123, :function=>"active_record_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>104, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: after_commit>, :rack_request=>#<ActionDispatch::Request:0x00007fee0e7bf7d8 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fee0e7ec2d8>, "rack.errors"=>#<StringIO:0x00007fee0e7ec350>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/active_record_after_commit", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fee0cb6ffb0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fee0cb6ff60 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fee0cb6fec0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fee0cb6fe70>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fee12800b08 @filters=[#<Proc:0x00007fee128009a0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fee12800978@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fee12800900@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fee0bff3df8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fee0bff3dd0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fee0bff3bc8 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fee0bff3bf0 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fee0bff3ba0 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fee0b8d47e8 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fee0e6150b8>, "ROUTES_70330210101340_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/active_record_after_commit", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"c14bc2fc-4ac9-495b-985e-36c66978c071", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fee0e7e71e8 @req=#<ActionDispatch::Request:0x00007fee0e7e7210 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7fee0e7e61a8 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fee0e7e6158 @by=#<ActionDispatch::Session::CookieStore:0x00007fee0cebc330 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fee0cebc358 @app=#<Rack::Head:0x00007fee0cebc380 @app=#<Rack::ConditionalGet:0x00007fee0cebc3a8 @app=#<Rack::ETag:0x00007fee0cebc3d0 @app=#<Rack::TempfileReaper:0x00007fee0cebc3f8 @app=#<Warden::Manager:0x00007fee0cebc4c0 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fee0e6150b8>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70330211053640 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"active_record_after_commit"}, "action_controller.instance"=>#<DummyController:0x00007fee0e7e4d30 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fee0e7e5d98 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_commit"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_commit", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fee0e7dfce0 @req=#<ActionDispatch::Request:0x00007fee0e7e5d98 ...>>>, @_response=#<ActionDispatch::Response:0x00007fee0e7e4f60 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fee0e7e4f10>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fee0e7e4ec0 @response=#<ActionDispatch::Response:0x00007fee0e7e4f60 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fee0e7e4e98 @monitor=#<ActionDispatch::Response:0x00007fee0e7e4f60 ...>, @cond=#<Thread::ConditionVariable:0x00007fee0e7e4e70>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fee0e7e5d98 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_commit"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_commit", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fee0e7dfce0 @req=#<ActionDispatch::Request:0x00007fee0e7e5d98 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fee0e7e4bc8 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fee0e7e4ad8 @paths=[#<ActionView::FixtureResolver:0x00007fee0c906760 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fee0c9066c0 keys=4 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="active_record_after_commit", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"active_record_after_commit"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fee0e58e6a8 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-2340366647459730698>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fee0e7bf800 @max_size=10000>>]
[0m):
F, [2019-03-01T20:36:53.307419 #27288] FATAL -- :   
F, [2019-03-01T20:36:53.307447 #27288] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:36:53.308836 #27288]  INFO -- : Started GET "/active_record_after_rollback" for 127.0.0.1 at 2019-03-01 20:36:53 +0200
I, [2019-03-01T20:36:53.309629 #27288]  INFO -- : Processing by DummyController#active_record_after_rollback as HTML
D, [2019-03-01T20:36:53.309878 #27288] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:36:53.311220 #27288] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "Bango"]]
D, [2019-03-01T20:36:53.312413 #27288] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
I, [2019-03-01T20:36:53.313874 #27288]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:36:53.328980 #27288] FATAL -- :   
F, [2019-03-01T20:36:53.329091 #27288] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (an instance of AirbrakeTestError)
       got: (#<Airbrake::Notice:0x00007fee0e6fd9f8 @config=#<Airbrake::Config:0x00007fee0cb25d98 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fee0e6cdf78 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of AirbrakeTestError"]
[0m[32m+[#<Airbrake::Notice:0x00007fee0e6fd9f8 @config=#<Airbrake::Config:0x00007fee0cb25d98 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fee0cb25d20 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fee0cb25cd0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fee0cb25c80 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fee0cb25c08>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"after_rollback", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>52, :function=>"raise_error_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_rollback_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>357, :function=>"rolledback!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>112, :function=>"rollback_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>231, :function=>"block in rollback_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>228, :function=>"rollback_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>242, :function=>"rescue in block in within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>259, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>127, :function=>"active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>114, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}, {:type=>"ActiveRecord::Rollback", :message=>"ActiveRecord::Rollback", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>129, :function=>"block in active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"block in transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>239, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>127, :function=>"active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>114, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: after_rollback>, :rack_request=>#<ActionDispatch::Request:0x00007fee0e6cdf50 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fee0e7679e8>, "rack.errors"=>#<StringIO:0x00007fee0e767a60>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/active_record_after_rollback", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fee0cb6ffb0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fee0cb6ff60 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fee0cb6fec0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fee0cb6fe70>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fee12800b08 @filters=[#<Proc:0x00007fee128009a0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fee12800978@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fee12800900@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fee0bff3df8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fee0bff3dd0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fee0bff3bc8 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fee0bff3bf0 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fee0bff3ba0 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fee0b8d47e8 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fee0e6150b8>, "ROUTES_70330210101340_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/active_record_after_rollback", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"3631c0db-3de8-4212-b3c7-308f4b5ca40e", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fee0e7668e0 @req=#<ActionDispatch::Request:0x00007fee0e766908 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7fee0e765850 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fee0e765800 @by=#<ActionDispatch::Session::CookieStore:0x00007fee0cebc330 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fee0cebc358 @app=#<Rack::Head:0x00007fee0cebc380 @app=#<Rack::ConditionalGet:0x00007fee0cebc3a8 @app=#<Rack::ETag:0x00007fee0cebc3d0 @app=#<Rack::TempfileReaper:0x00007fee0cebc3f8 @app=#<Warden::Manager:0x00007fee0cebc4c0 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fee0e6150b8>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70330210790300 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"active_record_after_rollback"}, "action_controller.instance"=>#<DummyController:0x00007fee0e764360 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fee0e765440 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_rollback"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_rollback", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fee0e74b568 @req=#<ActionDispatch::Request:0x00007fee0e765440 ...>>>, @_response=#<ActionDispatch::Response:0x00007fee0e7645b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fee0e764568>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fee0e764518 @response=#<ActionDispatch::Response:0x00007fee0e7645b8 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fee0e7644f0 @monitor=#<ActionDispatch::Response:0x00007fee0e7645b8 ...>, @cond=#<Thread::ConditionVariable:0x00007fee0e7644c8>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fee0e765440 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_rollback"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_rollback", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fee0e74b568 @req=#<ActionDispatch::Request:0x00007fee0e765440 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fee0e7641f8 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fee0e764108 @paths=[#<ActionView::FixtureResolver:0x00007fee0c906760 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fee0c9066c0 keys=4 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="active_record_after_rollback", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"active_record_after_rollback"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fee0e58e6a8 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-2340366647459730698>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fee0e6cdf78 @max_size=10000>>]
[0m):
F, [2019-03-01T20:36:53.329172 #27288] FATAL -- :   
F, [2019-03-01T20:36:53.329200 #27288] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
D, [2019-03-01T20:37:47.558742 #27307] DEBUG -- :   [1m[35m (0.8ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T20:37:47.559165 #27307] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T20:37:47.561702 #27307] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T20:37:47.562195 #27307] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T20:37:47.562727 #27307] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T20:37:47.564079 #27307] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T20:37:47.573879 #27307] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T20:37:47.577453 #27307] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:37:47.578353 #27307] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 18:37:47.577803"], ["updated_at", "2019-03-01 18:37:47.577803"]]
D, [2019-03-01T20:37:47.578536 #27307] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:37:47.619928 #27307]  INFO -- : Started GET "/active_job" for 127.0.0.1 at 2019-03-01 20:37:47 +0200
I, [2019-03-01T20:37:47.622083 #27307]  INFO -- : Processing by DummyController#active_job as HTML
I, [2019-03-01T20:37:47.625257 #27307]  INFO -- :   Rendering dummy/active_job.html.erb within layouts/application
I, [2019-03-01T20:37:47.627405 #27307]  INFO -- :   Rendered dummy/active_job.html.erb within layouts/application (0.7ms)
I, [2019-03-01T20:37:47.628395 #27307]  INFO -- : Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.0ms)
I, [2019-03-01T20:37:49.636052 #27307]  INFO -- : Started GET "/active_job" for 127.0.0.1 at 2019-03-01 20:37:49 +0200
I, [2019-03-01T20:37:49.637021 #27307]  INFO -- : Processing by DummyController#active_job as HTML
I, [2019-03-01T20:37:49.638367 #27307]  INFO -- :   Rendering dummy/active_job.html.erb within layouts/application
I, [2019-03-01T20:37:49.639364 #27307]  INFO -- :   Rendered dummy/active_job.html.erb within layouts/application (0.3ms)
I, [2019-03-01T20:37:49.639762 #27307]  INFO -- : Completed 200 OK in 3ms (Views: 1.9ms | ActiveRecord: 0.0ms)
I, [2019-03-01T20:37:51.644750 #27307]  INFO -- : Started GET "/active_record_after_rollback" for 127.0.0.1 at 2019-03-01 20:37:51 +0200
I, [2019-03-01T20:37:51.645811 #27307]  INFO -- : Processing by DummyController#active_record_after_rollback as HTML
D, [2019-03-01T20:37:51.646217 #27307] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:37:51.655222 #27307] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "Bango"]]
D, [2019-03-01T20:37:51.656574 #27307] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
I, [2019-03-01T20:37:51.657764 #27307]  INFO -- : Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.6ms)
F, [2019-03-01T20:37:51.681637 #27307] FATAL -- :   
F, [2019-03-01T20:37:51.681754 #27307] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (an instance of AirbrakeTestError)
       got: (#<Airbrake::Notice:0x00007f9b37e1c5d8 @config=#<Airbrake::Config:0x00007f9b37c0bd48 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007f9b38b14ce0 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of AirbrakeTestError"]
[0m[32m+[#<Airbrake::Notice:0x00007f9b37e1c5d8 @config=#<Airbrake::Config:0x00007f9b37c0bd48 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007f9b37c0bcd0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007f9b37c0bc80 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007f9b37c0bc30 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f9b37c0bbb8>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3">, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"after_rollback", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>52, :function=>"raise_error_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_rollback_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>357, :function=>"rolledback!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>112, :function=>"rollback_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>231, :function=>"block in rollback_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>228, :function=>"rollback_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>242, :function=>"rescue in block in within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>259, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>127, :function=>"active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>114, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}, {:type=>"ActiveRecord::Rollback", :message=>"ActiveRecord::Rollback", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>129, :function=>"block in active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"block in transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>239, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>127, :function=>"active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>114, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: after_rollback>, :rack_request=>#<ActionDispatch::Request:0x00007f9b38b14cb8 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007f9b389f7150>, "rack.errors"=>#<StringIO:0x00007f9b389f71c8>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/active_record_after_rollback", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007f9b37caace0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007f9b37caaba0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007f9b37caa8d0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f9b37caa5b0>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007f9b3a649010 @filters=[#<Proc:0x00007f9b3a648ed0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007f9b3a648e80@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007f9b3a648e58@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007f9b3a648728@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007f9b3a648700@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007f9b3a6484f8 @key_generator=#<ActiveSupport::KeyGenerator:0x00007f9b3a648520 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007f9b3a6484d0 entries=0 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007f9b37bf1628 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007f9b381d3ed8>, "ROUTES_70152319049580_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/active_record_after_rollback", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"5868fafa-2b79-4884-98de-47209019749e", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007f9b389f5f58 @req=#<ActionDispatch::Request:0x00007f9b389f5f80 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7f9b389f4ea0 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007f9b389f4e50 @by=#<ActionDispatch::Session::CookieStore:0x00007f9b3a610418 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007f9b3a610440 @app=#<Rack::Head:0x00007f9b3a610468 @app=#<Rack::ConditionalGet:0x00007f9b3a610490 @app=#<Rack::ETag:0x00007f9b3a6104b8 @app=#<Rack::TempfileReaper:0x00007f9b3a6104e0 @app=#<Warden::Manager:0x00007f9b3a6105a8 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007f9b381d3ed8>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70152323311300 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"active_record_after_rollback"}, "action_controller.instance"=>#<DummyController:0x00007f9b38b4ba10 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007f9b389f4a90 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_rollback"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_rollback", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007f9b38b4abb0 @req=#<ActionDispatch::Request:0x00007f9b389f4a90 ...>>>, @_response=#<ActionDispatch::Response:0x00007f9b38b4bc68 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f9b38b4bc18>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007f9b38b4bba0 @response=#<ActionDispatch::Response:0x00007f9b38b4bc68 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007f9b38b4bb78 @monitor=#<ActionDispatch::Response:0x00007f9b38b4bc68 ...>, @cond=#<Thread::ConditionVariable:0x00007f9b38b4bb50>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007f9b389f4a90 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_rollback"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_rollback", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007f9b38b4abb0 @req=#<ActionDispatch::Request:0x00007f9b389f4a90 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007f9b38b4b808 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007f9b38b4b718 @paths=[#<ActionView::FixtureResolver:0x00007f9b37bbbf78 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7f9b37bbbf50 keys=2 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="active_record_after_rollback", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"active_record_after_rollback"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007f9b37d61d78 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=2299530633296271405>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007f9b38b14ce0 @max_size=10000>>]
[0m):
F, [2019-03-01T20:37:51.681831 #27307] FATAL -- :   
F, [2019-03-01T20:37:51.681860 #27307] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:37:51.683349 #27307]  INFO -- : Started GET "/active_record_after_commit" for 127.0.0.1 at 2019-03-01 20:37:51 +0200
I, [2019-03-01T20:37:51.684245 #27307]  INFO -- : Processing by DummyController#active_record_after_commit as HTML
D, [2019-03-01T20:37:51.684664 #27307] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:37:51.685978 #27307] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "Bingo"]]
D, [2019-03-01T20:37:51.687120 #27307] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:37:51.688278 #27307]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:37:51.699238 #27307] FATAL -- :   
F, [2019-03-01T20:37:51.699340 #27307] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (an instance of AirbrakeTestError)
       got: (#<Airbrake::Notice:0x00007f9b3a4422f8 @config=#<Airbrake::Config:0x00007f9b37c0bd48 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007f9b3a42b030 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of AirbrakeTestError"]
[0m[32m+[#<Airbrake::Notice:0x00007f9b3a4422f8 @config=#<Airbrake::Config:0x00007f9b37c0bd48 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007f9b37c0bcd0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007f9b37c0bc80 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007f9b37c0bc30 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f9b37c0bbb8>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3">, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"after_commit", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>48, :function=>"raise_error_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_commit_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>346, :function=>"committed!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>128, :function=>"commit_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>223, :function=>"block in commit_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>213, :function=>"commit_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>252, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>385, :function=>"with_transaction_returning_status"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>310, :function=>"block in save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>325, :function=>"rollback_active_record_state!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>309, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/suppressor.rb", :line=>44, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/persistence.rb", :line=>36, :function=>"create"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>123, :function=>"active_record_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>104, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: after_commit>, :rack_request=>#<ActionDispatch::Request:0x00007f9b3a42b008 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007f9b3a4bdbb0>, "rack.errors"=>#<StringIO:0x00007f9b3a4bdca0>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/active_record_after_commit", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007f9b37caace0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007f9b37caaba0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007f9b37caa8d0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f9b37caa5b0>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007f9b3a649010 @filters=[#<Proc:0x00007f9b3a648ed0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007f9b3a648e80@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007f9b3a648e58@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007f9b3a648728@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007f9b3a648700@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007f9b3a6484f8 @key_generator=#<ActiveSupport::KeyGenerator:0x00007f9b3a648520 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007f9b3a6484d0 entries=0 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007f9b37bf1628 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007f9b381d3ed8>, "ROUTES_70152319049580_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/active_record_after_commit", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"a4fe723a-eaa3-49f6-a6f8-a03432d41a44", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007f9b3a4b7558 @req=#<ActionDispatch::Request:0x00007f9b3a4b7580 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7f9b3a4b56e0 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007f9b3a4b5640 @by=#<ActionDispatch::Session::CookieStore:0x00007f9b3a610418 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007f9b3a610440 @app=#<Rack::Head:0x00007f9b3a610468 @app=#<Rack::ConditionalGet:0x00007f9b3a610490 @app=#<Rack::ETag:0x00007f9b3a6104b8 @app=#<Rack::TempfileReaper:0x00007f9b3a6104e0 @app=#<Warden::Manager:0x00007f9b3a6105a8 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007f9b381d3ed8>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70152337336880 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"active_record_after_commit"}, "action_controller.instance"=>#<DummyController:0x00007f9b3a493bf8 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007f9b3a4b4ce0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_commit"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_commit", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007f9b3a492ed8 @req=#<ActionDispatch::Request:0x00007f9b3a4b4ce0 ...>>>, @_response=#<ActionDispatch::Response:0x00007f9b3a493e28 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f9b3a493dd8>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007f9b3a493d88 @response=#<ActionDispatch::Response:0x00007f9b3a493e28 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007f9b3a493d60 @monitor=#<ActionDispatch::Response:0x00007f9b3a493e28 ...>, @cond=#<Thread::ConditionVariable:0x00007f9b3a493d38>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007f9b3a4b4ce0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_commit"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_commit", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007f9b3a492ed8 @req=#<ActionDispatch::Request:0x00007f9b3a4b4ce0 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007f9b3a493a90 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007f9b3a4939a0 @paths=[#<ActionView::FixtureResolver:0x00007f9b37bbbf78 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7f9b37bbbf50 keys=2 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="active_record_after_commit", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"active_record_after_commit"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007f9b37d61d78 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=2299530633296271405>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007f9b3a42b030 @max_size=10000>>]
[0m):
F, [2019-03-01T20:37:51.699428 #27307] FATAL -- :   
F, [2019-03-01T20:37:51.699455 #27307] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:37:51.700962 #27307]  INFO -- : Started GET "/delayed_job" for 127.0.0.1 at 2019-03-01 20:37:51 +0200
I, [2019-03-01T20:37:51.701894 #27307]  INFO -- : Processing by DummyController#delayed_job as HTML
I, [2019-03-01T20:37:51.715972 #27307]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.4ms)
F, [2019-03-01T20:37:51.725531 #27307] FATAL -- :   
F, [2019-03-01T20:37:51.725637 #27307] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n"))
       got: (#<Airbrake::Notice:0x00007f9b38476258 @config=#<Airbrake::Config:0x00007f9b37c0bd48 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007f9b38446990 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,3 +1,2 @@
[0m[31m-["anything",
[0m[31m- "hash_including(\"handler\"=>\"--- !ruby/struct:BangoJob\\nbingo: bingo\\nbongo: bongo\\n\")"]
[0m[32m+[#<Airbrake::Notice:0x00007f9b38476258 @config=#<Airbrake::Config:0x00007f9b37c0bd48 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007f9b37c0bcd0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007f9b37c0bc80 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007f9b37c0bc30 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f9b37c0bbb8>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3">, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>86, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>142, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>191, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007f9b38446968 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007f9b3a356df8>, "rack.errors"=>#<StringIO:0x00007f9b3a356ee8>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007f9b37caace0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007f9b37caaba0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007f9b37caa8d0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f9b37caa5b0>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007f9b3a649010 @filters=[#<Proc:0x00007f9b3a648ed0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007f9b3a648e80@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007f9b3a648e58@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007f9b3a648728@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007f9b3a648700@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007f9b3a6484f8 @key_generator=#<ActiveSupport::KeyGenerator:0x00007f9b3a648520 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007f9b3a6484d0 entries=0 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007f9b37bf1628 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007f9b381d3ed8>, "ROUTES_70152319049580_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"c6aef715-3f76-4147-bc11-e8fa993a307b", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007f9b3a354b48 @req=#<ActionDispatch::Request:0x00007f9b3a354bc0 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7f9b3a34e838 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007f9b3a34e7c0 @by=#<ActionDispatch::Session::CookieStore:0x00007f9b3a610418 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007f9b3a610440 @app=#<Rack::Head:0x00007f9b3a610468 @app=#<Rack::ConditionalGet:0x00007f9b3a610490 @app=#<Rack::ETag:0x00007f9b3a6104b8 @app=#<Rack::TempfileReaper:0x00007f9b3a6104e0 @app=#<Warden::Manager:0x00007f9b3a6105a8 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007f9b381d3ed8>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70152336601860 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007f9b3a34cf88 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007f9b3a34ded8 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/delayed_job", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007f9b3a345d28 @req=#<ActionDispatch::Request:0x00007f9b3a34ded8 ...>>>, @_response=#<ActionDispatch::Response:0x00007f9b3a34c2e0 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f9b3a34c290>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007f9b3a34c218 @response=#<ActionDispatch::Response:0x00007f9b3a34c2e0 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007f9b3a34c1f0 @monitor=#<ActionDispatch::Response:0x00007f9b3a34c2e0 ...>, @cond=#<Thread::ConditionVariable:0x00007f9b3a34c1c8>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007f9b3a34ded8 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/delayed_job", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007f9b3a345d28 @req=#<ActionDispatch::Request:0x00007f9b3a34ded8 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007f9b3a347da8 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007f9b3a347948 @paths=[#<ActionView::FixtureResolver:0x00007f9b37bbbf78 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7f9b37bbbf50 keys=2 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007f9b37d61d78 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=2299530633296271405>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007f9b38446990 @max_size=10000>>]
[0m):
F, [2019-03-01T20:37:51.725692 #27307] FATAL -- :   
F, [2019-03-01T20:37:51.725716 #27307] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:37:51.727708 #27307]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:37:51 +0200
I, [2019-03-01T20:37:51.728650 #27307]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:37:51.728702 #27307]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:37:51.729199 #27307] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:37:51.730865 #27307] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:37:51.732370 #27307] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:37:51.742272 #27307]  INFO -- : Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:37:51.758341 #27307] FATAL -- :   
F, [2019-03-01T20:37:51.763187 #27307] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:37:51.763226 #27307] FATAL -- :   
F, [2019-03-01T20:37:51.763253 #27307] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:37:51.765336 #27307]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:37:51 +0200
I, [2019-03-01T20:37:51.766127 #27307]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:37:51.766168 #27307]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:37:51.766554 #27307] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:37:51.768144 #27307] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:37:51.769516 #27307] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:37:51.776035 #27307]  INFO -- : Completed 500 Internal Server Error in 10ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:37:51.787449 #27307] FATAL -- :   
F, [2019-03-01T20:37:51.792460 #27307] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:37:51.792502 #27307] FATAL -- :   
F, [2019-03-01T20:37:51.792528 #27307] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:37:51.794514 #27307]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:37:51 +0200
I, [2019-03-01T20:37:51.795350 #27307]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:37:51.795400 #27307]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:37:51.795980 #27307] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:37:51.797892 #27307] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:37:51.799263 #27307] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:37:51.805932 #27307]  INFO -- : Completed 500 Internal Server Error in 10ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:37:51.818015 #27307] FATAL -- :   
F, [2019-03-01T20:37:51.823359 #27307] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:37:51.823397 #27307] FATAL -- :   
F, [2019-03-01T20:37:51.823424 #27307] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:37:51.825544 #27307]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:37:51 +0200
I, [2019-03-01T20:37:51.826562 #27307]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:37:51.826627 #27307]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:37:51.827169 #27307] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:37:51.828965 #27307] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:37:51.830409 #27307] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:37:51.844222 #27307]  INFO -- : Completed 500 Internal Server Error in 17ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:37:51.851001 #27307] FATAL -- :   
F, [2019-03-01T20:37:51.855208 #27307] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:37:51.855248 #27307] FATAL -- :   
F, [2019-03-01T20:37:51.855277 #27307] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:37:51.857119 #27307]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:37:51 +0200
I, [2019-03-01T20:37:51.857897 #27307]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:37:51.857940 #27307]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:37:51.858393 #27307] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:37:51.859870 #27307] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:37:51.861161 #27307] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:37:51.867642 #27307]  INFO -- : Completed 500 Internal Server Error in 10ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:37:51.879033 #27307] FATAL -- :   
F, [2019-03-01T20:37:51.883099 #27307] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:37:51.883134 #27307] FATAL -- :   
F, [2019-03-01T20:37:51.883159 #27307] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:37:51.885334 #27307]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:37:51 +0200
I, [2019-03-01T20:37:51.886096 #27307]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:37:51.886138 #27307]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:37:51.886628 #27307] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:37:51.888187 #27307] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:37:51.889458 #27307] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:37:51.895747 #27307]  INFO -- : Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:37:51.907385 #27307] FATAL -- :   
F, [2019-03-01T20:37:51.911940 #27307] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:37:51.911977 #27307] FATAL -- :   
F, [2019-03-01T20:37:51.912004 #27307] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:37:51.914149 #27307]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:37:51 +0200
I, [2019-03-01T20:37:51.914895 #27307]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:37:51.915303 #27307] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:37:51.916788 #27307] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:37:51.920073 #27307] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:37:51.921795 #27307]  INFO -- : Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:37:51.923942 #27307] FATAL -- :   
F, [2019-03-01T20:37:51.923980 #27307] FATAL -- : RSpec::Expectations::ExpectationNotMetError (
expected: "AirbrakeTestError"
     got: "RSpec::Mocks::MockExpectationError"

(compared using ==)
):
F, [2019-03-01T20:37:51.924006 #27307] FATAL -- :   
F, [2019-03-01T20:37:51.924028 #27307] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:37:51.925152 #27307]  INFO -- : Started GET "/" for 127.0.0.1 at 2019-03-01 20:37:51 +0200
I, [2019-03-01T20:37:51.925741 #27307]  INFO -- : Processing by DummyController#index as HTML
I, [2019-03-01T20:37:51.926435 #27307]  INFO -- :   Rendering dummy/index.html.erb within layouts/application
I, [2019-03-01T20:37:51.926678 #27307]  INFO -- :   Rendered dummy/index.html.erb within layouts/application (0.2ms)
I, [2019-03-01T20:37:51.926935 #27307]  INFO -- : Completed 200 OK in 1ms (Views: 0.8ms | ActiveRecord: 0.0ms)
I, [2019-03-01T20:37:51.928201 #27307]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:37:51 +0200
I, [2019-03-01T20:37:51.928864 #27307]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:37:51.929194 #27307] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:37:51.930462 #27307] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:37:51.931673 #27307] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:37:51.937262 #27307]  INFO -- : Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.1ms)
F, [2019-03-01T20:37:51.952952 #27307] FATAL -- :   
F, [2019-03-01T20:37:51.953048 #27307] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:37:51.953076 #27307] FATAL -- :   
F, [2019-03-01T20:37:51.953100 #27307] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:37:53.959563 #27307]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:37:53 +0200
I, [2019-03-01T20:37:53.960685 #27307]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:37:53.961203 #27307] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:37:53.962999 #27307] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:37:53.964463 #27307] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:37:53.974947 #27307]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:37:53.980255 #27307] FATAL -- :   
F, [2019-03-01T20:37:53.985008 #27307] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:37:53.985063 #27307] FATAL -- :   
F, [2019-03-01T20:37:53.985093 #27307] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:37:55.989713 #27307]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:37:55 +0200
I, [2019-03-01T20:37:55.990774 #27307]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:37:55.991299 #27307] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:37:55.993018 #27307] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:37:55.994459 #27307] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:37:56.004764 #27307]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.3ms)
F, [2019-03-01T20:37:56.010195 #27307] FATAL -- :   
F, [2019-03-01T20:37:56.015130 #27307] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:37:56.015180 #27307] FATAL -- :   
F, [2019-03-01T20:37:56.017278 #27307] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:37:58.025019 #27307]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:37:58 +0200
I, [2019-03-01T20:37:58.026037 #27307]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:37:58.026569 #27307] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:37:58.028449 #27307] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:37:58.029911 #27307] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:37:58.040929 #27307]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:37:58.046522 #27307] FATAL -- :   
F, [2019-03-01T20:37:58.051053 #27307] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:37:58.051095 #27307] FATAL -- :   
F, [2019-03-01T20:37:58.051122 #27307] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:38:00.056077 #27307]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:38:00 +0200
I, [2019-03-01T20:38:00.057014 #27307]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:38:00.057517 #27307] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:38:00.059065 #27307] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:38:00.060619 #27307] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:38:00.071596 #27307]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:38:00.077012 #27307] FATAL -- :   
F, [2019-03-01T20:38:00.081484 #27307] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:38:00.081552 #27307] FATAL -- :   
F, [2019-03-01T20:38:00.081587 #27307] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:38:02.088113 #27307]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:38:02 +0200
I, [2019-03-01T20:38:02.089070 #27307]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:38:02.089628 #27307] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:38:02.091205 #27307] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:38:02.092654 #27307] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:38:02.103599 #27307]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:38:02.109475 #27307] FATAL -- :   
F, [2019-03-01T20:38:02.114146 #27307] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:38:02.114184 #27307] FATAL -- :   
F, [2019-03-01T20:38:02.114211 #27307] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:38:04.119203 #27307]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:38:04 +0200
I, [2019-03-01T20:38:04.121833 #27307]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:38:04.122411 #27307] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:38:04.124052 #27307] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:38:04.127467 #27307] DEBUG -- :   [1m[35m (2.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:38:04.128668 #27307]  INFO -- : Completed 500 Internal Server Error in 7ms (ActiveRecord: 2.1ms)
F, [2019-03-01T20:38:04.130098 #27307] FATAL -- :   
F, [2019-03-01T20:38:04.130134 #27307] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:38:04.130158 #27307] FATAL -- :   
F, [2019-03-01T20:38:04.130183 #27307] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:38:04.132714 #27307]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:38:04 +0200
I, [2019-03-01T20:38:04.133776 #27307]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:38:04.134172 #27307] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:38:04.135945 #27307] DEBUG -- :   [1m[36mBook Create (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:38:04.137516 #27307] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:38:04.147709 #27307]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.3ms)
F, [2019-03-01T20:38:04.153487 #27307] FATAL -- :   
F, [2019-03-01T20:38:04.157600 #27307] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:38:04.157655 #27307] FATAL -- :   
F, [2019-03-01T20:38:04.157683 #27307] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:38:06.160879 #27307]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:38:06 +0200
I, [2019-03-01T20:38:06.161990 #27307]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:38:06.162485 #27307] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:38:06.164068 #27307] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:38:06.165349 #27307] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:38:06.170564 #27307]  INFO -- : Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:38:06.179935 #27307] FATAL -- :   
F, [2019-03-01T20:38:06.184179 #27307] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:38:06.184231 #27307] FATAL -- :   
F, [2019-03-01T20:38:06.184261 #27307] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:38:08.192066 #27307]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:38:08 +0200
I, [2019-03-01T20:38:08.192999 #27307]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:38:08.193564 #27307] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:38:08.195167 #27307] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:38:08.196469 #27307] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:38:08.197823 #27307]  INFO -- : Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:38:08.199280 #27307] FATAL -- :   
F, [2019-03-01T20:38:08.199315 #27307] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:38:08.199339 #27307] FATAL -- :   
F, [2019-03-01T20:38:08.199361 #27307] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:38:08.200650 #27307]  INFO -- : Started HEAD "/crash" for 127.0.0.1 at 2019-03-01 20:38:08 +0200
I, [2019-03-01T20:38:08.204689 #27307]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:38:08.205016 #27307] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:38:08.206136 #27307] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:38:08.207192 #27307] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:38:08.208285 #27307]  INFO -- : Completed 0  in 3ms (ActiveRecord: 0.1ms)
F, [2019-03-01T20:38:08.209532 #27307] FATAL -- :   
F, [2019-03-01T20:38:08.209600 #27307] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:38:08.209658 #27307] FATAL -- :   
F, [2019-03-01T20:38:08.209687 #27307] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:38:08.211330 #27307]  INFO -- : Started GET "/resque" for 127.0.0.1 at 2019-03-01 20:38:08 +0200
I, [2019-03-01T20:38:08.212183 #27307]  INFO -- : Processing by DummyController#resque as HTML
I, [2019-03-01T20:38:08.213832 #27307]  INFO -- :   Rendering dummy/resque.html.erb within layouts/application
I, [2019-03-01T20:38:08.214172 #27307]  INFO -- :   Rendered dummy/resque.html.erb within layouts/application (0.3ms)
I, [2019-03-01T20:38:08.214518 #27307]  INFO -- : Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.0ms)
D, [2019-03-01T20:38:32.983471 #27321] DEBUG -- :   [1m[35m (1.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T20:38:32.983929 #27321] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T20:38:32.986586 #27321] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T20:38:32.987159 #27321] DEBUG -- :   [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T20:38:32.987721 #27321] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T20:38:32.989409 #27321] DEBUG -- :   [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T20:38:32.999584 #27321] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T20:38:33.003091 #27321] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:38:33.003947 #27321] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 18:38:33.003422"], ["updated_at", "2019-03-01 18:38:33.003422"]]
D, [2019-03-01T20:38:33.004128 #27321] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:38:33.043469 #27321]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:38:33 +0200
I, [2019-03-01T20:38:33.045320 #27321]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:38:33.053287 #27321] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:38:33.054951 #27321] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:38:33.056222 #27321] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:38:33.057509 #27321]  INFO -- : Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.6ms)
F, [2019-03-01T20:38:33.058938 #27321] FATAL -- :   
F, [2019-03-01T20:38:33.058978 #27321] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:38:33.059005 #27321] FATAL -- :   
F, [2019-03-01T20:38:33.059030 #27321] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:38:33.060653 #27321]  INFO -- : Started GET "/delayed_job" for 127.0.0.1 at 2019-03-01 20:38:33 +0200
I, [2019-03-01T20:38:33.061487 #27321]  INFO -- : Processing by DummyController#delayed_job as HTML
I, [2019-03-01T20:38:33.075281 #27321]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.4ms)
F, [2019-03-01T20:38:33.094234 #27321] FATAL -- :   
F, [2019-03-01T20:38:33.094330 #27321] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n"))
       got: (#<Airbrake::Notice:0x00007fc1b03aa768 @config=#<Airbrake::Config:0x00007fc1aeae0d68 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fc1b038ece8 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,3 +1,2 @@
[0m[31m-["anything",
[0m[31m- "hash_including(\"handler\"=>\"--- !ruby/struct:BangoJob\\nbingo: bingo\\nbongo: bongo\\n\")"]
[0m[32m+[#<Airbrake::Notice:0x00007fc1b03aa768 @config=#<Airbrake::Config:0x00007fc1aeae0d68 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fc1aeae0cc8 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fc1aeae0c78 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fc1aeae0c28 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fc1aeae0bb0>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3">, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>86, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>142, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>191, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007fc1b038ecc0 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fc1ae5b7bc0>, "rack.errors"=>#<StringIO:0x00007fc1ae5b7918>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fc1aec2a250 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fc1aec2a200 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fc1aec2a110 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fc1aec29ff8>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fc1aef87600 @filters=[#<Proc:0x00007fc1aef874e8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fc1aef874c0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fc1aef87498@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fc1aef86d18@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fc1aef86cf0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fc1aef86ae8 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fc1aef86b10 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fc1aef86ac0 entries=0 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fc1aeadbcc8 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fc1ae2f3790>, "ROUTES_70234913872840_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"a1230d68-85b1-4762-9e15-b33c1326161e", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fc1ae5ae8e0 @req=#<ActionDispatch::Request:0x00007fc1ae5ae908 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7fc1ae5ad198 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fc1ae5ad120 @by=#<ActionDispatch::Session::CookieStore:0x00007fc1b054a2f8 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fc1b054a320 @app=#<Rack::Head:0x00007fc1b054a348 @app=#<Rack::ConditionalGet:0x00007fc1b054a370 @app=#<Rack::ETag:0x00007fc1b054a398 @app=#<Rack::TempfileReaper:0x00007fc1b054a3c0 @app=#<Warden::Manager:0x00007fc1b054a488 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fc1ae2f3790>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70234915301380 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fc1ae5ae8b8 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fc1ae5acbd0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/delayed_job", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fc1ae5a73d8 @req=#<ActionDispatch::Request:0x00007fc1ae5acbd0 ...>>>, @_response=#<ActionDispatch::Response:0x00007fc1ae5addc8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fc1ae5adf58>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fc1ae5ae0e8 @response=#<ActionDispatch::Response:0x00007fc1ae5addc8 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fc1ae5ae200 @monitor=#<ActionDispatch::Response:0x00007fc1ae5addc8 ...>, @cond=#<Thread::ConditionVariable:0x00007fc1ae5ae278>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fc1ae5acbd0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/delayed_job", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fc1ae5a73d8 @req=#<ActionDispatch::Request:0x00007fc1ae5acbd0 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fc1ae5af010 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fc1ae5af4c0 @paths=[#<ActionView::FixtureResolver:0x00007fc1b01634f0 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fc1b0163338 keys=0 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fc1aed69940 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-3195636279063418597>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fc1b038ece8 @max_size=10000>>]
[0m):
F, [2019-03-01T20:38:33.094422 #27321] FATAL -- :   
F, [2019-03-01T20:38:33.094452 #27321] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:38:33.097361 #27321]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:38:33 +0200
I, [2019-03-01T20:38:33.098704 #27321]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:38:33.099139 #27321] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:38:33.100390 #27321] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:38:33.101529 #27321] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:38:33.108097 #27321]  INFO -- : Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:38:33.124276 #27321] FATAL -- :   
F, [2019-03-01T20:38:33.129029 #27321] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:38:33.129090 #27321] FATAL -- :   
F, [2019-03-01T20:38:33.129131 #27321] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:38:35.134681 #27321]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:38:35 +0200
I, [2019-03-01T20:38:35.138939 #27321]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:38:35.139475 #27321] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:38:35.140995 #27321] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:38:35.142273 #27321] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:38:35.148956 #27321]  INFO -- : Completed 500 Internal Server Error in 10ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:38:35.162563 #27321] FATAL -- :   
F, [2019-03-01T20:38:35.166726 #27321] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:38:35.166766 #27321] FATAL -- :   
F, [2019-03-01T20:38:35.166794 #27321] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:38:37.173493 #27321]  INFO -- : Started GET "/active_record_after_rollback" for 127.0.0.1 at 2019-03-01 20:38:37 +0200
I, [2019-03-01T20:38:37.174558 #27321]  INFO -- : Processing by DummyController#active_record_after_rollback as HTML
D, [2019-03-01T20:38:37.174925 #27321] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:38:37.177012 #27321] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "Bango"]]
D, [2019-03-01T20:38:37.178674 #27321] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
I, [2019-03-01T20:38:37.180160 #27321]  INFO -- : Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.3ms)
F, [2019-03-01T20:38:37.196609 #27321] FATAL -- :   
F, [2019-03-01T20:38:37.196713 #27321] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (an instance of AirbrakeTestError)
       got: (#<Airbrake::Notice:0x00007fc1b0528400 @config=#<Airbrake::Config:0x00007fc1aeae0d68 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fc1b04ee9a8 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of AirbrakeTestError"]
[0m[32m+[#<Airbrake::Notice:0x00007fc1b0528400 @config=#<Airbrake::Config:0x00007fc1aeae0d68 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fc1aeae0cc8 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fc1aeae0c78 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fc1aeae0c28 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fc1aeae0bb0>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"after_rollback", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>52, :function=>"raise_error_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_rollback_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>357, :function=>"rolledback!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>112, :function=>"rollback_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>231, :function=>"block in rollback_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>228, :function=>"rollback_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>242, :function=>"rescue in block in within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>259, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>127, :function=>"active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>114, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}, {:type=>"ActiveRecord::Rollback", :message=>"ActiveRecord::Rollback", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>129, :function=>"block in active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"block in transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>239, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>127, :function=>"active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>114, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: after_rollback>, :rack_request=>#<ActionDispatch::Request:0x00007fc1b04ee980 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fc1b206ff88>, "rack.errors"=>#<StringIO:0x00007fc1b2074010>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/active_record_after_rollback", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fc1aec2a250 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fc1aec2a200 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fc1aec2a110 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fc1aec29ff8>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fc1aef87600 @filters=[#<Proc:0x00007fc1aef874e8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fc1aef874c0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fc1aef87498@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fc1aef86d18@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fc1aef86cf0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fc1aef86ae8 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fc1aef86b10 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fc1aef86ac0 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fc1aeadbcc8 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fc1ae2f3790>, "ROUTES_70234913872840_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/active_record_after_rollback", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"1e775122-4973-4a58-94da-423195744826", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fc1b206ee58 @req=#<ActionDispatch::Request:0x00007fc1b206ee80 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7fc1b206dcb0 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fc1b206dc60 @by=#<ActionDispatch::Session::CookieStore:0x00007fc1b054a2f8 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fc1b054a320 @app=#<Rack::Head:0x00007fc1b054a348 @app=#<Rack::ConditionalGet:0x00007fc1b054a370 @app=#<Rack::ETag:0x00007fc1b054a398 @app=#<Rack::TempfileReaper:0x00007fc1b054a3c0 @app=#<Warden::Manager:0x00007fc1b054a488 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fc1ae2f3790>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70234946104780 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"active_record_after_rollback"}, "action_controller.instance"=>#<DummyController:0x00007fc1b206c838 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fc1b206d8a0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_rollback"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_rollback", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fc1b20678b0 @req=#<ActionDispatch::Request:0x00007fc1b206d8a0 ...>>>, @_response=#<ActionDispatch::Response:0x00007fc1b206ca68 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fc1b206ca18>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fc1b206c9c8 @response=#<ActionDispatch::Response:0x00007fc1b206ca68 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fc1b206c9a0 @monitor=#<ActionDispatch::Response:0x00007fc1b206ca68 ...>, @cond=#<Thread::ConditionVariable:0x00007fc1b206c978>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fc1b206d8a0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_rollback"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_rollback", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fc1b20678b0 @req=#<ActionDispatch::Request:0x00007fc1b206d8a0 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fc1b206c6a8 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fc1b206c5b8 @paths=[#<ActionView::FixtureResolver:0x00007fc1b01634f0 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fc1b0163338 keys=0 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="active_record_after_rollback", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"active_record_after_rollback"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fc1aed69940 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-3195636279063418597>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fc1b04ee9a8 @max_size=10000>>]
[0m):
F, [2019-03-01T20:38:37.196785 #27321] FATAL -- :   
F, [2019-03-01T20:38:37.196811 #27321] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:38:37.198298 #27321]  INFO -- : Started GET "/active_record_after_commit" for 127.0.0.1 at 2019-03-01 20:38:37 +0200
I, [2019-03-01T20:38:37.199161 #27321]  INFO -- : Processing by DummyController#active_record_after_commit as HTML
D, [2019-03-01T20:38:37.199570 #27321] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:38:37.200934 #27321] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "Bingo"]]
D, [2019-03-01T20:38:37.202133 #27321] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:38:37.203347 #27321]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:38:37.213877 #27321] FATAL -- :   
F, [2019-03-01T20:38:37.213973 #27321] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (an instance of AirbrakeTestError)
       got: (#<Airbrake::Notice:0x00007fc1afd39bb8 @config=#<Airbrake::Config:0x00007fc1aeae0d68 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fc1ae5741b8 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of AirbrakeTestError"]
[0m[32m+[#<Airbrake::Notice:0x00007fc1afd39bb8 @config=#<Airbrake::Config:0x00007fc1aeae0d68 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fc1aeae0cc8 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fc1aeae0c78 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fc1aeae0c28 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fc1aeae0bb0>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"after_commit", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>48, :function=>"raise_error_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_commit_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>346, :function=>"committed!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>128, :function=>"commit_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>223, :function=>"block in commit_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>213, :function=>"commit_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>252, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>385, :function=>"with_transaction_returning_status"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>310, :function=>"block in save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>325, :function=>"rollback_active_record_state!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>309, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/suppressor.rb", :line=>44, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/persistence.rb", :line=>36, :function=>"create"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>123, :function=>"active_record_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>104, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: after_commit>, :rack_request=>#<ActionDispatch::Request:0x00007fc1ae574190 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fc1b03bef10>, "rack.errors"=>#<StringIO:0x00007fc1b03bef88>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/active_record_after_commit", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fc1aec2a250 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fc1aec2a200 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fc1aec2a110 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fc1aec29ff8>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fc1aef87600 @filters=[#<Proc:0x00007fc1aef874e8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fc1aef874c0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fc1aef87498@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fc1aef86d18@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fc1aef86cf0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fc1aef86ae8 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fc1aef86b10 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fc1aef86ac0 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fc1aeadbcc8 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fc1ae2f3790>, "ROUTES_70234913872840_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/active_record_after_commit", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"5ddef393-9a72-46f2-af14-84ca0b12108d", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fc1b03bdb60 @req=#<ActionDispatch::Request:0x00007fc1b03bdb88 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7fc1b03bc828 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fc1b03bc7d8 @by=#<ActionDispatch::Session::CookieStore:0x00007fc1b054a2f8 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fc1b054a320 @app=#<Rack::Head:0x00007fc1b054a348 @app=#<Rack::ConditionalGet:0x00007fc1b054a370 @app=#<Rack::ETag:0x00007fc1b054a398 @app=#<Rack::TempfileReaper:0x00007fc1b054a3c0 @app=#<Warden::Manager:0x00007fc1b054a488 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fc1ae2f3790>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70234931061640 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"active_record_after_commit"}, "action_controller.instance"=>#<DummyController:0x00007fc1b03bb298 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fc1b03bc3a0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_commit"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_commit", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fc1b03ba0f0 @req=#<ActionDispatch::Request:0x00007fc1b03bc3a0 ...>>>, @_response=#<ActionDispatch::Response:0x00007fc1b03bb518 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fc1b03bb4c8>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fc1b03bb450 @response=#<ActionDispatch::Response:0x00007fc1b03bb518 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fc1b03bb428 @monitor=#<ActionDispatch::Response:0x00007fc1b03bb518 ...>, @cond=#<Thread::ConditionVariable:0x00007fc1b03bb400>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fc1b03bc3a0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_commit"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_commit", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fc1b03ba0f0 @req=#<ActionDispatch::Request:0x00007fc1b03bc3a0 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fc1b03bb130 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fc1b03bafc8 @paths=[#<ActionView::FixtureResolver:0x00007fc1b01634f0 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fc1b0163338 keys=0 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="active_record_after_commit", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"active_record_after_commit"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fc1aed69940 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-3195636279063418597>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fc1ae5741b8 @max_size=10000>>]
[0m):
F, [2019-03-01T20:38:37.214032 #27321] FATAL -- :   
F, [2019-03-01T20:38:37.214059 #27321] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:38:37.215654 #27321]  INFO -- : Started GET "/resque" for 127.0.0.1 at 2019-03-01 20:38:37 +0200
I, [2019-03-01T20:38:37.216464 #27321]  INFO -- : Processing by DummyController#resque as HTML
I, [2019-03-01T20:38:37.219698 #27321]  INFO -- :   Rendering dummy/resque.html.erb within layouts/application
I, [2019-03-01T20:38:37.220365 #27321]  INFO -- :   Rendered dummy/resque.html.erb within layouts/application (0.6ms)
I, [2019-03-01T20:38:37.220804 #27321]  INFO -- : Completed 200 OK in 4ms (Views: 3.1ms | ActiveRecord: 0.0ms)
I, [2019-03-01T20:38:37.223105 #27321]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:38:37 +0200
I, [2019-03-01T20:38:37.224118 #27321]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:38:37.224702 #27321] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:38:37.226391 #27321] DEBUG -- :   [1m[36mBook Create (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:38:37.227956 #27321] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:38:37.229244 #27321]  INFO -- : Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.3ms)
F, [2019-03-01T20:38:37.230704 #27321] FATAL -- :   
F, [2019-03-01T20:38:37.230760 #27321] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:38:37.230787 #27321] FATAL -- :   
F, [2019-03-01T20:38:37.230812 #27321] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:38:37.232510 #27321]  INFO -- : Started HEAD "/crash" for 127.0.0.1 at 2019-03-01 20:38:37 +0200
I, [2019-03-01T20:38:37.238294 #27321]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:38:37.238770 #27321] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:38:37.240375 #27321] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:38:37.242040 #27321] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:38:37.243307 #27321]  INFO -- : Completed 0  in 5ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:38:37.244870 #27321] FATAL -- :   
F, [2019-03-01T20:38:37.244928 #27321] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:38:37.244958 #27321] FATAL -- :   
F, [2019-03-01T20:38:37.244983 #27321] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:38:37.246633 #27321]  INFO -- : Started GET "/active_job" for 127.0.0.1 at 2019-03-01 20:38:37 +0200
I, [2019-03-01T20:38:37.247425 #27321]  INFO -- : Processing by DummyController#active_job as HTML
I, [2019-03-01T20:38:37.248796 #27321]  INFO -- :   Rendering dummy/active_job.html.erb within layouts/application
I, [2019-03-01T20:38:37.249074 #27321]  INFO -- :   Rendered dummy/active_job.html.erb within layouts/application (0.2ms)
I, [2019-03-01T20:38:37.249355 #27321]  INFO -- : Completed 200 OK in 2ms (Views: 0.9ms | ActiveRecord: 0.0ms)
I, [2019-03-01T20:38:39.256342 #27321]  INFO -- : Started GET "/active_job" for 127.0.0.1 at 2019-03-01 20:38:39 +0200
I, [2019-03-01T20:38:39.257457 #27321]  INFO -- : Processing by DummyController#active_job as HTML
I, [2019-03-01T20:38:39.258662 #27321]  INFO -- :   Rendering dummy/active_job.html.erb within layouts/application
I, [2019-03-01T20:38:39.259724 #27321]  INFO -- :   Rendered dummy/active_job.html.erb within layouts/application (0.3ms)
I, [2019-03-01T20:38:39.260127 #27321]  INFO -- : Completed 200 OK in 2ms (Views: 1.9ms | ActiveRecord: 0.0ms)
I, [2019-03-01T20:38:41.266216 #27321]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:38:41 +0200
I, [2019-03-01T20:38:41.267281 #27321]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:38:41.267855 #27321] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:38:41.269611 #27321] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:38:41.271091 #27321] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:38:41.281920 #27321]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:38:41.290878 #27321] FATAL -- :   
F, [2019-03-01T20:38:41.295804 #27321] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:38:41.295847 #27321] FATAL -- :   
F, [2019-03-01T20:38:41.295873 #27321] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:38:43.300999 #27321]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:38:43 +0200
I, [2019-03-01T20:38:43.302060 #27321]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:38:43.302586 #27321] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:38:43.304246 #27321] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:38:43.305713 #27321] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:38:43.318106 #27321]  INFO -- : Completed 500 Internal Server Error in 16ms (ActiveRecord: 0.3ms)
F, [2019-03-01T20:38:43.325307 #27321] FATAL -- :   
F, [2019-03-01T20:38:43.331275 #27321] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:38:43.331325 #27321] FATAL -- :   
F, [2019-03-01T20:38:43.331354 #27321] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:38:45.336129 #27321]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:38:45 +0200
I, [2019-03-01T20:38:45.337171 #27321]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:38:45.337788 #27321] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:38:45.339928 #27321] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:38:45.341387 #27321] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:38:45.357495 #27321]  INFO -- : Completed 500 Internal Server Error in 20ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:38:45.366747 #27321] FATAL -- :   
F, [2019-03-01T20:38:45.374482 #27321] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:38:45.374538 #27321] FATAL -- :   
F, [2019-03-01T20:38:45.374568 #27321] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:38:47.382426 #27321]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:38:47 +0200
I, [2019-03-01T20:38:47.383537 #27321]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:38:47.384054 #27321] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:38:47.386332 #27321] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:38:47.387849 #27321] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:38:47.402181 #27321]  INFO -- : Completed 500 Internal Server Error in 18ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:38:47.409906 #27321] FATAL -- :   
F, [2019-03-01T20:38:47.425764 #27321] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:38:47.425832 #27321] FATAL -- :   
F, [2019-03-01T20:38:47.425859 #27321] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:38:49.430832 #27321]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:38:49 +0200
I, [2019-03-01T20:38:49.431677 #27321]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:38:49.432175 #27321] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:38:49.433975 #27321] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:38:49.435288 #27321] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:38:49.446648 #27321]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:38:49.453365 #27321] FATAL -- :   
F, [2019-03-01T20:38:49.459148 #27321] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:38:49.459193 #27321] FATAL -- :   
F, [2019-03-01T20:38:49.459225 #27321] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:38:51.466201 #27321]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:38:51 +0200
I, [2019-03-01T20:38:51.467283 #27321]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:38:51.467743 #27321] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:38:51.469452 #27321] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:38:51.471010 #27321] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:38:51.480991 #27321]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:38:51.486399 #27321] FATAL -- :   
F, [2019-03-01T20:38:51.490920 #27321] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:38:51.490972 #27321] FATAL -- :   
F, [2019-03-01T20:38:51.491000 #27321] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:38:53.498141 #27321]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:38:53 +0200
I, [2019-03-01T20:38:53.499062 #27321]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:38:53.499543 #27321] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:38:53.501088 #27321] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:38:53.502400 #27321] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:38:53.504161 #27321]  INFO -- : Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:38:53.506472 #27321] FATAL -- :   
F, [2019-03-01T20:38:53.506565 #27321] FATAL -- : RSpec::Expectations::ExpectationNotMetError (
expected: "AirbrakeTestError"
     got: "RSpec::Mocks::MockExpectationError"

(compared using ==)
):
F, [2019-03-01T20:38:53.506594 #27321] FATAL -- :   
F, [2019-03-01T20:38:53.506637 #27321] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:38:53.508212 #27321]  INFO -- : Started GET "/" for 127.0.0.1 at 2019-03-01 20:38:53 +0200
I, [2019-03-01T20:38:53.509070 #27321]  INFO -- : Processing by DummyController#index as HTML
I, [2019-03-01T20:38:53.509950 #27321]  INFO -- :   Rendering dummy/index.html.erb within layouts/application
I, [2019-03-01T20:38:53.510263 #27321]  INFO -- :   Rendered dummy/index.html.erb within layouts/application (0.2ms)
I, [2019-03-01T20:38:53.510552 #27321]  INFO -- : Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
I, [2019-03-01T20:38:53.511949 #27321]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:38:53 +0200
I, [2019-03-01T20:38:53.512745 #27321]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:38:53.512789 #27321]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:38:53.513175 #27321] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:38:53.514786 #27321] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:38:53.516145 #27321] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:38:53.528179 #27321]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:38:53.535972 #27321] FATAL -- :   
F, [2019-03-01T20:38:53.541007 #27321] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:38:53.541122 #27321] FATAL -- :   
F, [2019-03-01T20:38:53.541152 #27321] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:38:53.543327 #27321]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:38:53 +0200
I, [2019-03-01T20:38:53.544082 #27321]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:38:53.544123 #27321]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:38:53.544623 #27321] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:38:53.546065 #27321] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:38:53.547338 #27321] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:38:53.553616 #27321]  INFO -- : Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:38:53.564586 #27321] FATAL -- :   
F, [2019-03-01T20:38:53.569621 #27321] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:38:53.569666 #27321] FATAL -- :   
F, [2019-03-01T20:38:53.569692 #27321] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:38:53.571461 #27321]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:38:53 +0200
I, [2019-03-01T20:38:53.572250 #27321]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:38:53.572291 #27321]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:38:53.572674 #27321] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:38:53.574108 #27321] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:38:53.575240 #27321] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:38:53.581301 #27321]  INFO -- : Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:38:53.593414 #27321] FATAL -- :   
F, [2019-03-01T20:38:53.598512 #27321] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:38:53.598550 #27321] FATAL -- :   
F, [2019-03-01T20:38:53.598577 #27321] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:38:53.600474 #27321]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:38:53 +0200
I, [2019-03-01T20:38:53.601267 #27321]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:38:53.601309 #27321]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:38:53.601712 #27321] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:38:53.603288 #27321] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:38:53.604599 #27321] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:38:53.610785 #27321]  INFO -- : Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:38:53.624714 #27321] FATAL -- :   
F, [2019-03-01T20:38:53.627306 #27321] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:38:53.627345 #27321] FATAL -- :   
F, [2019-03-01T20:38:53.629525 #27321] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:38:53.631378 #27321]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:38:53 +0200
I, [2019-03-01T20:38:53.632195 #27321]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:38:53.632238 #27321]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:38:53.632684 #27321] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:38:53.634162 #27321] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:38:53.635571 #27321] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:38:53.641820 #27321]  INFO -- : Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:38:53.652818 #27321] FATAL -- :   
F, [2019-03-01T20:38:53.657591 #27321] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:38:53.657652 #27321] FATAL -- :   
F, [2019-03-01T20:38:53.657682 #27321] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:38:53.659596 #27321]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:38:53 +0200
I, [2019-03-01T20:38:53.660378 #27321]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:38:53.660419 #27321]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:38:53.660860 #27321] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:38:53.662382 #27321] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:38:53.663988 #27321] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:38:53.670369 #27321]  INFO -- : Completed 500 Internal Server Error in 10ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:38:53.681635 #27321] FATAL -- :   
F, [2019-03-01T20:38:53.686208 #27321] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:38:53.686265 #27321] FATAL -- :   
F, [2019-03-01T20:38:53.686314 #27321] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
D, [2019-03-01T20:39:12.475576 #27336] DEBUG -- :   [1m[35m (1.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T20:39:12.476018 #27336] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T20:39:12.478714 #27336] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T20:39:12.479240 #27336] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T20:39:12.479732 #27336] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T20:39:12.481121 #27336] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T20:39:12.491664 #27336] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T20:39:12.495328 #27336] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:12.496297 #27336] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 18:39:12.495697"], ["updated_at", "2019-03-01 18:39:12.495697"]]
D, [2019-03-01T20:39:12.496490 #27336] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:39:12.543073 #27336]  INFO -- : Started GET "/delayed_job" for 127.0.0.1 at 2019-03-01 20:39:12 +0200
I, [2019-03-01T20:39:12.545173 #27336]  INFO -- : Processing by DummyController#delayed_job as HTML
I, [2019-03-01T20:39:12.563504 #27336]  INFO -- : Completed 500 Internal Server Error in 18ms (ActiveRecord: 0.7ms)
F, [2019-03-01T20:39:12.588473 #27336] FATAL -- :   
F, [2019-03-01T20:39:12.588544 #27336] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n"))
       got: (#<Airbrake::Notice:0x00007fbe2bf18ec0 @config=#<Airbrake::Config:0x00007fbe2bd00cc8 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fbe2bf00438 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,3 +1,2 @@
[0m[31m-["anything",
[0m[31m- "hash_including(\"handler\"=>\"--- !ruby/struct:BangoJob\\nbingo: bingo\\nbongo: bongo\\n\")"]
[0m[32m+[#<Airbrake::Notice:0x00007fbe2bf18ec0 @config=#<Airbrake::Config:0x00007fbe2bd00cc8 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fbe2bd00c50 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fbe2bd00c00 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fbe2bd00bb0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fbe2bd00ae8>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3">, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>86, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>142, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>193, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007fbe2bf00410 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fbe2c2b6528>, "rack.errors"=>#<StringIO:0x00007fbe2c2b65a0>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fbe2b2be9e0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fbe2b2be760 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fbe2b2be5d0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fbe2b2be4b8>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fbe2c2932f8 @filters=[#<Proc:0x00007fbe2c293140@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fbe2c293118@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fbe2c2930a0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fbe2c292538@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fbe2c2924c0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fbe2c2921a0 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fbe2c2921c8 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fbe2c292178 entries=0 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fbe2b43ee28 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fbe2c205c00>, "ROUTES_70227380416000_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"cafe4796-fd68-491a-9f75-ed1f51066ce3", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fbe2bf3ea80 @req=#<ActionDispatch::Request:0x00007fbe2bf3eaa8 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7fbe2bf3d7c0 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fbe2bf3d770 @by=#<ActionDispatch::Session::CookieStore:0x00007fbe2c2b7c70 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fbe2c2b7c98 @app=#<Rack::Head:0x00007fbe2c2b7cc0 @app=#<Rack::ConditionalGet:0x00007fbe2c2b7ce8 @app=#<Rack::ETag:0x00007fbe2c2b7d10 @app=#<Rack::TempfileReaper:0x00007fbe2c2b7d38 @app=#<Warden::Manager:0x00007fbe2c2b7e00 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fbe2c205c00>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70227378957140 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fbe2ddedaa8 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fbe2bf3d310 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/delayed_job", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fbe2ddec338 @req=#<ActionDispatch::Request:0x00007fbe2bf3d310 ...>>>, @_response=#<ActionDispatch::Response:0x00007fbe2ddedf08 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fbe2ddede68>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fbe2ddedda0 @response=#<ActionDispatch::Response:0x00007fbe2ddedf08 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fbe2ddedd00 @monitor=#<ActionDispatch::Response:0x00007fbe2ddedf08 ...>, @cond=#<Thread::ConditionVariable:0x00007fbe2ddedcd8>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fbe2bf3d310 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/delayed_job", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fbe2ddec338 @req=#<ActionDispatch::Request:0x00007fbe2bf3d310 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fbe2dded800 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fbe2dded670 @paths=[#<ActionView::FixtureResolver:0x00007fbe2baa17c0 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fbe2baa16d0 keys=0 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fbe2b494080 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=2021074154483968414>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fbe2bf00438 @max_size=10000>>]
[0m):
F, [2019-03-01T20:39:12.588592 #27336] FATAL -- :   
F, [2019-03-01T20:39:12.588623 #27336] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:39:12.590872 #27336]  INFO -- : Started GET "/active_job" for 127.0.0.1 at 2019-03-01 20:39:12 +0200
I, [2019-03-01T20:39:12.591699 #27336]  INFO -- : Processing by DummyController#active_job as HTML
I, [2019-03-01T20:39:12.596554 #27336]  INFO -- :   Rendering dummy/active_job.html.erb within layouts/application
I, [2019-03-01T20:39:12.599054 #27336]  INFO -- :   Rendered dummy/active_job.html.erb within layouts/application (1.3ms)
I, [2019-03-01T20:39:12.600294 #27336]  INFO -- : Completed 200 OK in 8ms (Views: 7.4ms | ActiveRecord: 0.0ms)
I, [2019-03-01T20:39:14.605706 #27336]  INFO -- : Started GET "/active_job" for 127.0.0.1 at 2019-03-01 20:39:14 +0200
I, [2019-03-01T20:39:14.606686 #27336]  INFO -- : Processing by DummyController#active_job as HTML
I, [2019-03-01T20:39:14.607911 #27336]  INFO -- :   Rendering dummy/active_job.html.erb within layouts/application
I, [2019-03-01T20:39:14.608853 #27336]  INFO -- :   Rendered dummy/active_job.html.erb within layouts/application (0.3ms)
I, [2019-03-01T20:39:14.609217 #27336]  INFO -- : Completed 200 OK in 2ms (Views: 1.7ms | ActiveRecord: 0.0ms)
I, [2019-03-01T20:39:16.613779 #27336]  INFO -- : Started GET "/resque" for 127.0.0.1 at 2019-03-01 20:39:16 +0200
I, [2019-03-01T20:39:16.614813 #27336]  INFO -- : Processing by DummyController#resque as HTML
I, [2019-03-01T20:39:16.616373 #27336]  INFO -- :   Rendering dummy/resque.html.erb within layouts/application
I, [2019-03-01T20:39:16.616651 #27336]  INFO -- :   Rendered dummy/resque.html.erb within layouts/application (0.2ms)
I, [2019-03-01T20:39:16.616950 #27336]  INFO -- : Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.0ms)
I, [2019-03-01T20:39:16.618220 #27336]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:39:16 +0200
I, [2019-03-01T20:39:16.618869 #27336]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:39:16.625190 #27336] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:16.626640 #27336] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:39:16.627986 #27336] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:39:16.634427 #27336]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.5ms)
F, [2019-03-01T20:39:16.650173 #27336] FATAL -- :   
F, [2019-03-01T20:39:16.654859 #27336] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:39:16.654921 #27336] FATAL -- :   
F, [2019-03-01T20:39:16.654958 #27336] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:39:18.661591 #27336]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:39:18 +0200
I, [2019-03-01T20:39:18.662628 #27336]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:39:18.663249 #27336] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:18.668442 #27336] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:39:18.669764 #27336] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:39:18.680247 #27336]  INFO -- : Completed 500 Internal Server Error in 17ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:39:18.686254 #27336] FATAL -- :   
F, [2019-03-01T20:39:18.690856 #27336] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:39:18.690901 #27336] FATAL -- :   
F, [2019-03-01T20:39:18.690929 #27336] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:39:20.698269 #27336]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:39:20 +0200
I, [2019-03-01T20:39:20.699263 #27336]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:39:20.699759 #27336] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:20.701707 #27336] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:39:20.703266 #27336] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:39:20.714199 #27336]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:39:20.720109 #27336] FATAL -- :   
F, [2019-03-01T20:39:20.725040 #27336] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:39:20.725091 #27336] FATAL -- :   
F, [2019-03-01T20:39:20.725118 #27336] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:39:22.729220 #27336]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:39:22 +0200
I, [2019-03-01T20:39:22.730022 #27336]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:39:22.730511 #27336] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:22.731964 #27336] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:39:22.733167 #27336] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:39:22.744490 #27336]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:39:22.751318 #27336] FATAL -- :   
F, [2019-03-01T20:39:22.756323 #27336] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:39:22.756403 #27336] FATAL -- :   
F, [2019-03-01T20:39:22.756436 #27336] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:39:24.762877 #27336]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:39:24 +0200
I, [2019-03-01T20:39:24.763870 #27336]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:39:24.764368 #27336] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:24.766166 #27336] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:39:24.767648 #27336] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:39:24.781031 #27336]  INFO -- : Completed 500 Internal Server Error in 17ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:39:24.786774 #27336] FATAL -- :   
F, [2019-03-01T20:39:24.791396 #27336] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:39:24.791442 #27336] FATAL -- :   
F, [2019-03-01T20:39:24.791470 #27336] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:39:26.798696 #27336]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:39:26 +0200
I, [2019-03-01T20:39:26.799679 #27336]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:39:26.800137 #27336] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:26.801733 #27336] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:39:26.803205 #27336] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:39:26.814124 #27336]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:39:26.820250 #27336] FATAL -- :   
F, [2019-03-01T20:39:26.824314 #27336] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:39:26.824360 #27336] FATAL -- :   
F, [2019-03-01T20:39:26.824408 #27336] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:39:28.831352 #27336]  INFO -- : Started GET "/active_record_after_rollback" for 127.0.0.1 at 2019-03-01 20:39:28 +0200
I, [2019-03-01T20:39:28.832441 #27336]  INFO -- : Processing by DummyController#active_record_after_rollback as HTML
D, [2019-03-01T20:39:28.832868 #27336] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:28.834730 #27336] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "Bango"]]
D, [2019-03-01T20:39:28.836033 #27336] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
I, [2019-03-01T20:39:28.837285 #27336]  INFO -- : Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:39:28.853210 #27336] FATAL -- :   
F, [2019-03-01T20:39:28.853295 #27336] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (an instance of AirbrakeTestError)
       got: (#<Airbrake::Notice:0x00007fbe2b599340 @config=#<Airbrake::Config:0x00007fbe2bd00cc8 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fbe2e027968 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of AirbrakeTestError"]
[0m[32m+[#<Airbrake::Notice:0x00007fbe2b599340 @config=#<Airbrake::Config:0x00007fbe2bd00cc8 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fbe2bd00c50 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fbe2bd00c00 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fbe2bd00bb0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fbe2bd00ae8>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"after_rollback", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>52, :function=>"raise_error_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_rollback_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>357, :function=>"rolledback!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>112, :function=>"rollback_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>231, :function=>"block in rollback_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>228, :function=>"rollback_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>242, :function=>"rescue in block in within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>259, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>127, :function=>"active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>116, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}, {:type=>"ActiveRecord::Rollback", :message=>"ActiveRecord::Rollback", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>129, :function=>"block in active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"block in transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>239, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>127, :function=>"active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>116, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: after_rollback>, :rack_request=>#<ActionDispatch::Request:0x00007fbe2e0278c8 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fbe2b5b5450>, "rack.errors"=>#<StringIO:0x00007fbe2b5b54c8>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/active_record_after_rollback", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fbe2b2be9e0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fbe2b2be760 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fbe2b2be5d0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fbe2b2be4b8>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fbe2c2932f8 @filters=[#<Proc:0x00007fbe2c293140@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fbe2c293118@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fbe2c2930a0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fbe2c292538@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fbe2c2924c0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fbe2c2921a0 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fbe2c2921c8 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fbe2c292178 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fbe2b43ee28 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fbe2c205c00>, "ROUTES_70227380416000_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/active_record_after_rollback", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"c16cf4b0-9b43-4774-8a61-09ca0524a1c8", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fbe2b5a3e08 @req=#<ActionDispatch::Request:0x00007fbe2b5a3e30 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7fbe2b5a2a30 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fbe2b5a28c8 @by=#<ActionDispatch::Session::CookieStore:0x00007fbe2c2b7c70 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fbe2c2b7c98 @app=#<Rack::Head:0x00007fbe2c2b7cc0 @app=#<Rack::ConditionalGet:0x00007fbe2c2b7ce8 @app=#<Rack::ETag:0x00007fbe2c2b7d10 @app=#<Rack::TempfileReaper:0x00007fbe2c2b7d38 @app=#<Warden::Manager:0x00007fbe2c2b7e00 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fbe2c205c00>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70227373921280 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"active_record_after_rollback"}, "action_controller.instance"=>#<DummyController:0x00007fbe2b5a1478 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fbe2b5a24e0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_rollback"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_rollback", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fbe2b5a0730 @req=#<ActionDispatch::Request:0x00007fbe2b5a24e0 ...>>>, @_response=#<ActionDispatch::Response:0x00007fbe2b5a16a8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fbe2b5a1658>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fbe2b5a1608 @response=#<ActionDispatch::Response:0x00007fbe2b5a16a8 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fbe2b5a15e0 @monitor=#<ActionDispatch::Response:0x00007fbe2b5a16a8 ...>, @cond=#<Thread::ConditionVariable:0x00007fbe2b5a15b8>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fbe2b5a24e0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_rollback"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_rollback", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fbe2b5a0730 @req=#<ActionDispatch::Request:0x00007fbe2b5a24e0 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fbe2b5a1310 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fbe2b5a1220 @paths=[#<ActionView::FixtureResolver:0x00007fbe2baa17c0 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fbe2baa16d0 keys=3 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="active_record_after_rollback", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"active_record_after_rollback"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fbe2b494080 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=2021074154483968414>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fbe2e027968 @max_size=10000>>]
[0m):
F, [2019-03-01T20:39:28.853378 #27336] FATAL -- :   
F, [2019-03-01T20:39:28.853406 #27336] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:39:28.855011 #27336]  INFO -- : Started GET "/active_record_after_commit" for 127.0.0.1 at 2019-03-01 20:39:28 +0200
I, [2019-03-01T20:39:28.855918 #27336]  INFO -- : Processing by DummyController#active_record_after_commit as HTML
D, [2019-03-01T20:39:28.856331 #27336] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:28.857779 #27336] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "Bingo"]]
D, [2019-03-01T20:39:28.858946 #27336] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:39:28.860144 #27336]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:39:28.871481 #27336] FATAL -- :   
F, [2019-03-01T20:39:28.871568 #27336] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (an instance of AirbrakeTestError)
       got: (#<Airbrake::Notice:0x00007fbe2db059f8 @config=#<Airbrake::Config:0x00007fbe2bd00cc8 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fbe2d8853b8 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of AirbrakeTestError"]
[0m[32m+[#<Airbrake::Notice:0x00007fbe2db059f8 @config=#<Airbrake::Config:0x00007fbe2bd00cc8 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fbe2bd00c50 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fbe2bd00c00 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fbe2bd00bb0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fbe2bd00ae8>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"after_commit", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>48, :function=>"raise_error_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_commit_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>346, :function=>"committed!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>128, :function=>"commit_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>223, :function=>"block in commit_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>213, :function=>"commit_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>252, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>385, :function=>"with_transaction_returning_status"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>310, :function=>"block in save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>325, :function=>"rollback_active_record_state!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>309, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/suppressor.rb", :line=>44, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/persistence.rb", :line=>36, :function=>"create"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>123, :function=>"active_record_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>106, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: after_commit>, :rack_request=>#<ActionDispatch::Request:0x00007fbe2d885318 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fbe2bd91778>, "rack.errors"=>#<StringIO:0x00007fbe2bd91908>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/active_record_after_commit", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fbe2b2be9e0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fbe2b2be760 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fbe2b2be5d0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fbe2b2be4b8>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fbe2c2932f8 @filters=[#<Proc:0x00007fbe2c293140@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fbe2c293118@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fbe2c2930a0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fbe2c292538@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fbe2c2924c0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fbe2c2921a0 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fbe2c2921c8 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fbe2c292178 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fbe2b43ee28 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fbe2c205c00>, "ROUTES_70227380416000_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/active_record_after_commit", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"ef552810-088e-43d2-8ca9-c83b3431e5d3", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fbe2bd89dc0 @req=#<ActionDispatch::Request:0x00007fbe2bd89de8 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7fbe2bd88268 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fbe2bd881a0 @by=#<ActionDispatch::Session::CookieStore:0x00007fbe2c2b7c70 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fbe2c2b7c98 @app=#<Rack::Head:0x00007fbe2c2b7cc0 @app=#<Rack::ConditionalGet:0x00007fbe2c2b7ce8 @app=#<Rack::ETag:0x00007fbe2c2b7d10 @app=#<Rack::TempfileReaper:0x00007fbe2c2b7d38 @app=#<Warden::Manager:0x00007fbe2c2b7e00 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fbe2c205c00>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70227378052980 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"active_record_after_commit"}, "action_controller.instance"=>#<DummyController:0x00007fbe2bd812b0 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fbe2bd838a8 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_commit"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_commit", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fbe2bd7aa00 @req=#<ActionDispatch::Request:0x00007fbe2bd838a8 ...>>>, @_response=#<ActionDispatch::Response:0x00007fbe2bd81620 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fbe2bd815a8>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fbe2bd81558 @response=#<ActionDispatch::Response:0x00007fbe2bd81620 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fbe2bd81530 @monitor=#<ActionDispatch::Response:0x00007fbe2bd81620 ...>, @cond=#<Thread::ConditionVariable:0x00007fbe2bd81490>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fbe2bd838a8 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_commit"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_commit", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fbe2bd7aa00 @req=#<ActionDispatch::Request:0x00007fbe2bd838a8 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fbe2bd810f8 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fbe2bd80f68 @paths=[#<ActionView::FixtureResolver:0x00007fbe2baa17c0 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fbe2baa16d0 keys=3 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="active_record_after_commit", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"active_record_after_commit"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fbe2b494080 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=2021074154483968414>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fbe2d8853b8 @max_size=10000>>]
[0m):
F, [2019-03-01T20:39:28.871622 #27336] FATAL -- :   
F, [2019-03-01T20:39:28.871659 #27336] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:39:28.873428 #27336]  INFO -- : Started HEAD "/crash" for 127.0.0.1 at 2019-03-01 20:39:28 +0200
I, [2019-03-01T20:39:28.879917 #27336]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:39:28.880373 #27336] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:28.881820 #27336] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:39:28.882925 #27336] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:39:28.884160 #27336]  INFO -- : Completed 0  in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:39:28.885451 #27336] FATAL -- :   
F, [2019-03-01T20:39:28.885492 #27336] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:39:28.885518 #27336] FATAL -- :   
F, [2019-03-01T20:39:28.885545 #27336] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:39:28.887192 #27336]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:39:28 +0200
I, [2019-03-01T20:39:28.887902 #27336]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:39:28.888287 #27336] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:28.889522 #27336] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:39:28.890571 #27336] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:39:28.891622 #27336]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:39:28.893009 #27336] FATAL -- :   
F, [2019-03-01T20:39:28.893048 #27336] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:39:28.893072 #27336] FATAL -- :   
F, [2019-03-01T20:39:28.893095 #27336] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:39:28.894609 #27336]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:39:28 +0200
I, [2019-03-01T20:39:28.895282 #27336]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:39:28.895695 #27336] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:28.897060 #27336] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:39:28.898322 #27336] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:39:28.899682 #27336]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:39:28.901075 #27336] FATAL -- :   
F, [2019-03-01T20:39:28.901143 #27336] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:39:28.901170 #27336] FATAL -- :   
F, [2019-03-01T20:39:28.901195 #27336] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:39:28.903729 #27336]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:39:28 +0200
I, [2019-03-01T20:39:28.904775 #27336]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:39:28.905173 #27336] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:28.906340 #27336] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:39:28.907424 #27336] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:39:28.918126 #27336]  INFO -- : Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:39:28.925087 #27336] FATAL -- :   
F, [2019-03-01T20:39:28.929757 #27336] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:39:28.929812 #27336] FATAL -- :   
F, [2019-03-01T20:39:28.929855 #27336] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:39:30.936578 #27336]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:39:30 +0200
I, [2019-03-01T20:39:30.937719 #27336]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:39:30.937772 #27336]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:39:30.938270 #27336] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:30.939917 #27336] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:39:30.941312 #27336] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:39:30.947399 #27336]  INFO -- : Completed 500 Internal Server Error in 10ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:39:30.958260 #27336] FATAL -- :   
F, [2019-03-01T20:39:30.963512 #27336] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:39:30.963561 #27336] FATAL -- :   
F, [2019-03-01T20:39:30.963595 #27336] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:39:30.965546 #27336]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:39:30 +0200
I, [2019-03-01T20:39:30.966502 #27336]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:39:30.966547 #27336]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:39:30.966947 #27336] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:30.968523 #27336] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:39:30.969721 #27336] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:39:30.975920 #27336]  INFO -- : Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:39:30.988973 #27336] FATAL -- :   
F, [2019-03-01T20:39:30.993624 #27336] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:39:30.993670 #27336] FATAL -- :   
F, [2019-03-01T20:39:30.993698 #27336] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:39:30.995521 #27336]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:39:30 +0200
I, [2019-03-01T20:39:30.996440 #27336]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:39:30.996482 #27336]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:39:30.996905 #27336] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:30.998338 #27336] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:39:30.999611 #27336] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:39:31.005537 #27336]  INFO -- : Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:39:31.016367 #27336] FATAL -- :   
F, [2019-03-01T20:39:31.020694 #27336] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:39:31.020730 #27336] FATAL -- :   
F, [2019-03-01T20:39:31.020756 #27336] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:39:31.022538 #27336]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:39:31 +0200
I, [2019-03-01T20:39:31.023451 #27336]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:39:31.023502 #27336]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:39:31.023928 #27336] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:31.025358 #27336] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:39:31.026623 #27336] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:39:31.032373 #27336]  INFO -- : Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:39:31.043093 #27336] FATAL -- :   
F, [2019-03-01T20:39:31.047651 #27336] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:39:31.047723 #27336] FATAL -- :   
F, [2019-03-01T20:39:31.047761 #27336] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:39:31.049624 #27336]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:39:31 +0200
I, [2019-03-01T20:39:31.050531 #27336]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:39:31.050572 #27336]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:39:31.050972 #27336] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:31.052507 #27336] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:39:31.053820 #27336] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:39:31.062345 #27336]  INFO -- : Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:39:31.072171 #27336] FATAL -- :   
F, [2019-03-01T20:39:31.076324 #27336] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:39:31.076361 #27336] FATAL -- :   
F, [2019-03-01T20:39:31.076386 #27336] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:39:31.078287 #27336]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:39:31 +0200
I, [2019-03-01T20:39:31.079253 #27336]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:39:31.079294 #27336]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:39:31.079746 #27336] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:31.081291 #27336] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:39:31.082670 #27336] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:39:31.088159 #27336]  INFO -- : Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:39:31.098608 #27336] FATAL -- :   
F, [2019-03-01T20:39:31.103447 #27336] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:39:31.103500 #27336] FATAL -- :   
F, [2019-03-01T20:39:31.103526 #27336] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:39:31.105788 #27336]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:39:31 +0200
I, [2019-03-01T20:39:31.106553 #27336]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:39:31.107048 #27336] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:31.108552 #27336] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:39:31.109835 #27336] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:39:31.111468 #27336]  INFO -- : Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:39:31.113328 #27336] FATAL -- :   
F, [2019-03-01T20:39:31.113370 #27336] FATAL -- : RSpec::Expectations::ExpectationNotMetError (
expected: "AirbrakeTestError"
     got: "RSpec::Mocks::MockExpectationError"

(compared using ==)
):
F, [2019-03-01T20:39:31.113397 #27336] FATAL -- :   
F, [2019-03-01T20:39:31.113421 #27336] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:39:31.114830 #27336]  INFO -- : Started GET "/" for 127.0.0.1 at 2019-03-01 20:39:31 +0200
I, [2019-03-01T20:39:31.115572 #27336]  INFO -- : Processing by DummyController#index as HTML
I, [2019-03-01T20:39:31.116378 #27336]  INFO -- :   Rendering dummy/index.html.erb within layouts/application
I, [2019-03-01T20:39:31.116645 #27336]  INFO -- :   Rendered dummy/index.html.erb within layouts/application (0.2ms)
I, [2019-03-01T20:39:31.116931 #27336]  INFO -- : Completed 200 OK in 1ms (Views: 0.9ms | ActiveRecord: 0.0ms)
I, [2019-03-01T20:39:31.118116 #27336]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:39:31 +0200
I, [2019-03-01T20:39:31.118906 #27336]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:39:31.119309 #27336] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:31.120679 #27336] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:39:31.121893 #27336] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:39:31.128062 #27336]  INFO -- : Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:39:31.137688 #27336] FATAL -- :   
F, [2019-03-01T20:39:31.141454 #27336] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:39:31.144846 #27336] FATAL -- :   
F, [2019-03-01T20:39:31.144893 #27336] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
D, [2019-03-01T20:39:41.935862 #27359] DEBUG -- :   [1m[35m (1.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T20:39:41.936305 #27359] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T20:39:41.939001 #27359] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T20:39:41.939512 #27359] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T20:39:41.940022 #27359] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T20:39:41.941393 #27359] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T20:39:41.951295 #27359] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T20:39:41.954493 #27359] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:41.955561 #27359] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 18:39:41.954854"], ["updated_at", "2019-03-01 18:39:41.954854"]]
D, [2019-03-01T20:39:41.955788 #27359] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:39:41.995393 #27359]  INFO -- : Started GET "/delayed_job" for 127.0.0.1 at 2019-03-01 20:39:41 +0200
I, [2019-03-01T20:39:41.997315 #27359]  INFO -- : Processing by DummyController#delayed_job as HTML
I, [2019-03-01T20:39:42.013448 #27359]  INFO -- : Completed 500 Internal Server Error in 16ms (ActiveRecord: 0.5ms)
F, [2019-03-01T20:39:42.032731 #27359] FATAL -- :   
F, [2019-03-01T20:39:42.032835 #27359] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n"))
       got: (#<Airbrake::Notice:0x00007fb276df3998 @config=#<Airbrake::Config:0x00007fb276ac8250 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fb276ddda58 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,3 +1,2 @@
[0m[31m-["anything",
[0m[31m- "hash_including(\"handler\"=>\"--- !ruby/struct:BangoJob\\nbingo: bingo\\nbongo: bongo\\n\")"]
[0m[32m+[#<Airbrake::Notice:0x00007fb276df3998 @config=#<Airbrake::Config:0x00007fb276ac8250 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fb276ac81b0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fb276ac8160 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fb276ac8110 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fb276ac8098>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3">, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>86, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>142, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>193, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007fb276ddda08 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fb276f0eaa8>, "rack.errors"=>#<StringIO:0x00007fb276f0eb20>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fb2785a1680 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fb2785a15e0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fb2785a1540 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fb2785a1478>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fb276efd118 @filters=[#<Proc:0x00007fb276efd000@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fb276efcfd8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fb276efcfb0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fb276efc880@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fb276efc858@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fb276efc650 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fb276efc678 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fb276efc600 entries=0 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fb276ad8448 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fb2782fd1b8>, "ROUTES_70202248653020_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"6d089745-2c9f-4fe0-b6c2-5141ea8be7bf", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fb276ede9e8 @req=#<ActionDispatch::Request:0x00007fb276edea10 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7fb276edd6d8 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fb276edd688 @by=#<ActionDispatch::Session::CookieStore:0x00007fb27d1560d0 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fb27d1560f8 @app=#<Rack::Head:0x00007fb27d156120 @app=#<Rack::ConditionalGet:0x00007fb27d156148 @app=#<Rack::ETag:0x00007fb27d156170 @app=#<Rack::TempfileReaper:0x00007fb27d156198 @app=#<Warden::Manager:0x00007fb27d156260 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fb2782fd1b8>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70202238102240 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fb276ecee30 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fb276edd250 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/delayed_job", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fb276ecd468 @req=#<ActionDispatch::Request:0x00007fb276edd250 ...>>>, @_response=#<ActionDispatch::Response:0x00007fb276ecf448 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fb276ecf3a8>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fb276ecf1a0 @response=#<ActionDispatch::Response:0x00007fb276ecf448 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fb276ecf060 @monitor=#<ActionDispatch::Response:0x00007fb276ecf448 ...>, @cond=#<Thread::ConditionVariable:0x00007fb276ecf038>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fb276edd250 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/delayed_job", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fb276ecd468 @req=#<ActionDispatch::Request:0x00007fb276edd250 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fb276eceb60 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fb276ece9d0 @paths=[#<ActionView::FixtureResolver:0x00007fb2778bb588 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fb2778bb560 keys=0 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fb276bab0a0 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=3174197725010687349>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fb276ddda58 @max_size=10000>>]
[0m):
F, [2019-03-01T20:39:42.032909 #27359] FATAL -- :   
F, [2019-03-01T20:39:42.032941 #27359] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:39:42.035296 #27359]  INFO -- : Started GET "/active_job" for 127.0.0.1 at 2019-03-01 20:39:42 +0200
I, [2019-03-01T20:39:42.036166 #27359]  INFO -- : Processing by DummyController#active_job as HTML
I, [2019-03-01T20:39:42.041715 #27359]  INFO -- :   Rendering dummy/active_job.html.erb within layouts/application
I, [2019-03-01T20:39:42.043422 #27359]  INFO -- :   Rendered dummy/active_job.html.erb within layouts/application (1.0ms)
I, [2019-03-01T20:39:42.044812 #27359]  INFO -- : Completed 200 OK in 9ms (Views: 7.4ms | ActiveRecord: 0.0ms)
I, [2019-03-01T20:39:44.050329 #27359]  INFO -- : Started GET "/active_job" for 127.0.0.1 at 2019-03-01 20:39:44 +0200
I, [2019-03-01T20:39:44.051326 #27359]  INFO -- : Processing by DummyController#active_job as HTML
I, [2019-03-01T20:39:44.053123 #27359]  INFO -- :   Rendering dummy/active_job.html.erb within layouts/application
I, [2019-03-01T20:39:44.053449 #27359]  INFO -- :   Rendered dummy/active_job.html.erb within layouts/application (0.3ms)
I, [2019-03-01T20:39:44.053770 #27359]  INFO -- : Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.0ms)
I, [2019-03-01T20:39:46.060200 #27359]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:39:46 +0200
I, [2019-03-01T20:39:46.061584 #27359]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:39:46.068080 #27359] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:46.069574 #27359] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:39:46.070675 #27359] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:39:46.076568 #27359]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.5ms)
F, [2019-03-01T20:39:46.092688 #27359] FATAL -- :   
F, [2019-03-01T20:39:46.097103 #27359] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:39:46.097159 #27359] FATAL -- :   
F, [2019-03-01T20:39:46.097187 #27359] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:39:48.103480 #27359]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:39:48 +0200
I, [2019-03-01T20:39:48.104644 #27359]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:39:48.104698 #27359]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:39:48.105200 #27359] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:48.106807 #27359] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:39:48.108090 #27359] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:39:48.117183 #27359]  INFO -- : Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:39:48.123195 #27359] FATAL -- :   
F, [2019-03-01T20:39:48.132479 #27359] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:39:48.132540 #27359] FATAL -- :   
F, [2019-03-01T20:39:48.132568 #27359] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:39:48.134425 #27359]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:39:48 +0200
I, [2019-03-01T20:39:48.135371 #27359]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:39:48.135414 #27359]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:39:48.135818 #27359] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:48.137215 #27359] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:39:48.138476 #27359] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:39:48.144621 #27359]  INFO -- : Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:39:48.154879 #27359] FATAL -- :   
F, [2019-03-01T20:39:48.159390 #27359] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:39:48.159426 #27359] FATAL -- :   
F, [2019-03-01T20:39:48.159451 #27359] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:39:48.161384 #27359]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:39:48 +0200
I, [2019-03-01T20:39:48.162276 #27359]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:39:48.162318 #27359]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:39:48.162677 #27359] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:48.164149 #27359] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:39:48.165364 #27359] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:39:48.171824 #27359]  INFO -- : Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:39:48.182566 #27359] FATAL -- :   
F, [2019-03-01T20:39:48.187007 #27359] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:39:48.187042 #27359] FATAL -- :   
F, [2019-03-01T20:39:48.187074 #27359] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:39:48.188885 #27359]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:39:48 +0200
I, [2019-03-01T20:39:48.189734 #27359]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:39:48.189773 #27359]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:39:48.190173 #27359] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:48.191569 #27359] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:39:48.192822 #27359] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:39:48.198835 #27359]  INFO -- : Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:39:48.210090 #27359] FATAL -- :   
F, [2019-03-01T20:39:48.215600 #27359] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:39:48.215674 #27359] FATAL -- :   
F, [2019-03-01T20:39:48.215712 #27359] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:39:48.217527 #27359]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:39:48 +0200
I, [2019-03-01T20:39:48.218418 #27359]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:39:48.218458 #27359]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:39:48.218885 #27359] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:48.220356 #27359] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:39:48.221542 #27359] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:39:48.227829 #27359]  INFO -- : Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:39:48.238122 #27359] FATAL -- :   
F, [2019-03-01T20:39:48.242170 #27359] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:39:48.242211 #27359] FATAL -- :   
F, [2019-03-01T20:39:48.242239 #27359] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:39:48.244196 #27359]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 20:39:48 +0200
I, [2019-03-01T20:39:48.245138 #27359]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T20:39:48.245184 #27359]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T20:39:48.245628 #27359] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:48.247028 #27359] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:39:48.248185 #27359] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:39:48.253995 #27359]  INFO -- : Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:39:48.259869 #27359] FATAL -- :   
F, [2019-03-01T20:39:48.270101 #27359] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:39:48.270166 #27359] FATAL -- :   
F, [2019-03-01T20:39:48.270193 #27359] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:39:48.272504 #27359]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:39:48 +0200
I, [2019-03-01T20:39:48.273216 #27359]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:39:48.273593 #27359] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:48.274986 #27359] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:39:48.276085 #27359] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:39:48.277422 #27359]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:39:48.278887 #27359] FATAL -- :   
F, [2019-03-01T20:39:48.278943 #27359] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:39:48.278968 #27359] FATAL -- :   
F, [2019-03-01T20:39:48.278991 #27359] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:39:48.280288 #27359]  INFO -- : Started HEAD "/crash" for 127.0.0.1 at 2019-03-01 20:39:48 +0200
I, [2019-03-01T20:39:48.284927 #27359]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:39:48.285318 #27359] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:48.289291 #27359] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:39:48.290573 #27359] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:39:48.292007 #27359]  INFO -- : Completed 0  in 7ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:39:48.293248 #27359] FATAL -- :   
F, [2019-03-01T20:39:48.293283 #27359] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:39:48.293307 #27359] FATAL -- :   
F, [2019-03-01T20:39:48.293330 #27359] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:39:48.294863 #27359]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:39:48 +0200
I, [2019-03-01T20:39:48.295676 #27359]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:39:48.296123 #27359] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:48.297569 #27359] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:39:48.298837 #27359] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:39:48.300490 #27359]  INFO -- : Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:39:48.302285 #27359] FATAL -- :   
F, [2019-03-01T20:39:48.302322 #27359] FATAL -- : RSpec::Expectations::ExpectationNotMetError (
expected: "AirbrakeTestError"
     got: "RSpec::Mocks::MockExpectationError"

(compared using ==)
):
F, [2019-03-01T20:39:48.302346 #27359] FATAL -- :   
F, [2019-03-01T20:39:48.302367 #27359] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:39:48.303722 #27359]  INFO -- : Started GET "/" for 127.0.0.1 at 2019-03-01 20:39:48 +0200
I, [2019-03-01T20:39:48.304382 #27359]  INFO -- : Processing by DummyController#index as HTML
I, [2019-03-01T20:39:48.305075 #27359]  INFO -- :   Rendering dummy/index.html.erb within layouts/application
I, [2019-03-01T20:39:48.305322 #27359]  INFO -- :   Rendered dummy/index.html.erb within layouts/application (0.2ms)
I, [2019-03-01T20:39:48.305600 #27359]  INFO -- : Completed 200 OK in 1ms (Views: 0.9ms | ActiveRecord: 0.0ms)
I, [2019-03-01T20:39:48.306962 #27359]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:39:48 +0200
I, [2019-03-01T20:39:48.307553 #27359]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:39:48.307893 #27359] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:48.309181 #27359] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:39:48.310437 #27359] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:39:48.311477 #27359]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:39:48.312727 #27359] FATAL -- :   
F, [2019-03-01T20:39:48.312769 #27359] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:39:48.312795 #27359] FATAL -- :   
F, [2019-03-01T20:39:48.312827 #27359] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:39:48.314122 #27359]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:39:48 +0200
I, [2019-03-01T20:39:48.314832 #27359]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:39:48.315202 #27359] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:48.316492 #27359] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:39:48.317635 #27359] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:39:48.327810 #27359]  INFO -- : Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:39:48.333767 #27359] FATAL -- :   
F, [2019-03-01T20:39:48.337920 #27359] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:39:48.337962 #27359] FATAL -- :   
F, [2019-03-01T20:39:48.337991 #27359] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:39:50.341937 #27359]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:39:50 +0200
I, [2019-03-01T20:39:50.342911 #27359]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:39:50.343470 #27359] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:50.345456 #27359] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:39:50.347242 #27359] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:39:50.358491 #27359]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.3ms)
F, [2019-03-01T20:39:50.364536 #27359] FATAL -- :   
F, [2019-03-01T20:39:50.369346 #27359] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:39:50.369395 #27359] FATAL -- :   
F, [2019-03-01T20:39:50.369422 #27359] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:39:52.374810 #27359]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:39:52 +0200
I, [2019-03-01T20:39:52.375802 #27359]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:39:52.376325 #27359] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:52.377929 #27359] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:39:52.379468 #27359] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:39:52.392266 #27359]  INFO -- : Completed 500 Internal Server Error in 16ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:39:52.399019 #27359] FATAL -- :   
F, [2019-03-01T20:39:52.403572 #27359] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:39:52.403616 #27359] FATAL -- :   
F, [2019-03-01T20:39:52.403642 #27359] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:39:54.411612 #27359]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:39:54 +0200
I, [2019-03-01T20:39:54.412605 #27359]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:39:54.413093 #27359] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:54.414942 #27359] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:39:54.416402 #27359] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:39:54.427171 #27359]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:39:54.433216 #27359] FATAL -- :   
F, [2019-03-01T20:39:54.437509 #27359] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:39:54.437572 #27359] FATAL -- :   
F, [2019-03-01T20:39:54.437599 #27359] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:39:56.443658 #27359]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:39:56 +0200
I, [2019-03-01T20:39:56.444705 #27359]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:39:56.445191 #27359] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:56.447072 #27359] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:39:56.448570 #27359] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:39:56.459549 #27359]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:39:56.465999 #27359] FATAL -- :   
F, [2019-03-01T20:39:56.470221 #27359] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:39:56.470294 #27359] FATAL -- :   
F, [2019-03-01T20:39:56.470332 #27359] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:39:58.477880 #27359]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:39:58 +0200
I, [2019-03-01T20:39:58.478851 #27359]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:39:58.479410 #27359] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:39:58.481119 #27359] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:39:58.482574 #27359] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:39:58.494950 #27359]  INFO -- : Completed 500 Internal Server Error in 16ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:39:58.501242 #27359] FATAL -- :   
F, [2019-03-01T20:39:58.505452 #27359] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:39:58.505492 #27359] FATAL -- :   
F, [2019-03-01T20:39:58.505520 #27359] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:40:00.512166 #27359]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 20:40:00 +0200
I, [2019-03-01T20:40:00.513400 #27359]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T20:40:00.513998 #27359] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:40:00.515801 #27359] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T20:40:00.517302 #27359] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:40:00.527322 #27359]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:40:00.532984 #27359] FATAL -- :   
F, [2019-03-01T20:40:00.536871 #27359] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T20:40:00.536921 #27359] FATAL -- :   
F, [2019-03-01T20:40:00.536949 #27359] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:40:02.542320 #27359]  INFO -- : Started GET "/resque" for 127.0.0.1 at 2019-03-01 20:40:02 +0200
I, [2019-03-01T20:40:02.543614 #27359]  INFO -- : Processing by DummyController#resque as HTML
I, [2019-03-01T20:40:02.545376 #27359]  INFO -- :   Rendering dummy/resque.html.erb within layouts/application
I, [2019-03-01T20:40:02.545720 #27359]  INFO -- :   Rendered dummy/resque.html.erb within layouts/application (0.3ms)
I, [2019-03-01T20:40:02.546037 #27359]  INFO -- : Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.0ms)
I, [2019-03-01T20:40:02.547723 #27359]  INFO -- : Started GET "/active_record_after_rollback" for 127.0.0.1 at 2019-03-01 20:40:02 +0200
I, [2019-03-01T20:40:02.548415 #27359]  INFO -- : Processing by DummyController#active_record_after_rollback as HTML
D, [2019-03-01T20:40:02.548746 #27359] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:40:02.550290 #27359] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "Bango"]]
D, [2019-03-01T20:40:02.551495 #27359] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
I, [2019-03-01T20:40:02.552670 #27359]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:40:02.568567 #27359] FATAL -- :   
F, [2019-03-01T20:40:02.568677 #27359] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (an instance of AirbrakeTestError)
       got: (#<Airbrake::Notice:0x00007fb277763e88 @config=#<Airbrake::Config:0x00007fb276ac8250 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fb277731de8 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of AirbrakeTestError"]
[0m[32m+[#<Airbrake::Notice:0x00007fb277763e88 @config=#<Airbrake::Config:0x00007fb276ac8250 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fb276ac81b0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fb276ac8160 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fb276ac8110 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fb276ac8098>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"after_rollback", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>52, :function=>"raise_error_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_rollback_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>357, :function=>"rolledback!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>112, :function=>"rollback_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>231, :function=>"block in rollback_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>228, :function=>"rollback_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>242, :function=>"rescue in block in within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>259, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>127, :function=>"active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>116, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}, {:type=>"ActiveRecord::Rollback", :message=>"ActiveRecord::Rollback", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>129, :function=>"block in active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"block in transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>239, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>127, :function=>"active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>116, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: after_rollback>, :rack_request=>#<ActionDispatch::Request:0x00007fb277731d70 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fb2787e1b98>, "rack.errors"=>#<StringIO:0x00007fb2787e1c10>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/active_record_after_rollback", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fb2785a1680 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fb2785a15e0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fb2785a1540 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fb2785a1478>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fb276efd118 @filters=[#<Proc:0x00007fb276efd000@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fb276efcfd8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fb276efcfb0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fb276efc880@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fb276efc858@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fb276efc650 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fb276efc678 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fb276efc600 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fb276ad8448 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fb2782fd1b8>, "ROUTES_70202248653020_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/active_record_after_rollback", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"f0e05146-983c-4f54-a0e8-9489af39f511", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fb2787e09c8 @req=#<ActionDispatch::Request:0x00007fb2787e09f0 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7fb2787db630 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fb2787db5e0 @by=#<ActionDispatch::Session::CookieStore:0x00007fb27d1560d0 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fb27d1560f8 @app=#<Rack::Head:0x00007fb27d156120 @app=#<Rack::ConditionalGet:0x00007fb27d156148 @app=#<Rack::ETag:0x00007fb27d156170 @app=#<Rack::TempfileReaper:0x00007fb27d156198 @app=#<Warden::Manager:0x00007fb27d156260 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fb2782fd1b8>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70202251205240 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"active_record_after_rollback"}, "action_controller.instance"=>#<DummyController:0x00007fb2787da0f0 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fb2787db1a8 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_rollback"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_rollback", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fb2787d93d0 @req=#<ActionDispatch::Request:0x00007fb2787db1a8 ...>>>, @_response=#<ActionDispatch::Response:0x00007fb2787da320 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fb2787da2d0>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fb2787da280 @response=#<ActionDispatch::Response:0x00007fb2787da320 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fb2787da258 @monitor=#<ActionDispatch::Response:0x00007fb2787da320 ...>, @cond=#<Thread::ConditionVariable:0x00007fb2787da230>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fb2787db1a8 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_rollback"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_rollback", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fb2787d93d0 @req=#<ActionDispatch::Request:0x00007fb2787db1a8 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fb2787d9f88 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fb2787d9e98 @paths=[#<ActionView::FixtureResolver:0x00007fb2778bb588 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fb2778bb560 keys=4 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="active_record_after_rollback", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"active_record_after_rollback"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fb276bab0a0 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=3174197725010687349>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fb277731de8 @max_size=10000>>]
[0m):
F, [2019-03-01T20:40:02.568755 #27359] FATAL -- :   
F, [2019-03-01T20:40:02.568783 #27359] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T20:40:02.570169 #27359]  INFO -- : Started GET "/active_record_after_commit" for 127.0.0.1 at 2019-03-01 20:40:02 +0200
I, [2019-03-01T20:40:02.570948 #27359]  INFO -- : Processing by DummyController#active_record_after_commit as HTML
D, [2019-03-01T20:40:02.571381 #27359] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T20:40:02.572693 #27359] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "Bingo"]]
D, [2019-03-01T20:40:02.573792 #27359] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T20:40:02.575214 #27359]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-01T20:40:02.586709 #27359] FATAL -- :   
F, [2019-03-01T20:40:02.586797 #27359] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (an instance of AirbrakeTestError)
       got: (#<Airbrake::Notice:0x00007fb2775a73d8 @config=#<Airbrake::Config:0x00007fb276ac8250 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fb27755d7d8 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of AirbrakeTestError"]
[0m[32m+[#<Airbrake::Notice:0x00007fb2775a73d8 @config=#<Airbrake::Config:0x00007fb276ac8250 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fb276ac81b0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fb276ac8160 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fb276ac8110 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fb276ac8098>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"after_commit", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>48, :function=>"raise_error_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_commit_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>346, :function=>"committed!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>128, :function=>"commit_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>223, :function=>"block in commit_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>213, :function=>"commit_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>252, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>385, :function=>"with_transaction_returning_status"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>310, :function=>"block in save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>325, :function=>"rollback_active_record_state!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>309, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/suppressor.rb", :line=>44, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/persistence.rb", :line=>36, :function=>"create"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>123, :function=>"active_record_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>106, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: after_commit>, :rack_request=>#<ActionDispatch::Request:0x00007fb27755d7b0 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fb276c30d18>, "rack.errors"=>#<StringIO:0x00007fb276c30e30>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/active_record_after_commit", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fb2785a1680 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fb2785a15e0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fb2785a1540 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fb2785a1478>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fb276efd118 @filters=[#<Proc:0x00007fb276efd000@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fb276efcfd8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fb276efcfb0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fb276efc880@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fb276efc858@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fb276efc650 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fb276efc678 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fb276efc600 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fb276ad8448 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fb2782fd1b8>, "ROUTES_70202248653020_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/active_record_after_commit", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"5ffccf0e-3d29-435e-b60c-7577b7bfdd23", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fb276c2a5f8 @req=#<ActionDispatch::Request:0x00007fb276c2a620 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7fb276c23398 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fb276c23230 @by=#<ActionDispatch::Session::CookieStore:0x00007fb27d1560d0 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fb27d1560f8 @app=#<Rack::Head:0x00007fb27d156120 @app=#<Rack::ConditionalGet:0x00007fb27d156148 @app=#<Rack::ETag:0x00007fb27d156170 @app=#<Rack::TempfileReaper:0x00007fb27d156198 @app=#<Warden::Manager:0x00007fb27d156260 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fb2782fd1b8>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70202236671700 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"active_record_after_commit"}, "action_controller.instance"=>#<DummyController:0x00007fb276c1bc60 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fb276c22290 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_commit"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_commit", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fb276c19f00 @req=#<ActionDispatch::Request:0x00007fb276c22290 ...>>>, @_response=#<ActionDispatch::Response:0x00007fb276c201c0 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fb276c20148>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fb276c20008 @response=#<ActionDispatch::Response:0x00007fb276c201c0 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fb276c1bfa8 @monitor=#<ActionDispatch::Response:0x00007fb276c201c0 ...>, @cond=#<Thread::ConditionVariable:0x00007fb276c1bf30>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fb276c22290 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_commit"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_commit", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fb276c19f00 @req=#<ActionDispatch::Request:0x00007fb276c22290 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fb276c1b738 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fb276c1b580 @paths=[#<ActionView::FixtureResolver:0x00007fb2778bb588 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fb2778bb560 keys=4 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="active_record_after_commit", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"active_record_after_commit"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fb276bab0a0 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=3174197725010687349>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fb27755d7d8 @max_size=10000>>]
[0m):
F, [2019-03-01T20:40:02.586855 #27359] FATAL -- :   
F, [2019-03-01T20:40:02.586880 #27359] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
D, [2019-03-01T21:00:19.127284 #27835] DEBUG -- :   [1m[35m (1.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T21:00:19.129712 #27835] DEBUG -- :   [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T21:00:19.132929 #27835] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T21:00:19.133519 #27835] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T21:00:19.134046 #27835] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T21:00:19.135441 #27835] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T21:00:19.145923 #27835] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T21:00:19.149112 #27835] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T21:00:19.150005 #27835] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 19:00:19.149444"], ["updated_at", "2019-03-01 19:00:19.149444"]]
D, [2019-03-01T21:00:19.150217 #27835] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T21:00:19.195693 #27835]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 21:00:19 +0200
I, [2019-03-01T21:00:19.197819 #27835]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T21:00:19.205479 #27835] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T21:00:19.207111 #27835] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T21:00:19.208588 #27835] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T21:00:19.219357 #27835]  INFO -- : Completed 500 Internal Server Error in 21ms (ActiveRecord: 0.6ms)
F, [2019-03-01T21:00:19.222522 #27835] FATAL -- :   
F, [2019-03-01T21:00:19.222588 #27835] FATAL -- : RSpec::Expectations::ExpectationNotMetError (
expected: "AirbrakeTestError"
     got: "RSpec::Mocks::MockExpectationError"

(compared using ==)
):
F, [2019-03-01T21:00:19.222625 #27835] FATAL -- :   
F, [2019-03-01T21:00:19.222658 #27835] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T21:00:19.224463 #27835]  INFO -- : Started GET "/" for 127.0.0.1 at 2019-03-01 21:00:19 +0200
I, [2019-03-01T21:00:19.225316 #27835]  INFO -- : Processing by DummyController#index as HTML
I, [2019-03-01T21:00:19.227727 #27835]  INFO -- :   Rendering dummy/index.html.erb within layouts/application
I, [2019-03-01T21:00:19.228403 #27835]  INFO -- :   Rendered dummy/index.html.erb within layouts/application (0.6ms)
I, [2019-03-01T21:00:19.228760 #27835]  INFO -- : Completed 200 OK in 3ms (Views: 2.9ms | ActiveRecord: 0.0ms)
I, [2019-03-01T21:00:19.230208 #27835]  INFO -- : Started GET "/active_job" for 127.0.0.1 at 2019-03-01 21:00:19 +0200
I, [2019-03-01T21:00:19.230981 #27835]  INFO -- : Processing by DummyController#active_job as HTML
I, [2019-03-01T21:00:19.232594 #27835]  INFO -- :   Rendering dummy/active_job.html.erb within layouts/application
I, [2019-03-01T21:00:19.233080 #27835]  INFO -- :   Rendered dummy/active_job.html.erb within layouts/application (0.2ms)
I, [2019-03-01T21:00:19.234776 #27835]  INFO -- : Completed 200 OK in 4ms (Views: 2.6ms | ActiveRecord: 0.0ms)
I, [2019-03-01T21:00:21.240028 #27835]  INFO -- : Started GET "/active_job" for 127.0.0.1 at 2019-03-01 21:00:21 +0200
I, [2019-03-01T21:00:21.241088 #27835]  INFO -- : Processing by DummyController#active_job as HTML
I, [2019-03-01T21:00:21.242381 #27835]  INFO -- :   Rendering dummy/active_job.html.erb within layouts/application
I, [2019-03-01T21:00:21.243410 #27835]  INFO -- :   Rendered dummy/active_job.html.erb within layouts/application (0.3ms)
I, [2019-03-01T21:00:21.243775 #27835]  INFO -- : Completed 200 OK in 3ms (Views: 1.9ms | ActiveRecord: 0.0ms)
I, [2019-03-01T21:00:23.251050 #27835]  INFO -- : Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-01 21:00:23 +0200
I, [2019-03-01T21:00:23.258109 #27835]  INFO -- : Processing by DummyController#notify_airbrake_helper as HTML
I, [2019-03-01T21:00:23.258160 #27835]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-01T21:00:23.263533 #27835]  INFO -- :   Rendering dummy/notify_airbrake_helper.html.erb within layouts/application
I, [2019-03-01T21:00:23.268402 #27835]  INFO -- :   Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
I, [2019-03-01T21:00:23.268723 #27835]  INFO -- : Completed 200 OK in 10ms (Views: 5.5ms | ActiveRecord: 0.0ms)
I, [2019-03-01T21:00:25.272877 #27835]  INFO -- : Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-01 21:00:25 +0200
I, [2019-03-01T21:00:25.274146 #27835]  INFO -- : Processing by DummyController#notify_airbrake_helper as HTML
I, [2019-03-01T21:00:25.274211 #27835]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-01T21:00:25.284301 #27835]  INFO -- :   Rendering dummy/notify_airbrake_helper.html.erb within layouts/application
I, [2019-03-01T21:00:25.284633 #27835]  INFO -- :   Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
I, [2019-03-01T21:00:25.284964 #27835]  INFO -- : Completed 200 OK in 11ms (Views: 1.3ms | ActiveRecord: 0.0ms)
I, [2019-03-01T21:00:27.292295 #27835]  INFO -- : Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-01 21:00:27 +0200
I, [2019-03-01T21:00:27.293401 #27835]  INFO -- : Processing by DummyController#notify_airbrake_helper as HTML
I, [2019-03-01T21:00:27.293459 #27835]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-01T21:00:27.304997 #27835]  INFO -- :   Rendering dummy/notify_airbrake_helper.html.erb within layouts/application
I, [2019-03-01T21:00:27.305428 #27835]  INFO -- :   Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.3ms)
I, [2019-03-01T21:00:27.305819 #27835]  INFO -- : Completed 200 OK in 12ms (Views: 1.2ms | ActiveRecord: 0.0ms)
I, [2019-03-01T21:00:29.313616 #27835]  INFO -- : Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-01 21:00:29 +0200
I, [2019-03-01T21:00:29.314667 #27835]  INFO -- : Processing by DummyController#notify_airbrake_helper as HTML
I, [2019-03-01T21:00:29.314712 #27835]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-01T21:00:29.328516 #27835]  INFO -- :   Rendering dummy/notify_airbrake_helper.html.erb within layouts/application
I, [2019-03-01T21:00:29.328819 #27835]  INFO -- :   Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
I, [2019-03-01T21:00:29.329139 #27835]  INFO -- : Completed 200 OK in 14ms (Views: 1.0ms | ActiveRecord: 0.0ms)
I, [2019-03-01T21:00:31.335938 #27835]  INFO -- : Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-01 21:00:31 +0200
I, [2019-03-01T21:00:31.337277 #27835]  INFO -- : Processing by DummyController#notify_airbrake_helper as HTML
I, [2019-03-01T21:00:31.337361 #27835]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-01T21:00:31.347562 #27835]  INFO -- :   Rendering dummy/notify_airbrake_helper.html.erb within layouts/application
I, [2019-03-01T21:00:31.347854 #27835]  INFO -- :   Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
I, [2019-03-01T21:00:31.348191 #27835]  INFO -- : Completed 200 OK in 11ms (Views: 1.1ms | ActiveRecord: 0.0ms)
I, [2019-03-01T21:00:33.356070 #27835]  INFO -- : Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-01 21:00:33 +0200
I, [2019-03-01T21:00:33.357304 #27835]  INFO -- : Processing by DummyController#notify_airbrake_helper as HTML
I, [2019-03-01T21:00:33.357363 #27835]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-01T21:00:33.368172 #27835]  INFO -- :   Rendering dummy/notify_airbrake_helper.html.erb within layouts/application
I, [2019-03-01T21:00:33.368467 #27835]  INFO -- :   Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
I, [2019-03-01T21:00:33.368764 #27835]  INFO -- : Completed 200 OK in 11ms (Views: 1.0ms | ActiveRecord: 0.0ms)
I, [2019-03-01T21:00:35.376669 #27835]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-01 21:00:35 +0200
I, [2019-03-01T21:00:35.378002 #27835]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-03-01T21:00:35.378061 #27835]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-01T21:00:35.389204 #27835]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-03-01T21:00:35.389518 #27835]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
I, [2019-03-01T21:00:35.389789 #27835]  INFO -- : Completed 200 OK in 12ms (Views: 1.0ms | ActiveRecord: 0.0ms)
I, [2019-03-01T21:00:37.396232 #27835]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-01 21:00:37 +0200
I, [2019-03-01T21:00:37.397625 #27835]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-03-01T21:00:37.397674 #27835]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-01T21:00:37.407412 #27835]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-03-01T21:00:37.407746 #27835]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.3ms)
I, [2019-03-01T21:00:37.408138 #27835]  INFO -- : Completed 200 OK in 10ms (Views: 1.1ms | ActiveRecord: 0.0ms)
I, [2019-03-01T21:00:39.412873 #27835]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-01 21:00:39 +0200
I, [2019-03-01T21:00:39.414130 #27835]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-03-01T21:00:39.414187 #27835]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-01T21:00:39.423783 #27835]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-03-01T21:00:39.424116 #27835]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.3ms)
I, [2019-03-01T21:00:39.424422 #27835]  INFO -- : Completed 200 OK in 10ms (Views: 1.0ms | ActiveRecord: 0.0ms)
I, [2019-03-01T21:00:41.432099 #27835]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-01 21:00:41 +0200
I, [2019-03-01T21:00:41.433335 #27835]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-03-01T21:00:41.433393 #27835]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-01T21:00:41.444364 #27835]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-03-01T21:00:41.444678 #27835]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
I, [2019-03-01T21:00:41.444967 #27835]  INFO -- : Completed 200 OK in 11ms (Views: 1.0ms | ActiveRecord: 0.0ms)
I, [2019-03-01T21:00:43.451918 #27835]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-01 21:00:43 +0200
I, [2019-03-01T21:00:43.453213 #27835]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-03-01T21:00:43.453267 #27835]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-01T21:00:43.466482 #27835]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-03-01T21:00:43.466776 #27835]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
I, [2019-03-01T21:00:43.467043 #27835]  INFO -- : Completed 200 OK in 14ms (Views: 1.0ms | ActiveRecord: 0.0ms)
I, [2019-03-01T21:00:45.472995 #27835]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-01 21:00:45 +0200
I, [2019-03-01T21:00:45.474106 #27835]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-03-01T21:00:45.474158 #27835]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-01T21:00:45.483997 #27835]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-03-01T21:00:45.484285 #27835]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
I, [2019-03-01T21:00:45.484611 #27835]  INFO -- : Completed 200 OK in 10ms (Views: 1.0ms | ActiveRecord: 0.0ms)
I, [2019-03-01T21:00:47.492386 #27835]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 21:00:47 +0200
I, [2019-03-01T21:00:47.493599 #27835]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T21:00:47.493661 #27835]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T21:00:47.494275 #27835] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T21:00:47.496011 #27835] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T21:00:47.497543 #27835] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T21:00:47.507838 #27835]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-01T21:00:47.513573 #27835] FATAL -- :   
F, [2019-03-01T21:00:47.519175 #27835] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T21:00:47.519246 #27835] FATAL -- :   
F, [2019-03-01T21:00:47.519283 #27835] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T21:00:49.521869 #27835]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 21:00:49 +0200
I, [2019-03-01T21:00:49.523026 #27835]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T21:00:49.523084 #27835]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T21:00:49.523546 #27835] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T21:00:49.525116 #27835] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T21:00:49.526446 #27835] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T21:00:49.537010 #27835]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-01T21:00:49.542847 #27835] FATAL -- :   
F, [2019-03-01T21:00:49.548248 #27835] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T21:00:49.548306 #27835] FATAL -- :   
F, [2019-03-01T21:00:49.548334 #27835] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T21:00:51.555466 #27835]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 21:00:51 +0200
I, [2019-03-01T21:00:51.556814 #27835]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T21:00:51.556876 #27835]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T21:00:51.557415 #27835] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T21:00:51.559366 #27835] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T21:00:51.560899 #27835] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T21:00:51.574543 #27835]  INFO -- : Completed 500 Internal Server Error in 18ms (ActiveRecord: 0.2ms)
F, [2019-03-01T21:00:51.580845 #27835] FATAL -- :   
F, [2019-03-01T21:00:51.585131 #27835] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T21:00:51.585172 #27835] FATAL -- :   
F, [2019-03-01T21:00:51.585197 #27835] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T21:00:53.592947 #27835]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 21:00:53 +0200
I, [2019-03-01T21:00:53.594393 #27835]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T21:00:53.594451 #27835]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T21:00:53.594963 #27835] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T21:00:53.596846 #27835] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T21:00:53.598456 #27835] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T21:00:53.609637 #27835]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms)
F, [2019-03-01T21:00:53.615904 #27835] FATAL -- :   
F, [2019-03-01T21:00:53.620448 #27835] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T21:00:53.620502 #27835] FATAL -- :   
F, [2019-03-01T21:00:53.620532 #27835] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T21:00:55.625776 #27835]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 21:00:55 +0200
I, [2019-03-01T21:00:55.627009 #27835]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T21:00:55.627065 #27835]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T21:00:55.627538 #27835] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T21:00:55.629254 #27835] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T21:00:55.630624 #27835] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T21:00:55.641117 #27835]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-01T21:00:55.647046 #27835] FATAL -- :   
F, [2019-03-01T21:00:55.651901 #27835] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T21:00:55.651960 #27835] FATAL -- :   
F, [2019-03-01T21:00:55.651988 #27835] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T21:00:57.656387 #27835]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 21:00:57 +0200
I, [2019-03-01T21:00:57.657530 #27835]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T21:00:57.657583 #27835]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T21:00:57.658058 #27835] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T21:00:57.659789 #27835] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T21:00:57.661161 #27835] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T21:00:57.673651 #27835]  INFO -- : Completed 500 Internal Server Error in 16ms (ActiveRecord: 0.2ms)
F, [2019-03-01T21:00:57.679903 #27835] FATAL -- :   
F, [2019-03-01T21:00:57.684539 #27835] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T21:00:57.684595 #27835] FATAL -- :   
F, [2019-03-01T21:00:57.684623 #27835] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T21:00:59.690283 #27835]  INFO -- : Started GET "/resque" for 127.0.0.1 at 2019-03-01 21:00:59 +0200
I, [2019-03-01T21:00:59.691297 #27835]  INFO -- : Processing by DummyController#resque as HTML
I, [2019-03-01T21:00:59.692932 #27835]  INFO -- :   Rendering dummy/resque.html.erb within layouts/application
I, [2019-03-01T21:00:59.693243 #27835]  INFO -- :   Rendered dummy/resque.html.erb within layouts/application (0.2ms)
I, [2019-03-01T21:00:59.693621 #27835]  INFO -- : Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.0ms)
I, [2019-03-01T21:00:59.695002 #27835]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 21:00:59 +0200
I, [2019-03-01T21:00:59.695873 #27835]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T21:00:59.696329 #27835] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T21:00:59.697730 #27835] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T21:00:59.698964 #27835] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T21:00:59.708628 #27835]  INFO -- : Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.2ms)
F, [2019-03-01T21:00:59.714569 #27835] FATAL -- :   
F, [2019-03-01T21:00:59.718843 #27835] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T21:00:59.718893 #27835] FATAL -- :   
F, [2019-03-01T21:00:59.718921 #27835] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T21:01:01.726593 #27835]  INFO -- : Started GET "/delayed_job" for 127.0.0.1 at 2019-03-01 21:01:01 +0200
I, [2019-03-01T21:01:01.727593 #27835]  INFO -- : Processing by DummyController#delayed_job as HTML
I, [2019-03-01T21:01:01.740820 #27835]  INFO -- : Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.5ms)
F, [2019-03-01T21:01:01.751374 #27835] FATAL -- :   
F, [2019-03-01T21:01:01.751455 #27835] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n"))
       got: (#<Airbrake::Notice:0x00007f92054df050 @config=#<Airbrake::Config:0x00007f9206aeb3a8 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007f92045c2450 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,3 +1,2 @@
[0m[31m-["anything",
[0m[31m- "hash_including(\"handler\"=>\"--- !ruby/struct:BangoJob\\nbingo: bingo\\nbongo: bongo\\n\")"]
[0m[32m+[#<Airbrake::Notice:0x00007f92054df050 @config=#<Airbrake::Config:0x00007f9206aeb3a8 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007f9206aeb330 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007f9206aeb2e0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007f9206aeb290 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f9206aeb218>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>86, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>142, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>197, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007f92045c2400 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007f920461d7b0>, "rack.errors"=>#<StringIO:0x00007f920461d878>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007f9205435fc8 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007f9205435f78 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007f9205435f28 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f9205435eb0>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007f92056d9770 @filters=[#<Proc:0x00007f92056d9658@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007f92056d9630@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007f92056d9608@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007f92056d8e38@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007f92056d8e10@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007f92056d8b90 @key_generator=#<ActiveSupport::KeyGenerator:0x00007f92056d8bb8 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007f92056d8b68 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007f9206ae8040 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007f92069aba38>, "ROUTES_70132576378140_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"57b519d9-bb2c-4df5-b462-0bae4729da8f", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007f9204617dd8 @req=#<ActionDispatch::Request:0x00007f9204617e50 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7f9204616b90 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007f9204616b40 @by=#<ActionDispatch::Session::CookieStore:0x00007f9206ae2708 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007f9206ae27a8 @app=#<Rack::Head:0x00007f9206ae2848 @app=#<Rack::ConditionalGet:0x00007f9206ae2870 @app=#<Rack::ETag:0x00007f9206ae2898 @app=#<Rack::TempfileReaper:0x00007f9206ae28e8 @app=#<Warden::Manager:0x00007f9206ae2be0 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007f92069aba38>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70132557722940 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007f92046156f0 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007f9204616780 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/delayed_job", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007f92046149d0 @req=#<ActionDispatch::Request:0x00007f9204616780 ...>>>, @_response=#<ActionDispatch::Response:0x00007f9204615920 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f92046158d0>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007f9204615880 @response=#<ActionDispatch::Response:0x00007f9204615920 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007f9204615858 @monitor=#<ActionDispatch::Response:0x00007f9204615920 ...>, @cond=#<Thread::ConditionVariable:0x00007f9204615830>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007f9204616780 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/delayed_job", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007f92046149d0 @req=#<ActionDispatch::Request:0x00007f9204616780 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007f9204615588 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007f9204615498 @paths=[#<ActionView::FixtureResolver:0x00007f92050f5480 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7f92050f5458 keys=16 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007f9206c03b28 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-2165995293874183836>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007f92045c2450 @max_size=10000>>]
[0m):
F, [2019-03-01T21:01:01.751501 #27835] FATAL -- :   
F, [2019-03-01T21:01:01.751529 #27835] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T21:01:01.753415 #27835]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 21:01:01 +0200
I, [2019-03-01T21:01:01.754186 #27835]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T21:01:01.754626 #27835] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T21:01:01.755950 #27835] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T21:01:01.757100 #27835] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T21:01:01.758152 #27835]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-01T21:01:01.759454 #27835] FATAL -- :   
F, [2019-03-01T21:01:01.759524 #27835] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T21:01:01.759552 #27835] FATAL -- :   
F, [2019-03-01T21:01:01.759576 #27835] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T21:01:01.760996 #27835]  INFO -- : Started GET "/active_record_after_rollback" for 127.0.0.1 at 2019-03-01 21:01:01 +0200
I, [2019-03-01T21:01:01.761870 #27835]  INFO -- : Processing by DummyController#active_record_after_rollback as HTML
D, [2019-03-01T21:01:01.762132 #27835] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T21:01:01.763609 #27835] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "Bango"]]
D, [2019-03-01T21:01:01.765125 #27835] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
I, [2019-03-01T21:01:01.766489 #27835]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-01T21:01:01.784829 #27835] FATAL -- :   
F, [2019-03-01T21:01:01.784982 #27835] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (an instance of AirbrakeTestError)
       got: (#<Airbrake::Notice:0x00007f9206a82d80 @config=#<Airbrake::Config:0x00007f9206aeb3a8 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007f92053540a0 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of AirbrakeTestError"]
[0m[32m+[#<Airbrake::Notice:0x00007f9206a82d80 @config=#<Airbrake::Config:0x00007f9206aeb3a8 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007f9206aeb330 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007f9206aeb2e0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007f9206aeb290 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f9206aeb218>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"after_rollback", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>52, :function=>"raise_error_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_rollback_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>357, :function=>"rolledback!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>112, :function=>"rollback_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>231, :function=>"block in rollback_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>228, :function=>"rollback_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>242, :function=>"rescue in block in within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>259, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>127, :function=>"active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>120, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}, {:type=>"ActiveRecord::Rollback", :message=>"ActiveRecord::Rollback", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>129, :function=>"block in active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"block in transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>239, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>127, :function=>"active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>120, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: after_rollback>, :rack_request=>#<ActionDispatch::Request:0x00007f9205354078 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007f9206012d78>, "rack.errors"=>#<StringIO:0x00007f9206012f58>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/active_record_after_rollback", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007f9205435fc8 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007f9205435f78 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007f9205435f28 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f9205435eb0>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007f92056d9770 @filters=[#<Proc:0x00007f92056d9658@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007f92056d9630@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007f92056d9608@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007f92056d8e38@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007f92056d8e10@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007f92056d8b90 @key_generator=#<ActiveSupport::KeyGenerator:0x00007f92056d8bb8 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007f92056d8b68 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007f9206ae8040 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007f92069aba38>, "ROUTES_70132576378140_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/active_record_after_rollback", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"f7184a62-9f5b-402e-a1a7-f46c881f3000", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007f9204945d48 @req=#<ActionDispatch::Request:0x00007f9204945eb0 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7f920493ea98 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007f920493ea20 @by=#<ActionDispatch::Session::CookieStore:0x00007f9206ae2708 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007f9206ae27a8 @app=#<Rack::Head:0x00007f9206ae2848 @app=#<Rack::ConditionalGet:0x00007f9206ae2870 @app=#<Rack::ETag:0x00007f9206ae2898 @app=#<Rack::TempfileReaper:0x00007f9206ae28e8 @app=#<Warden::Manager:0x00007f9206ae2be0 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007f92069aba38>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70132559377480 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"active_record_after_rollback"}, "action_controller.instance"=>#<DummyController:0x00007f920493c900 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007f920493e3b8 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_rollback"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_rollback", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007f9204936be0 @req=#<ActionDispatch::Request:0x00007f920493e3b8 ...>>>, @_response=#<ActionDispatch::Response:0x00007f920493cbf8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f920493cb80>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007f920493cae0 @response=#<ActionDispatch::Response:0x00007f920493cbf8 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007f920493cab8 @monitor=#<ActionDispatch::Response:0x00007f920493cbf8 ...>, @cond=#<Thread::ConditionVariable:0x00007f920493ca90>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007f920493e3b8 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_rollback"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_rollback", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007f9204936be0 @req=#<ActionDispatch::Request:0x00007f920493e3b8 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007f920493c6f8 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007f920493c568 @paths=[#<ActionView::FixtureResolver:0x00007f92050f5480 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7f92050f5458 keys=16 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="active_record_after_rollback", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"active_record_after_rollback"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007f9206c03b28 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-2165995293874183836>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007f92053540a0 @max_size=10000>>]
[0m):
F, [2019-03-01T21:01:01.785123 #27835] FATAL -- :   
F, [2019-03-01T21:01:01.785163 #27835] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T21:01:01.786615 #27835]  INFO -- : Started GET "/active_record_after_commit" for 127.0.0.1 at 2019-03-01 21:01:01 +0200
I, [2019-03-01T21:01:01.787419 #27835]  INFO -- : Processing by DummyController#active_record_after_commit as HTML
D, [2019-03-01T21:01:01.787937 #27835] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T21:01:01.789467 #27835] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "Bingo"]]
D, [2019-03-01T21:01:01.790659 #27835] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T21:01:01.791990 #27835]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-01T21:01:01.802918 #27835] FATAL -- :   
F, [2019-03-01T21:01:01.803021 #27835] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (an instance of AirbrakeTestError)
       got: (#<Airbrake::Notice:0x00007f920572a8f0 @config=#<Airbrake::Config:0x00007f9206aeb3a8 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007f920570ba90 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of AirbrakeTestError"]
[0m[32m+[#<Airbrake::Notice:0x00007f920572a8f0 @config=#<Airbrake::Config:0x00007f9206aeb3a8 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007f9206aeb330 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007f9206aeb2e0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007f9206aeb290 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f9206aeb218>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"after_commit", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>48, :function=>"raise_error_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_commit_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>346, :function=>"committed!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>128, :function=>"commit_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>223, :function=>"block in commit_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>213, :function=>"commit_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>252, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>385, :function=>"with_transaction_returning_status"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>310, :function=>"block in save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>325, :function=>"rollback_active_record_state!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>309, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/suppressor.rb", :line=>44, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/persistence.rb", :line=>36, :function=>"create"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>123, :function=>"active_record_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>52, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>40, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>110, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: after_commit>, :rack_request=>#<ActionDispatch::Request:0x00007f920570ba68 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007f9206f77cc8>, "rack.errors"=>#<StringIO:0x00007f9206f77d90>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/active_record_after_commit", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007f9205435fc8 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007f9205435f78 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007f9205435f28 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f9205435eb0>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007f92056d9770 @filters=[#<Proc:0x00007f92056d9658@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007f92056d9630@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007f92056d9608@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007f92056d8e38@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007f92056d8e10@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007f92056d8b90 @key_generator=#<ActiveSupport::KeyGenerator:0x00007f92056d8bb8 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007f92056d8b68 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007f9206ae8040 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007f92069aba38>, "ROUTES_70132576378140_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/active_record_after_commit", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"136448df-3021-430f-84fe-c23ede95061e", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007f9206f76788 @req=#<ActionDispatch::Request:0x00007f9206f767b0 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7f9206f75040 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007f9206f74f28 @by=#<ActionDispatch::Session::CookieStore:0x00007f9206ae2708 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007f9206ae27a8 @app=#<Rack::Head:0x00007f9206ae2848 @app=#<Rack::ConditionalGet:0x00007f9206ae2870 @app=#<Rack::ETag:0x00007f9206ae2898 @app=#<Rack::TempfileReaper:0x00007f9206ae28e8 @app=#<Warden::Manager:0x00007f9206ae2be0 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007f92069aba38>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70132579411720 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"active_record_after_commit"}, "action_controller.instance"=>#<DummyController:0x00007f9206f6e768 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007f9206f746b8 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_commit"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_commit", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007f9206f6cc10 @req=#<ActionDispatch::Request:0x00007f9206f746b8 ...>>>, @_response=#<ActionDispatch::Response:0x00007f9206f6ead8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f9206f6ea88>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007f9206f6e9c0 @response=#<ActionDispatch::Response:0x00007f9206f6ead8 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007f9206f6e998 @monitor=#<ActionDispatch::Response:0x00007f9206f6ead8 ...>, @cond=#<Thread::ConditionVariable:0x00007f9206f6e970>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007f9206f746b8 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_commit"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_commit", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007f9206f6cc10 @req=#<ActionDispatch::Request:0x00007f9206f746b8 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007f9206f6e538 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007f9206f6e380 @paths=[#<ActionView::FixtureResolver:0x00007f92050f5480 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7f92050f5458 keys=16 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="active_record_after_commit", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"active_record_after_commit"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007f9206c03b28 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-2165995293874183836>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007f920570ba90 @max_size=10000>>]
[0m):
F, [2019-03-01T21:01:01.803116 #27835] FATAL -- :   
F, [2019-03-01T21:01:01.803146 #27835] FATAL -- : lib/airbrake/rack/middleware.rb:84:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:54:in `rescue in call!'
lib/airbrake/rack/middleware.rb:59:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T21:01:01.805906 #27835]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 21:01:01 +0200
I, [2019-03-01T21:01:01.807002 #27835]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T21:01:01.807504 #27835] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T21:01:01.809044 #27835] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T21:01:01.810210 #27835] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T21:01:01.820710 #27835]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-01T21:01:01.827220 #27835] FATAL -- :   
F, [2019-03-01T21:01:01.831335 #27835] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T21:01:01.831411 #27835] FATAL -- :   
F, [2019-03-01T21:01:01.831441 #27835] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T21:01:03.839481 #27835]  INFO -- : Started HEAD "/crash" for 127.0.0.1 at 2019-03-01 21:01:03 +0200
I, [2019-03-01T21:01:03.844980 #27835]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T21:01:03.845502 #27835] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T21:01:03.847033 #27835] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T21:01:03.848185 #27835] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T21:01:03.849503 #27835]  INFO -- : Completed 0  in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-01T21:01:03.850855 #27835] FATAL -- :   
F, [2019-03-01T21:01:03.850891 #27835] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T21:01:03.850913 #27835] FATAL -- :   
F, [2019-03-01T21:01:03.850934 #27835] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T21:01:03.852493 #27835]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 21:01:03 +0200
I, [2019-03-01T21:01:03.853171 #27835]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T21:01:03.853561 #27835] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T21:01:03.854911 #27835] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T21:01:03.856125 #27835] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T21:01:03.857293 #27835]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-01T21:01:03.858662 #27835] FATAL -- :   
F, [2019-03-01T21:01:03.858718 #27835] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T21:01:03.858744 #27835] FATAL -- :   
F, [2019-03-01T21:01:03.858767 #27835] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T21:01:03.860433 #27835]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 21:01:03 +0200
I, [2019-03-01T21:01:03.861538 #27835]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T21:01:03.862075 #27835] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T21:01:03.863648 #27835] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T21:01:03.865112 #27835] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T21:01:03.871110 #27835]  INFO -- : Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.2ms)
F, [2019-03-01T21:01:03.882745 #27835] FATAL -- :   
F, [2019-03-01T21:01:03.889884 #27835] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T21:01:03.889940 #27835] FATAL -- :   
F, [2019-03-01T21:01:03.889996 #27835] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T21:01:05.895382 #27835]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 21:01:05 +0200
I, [2019-03-01T21:01:05.896351 #27835]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T21:01:05.897008 #27835] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T21:01:05.898933 #27835] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T21:01:05.900490 #27835] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T21:01:05.911737 #27835]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms)
F, [2019-03-01T21:01:05.917696 #27835] FATAL -- :   
F, [2019-03-01T21:01:05.922582 #27835] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T21:01:05.922634 #27835] FATAL -- :   
F, [2019-03-01T21:01:05.922659 #27835] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T21:01:07.929067 #27835]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 21:01:07 +0200
I, [2019-03-01T21:01:07.930193 #27835]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T21:01:07.930764 #27835] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T21:01:07.932640 #27835] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T21:01:07.934246 #27835] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T21:01:07.945711 #27835]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.3ms)
F, [2019-03-01T21:01:07.951537 #27835] FATAL -- :   
F, [2019-03-01T21:01:07.956646 #27835] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T21:01:07.956696 #27835] FATAL -- :   
F, [2019-03-01T21:01:07.956723 #27835] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T21:01:09.963618 #27835]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 21:01:09 +0200
I, [2019-03-01T21:01:09.964645 #27835]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T21:01:09.965157 #27835] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T21:01:09.966864 #27835] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T21:01:09.968292 #27835] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T21:01:09.979364 #27835]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms)
F, [2019-03-01T21:01:09.988636 #27835] FATAL -- :   
F, [2019-03-01T21:01:09.993227 #27835] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T21:01:09.993272 #27835] FATAL -- :   
F, [2019-03-01T21:01:09.993300 #27835] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T21:01:12.000333 #27835]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 21:01:12 +0200
I, [2019-03-01T21:01:12.001290 #27835]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T21:01:12.001772 #27835] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T21:01:12.003454 #27835] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T21:01:12.004826 #27835] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T21:01:12.015278 #27835]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-01T21:01:12.021472 #27835] FATAL -- :   
F, [2019-03-01T21:01:12.026052 #27835] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T21:01:12.026105 #27835] FATAL -- :   
F, [2019-03-01T21:01:12.026132 #27835] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
I, [2019-03-01T21:01:14.032872 #27835]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 21:01:14 +0200
I, [2019-03-01T21:01:14.033892 #27835]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T21:01:14.034453 #27835] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T21:01:14.036123 #27835] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T21:01:14.037530 #27835] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T21:01:14.048965 #27835]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms)
F, [2019-03-01T21:01:14.054974 #27835] FATAL -- :   
F, [2019-03-01T21:01:14.059683 #27835] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T21:01:14.059738 #27835] FATAL -- :   
F, [2019-03-01T21:01:14.059766 #27835] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:52:in `call!'
lib/airbrake/rack/middleware.rb:40:in `call'
D, [2019-03-01T22:04:15.366828 #29197] DEBUG -- :   [1m[35m (1.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-01T22:04:15.369397 #29197] DEBUG -- :   [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-01T22:04:15.372611 #29197] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-01T22:04:15.373102 #29197] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-01T22:04:15.373577 #29197] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-01T22:04:15.374941 #29197] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-01T22:04:15.384728 #29197] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-01T22:04:15.387952 #29197] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T22:04:15.388700 #29197] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-01 20:04:15.388227"], ["updated_at", "2019-03-01 20:04:15.388227"]]
D, [2019-03-01T22:04:15.388981 #29197] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T22:04:15.420808 #29197]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 22:04:15 +0200
I, [2019-03-01T22:04:15.428144 #29197]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T22:04:15.436069 #29197] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T22:04:15.437758 #29197] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T22:04:15.438992 #29197] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T22:04:15.445260 #29197]  INFO -- : Completed 500 Internal Server Error in 17ms (ActiveRecord: 0.6ms)
F, [2019-03-01T22:04:15.459967 #29197] FATAL -- :   
F, [2019-03-01T22:04:15.464996 #29197] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T22:04:15.465058 #29197] FATAL -- :   
F, [2019-03-01T22:04:15.465116 #29197] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-01T22:04:17.481250 #29197]  INFO -- : Started GET "/active_record_after_commit" for 127.0.0.1 at 2019-03-01 22:04:17 +0200
I, [2019-03-01T22:04:17.482137 #29197]  INFO -- : Processing by DummyController#active_record_after_commit as HTML
D, [2019-03-01T22:04:17.482590 #29197] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T22:04:17.483955 #29197] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "Bingo"]]
D, [2019-03-01T22:04:17.485126 #29197] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T22:04:17.486350 #29197]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-01T22:04:17.507095 #29197] FATAL -- :   
F, [2019-03-01T22:04:17.507197 #29197] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (an instance of AirbrakeTestError)
       got: (#<Airbrake::Notice:0x00007ffd70390290 @config=#<Airbrake::Config:0x00007ffd6fb13e00 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007ffd6feea498 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of AirbrakeTestError"]
[0m[32m+[#<Airbrake::Notice:0x00007ffd70390290 @config=#<Airbrake::Config:0x00007ffd6fb13e00 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007ffd6fb0bf70 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007ffd6fb0bf20 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007ffd6fb0bed0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007ffd6fb0be08>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"after_commit", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>48, :function=>"raise_error_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_commit_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>346, :function=>"committed!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>128, :function=>"commit_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>223, :function=>"block in commit_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>213, :function=>"commit_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>252, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>385, :function=>"with_transaction_returning_status"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>310, :function=>"block in save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>325, :function=>"rollback_active_record_state!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>309, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/suppressor.rb", :line=>44, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/persistence.rb", :line=>36, :function=>"create"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>123, :function=>"active_record_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>110, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: after_commit>, :rack_request=>#<ActionDispatch::Request:0x00007ffd6feea420 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007ffd6edc1338>, "rack.errors"=>#<StringIO:0x00007ffd6edc13b0>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/active_record_after_commit", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007ffd704736a8 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007ffd70473658 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007ffd70473608 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007ffd704735b8>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007ffd6ecf9fe0 @filters=[#<Proc:0x00007ffd6ecf9e00@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007ffd6ecf9dd8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007ffd6ecf9d38@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007ffd6ecf9888@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007ffd6ecf9860@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007ffd6ecf9540 @key_generator=#<ActiveSupport::KeyGenerator:0x00007ffd6ecf9568 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007ffd6ecf9518 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007ffd702b87a0 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007ffd6ff6dc08>, "ROUTES_70363240951300_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/active_record_after_commit", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"79450bab-65a3-4302-8f20-d9c77bc7f2fe", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007ffd6edbbfa0 @req=#<ActionDispatch::Request:0x00007ffd6edc0028 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7ffd6edb9fe8 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007ffd6edb9f48 @by=#<ActionDispatch::Session::CookieStore:0x00007ffd6ebf8628 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007ffd6ebf8650 @app=#<Rack::Head:0x00007ffd6ebf8678 @app=#<Rack::ConditionalGet:0x00007ffd6ebf8718 @app=#<Rack::ETag:0x00007ffd6ebf87b8 @app=#<Rack::TempfileReaper:0x00007ffd6ebf88f8 @app=#<Warden::Manager:0x00007ffd6ebf8c68 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007ffd6ff6dc08>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70363231669900 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"active_record_after_commit"}, "action_controller.instance"=>#<DummyController:0x00007ffd6edb8490 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007ffd6edb9818 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_commit"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_commit", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007ffd6edb3828 @req=#<ActionDispatch::Request:0x00007ffd6edb9818 ...>>>, @_response=#<ActionDispatch::Response:0x00007ffd6edb86e8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007ffd6edb8670>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007ffd6edb8620 @response=#<ActionDispatch::Response:0x00007ffd6edb86e8 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007ffd6edb85f8 @monitor=#<ActionDispatch::Response:0x00007ffd6edb86e8 ...>, @cond=#<Thread::ConditionVariable:0x00007ffd6edb85d0>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007ffd6edb9818 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_commit"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_commit", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007ffd6edb3828 @req=#<ActionDispatch::Request:0x00007ffd6edb9818 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007ffd6edb8300 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007ffd6edb8210 @paths=[#<ActionView::FixtureResolver:0x00007ffd6fec1200 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7ffd6fec11d8 keys=0 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="active_record_after_commit", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"active_record_after_commit"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007ffd6fbe19e0 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-329480133219403877>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007ffd6feea498 @max_size=10000>>]
[0m):
F, [2019-03-01T22:04:17.507256 #29197] FATAL -- :   
F, [2019-03-01T22:04:17.507282 #29197] FATAL -- : lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
lib/airbrake/rack/middleware.rb:40:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-01T22:04:17.508912 #29197]  INFO -- : Started GET "/active_record_after_rollback" for 127.0.0.1 at 2019-03-01 22:04:17 +0200
I, [2019-03-01T22:04:17.509696 #29197]  INFO -- : Processing by DummyController#active_record_after_rollback as HTML
D, [2019-03-01T22:04:17.509973 #29197] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T22:04:17.511781 #29197] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "Bango"]]
D, [2019-03-01T22:04:17.513232 #29197] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
I, [2019-03-01T22:04:17.514578 #29197]  INFO -- : Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms)
F, [2019-03-01T22:04:17.534209 #29197] FATAL -- :   
F, [2019-03-01T22:04:17.534331 #29197] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (an instance of AirbrakeTestError)
       got: (#<Airbrake::Notice:0x00007ffd6fc70bb8 @config=#<Airbrake::Config:0x00007ffd6fb13e00 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007ffd6fc21b30 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of AirbrakeTestError"]
[0m[32m+[#<Airbrake::Notice:0x00007ffd6fc70bb8 @config=#<Airbrake::Config:0x00007ffd6fb13e00 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007ffd6fb0bf70 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007ffd6fb0bf20 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007ffd6fb0bed0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007ffd6fb0be08>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"after_rollback", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>52, :function=>"raise_error_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_rollback_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>357, :function=>"rolledback!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>112, :function=>"rollback_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>231, :function=>"block in rollback_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>228, :function=>"rollback_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>242, :function=>"rescue in block in within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>259, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>127, :function=>"active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>120, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}, {:type=>"ActiveRecord::Rollback", :message=>"ActiveRecord::Rollback", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>129, :function=>"block in active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"block in transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>239, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>127, :function=>"active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>120, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: after_rollback>, :rack_request=>#<ActionDispatch::Request:0x00007ffd6fc21ae0 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007ffd6fce3b40>, "rack.errors"=>#<StringIO:0x00007ffd6fce3bb8>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/active_record_after_rollback", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007ffd704736a8 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007ffd70473658 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007ffd70473608 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007ffd704735b8>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007ffd6ecf9fe0 @filters=[#<Proc:0x00007ffd6ecf9e00@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007ffd6ecf9dd8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007ffd6ecf9d38@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007ffd6ecf9888@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007ffd6ecf9860@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007ffd6ecf9540 @key_generator=#<ActiveSupport::KeyGenerator:0x00007ffd6ecf9568 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007ffd6ecf9518 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007ffd702b87a0 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007ffd6ff6dc08>, "ROUTES_70363240951300_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/active_record_after_rollback", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"a16aba3e-5da3-40c0-926f-1c237effc0c2", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007ffd71a1c0e0 @req=#<ActionDispatch::Request:0x00007ffd71a1c108 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7ffd6ebd0678 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007ffd6ebd05d8 @by=#<ActionDispatch::Session::CookieStore:0x00007ffd6ebf8628 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007ffd6ebf8650 @app=#<Rack::Head:0x00007ffd6ebf8678 @app=#<Rack::ConditionalGet:0x00007ffd6ebf8718 @app=#<Rack::ETag:0x00007ffd6ebf87b8 @app=#<Rack::TempfileReaper:0x00007ffd6ebf88f8 @app=#<Warden::Manager:0x00007ffd6ebf8c68 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007ffd6ff6dc08>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70363230667280 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"active_record_after_rollback"}, "action_controller.instance"=>#<DummyController:0x00007ffd6ebc3e50 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007ffd6ebcac50 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_rollback"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_rollback", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007ffd6ebc1cb8 @req=#<ActionDispatch::Request:0x00007ffd6ebcac50 ...>>>, @_response=#<ActionDispatch::Response:0x00007ffd6ebc86f8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007ffd6ebc8428>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007ffd6ebc8360 @response=#<ActionDispatch::Response:0x00007ffd6ebc86f8 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007ffd6ebc8310 @monitor=#<ActionDispatch::Response:0x00007ffd6ebc86f8 ...>, @cond=#<Thread::ConditionVariable:0x00007ffd6ebc82e8>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007ffd6ebcac50 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_rollback"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_rollback", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007ffd6ebc1cb8 @req=#<ActionDispatch::Request:0x00007ffd6ebcac50 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007ffd6ebc3a90 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007ffd6ebc3630 @paths=[#<ActionView::FixtureResolver:0x00007ffd6fec1200 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7ffd6fec11d8 keys=0 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="active_record_after_rollback", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"active_record_after_rollback"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007ffd6fbe19e0 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-329480133219403877>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007ffd6fc21b30 @max_size=10000>>]
[0m):
F, [2019-03-01T22:04:17.534441 #29197] FATAL -- :   
F, [2019-03-01T22:04:17.534469 #29197] FATAL -- : lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
lib/airbrake/rack/middleware.rb:40:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-01T22:04:17.535986 #29197]  INFO -- : Started GET "/resque" for 127.0.0.1 at 2019-03-01 22:04:17 +0200
I, [2019-03-01T22:04:17.536748 #29197]  INFO -- : Processing by DummyController#resque as HTML
I, [2019-03-01T22:04:17.539847 #29197]  INFO -- :   Rendering dummy/resque.html.erb within layouts/application
I, [2019-03-01T22:04:17.540681 #29197]  INFO -- :   Rendered dummy/resque.html.erb within layouts/application (0.7ms)
I, [2019-03-01T22:04:17.541051 #29197]  INFO -- : Completed 200 OK in 4ms (Views: 3.2ms | ActiveRecord: 0.0ms)
I, [2019-03-01T22:04:17.542665 #29197]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 22:04:17 +0200
I, [2019-03-01T22:04:17.543309 #29197]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T22:04:17.543730 #29197] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T22:04:17.545542 #29197] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T22:04:17.547024 #29197] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T22:04:17.548717 #29197]  INFO -- : Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms)
F, [2019-03-01T22:04:17.550175 #29197] FATAL -- :   
F, [2019-03-01T22:04:17.550210 #29197] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T22:04:17.550234 #29197] FATAL -- :   
F, [2019-03-01T22:04:17.550255 #29197] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-01T22:04:17.551908 #29197]  INFO -- : Started HEAD "/crash" for 127.0.0.1 at 2019-03-01 22:04:17 +0200
I, [2019-03-01T22:04:17.557229 #29197]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T22:04:17.557799 #29197] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T22:04:17.559442 #29197] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T22:04:17.560983 #29197] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T22:04:17.562428 #29197]  INFO -- : Completed 0  in 5ms (ActiveRecord: 0.2ms)
F, [2019-03-01T22:04:17.564206 #29197] FATAL -- :   
F, [2019-03-01T22:04:17.564246 #29197] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T22:04:17.564272 #29197] FATAL -- :   
F, [2019-03-01T22:04:17.564295 #29197] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-01T22:04:17.565651 #29197]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 22:04:17 +0200
I, [2019-03-01T22:04:17.566350 #29197]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T22:04:17.566693 #29197] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T22:04:17.568184 #29197] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T22:04:17.570142 #29197] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T22:04:17.594887 #29197]  INFO -- : Completed 500 Internal Server Error in 28ms (ActiveRecord: 0.1ms)
F, [2019-03-01T22:04:17.605264 #29197] FATAL -- :   
F, [2019-03-01T22:04:17.621811 #29197] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T22:04:17.621927 #29197] FATAL -- :   
F, [2019-03-01T22:04:17.621976 #29197] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-01T22:04:19.628490 #29197]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 22:04:19 +0200
I, [2019-03-01T22:04:19.629670 #29197]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T22:04:19.630244 #29197] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T22:04:19.631982 #29197] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T22:04:19.633442 #29197] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T22:04:19.644654 #29197]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms)
F, [2019-03-01T22:04:19.650772 #29197] FATAL -- :   
F, [2019-03-01T22:04:19.655273 #29197] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T22:04:19.655344 #29197] FATAL -- :   
F, [2019-03-01T22:04:19.655372 #29197] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-01T22:04:21.660858 #29197]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 22:04:21 +0200
I, [2019-03-01T22:04:21.662098 #29197]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T22:04:21.662622 #29197] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T22:04:21.664502 #29197] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T22:04:21.666082 #29197] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T22:04:21.681213 #29197]  INFO -- : Completed 500 Internal Server Error in 19ms (ActiveRecord: 0.2ms)
F, [2019-03-01T22:04:21.687105 #29197] FATAL -- :   
F, [2019-03-01T22:04:21.691628 #29197] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T22:04:21.691666 #29197] FATAL -- :   
F, [2019-03-01T22:04:21.691691 #29197] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-01T22:04:23.695050 #29197]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 22:04:23 +0200
I, [2019-03-01T22:04:23.696099 #29197]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T22:04:23.696634 #29197] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T22:04:23.698453 #29197] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T22:04:23.699905 #29197] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T22:04:23.711535 #29197]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms)
F, [2019-03-01T22:04:23.717406 #29197] FATAL -- :   
F, [2019-03-01T22:04:23.722456 #29197] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T22:04:23.722514 #29197] FATAL -- :   
F, [2019-03-01T22:04:23.722552 #29197] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-01T22:04:25.729271 #29197]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 22:04:25 +0200
I, [2019-03-01T22:04:25.730165 #29197]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T22:04:25.730672 #29197] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T22:04:25.732326 #29197] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T22:04:25.733679 #29197] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T22:04:25.745761 #29197]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms)
F, [2019-03-01T22:04:25.751759 #29197] FATAL -- :   
F, [2019-03-01T22:04:25.756701 #29197] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T22:04:25.756746 #29197] FATAL -- :   
F, [2019-03-01T22:04:25.756773 #29197] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-01T22:04:27.762660 #29197]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 22:04:27 +0200
I, [2019-03-01T22:04:27.763535 #29197]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T22:04:27.764016 #29197] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T22:04:27.765754 #29197] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T22:04:27.767099 #29197] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T22:04:27.777714 #29197]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-01T22:04:27.786054 #29197] FATAL -- :   
F, [2019-03-01T22:04:27.790699 #29197] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T22:04:27.790738 #29197] FATAL -- :   
F, [2019-03-01T22:04:27.790766 #29197] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-01T22:04:29.797904 #29197]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 22:04:29 +0200
I, [2019-03-01T22:04:29.799390 #29197]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T22:04:29.799942 #29197] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T22:04:29.801616 #29197] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T22:04:29.803184 #29197] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T22:04:29.813266 #29197]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-01T22:04:29.819950 #29197] FATAL -- :   
F, [2019-03-01T22:04:29.824349 #29197] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T22:04:29.824385 #29197] FATAL -- :   
F, [2019-03-01T22:04:29.824411 #29197] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-01T22:04:31.831846 #29197]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 22:04:31 +0200
I, [2019-03-01T22:04:31.832769 #29197]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T22:04:31.833270 #29197] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T22:04:31.835082 #29197] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T22:04:31.836595 #29197] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T22:04:31.838202 #29197]  INFO -- : Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms)
F, [2019-03-01T22:04:31.841486 #29197] FATAL -- :   
F, [2019-03-01T22:04:31.841527 #29197] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T22:04:31.841549 #29197] FATAL -- :   
F, [2019-03-01T22:04:31.841571 #29197] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-01T22:04:31.843049 #29197]  INFO -- : Started GET "/delayed_job" for 127.0.0.1 at 2019-03-01 22:04:31 +0200
I, [2019-03-01T22:04:31.843822 #29197]  INFO -- : Processing by DummyController#delayed_job as HTML
I, [2019-03-01T22:04:31.857320 #29197]  INFO -- : Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.4ms)
F, [2019-03-01T22:04:31.866570 #29197] FATAL -- :   
F, [2019-03-01T22:04:31.866670 #29197] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n"))
       got: (#<Airbrake::Notice:0x00007ffd6ede8348 @config=#<Airbrake::Config:0x00007ffd6fb13e00 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007ffd6edb28d8 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,3 +1,2 @@
[0m[31m-["anything",
[0m[31m- "hash_including(\"handler\"=>\"--- !ruby/struct:BangoJob\\nbingo: bingo\\nbongo: bongo\\n\")"]
[0m[32m+[#<Airbrake::Notice:0x00007ffd6ede8348 @config=#<Airbrake::Config:0x00007ffd6fb13e00 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007ffd6fb0bf70 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007ffd6fb0bf20 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007ffd6fb0bed0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007ffd6fb0be08>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>86, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>142, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>197, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007ffd6edb28b0 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007ffd6ff3e458>, "rack.errors"=>#<StringIO:0x00007ffd6ff3e520>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007ffd704736a8 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007ffd70473658 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007ffd70473608 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007ffd704735b8>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007ffd6ecf9fe0 @filters=[#<Proc:0x00007ffd6ecf9e00@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007ffd6ecf9dd8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007ffd6ecf9d38@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007ffd6ecf9888@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007ffd6ecf9860@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007ffd6ecf9540 @key_generator=#<ActiveSupport::KeyGenerator:0x00007ffd6ecf9568 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007ffd6ecf9518 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007ffd702b87a0 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007ffd6ff6dc08>, "ROUTES_70363240951300_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"cd217353-dbfa-4e6f-9f81-890231d9ef39", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007ffd6ff3ccc0 @req=#<ActionDispatch::Request:0x00007ffd6ff3cce8 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7ffd6ef063b0 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007ffd6ef05de8 @by=#<ActionDispatch::Session::CookieStore:0x00007ffd6ebf8628 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007ffd6ebf8650 @app=#<Rack::Head:0x00007ffd6ebf8678 @app=#<Rack::ConditionalGet:0x00007ffd6ebf8718 @app=#<Rack::ETag:0x00007ffd6ebf87b8 @app=#<Rack::TempfileReaper:0x00007ffd6ebf88f8 @app=#<Warden::Manager:0x00007ffd6ebf8c68 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007ffd6ff6dc08>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70363232349820 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007ffd6eeff2b8 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007ffd6ef05960 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/delayed_job", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007ffd6eefd698 @req=#<ActionDispatch::Request:0x00007ffd6ef05960 ...>>>, @_response=#<ActionDispatch::Response:0x00007ffd6eeff6f0 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007ffd6eeff650>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007ffd6eeff588 @response=#<ActionDispatch::Response:0x00007ffd6eeff6f0 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007ffd6eeff560 @monitor=#<ActionDispatch::Response:0x00007ffd6eeff6f0 ...>, @cond=#<Thread::ConditionVariable:0x00007ffd6eeff510>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007ffd6ef05960 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/delayed_job", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007ffd6eefd698 @req=#<ActionDispatch::Request:0x00007ffd6ef05960 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007ffd6eeff010 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007ffd6eefeca0 @paths=[#<ActionView::FixtureResolver:0x00007ffd6fec1200 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7ffd6fec11d8 keys=1 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007ffd6fbe19e0 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-329480133219403877>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007ffd6edb28d8 @max_size=10000>>]
[0m):
F, [2019-03-01T22:04:31.866728 #29197] FATAL -- :   
F, [2019-03-01T22:04:31.866751 #29197] FATAL -- : lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
lib/airbrake/rack/middleware.rb:40:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-01T22:04:31.868750 #29197]  INFO -- : Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-01 22:04:31 +0200
I, [2019-03-01T22:04:31.869762 #29197]  INFO -- : Processing by DummyController#notify_airbrake_helper as HTML
I, [2019-03-01T22:04:31.869803 #29197]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-01T22:04:31.874495 #29197]  INFO -- :   Rendering dummy/notify_airbrake_helper.html.erb within layouts/application
I, [2019-03-01T22:04:31.874802 #29197]  INFO -- :   Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
I, [2019-03-01T22:04:31.875119 #29197]  INFO -- : Completed 200 OK in 5ms (Views: 1.0ms | ActiveRecord: 0.0ms)
I, [2019-03-01T22:04:33.882272 #29197]  INFO -- : Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-01 22:04:33 +0200
I, [2019-03-01T22:04:33.884557 #29197]  INFO -- : Processing by DummyController#notify_airbrake_helper as HTML
I, [2019-03-01T22:04:33.884632 #29197]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-01T22:04:33.897809 #29197]  INFO -- :   Rendering dummy/notify_airbrake_helper.html.erb within layouts/application
I, [2019-03-01T22:04:33.898127 #29197]  INFO -- :   Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
I, [2019-03-01T22:04:33.898530 #29197]  INFO -- : Completed 200 OK in 14ms (Views: 1.2ms | ActiveRecord: 0.0ms)
I, [2019-03-01T22:04:35.902535 #29197]  INFO -- : Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-01 22:04:35 +0200
I, [2019-03-01T22:04:35.903666 #29197]  INFO -- : Processing by DummyController#notify_airbrake_helper as HTML
I, [2019-03-01T22:04:35.903715 #29197]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-01T22:04:35.915403 #29197]  INFO -- :   Rendering dummy/notify_airbrake_helper.html.erb within layouts/application
I, [2019-03-01T22:04:35.915746 #29197]  INFO -- :   Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.3ms)
I, [2019-03-01T22:04:35.916083 #29197]  INFO -- : Completed 200 OK in 12ms (Views: 1.1ms | ActiveRecord: 0.0ms)
I, [2019-03-01T22:04:37.923324 #29197]  INFO -- : Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-01 22:04:37 +0200
I, [2019-03-01T22:04:37.924391 #29197]  INFO -- : Processing by DummyController#notify_airbrake_helper as HTML
I, [2019-03-01T22:04:37.924439 #29197]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-01T22:04:37.945974 #29197]  INFO -- :   Rendering dummy/notify_airbrake_helper.html.erb within layouts/application
I, [2019-03-01T22:04:37.946523 #29197]  INFO -- :   Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
I, [2019-03-01T22:04:37.946813 #29197]  INFO -- : Completed 200 OK in 22ms (Views: 1.2ms | ActiveRecord: 0.0ms)
I, [2019-03-01T22:04:39.954421 #29197]  INFO -- : Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-01 22:04:39 +0200
I, [2019-03-01T22:04:39.956176 #29197]  INFO -- : Processing by DummyController#notify_airbrake_helper as HTML
I, [2019-03-01T22:04:39.956249 #29197]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-01T22:04:39.984113 #29197]  INFO -- :   Rendering dummy/notify_airbrake_helper.html.erb within layouts/application
I, [2019-03-01T22:04:39.984404 #29197]  INFO -- :   Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
I, [2019-03-01T22:04:39.984761 #29197]  INFO -- : Completed 200 OK in 28ms (Views: 1.0ms | ActiveRecord: 0.0ms)
I, [2019-03-01T22:04:41.991182 #29197]  INFO -- : Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-01 22:04:41 +0200
I, [2019-03-01T22:04:41.992385 #29197]  INFO -- : Processing by DummyController#notify_airbrake_helper as HTML
I, [2019-03-01T22:04:41.992461 #29197]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-01T22:04:41.998169 #29197]  INFO -- :   Rendering dummy/notify_airbrake_helper.html.erb within layouts/application
I, [2019-03-01T22:04:42.003220 #29197]  INFO -- :   Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.3ms)
I, [2019-03-01T22:04:42.003628 #29197]  INFO -- : Completed 200 OK in 11ms (Views: 5.8ms | ActiveRecord: 0.0ms)
I, [2019-03-01T22:04:44.008549 #29197]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 22:04:44 +0200
I, [2019-03-01T22:04:44.009775 #29197]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T22:04:44.009831 #29197]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T22:04:44.010371 #29197] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T22:04:44.012070 #29197] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T22:04:44.013495 #29197] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T22:04:44.024015 #29197]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-01T22:04:44.029803 #29197] FATAL -- :   
F, [2019-03-01T22:04:44.037796 #29197] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T22:04:44.037851 #29197] FATAL -- :   
F, [2019-03-01T22:04:44.037879 #29197] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-01T22:04:46.044632 #29197]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 22:04:46 +0200
I, [2019-03-01T22:04:46.045762 #29197]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T22:04:46.045823 #29197]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T22:04:46.046336 #29197] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T22:04:46.048032 #29197] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T22:04:46.049452 #29197] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T22:04:46.060536 #29197]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms)
F, [2019-03-01T22:04:46.066438 #29197] FATAL -- :   
F, [2019-03-01T22:04:46.070827 #29197] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T22:04:46.070877 #29197] FATAL -- :   
F, [2019-03-01T22:04:46.070908 #29197] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-01T22:04:48.078819 #29197]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 22:04:48 +0200
I, [2019-03-01T22:04:48.080073 #29197]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T22:04:48.080156 #29197]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T22:04:48.080676 #29197] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T22:04:48.082581 #29197] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T22:04:48.084236 #29197] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T22:04:48.097168 #29197]  INFO -- : Completed 500 Internal Server Error in 17ms (ActiveRecord: 0.3ms)
F, [2019-03-01T22:04:48.103625 #29197] FATAL -- :   
F, [2019-03-01T22:04:48.108033 #29197] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T22:04:48.108082 #29197] FATAL -- :   
F, [2019-03-01T22:04:48.108110 #29197] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-01T22:04:50.115648 #29197]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 22:04:50 +0200
I, [2019-03-01T22:04:50.116846 #29197]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T22:04:50.116900 #29197]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T22:04:50.117409 #29197] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T22:04:50.119247 #29197] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T22:04:50.120614 #29197] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T22:04:50.131352 #29197]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-01T22:04:50.137828 #29197] FATAL -- :   
F, [2019-03-01T22:04:50.145718 #29197] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T22:04:50.145870 #29197] FATAL -- :   
F, [2019-03-01T22:04:50.145901 #29197] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-01T22:04:52.152451 #29197]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 22:04:52 +0200
I, [2019-03-01T22:04:52.153679 #29197]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T22:04:52.153762 #29197]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T22:04:52.154285 #29197] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T22:04:52.155986 #29197] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T22:04:52.157325 #29197] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T22:04:52.170208 #29197]  INFO -- : Completed 500 Internal Server Error in 16ms (ActiveRecord: 0.2ms)
F, [2019-03-01T22:04:52.180433 #29197] FATAL -- :   
F, [2019-03-01T22:04:52.195319 #29197] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T22:04:52.195421 #29197] FATAL -- :   
F, [2019-03-01T22:04:52.195490 #29197] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-01T22:04:54.200284 #29197]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-01 22:04:54 +0200
I, [2019-03-01T22:04:54.201442 #29197]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-01T22:04:54.201502 #29197]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-01T22:04:54.202586 #29197] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T22:04:54.205141 #29197] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T22:04:54.207874 #29197] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T22:04:54.230593 #29197]  INFO -- : Completed 500 Internal Server Error in 29ms (ActiveRecord: 0.2ms)
F, [2019-03-01T22:04:54.236380 #29197] FATAL -- :   
F, [2019-03-01T22:04:54.241510 #29197] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-01T22:04:54.241551 #29197] FATAL -- :   
F, [2019-03-01T22:04:54.241579 #29197] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-01T22:04:56.246013 #29197]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-01 22:04:56 +0200
I, [2019-03-01T22:04:56.247542 #29197]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-03-01T22:04:56.247605 #29197]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-01T22:04:56.257635 #29197]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-03-01T22:04:56.257930 #29197]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
I, [2019-03-01T22:04:56.258226 #29197]  INFO -- : Completed 200 OK in 11ms (Views: 1.0ms | ActiveRecord: 0.0ms)
I, [2019-03-01T22:04:58.264165 #29197]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-01 22:04:58 +0200
I, [2019-03-01T22:04:58.265295 #29197]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-03-01T22:04:58.265377 #29197]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-01T22:04:58.279944 #29197]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-03-01T22:04:58.280299 #29197]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
I, [2019-03-01T22:04:58.280619 #29197]  INFO -- : Completed 200 OK in 15ms (Views: 1.4ms | ActiveRecord: 0.0ms)
I, [2019-03-01T22:05:00.284802 #29197]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-01 22:05:00 +0200
I, [2019-03-01T22:05:00.286026 #29197]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-03-01T22:05:00.286081 #29197]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-01T22:05:00.296238 #29197]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-03-01T22:05:00.296524 #29197]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
I, [2019-03-01T22:05:00.296810 #29197]  INFO -- : Completed 200 OK in 11ms (Views: 0.9ms | ActiveRecord: 0.0ms)
I, [2019-03-01T22:05:02.304546 #29197]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-01 22:05:02 +0200
I, [2019-03-01T22:05:02.305837 #29197]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-03-01T22:05:02.305910 #29197]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-01T22:05:02.316290 #29197]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-03-01T22:05:02.316586 #29197]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
I, [2019-03-01T22:05:02.316887 #29197]  INFO -- : Completed 200 OK in 11ms (Views: 0.9ms | ActiveRecord: 0.0ms)
I, [2019-03-01T22:05:04.324636 #29197]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-01 22:05:04 +0200
I, [2019-03-01T22:05:04.328645 #29197]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-03-01T22:05:04.328734 #29197]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-01T22:05:04.339086 #29197]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-03-01T22:05:04.339385 #29197]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
I, [2019-03-01T22:05:04.339667 #29197]  INFO -- : Completed 200 OK in 11ms (Views: 1.0ms | ActiveRecord: 0.0ms)
I, [2019-03-01T22:05:06.344558 #29197]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-01 22:05:06 +0200
I, [2019-03-01T22:05:06.345849 #29197]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-03-01T22:05:06.345903 #29197]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-01T22:05:06.358476 #29197]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-03-01T22:05:06.358794 #29197]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
I, [2019-03-01T22:05:06.359070 #29197]  INFO -- : Completed 200 OK in 13ms (Views: 0.9ms | ActiveRecord: 0.0ms)
I, [2019-03-01T22:05:08.364943 #29197]  INFO -- : Started GET "/active_job" for 127.0.0.1 at 2019-03-01 22:05:08 +0200
I, [2019-03-01T22:05:08.366007 #29197]  INFO -- : Processing by DummyController#active_job as HTML
I, [2019-03-01T22:05:08.367523 #29197]  INFO -- :   Rendering dummy/active_job.html.erb within layouts/application
I, [2019-03-01T22:05:08.369358 #29197]  INFO -- :   Rendered dummy/active_job.html.erb within layouts/application (0.3ms)
I, [2019-03-01T22:05:08.370315 #29197]  INFO -- : Completed 200 OK in 4ms (Views: 3.2ms | ActiveRecord: 0.0ms)
I, [2019-03-01T22:05:10.379109 #29197]  INFO -- : Started GET "/active_job" for 127.0.0.1 at 2019-03-01 22:05:10 +0200
I, [2019-03-01T22:05:10.380404 #29197]  INFO -- : Processing by DummyController#active_job as HTML
I, [2019-03-01T22:05:10.382341 #29197]  INFO -- :   Rendering dummy/active_job.html.erb within layouts/application
I, [2019-03-01T22:05:10.382743 #29197]  INFO -- :   Rendered dummy/active_job.html.erb within layouts/application (0.3ms)
I, [2019-03-01T22:05:10.383103 #29197]  INFO -- : Completed 200 OK in 3ms (Views: 1.2ms | ActiveRecord: 0.0ms)
I, [2019-03-01T22:05:12.389489 #29197]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-01 22:05:12 +0200
I, [2019-03-01T22:05:12.390527 #29197]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-01T22:05:12.391121 #29197] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-01T22:05:12.393091 #29197] DEBUG -- :   [1m[36mBook Create (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-01T22:05:12.394902 #29197] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-01T22:05:12.397185 #29197]  INFO -- : Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.4ms)
F, [2019-03-01T22:05:12.399538 #29197] FATAL -- :   
F, [2019-03-01T22:05:12.399593 #29197] FATAL -- : RSpec::Expectations::ExpectationNotMetError (
expected: "AirbrakeTestError"
     got: "RSpec::Mocks::MockExpectationError"

(compared using ==)
):
F, [2019-03-01T22:05:12.399627 #29197] FATAL -- :   
F, [2019-03-01T22:05:12.399659 #29197] FATAL -- : lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
lib/airbrake/rack/middleware.rb:40:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-01T22:05:12.401380 #29197]  INFO -- : Started GET "/" for 127.0.0.1 at 2019-03-01 22:05:12 +0200
I, [2019-03-01T22:05:12.402213 #29197]  INFO -- : Processing by DummyController#index as HTML
I, [2019-03-01T22:05:12.403065 #29197]  INFO -- :   Rendering dummy/index.html.erb within layouts/application
I, [2019-03-01T22:05:12.403352 #29197]  INFO -- :   Rendered dummy/index.html.erb within layouts/application (0.2ms)
I, [2019-03-01T22:05:12.403659 #29197]  INFO -- : Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
D, [2019-03-04T11:33:18.058368 #68683] DEBUG -- :   [1m[35m (1.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-04T11:33:18.059365 #68683] DEBUG -- :   [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-04T11:33:18.062823 #68683] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-04T11:33:18.063367 #68683] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-04T11:33:18.063856 #68683] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-04T11:33:18.065722 #68683] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-04T11:33:18.081126 #68683] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-04T11:33:18.084813 #68683] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:33:18.085760 #68683] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-04 09:33:18.085124"], ["updated_at", "2019-03-04 09:33:18.085124"]]
D, [2019-03-04T11:33:18.085961 #68683] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:33:18.133468 #68683]  INFO -- : Started GET "/active_record_after_commit" for 127.0.0.1 at 2019-03-04 11:33:18 +0200
I, [2019-03-04T11:33:18.135448 #68683]  INFO -- : Processing by DummyController#active_record_after_commit as HTML
D, [2019-03-04T11:33:18.142928 #68683] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:33:18.144462 #68683] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "Bingo"]]
D, [2019-03-04T11:33:18.145695 #68683] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:33:18.147081 #68683]  INFO -- : Completed 500 Internal Server Error in 11ms (ActiveRecord: 0.6ms)
F, [2019-03-04T11:33:18.170715 #68683] FATAL -- :   
F, [2019-03-04T11:33:18.170824 #68683] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (an instance of AirbrakeTestError)
       got: (#<Airbrake::Notice:0x00007fcf85499c68 @config=#<Airbrake::Config:0x00007fcf85dc4ce8 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fcf8b3a6cb0 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of AirbrakeTestError"]
[0m[32m+[#<Airbrake::Notice:0x00007fcf85499c68 @config=#<Airbrake::Config:0x00007fcf85dc4ce8 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fcf85dc4c48 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fcf85dc4bf8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fcf85dc4ba8 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fcf85dc4b30>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3">, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"after_commit", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>48, :function=>"raise_error_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_commit_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>346, :function=>"committed!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>128, :function=>"commit_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>223, :function=>"block in commit_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>213, :function=>"commit_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>252, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>385, :function=>"with_transaction_returning_status"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>310, :function=>"block in save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>325, :function=>"rollback_active_record_state!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>309, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/suppressor.rb", :line=>44, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/persistence.rb", :line=>36, :function=>"create"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>123, :function=>"active_record_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>110, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: after_commit>, :rack_request=>#<ActionDispatch::Request:0x00007fcf8b3a6c88 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fcf87adb818>, "rack.errors"=>#<StringIO:0x00007fcf87adb890>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/active_record_after_commit", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fcf86329940 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fcf863298f0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fcf863298a0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fcf86329850>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fcf87ac9ca8 @filters=[#<Proc:0x00007fcf87ac9b90@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fcf87ac9b68@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fcf87ac9b40@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fcf87ac93c0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fcf87ac9398@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fcf87ac9190 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fcf87ac91b8 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fcf87ac9168 entries=0 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fcf85dbf4f0 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fcf85a5e5e0>, "ROUTES_70264638599920_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/active_record_after_commit", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"c1368240-d0d7-4569-a2e0-04fcfa25f1ef", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fcf87ab3818 @req=#<ActionDispatch::Request:0x00007fcf87ab3840 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7fcf87ab2530 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fcf87ab24e0 @by=#<ActionDispatch::Session::CookieStore:0x00007fcf854de980 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fcf854de9a8 @app=#<Rack::Head:0x00007fcf854de9d0 @app=#<Rack::ConditionalGet:0x00007fcf854de9f8 @app=#<Rack::ETag:0x00007fcf854dea20 @app=#<Rack::TempfileReaper:0x00007fcf854dea48 @app=#<Warden::Manager:0x00007fcf854deb10 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fcf85a5e5e0>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70264655548940 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"active_record_after_commit"}, "action_controller.instance"=>#<DummyController:0x00007fcf8b41f250 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fcf87ab2058 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_commit"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_commit", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fcf8b41cca8 @req=#<ActionDispatch::Request:0x00007fcf87ab2058 ...>>>, @_response=#<ActionDispatch::Response:0x00007fcf8b41f688 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fcf8b41f5e8>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fcf8b41f520 @response=#<ActionDispatch::Response:0x00007fcf8b41f688 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fcf8b41f480 @monitor=#<ActionDispatch::Response:0x00007fcf8b41f688 ...>, @cond=#<Thread::ConditionVariable:0x00007fcf8b41f458>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fcf87ab2058 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_commit"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_commit", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fcf8b41cca8 @req=#<ActionDispatch::Request:0x00007fcf87ab2058 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fcf8b41efa8 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fcf8b41edf0 @paths=[#<ActionView::FixtureResolver:0x00007fcf862ea088 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fcf862ea060 keys=0 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="active_record_after_commit", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"active_record_after_commit"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fcf8b072030 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-2693252134252969875>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fcf8b3a6cb0 @max_size=10000>>]
[0m):
F, [2019-03-04T11:33:18.170888 #68683] FATAL -- :   
F, [2019-03-04T11:33:18.170917 #68683] FATAL -- : lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
lib/airbrake/rack/middleware.rb:40:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:33:18.172785 #68683]  INFO -- : Started GET "/active_record_after_rollback" for 127.0.0.1 at 2019-03-04 11:33:18 +0200
I, [2019-03-04T11:33:18.173728 #68683]  INFO -- : Processing by DummyController#active_record_after_rollback as HTML
D, [2019-03-04T11:33:18.174053 #68683] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:33:18.175626 #68683] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "Bango"]]
D, [2019-03-04T11:33:18.176880 #68683] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
I, [2019-03-04T11:33:18.178145 #68683]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-04T11:33:18.193839 #68683] FATAL -- :   
F, [2019-03-04T11:33:18.193947 #68683] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (an instance of AirbrakeTestError)
       got: (#<Airbrake::Notice:0x00007fcf8b252238 @config=#<Airbrake::Config:0x00007fcf85dc4ce8 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fcf853c3af0 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of AirbrakeTestError"]
[0m[32m+[#<Airbrake::Notice:0x00007fcf8b252238 @config=#<Airbrake::Config:0x00007fcf85dc4ce8 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fcf85dc4c48 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fcf85dc4bf8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fcf85dc4ba8 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fcf85dc4b30>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3">, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"after_rollback", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>52, :function=>"raise_error_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_rollback_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>357, :function=>"rolledback!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>112, :function=>"rollback_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>231, :function=>"block in rollback_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>228, :function=>"rollback_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>242, :function=>"rescue in block in within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>259, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>127, :function=>"active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>120, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}, {:type=>"ActiveRecord::Rollback", :message=>"ActiveRecord::Rollback", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>129, :function=>"block in active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"block in transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>239, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>127, :function=>"active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>120, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: after_rollback>, :rack_request=>#<ActionDispatch::Request:0x00007fcf853c3ac8 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fcf87a51bb8>, "rack.errors"=>#<StringIO:0x00007fcf87a51c58>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/active_record_after_rollback", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fcf86329940 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fcf863298f0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fcf863298a0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fcf86329850>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fcf87ac9ca8 @filters=[#<Proc:0x00007fcf87ac9b90@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fcf87ac9b68@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fcf87ac9b40@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fcf87ac93c0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fcf87ac9398@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fcf87ac9190 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fcf87ac91b8 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fcf87ac9168 entries=0 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fcf85dbf4f0 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fcf85a5e5e0>, "ROUTES_70264638599920_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/active_record_after_rollback", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"ace8feeb-6a96-406b-b6c9-8a22eb00dc4b", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fcf87a50ad8 @req=#<ActionDispatch::Request:0x00007fcf87a50b00 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7fcf8b29bb40 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fcf8b29bac8 @by=#<ActionDispatch::Session::CookieStore:0x00007fcf854de980 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fcf854de9a8 @app=#<Rack::Head:0x00007fcf854de9d0 @app=#<Rack::ConditionalGet:0x00007fcf854de9f8 @app=#<Rack::ETag:0x00007fcf854dea20 @app=#<Rack::TempfileReaper:0x00007fcf854dea48 @app=#<Warden::Manager:0x00007fcf854deb10 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fcf85a5e5e0>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70264684862720 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"active_record_after_rollback"}, "action_controller.instance"=>#<DummyController:0x00007fcf8b29a560 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fcf8b29b6e0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_rollback"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_rollback", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fcf8b299840 @req=#<ActionDispatch::Request:0x00007fcf8b29b6e0 ...>>>, @_response=#<ActionDispatch::Response:0x00007fcf8b29a7b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fcf8b29a768>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fcf8b29a718 @response=#<ActionDispatch::Response:0x00007fcf8b29a7b8 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fcf8b29a6f0 @monitor=#<ActionDispatch::Response:0x00007fcf8b29a7b8 ...>, @cond=#<Thread::ConditionVariable:0x00007fcf8b29a6c8>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fcf8b29b6e0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_rollback"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_rollback", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fcf8b299840 @req=#<ActionDispatch::Request:0x00007fcf8b29b6e0 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fcf8b29a3f8 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fcf8b29a308 @paths=[#<ActionView::FixtureResolver:0x00007fcf862ea088 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fcf862ea060 keys=0 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="active_record_after_rollback", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"active_record_after_rollback"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fcf8b072030 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-2693252134252969875>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fcf853c3af0 @max_size=10000>>]
[0m):
F, [2019-03-04T11:33:18.194020 #68683] FATAL -- :   
F, [2019-03-04T11:33:18.194061 #68683] FATAL -- : lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
lib/airbrake/rack/middleware.rb:40:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:33:18.195651 #68683]  INFO -- : Started GET "/delayed_job" for 127.0.0.1 at 2019-03-04 11:33:18 +0200
I, [2019-03-04T11:33:18.196468 #68683]  INFO -- : Processing by DummyController#delayed_job as HTML
I, [2019-03-04T11:33:18.212433 #68683]  INFO -- : Completed 500 Internal Server Error in 16ms (ActiveRecord: 0.4ms)
F, [2019-03-04T11:33:18.222569 #68683] FATAL -- :   
F, [2019-03-04T11:33:18.222691 #68683] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n"))
       got: (#<Airbrake::Notice:0x00007fcf8b029e98 @config=#<Airbrake::Config:0x00007fcf85dc4ce8 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fcf85fd7f80 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,3 +1,2 @@
[0m[31m-["anything",
[0m[31m- "hash_including(\"handler\"=>\"--- !ruby/struct:BangoJob\\nbingo: bingo\\nbongo: bongo\\n\")"]
[0m[32m+[#<Airbrake::Notice:0x00007fcf8b029e98 @config=#<Airbrake::Config:0x00007fcf85dc4ce8 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fcf85dc4c48 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fcf85dc4bf8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fcf85dc4ba8 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fcf85dc4b30>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3">, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>86, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>142, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>197, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007fcf85fd7f58 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fcf86415228>, "rack.errors"=>#<StringIO:0x00007fcf864152c8>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fcf86329940 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fcf863298f0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fcf863298a0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fcf86329850>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fcf87ac9ca8 @filters=[#<Proc:0x00007fcf87ac9b90@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fcf87ac9b68@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fcf87ac9b40@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fcf87ac93c0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fcf87ac9398@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fcf87ac9190 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fcf87ac91b8 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fcf87ac9168 entries=0 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fcf85dbf4f0 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fcf85a5e5e0>, "ROUTES_70264638599920_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"ee08821a-827d-4927-8b98-ef32a66e7811", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fcf86414030 @req=#<ActionDispatch::Request:0x00007fcf86414058 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7fcf8640ee50 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fcf8640ee00 @by=#<ActionDispatch::Session::CookieStore:0x00007fcf854de980 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fcf854de9a8 @app=#<Rack::Head:0x00007fcf854de9d0 @app=#<Rack::ConditionalGet:0x00007fcf854de9f8 @app=#<Rack::ETag:0x00007fcf854dea20 @app=#<Rack::TempfileReaper:0x00007fcf854dea48 @app=#<Warden::Manager:0x00007fcf854deb10 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fcf85a5e5e0>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70264643679880 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fcf8640d960 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fcf8640ea18 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/delayed_job", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fcf8640cc40 @req=#<ActionDispatch::Request:0x00007fcf8640ea18 ...>>>, @_response=#<ActionDispatch::Response:0x00007fcf8640db90 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fcf8640db40>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fcf8640daf0 @response=#<ActionDispatch::Response:0x00007fcf8640db90 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fcf8640dac8 @monitor=#<ActionDispatch::Response:0x00007fcf8640db90 ...>, @cond=#<Thread::ConditionVariable:0x00007fcf8640daa0>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fcf8640ea18 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/delayed_job", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fcf8640cc40 @req=#<ActionDispatch::Request:0x00007fcf8640ea18 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fcf8640d7f8 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fcf8640d708 @paths=[#<ActionView::FixtureResolver:0x00007fcf862ea088 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fcf862ea060 keys=0 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fcf8b072030 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-2693252134252969875>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fcf85fd7f80 @max_size=10000>>]
[0m):
F, [2019-03-04T11:33:18.222769 #68683] FATAL -- :   
F, [2019-03-04T11:33:18.222806 #68683] FATAL -- : lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
lib/airbrake/rack/middleware.rb:40:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:33:18.224850 #68683]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-04 11:33:18 +0200
I, [2019-03-04T11:33:18.225780 #68683]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-04T11:33:18.226257 #68683] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:33:18.227671 #68683] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-04T11:33:18.228938 #68683] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:33:18.239612 #68683]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-04T11:33:18.256989 #68683] FATAL -- :   
F, [2019-03-04T11:33:18.262475 #68683] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-04T11:33:18.262554 #68683] FATAL -- :   
F, [2019-03-04T11:33:18.262586 #68683] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:33:20.268167 #68683]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-04 11:33:20 +0200
I, [2019-03-04T11:33:20.271934 #68683]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-04T11:33:20.272586 #68683] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:33:20.274592 #68683] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-04T11:33:20.276231 #68683] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:33:20.288897 #68683]  INFO -- : Completed 500 Internal Server Error in 17ms (ActiveRecord: 0.2ms)
F, [2019-03-04T11:33:20.294525 #68683] FATAL -- :   
F, [2019-03-04T11:33:20.303175 #68683] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-04T11:33:20.303232 #68683] FATAL -- :   
F, [2019-03-04T11:33:20.303262 #68683] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:33:22.308210 #68683]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-04 11:33:22 +0200
I, [2019-03-04T11:33:22.309399 #68683]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-04T11:33:22.309847 #68683] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:33:22.312144 #68683] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-04T11:33:22.314098 #68683] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:33:22.329154 #68683]  INFO -- : Completed 500 Internal Server Error in 20ms (ActiveRecord: 0.2ms)
F, [2019-03-04T11:33:22.336096 #68683] FATAL -- :   
F, [2019-03-04T11:33:22.343653 #68683] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-04T11:33:22.343715 #68683] FATAL -- :   
F, [2019-03-04T11:33:22.343743 #68683] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:33:24.346715 #68683]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-04 11:33:24 +0200
I, [2019-03-04T11:33:24.347637 #68683]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-04T11:33:24.348119 #68683] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:33:24.350099 #68683] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-04T11:33:24.351868 #68683] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:33:24.375243 #68683]  INFO -- : Completed 500 Internal Server Error in 27ms (ActiveRecord: 0.2ms)
F, [2019-03-04T11:33:24.381417 #68683] FATAL -- :   
F, [2019-03-04T11:33:24.385807 #68683] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-04T11:33:24.385849 #68683] FATAL -- :   
F, [2019-03-04T11:33:24.385875 #68683] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:33:26.391193 #68683]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-04 11:33:26 +0200
I, [2019-03-04T11:33:26.392211 #68683]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-04T11:33:26.392728 #68683] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:33:26.394359 #68683] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-04T11:33:26.395801 #68683] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:33:26.406420 #68683]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-04T11:33:26.412665 #68683] FATAL -- :   
F, [2019-03-04T11:33:26.416811 #68683] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-04T11:33:26.416861 #68683] FATAL -- :   
F, [2019-03-04T11:33:26.416887 #68683] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:33:28.419996 #68683]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-04 11:33:28 +0200
I, [2019-03-04T11:33:28.420874 #68683]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-04T11:33:28.421389 #68683] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:33:28.423040 #68683] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-04T11:33:28.424543 #68683] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:33:28.435453 #68683]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-04T11:33:28.441250 #68683] FATAL -- :   
F, [2019-03-04T11:33:28.445789 #68683] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-04T11:33:28.445834 #68683] FATAL -- :   
F, [2019-03-04T11:33:28.445862 #68683] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:33:30.452286 #68683]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-04 11:33:30 +0200
I, [2019-03-04T11:33:30.453727 #68683]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-03-04T11:33:30.453823 #68683]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-04T11:33:30.471559 #68683]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-03-04T11:33:30.472442 #68683]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.8ms)
I, [2019-03-04T11:33:30.472862 #68683]  INFO -- : Completed 200 OK in 19ms (Views: 7.9ms | ActiveRecord: 0.0ms)
I, [2019-03-04T11:33:32.477281 #68683]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-04 11:33:32 +0200
I, [2019-03-04T11:33:32.478472 #68683]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-03-04T11:33:32.478533 #68683]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-04T11:33:32.488599 #68683]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-03-04T11:33:32.488879 #68683]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
I, [2019-03-04T11:33:32.489158 #68683]  INFO -- : Completed 200 OK in 10ms (Views: 1.0ms | ActiveRecord: 0.0ms)
I, [2019-03-04T11:33:34.494447 #68683]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-04 11:33:34 +0200
I, [2019-03-04T11:33:34.495644 #68683]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-03-04T11:33:34.495704 #68683]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-04T11:33:34.505794 #68683]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-03-04T11:33:34.506108 #68683]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
I, [2019-03-04T11:33:34.506391 #68683]  INFO -- : Completed 200 OK in 11ms (Views: 0.9ms | ActiveRecord: 0.0ms)
I, [2019-03-04T11:33:36.511950 #68683]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-04 11:33:36 +0200
I, [2019-03-04T11:33:36.513190 #68683]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-03-04T11:33:36.513243 #68683]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-04T11:33:36.523427 #68683]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-03-04T11:33:36.523723 #68683]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
I, [2019-03-04T11:33:36.523995 #68683]  INFO -- : Completed 200 OK in 11ms (Views: 0.9ms | ActiveRecord: 0.0ms)
I, [2019-03-04T11:33:38.528720 #68683]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-04 11:33:38 +0200
I, [2019-03-04T11:33:38.529910 #68683]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-03-04T11:33:38.529969 #68683]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-04T11:33:38.540196 #68683]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-03-04T11:33:38.540534 #68683]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.3ms)
I, [2019-03-04T11:33:38.540796 #68683]  INFO -- : Completed 200 OK in 11ms (Views: 1.0ms | ActiveRecord: 0.0ms)
I, [2019-03-04T11:33:40.548029 #68683]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-04 11:33:40 +0200
I, [2019-03-04T11:33:40.549254 #68683]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-03-04T11:33:40.549307 #68683]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-04T11:33:40.559530 #68683]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-03-04T11:33:40.559828 #68683]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
I, [2019-03-04T11:33:40.560099 #68683]  INFO -- : Completed 200 OK in 11ms (Views: 1.0ms | ActiveRecord: 0.0ms)
I, [2019-03-04T11:33:42.566228 #68683]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-04 11:33:42 +0200
I, [2019-03-04T11:33:42.567457 #68683]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-04T11:33:42.567511 #68683]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-04T11:33:42.567988 #68683] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:33:42.569678 #68683] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-04T11:33:42.571076 #68683] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:33:42.581930 #68683]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-04T11:33:42.587837 #68683] FATAL -- :   
F, [2019-03-04T11:33:42.595565 #68683] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-04T11:33:42.595616 #68683] FATAL -- :   
F, [2019-03-04T11:33:42.595643 #68683] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:33:44.600983 #68683]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-04 11:33:44 +0200
I, [2019-03-04T11:33:44.602273 #68683]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-04T11:33:44.602338 #68683]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-04T11:33:44.602867 #68683] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:33:44.604689 #68683] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-04T11:33:44.606166 #68683] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:33:44.616833 #68683]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-04T11:33:44.622425 #68683] FATAL -- :   
F, [2019-03-04T11:33:44.627808 #68683] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-04T11:33:44.627866 #68683] FATAL -- :   
F, [2019-03-04T11:33:44.627895 #68683] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:33:46.631957 #68683]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-04 11:33:46 +0200
I, [2019-03-04T11:33:46.633159 #68683]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-04T11:33:46.633218 #68683]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-04T11:33:46.633712 #68683] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:33:46.635474 #68683] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-04T11:33:46.636975 #68683] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:33:46.647449 #68683]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-04T11:33:46.653768 #68683] FATAL -- :   
F, [2019-03-04T11:33:46.658350 #68683] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-04T11:33:46.658400 #68683] FATAL -- :   
F, [2019-03-04T11:33:46.658429 #68683] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:33:48.663925 #68683]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-04 11:33:48 +0200
I, [2019-03-04T11:33:48.665211 #68683]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-04T11:33:48.665267 #68683]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-04T11:33:48.665746 #68683] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:33:48.667598 #68683] DEBUG -- :   [1m[36mBook Create (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-04T11:33:48.668979 #68683] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:33:48.680523 #68683]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms)
F, [2019-03-04T11:33:48.687105 #68683] FATAL -- :   
F, [2019-03-04T11:33:48.693861 #68683] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-04T11:33:48.693940 #68683] FATAL -- :   
F, [2019-03-04T11:33:48.693971 #68683] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:33:50.698532 #68683]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-04 11:33:50 +0200
I, [2019-03-04T11:33:50.700064 #68683]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-04T11:33:50.700125 #68683]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-04T11:33:50.700611 #68683] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:33:50.702279 #68683] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-04T11:33:50.703672 #68683] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:33:50.714139 #68683]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-04T11:33:50.720337 #68683] FATAL -- :   
F, [2019-03-04T11:33:50.724792 #68683] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-04T11:33:50.724839 #68683] FATAL -- :   
F, [2019-03-04T11:33:50.724869 #68683] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:33:52.730441 #68683]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-04 11:33:52 +0200
I, [2019-03-04T11:33:52.731565 #68683]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-04T11:33:52.731618 #68683]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-04T11:33:52.732126 #68683] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:33:52.733649 #68683] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-04T11:33:52.734997 #68683] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:33:52.745379 #68683]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-04T11:33:52.751228 #68683] FATAL -- :   
F, [2019-03-04T11:33:52.755573 #68683] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-04T11:33:52.755612 #68683] FATAL -- :   
F, [2019-03-04T11:33:52.755638 #68683] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:33:54.762028 #68683]  INFO -- : Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-04 11:33:54 +0200
I, [2019-03-04T11:33:54.763380 #68683]  INFO -- : Processing by DummyController#notify_airbrake_helper as HTML
I, [2019-03-04T11:33:54.763435 #68683]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-04T11:33:54.773923 #68683]  INFO -- :   Rendering dummy/notify_airbrake_helper.html.erb within layouts/application
I, [2019-03-04T11:33:54.774254 #68683]  INFO -- :   Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
I, [2019-03-04T11:33:54.774550 #68683]  INFO -- : Completed 200 OK in 11ms (Views: 1.0ms | ActiveRecord: 0.0ms)
I, [2019-03-04T11:33:56.778792 #68683]  INFO -- : Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-04 11:33:56 +0200
I, [2019-03-04T11:33:56.780010 #68683]  INFO -- : Processing by DummyController#notify_airbrake_helper as HTML
I, [2019-03-04T11:33:56.780063 #68683]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-04T11:33:56.792365 #68683]  INFO -- :   Rendering dummy/notify_airbrake_helper.html.erb within layouts/application
I, [2019-03-04T11:33:56.792649 #68683]  INFO -- :   Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
I, [2019-03-04T11:33:56.792914 #68683]  INFO -- : Completed 200 OK in 13ms (Views: 0.9ms | ActiveRecord: 0.0ms)
I, [2019-03-04T11:33:58.795723 #68683]  INFO -- : Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-04 11:33:58 +0200
I, [2019-03-04T11:33:58.796910 #68683]  INFO -- : Processing by DummyController#notify_airbrake_helper as HTML
I, [2019-03-04T11:33:58.796963 #68683]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-04T11:33:58.807287 #68683]  INFO -- :   Rendering dummy/notify_airbrake_helper.html.erb within layouts/application
I, [2019-03-04T11:33:58.807643 #68683]  INFO -- :   Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.3ms)
I, [2019-03-04T11:33:58.807942 #68683]  INFO -- : Completed 200 OK in 11ms (Views: 1.0ms | ActiveRecord: 0.0ms)
I, [2019-03-04T11:34:00.814857 #68683]  INFO -- : Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-04 11:34:00 +0200
I, [2019-03-04T11:34:00.815997 #68683]  INFO -- : Processing by DummyController#notify_airbrake_helper as HTML
I, [2019-03-04T11:34:00.816049 #68683]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-04T11:34:00.826107 #68683]  INFO -- :   Rendering dummy/notify_airbrake_helper.html.erb within layouts/application
I, [2019-03-04T11:34:00.826444 #68683]  INFO -- :   Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.3ms)
I, [2019-03-04T11:34:00.826718 #68683]  INFO -- : Completed 200 OK in 11ms (Views: 1.0ms | ActiveRecord: 0.0ms)
I, [2019-03-04T11:34:02.830014 #68683]  INFO -- : Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-04 11:34:02 +0200
I, [2019-03-04T11:34:02.831213 #68683]  INFO -- : Processing by DummyController#notify_airbrake_helper as HTML
I, [2019-03-04T11:34:02.831265 #68683]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-04T11:34:02.841445 #68683]  INFO -- :   Rendering dummy/notify_airbrake_helper.html.erb within layouts/application
I, [2019-03-04T11:34:02.841783 #68683]  INFO -- :   Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.3ms)
I, [2019-03-04T11:34:02.842054 #68683]  INFO -- : Completed 200 OK in 11ms (Views: 1.1ms | ActiveRecord: 0.0ms)
I, [2019-03-04T11:34:04.846474 #68683]  INFO -- : Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-04 11:34:04 +0200
I, [2019-03-04T11:34:04.847477 #68683]  INFO -- : Processing by DummyController#notify_airbrake_helper as HTML
I, [2019-03-04T11:34:04.847525 #68683]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-04T11:34:04.856842 #68683]  INFO -- :   Rendering dummy/notify_airbrake_helper.html.erb within layouts/application
I, [2019-03-04T11:34:04.857135 #68683]  INFO -- :   Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
I, [2019-03-04T11:34:04.857415 #68683]  INFO -- : Completed 200 OK in 10ms (Views: 1.0ms | ActiveRecord: 0.0ms)
I, [2019-03-04T11:34:06.865767 #68683]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-04 11:34:06 +0200
I, [2019-03-04T11:34:06.866997 #68683]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-04T11:34:06.867505 #68683] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:34:06.869057 #68683] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-04T11:34:06.870230 #68683] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:34:06.880408 #68683]  INFO -- : Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.2ms)
F, [2019-03-04T11:34:06.886513 #68683] FATAL -- :   
F, [2019-03-04T11:34:06.893689 #68683] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-04T11:34:06.893741 #68683] FATAL -- :   
F, [2019-03-04T11:34:06.893767 #68683] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:34:08.899505 #68683]  INFO -- : Started GET "/active_job" for 127.0.0.1 at 2019-03-04 11:34:08 +0200
I, [2019-03-04T11:34:08.900501 #68683]  INFO -- : Processing by DummyController#active_job as HTML
I, [2019-03-04T11:34:08.901718 #68683]  INFO -- :   Rendering dummy/active_job.html.erb within layouts/application
I, [2019-03-04T11:34:08.902020 #68683]  INFO -- :   Rendered dummy/active_job.html.erb within layouts/application (0.2ms)
I, [2019-03-04T11:34:08.902338 #68683]  INFO -- : Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.0ms)
I, [2019-03-04T11:34:10.909608 #68683]  INFO -- : Started GET "/active_job" for 127.0.0.1 at 2019-03-04 11:34:10 +0200
I, [2019-03-04T11:34:10.910847 #68683]  INFO -- : Processing by DummyController#active_job as HTML
I, [2019-03-04T11:34:10.912207 #68683]  INFO -- :   Rendering dummy/active_job.html.erb within layouts/application
I, [2019-03-04T11:34:10.913337 #68683]  INFO -- :   Rendered dummy/active_job.html.erb within layouts/application (0.3ms)
I, [2019-03-04T11:34:10.913759 #68683]  INFO -- : Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.0ms)
I, [2019-03-04T11:34:12.920478 #68683]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-04 11:34:12 +0200
I, [2019-03-04T11:34:12.921510 #68683]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-04T11:34:12.922010 #68683] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:34:12.923974 #68683] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-04T11:34:12.925694 #68683] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:34:12.927083 #68683]  INFO -- : Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms)
F, [2019-03-04T11:34:12.928715 #68683] FATAL -- :   
F, [2019-03-04T11:34:12.928760 #68683] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-04T11:34:12.928790 #68683] FATAL -- :   
F, [2019-03-04T11:34:12.928817 #68683] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:34:12.930278 #68683]  INFO -- : Started GET "/resque" for 127.0.0.1 at 2019-03-04 11:34:12 +0200
I, [2019-03-04T11:34:12.931114 #68683]  INFO -- : Processing by DummyController#resque as HTML
I, [2019-03-04T11:34:12.932465 #68683]  INFO -- :   Rendering dummy/resque.html.erb within layouts/application
I, [2019-03-04T11:34:12.932738 #68683]  INFO -- :   Rendered dummy/resque.html.erb within layouts/application (0.2ms)
I, [2019-03-04T11:34:12.933034 #68683]  INFO -- : Completed 200 OK in 2ms (Views: 0.9ms | ActiveRecord: 0.0ms)
I, [2019-03-04T11:34:12.934393 #68683]  INFO -- : Started GET "/" for 127.0.0.1 at 2019-03-04 11:34:12 +0200
I, [2019-03-04T11:34:12.935036 #68683]  INFO -- : Processing by DummyController#index as HTML
I, [2019-03-04T11:34:12.935716 #68683]  INFO -- :   Rendering dummy/index.html.erb within layouts/application
I, [2019-03-04T11:34:12.935915 #68683]  INFO -- :   Rendered dummy/index.html.erb within layouts/application (0.1ms)
I, [2019-03-04T11:34:12.936205 #68683]  INFO -- : Completed 200 OK in 1ms (Views: 0.8ms | ActiveRecord: 0.0ms)
I, [2019-03-04T11:34:12.937550 #68683]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-04 11:34:12 +0200
I, [2019-03-04T11:34:12.938256 #68683]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-04T11:34:12.938664 #68683] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:34:12.940128 #68683] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-04T11:34:12.941447 #68683] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:34:12.943149 #68683]  INFO -- : Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms)
F, [2019-03-04T11:34:12.945687 #68683] FATAL -- :   
F, [2019-03-04T11:34:12.945764 #68683] FATAL -- : RSpec::Expectations::ExpectationNotMetError (
expected: "AirbrakeTestError"
     got: "RSpec::Mocks::MockExpectationError"

(compared using ==)
):
F, [2019-03-04T11:34:12.945793 #68683] FATAL -- :   
F, [2019-03-04T11:34:12.945818 #68683] FATAL -- : lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
lib/airbrake/rack/middleware.rb:40:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:34:12.947504 #68683]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-04 11:34:12 +0200
I, [2019-03-04T11:34:12.948259 #68683]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-04T11:34:12.948696 #68683] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:34:12.950039 #68683] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-04T11:34:12.951128 #68683] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:34:12.952245 #68683]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-04T11:34:12.953362 #68683] FATAL -- :   
F, [2019-03-04T11:34:12.953396 #68683] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-04T11:34:12.953419 #68683] FATAL -- :   
F, [2019-03-04T11:34:12.953440 #68683] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:34:12.954522 #68683]  INFO -- : Started HEAD "/crash" for 127.0.0.1 at 2019-03-04 11:34:12 +0200
I, [2019-03-04T11:34:12.959313 #68683]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-04T11:34:12.959737 #68683] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:34:12.961138 #68683] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-04T11:34:12.962421 #68683] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:34:12.963756 #68683]  INFO -- : Completed 0  in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-04T11:34:12.965297 #68683] FATAL -- :   
F, [2019-03-04T11:34:12.965336 #68683] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-04T11:34:12.965360 #68683] FATAL -- :   
F, [2019-03-04T11:34:12.965381 #68683] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:34:12.966474 #68683]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-04 11:34:12 +0200
I, [2019-03-04T11:34:12.967267 #68683]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-04T11:34:12.967562 #68683] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:34:12.968654 #68683] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-04T11:34:12.969774 #68683] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:34:12.979626 #68683]  INFO -- : Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.1ms)
F, [2019-03-04T11:34:12.984712 #68683] FATAL -- :   
F, [2019-03-04T11:34:12.984754 #68683] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-04T11:34:12.984780 #68683] FATAL -- :   
F, [2019-03-04T11:34:12.988960 #68683] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
D, [2019-03-04T11:34:47.431123 #68702] DEBUG -- :   [1m[35m (0.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-04T11:34:47.431577 #68702] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-04T11:34:47.434151 #68702] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-04T11:34:47.434744 #68702] DEBUG -- :   [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-04T11:34:47.435256 #68702] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-04T11:34:47.436718 #68702] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-04T11:34:47.446717 #68702] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-04T11:34:47.449980 #68702] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:34:47.450872 #68702] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-04 09:34:47.450304"], ["updated_at", "2019-03-04 09:34:47.450304"]]
D, [2019-03-04T11:34:47.451051 #68702] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:34:47.485013 #68702]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-04 11:34:47 +0200
I, [2019-03-04T11:34:47.491661 #68702]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-03-04T11:34:47.491729 #68702]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-04T11:34:47.504574 #68702]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-03-04T11:34:47.505285 #68702]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.6ms)
I, [2019-03-04T11:34:47.505667 #68702]  INFO -- : Completed 200 OK in 14ms (Views: 3.3ms | ActiveRecord: 0.0ms)
D, [2019-03-04T11:37:37.805811 #68763] DEBUG -- :   [1m[35m (0.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-04T11:37:37.806232 #68763] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-04T11:37:37.808709 #68763] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-04T11:37:37.809238 #68763] DEBUG -- :   [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-04T11:37:37.809702 #68763] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-04T11:37:37.810917 #68763] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-04T11:37:37.820650 #68763] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-04T11:37:37.823763 #68763] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:37:37.824546 #68763] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-04 09:37:37.824059"], ["updated_at", "2019-03-04 09:37:37.824059"]]
D, [2019-03-04T11:37:37.824709 #68763] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:37:37.858285 #68763]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-04 11:37:37 +0200
I, [2019-03-04T11:37:37.865245 #68763]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-03-04T11:37:37.865322 #68763]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-04T11:37:37.876722 #68763]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-03-04T11:37:37.877312 #68763]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.5ms)
I, [2019-03-04T11:37:37.877659 #68763]  INFO -- : Completed 200 OK in 12ms (Views: 2.8ms | ActiveRecord: 0.0ms)
D, [2019-03-04T11:42:46.897310 #68845] DEBUG -- :   [1m[35m (0.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-04T11:42:46.897752 #68845] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-04T11:42:46.900399 #68845] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-04T11:42:46.900964 #68845] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-04T11:42:46.901458 #68845] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-04T11:42:46.902895 #68845] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-04T11:42:46.912372 #68845] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-04T11:42:46.915685 #68845] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:42:46.916634 #68845] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-04 09:42:46.916037"], ["updated_at", "2019-03-04 09:42:46.916037"]]
D, [2019-03-04T11:42:46.916855 #68845] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:42:46.951103 #68845]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-04 11:42:46 +0200
I, [2019-03-04T11:42:46.957887 #68845]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-03-04T11:42:46.957946 #68845]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-04T11:42:46.970030 #68845]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-03-04T11:42:46.970724 #68845]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.6ms)
I, [2019-03-04T11:42:46.971072 #68845]  INFO -- : Completed 200 OK in 13ms (Views: 2.9ms | ActiveRecord: 0.0ms)
D, [2019-03-04T11:43:39.878886 #68869] DEBUG -- :   [1m[35m (0.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-04T11:43:39.879353 #68869] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-04T11:43:39.882019 #68869] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-04T11:43:39.882575 #68869] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-04T11:43:39.883093 #68869] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-04T11:43:39.884393 #68869] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-04T11:43:39.893902 #68869] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-04T11:43:39.897094 #68869] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:43:39.897954 #68869] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-04 09:43:39.897406"], ["updated_at", "2019-03-04 09:43:39.897406"]]
D, [2019-03-04T11:43:39.898158 #68869] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:43:39.932665 #68869]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-04 11:43:39 +0200
I, [2019-03-04T11:43:39.939859 #68869]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-03-04T11:43:39.939938 #68869]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-04T11:44:07.305539 #68869]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-03-04T11:44:07.306348 #68869]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.7ms)
I, [2019-03-04T11:44:07.306918 #68869]  INFO -- : Completed 200 OK in 27367ms (Views: 3.4ms | ActiveRecord: 0.0ms)
D, [2019-03-04T11:44:28.313444 #68887] DEBUG -- :   [1m[35m (0.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-04T11:44:28.313857 #68887] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-04T11:44:28.316457 #68887] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-04T11:44:28.316979 #68887] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-04T11:44:28.317438 #68887] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-04T11:44:28.318815 #68887] DEBUG -- :   [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-04T11:44:28.329840 #68887] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-04T11:44:28.333704 #68887] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:44:28.334660 #68887] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-04 09:44:28.334087"], ["updated_at", "2019-03-04 09:44:28.334087"]]
D, [2019-03-04T11:44:28.334910 #68887] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:44:28.368634 #68887]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-04 11:44:28 +0200
I, [2019-03-04T11:44:28.375625 #68887]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-03-04T11:44:28.375702 #68887]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-04T11:49:10.802383 #68887]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-03-04T11:49:10.803275 #68887]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.8ms)
I, [2019-03-04T11:49:10.803812 #68887]  INFO -- : Completed 200 OK in 282428ms (Views: 3.7ms | ActiveRecord: 0.0ms)
D, [2019-03-04T11:49:27.188703 #68962] DEBUG -- :   [1m[35m (0.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-04T11:49:27.189119 #68962] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-04T11:49:27.191782 #68962] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-04T11:49:27.192345 #68962] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-04T11:49:27.192806 #68962] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-04T11:49:27.194248 #68962] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-04T11:49:27.208296 #68962] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-04T11:49:27.211751 #68962] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:49:27.212615 #68962] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-04 09:49:27.212076"], ["updated_at", "2019-03-04 09:49:27.212076"]]
D, [2019-03-04T11:49:27.212773 #68962] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:49:27.243259 #68962]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-04 11:49:27 +0200
I, [2019-03-04T11:49:27.250605 #68962]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-03-04T11:49:27.250684 #68962]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-04T11:49:27.262533 #68962]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-03-04T11:49:27.263217 #68962]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.6ms)
I, [2019-03-04T11:49:27.263580 #68962]  INFO -- : Completed 200 OK in 13ms (Views: 3.0ms | ActiveRecord: 0.0ms)
D, [2019-03-04T11:50:29.759340 #68985] DEBUG -- :   [1m[35m (0.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-04T11:50:29.759804 #68985] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-04T11:50:29.762607 #68985] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-04T11:50:29.763189 #68985] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-04T11:50:29.763717 #68985] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-04T11:50:29.765309 #68985] DEBUG -- :   [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-04T11:50:29.775137 #68985] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-04T11:50:29.778381 #68985] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:50:29.779233 #68985] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-04 09:50:29.778682"], ["updated_at", "2019-03-04 09:50:29.778682"]]
D, [2019-03-04T11:50:29.779419 #68985] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:50:29.814599 #68985]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-04 11:50:29 +0200
I, [2019-03-04T11:50:29.821647 #68985]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-03-04T11:50:29.821720 #68985]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-04T11:50:29.834292 #68985]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-03-04T11:50:29.835045 #68985]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.6ms)
I, [2019-03-04T11:50:29.835473 #68985]  INFO -- : Completed 200 OK in 14ms (Views: 3.4ms | ActiveRecord: 0.0ms)
D, [2019-03-04T11:50:41.668421 #68997] DEBUG -- :   [1m[35m (1.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-04T11:50:41.669103 #68997] DEBUG -- :   [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-04T11:50:41.672102 #68997] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-04T11:50:41.672703 #68997] DEBUG -- :   [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-04T11:50:41.673234 #68997] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-04T11:50:41.674717 #68997] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-04T11:50:41.685952 #68997] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-04T11:50:41.691050 #68997] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:50:41.692234 #68997] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-04 09:50:41.691514"], ["updated_at", "2019-03-04 09:50:41.691514"]]
D, [2019-03-04T11:50:41.692520 #68997] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:50:41.741929 #68997]  INFO -- : Started HEAD "/crash" for 127.0.0.1 at 2019-03-04 11:50:41 +0200
I, [2019-03-04T11:50:41.748419 #68997]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-04T11:50:41.756467 #68997] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:50:41.758372 #68997] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-04T11:50:41.759658 #68997] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:50:41.761093 #68997]  INFO -- : Completed 0  in 12ms (ActiveRecord: 0.7ms)
F, [2019-03-04T11:50:41.762837 #68997] FATAL -- :   
F, [2019-03-04T11:50:41.762890 #68997] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-04T11:50:41.762926 #68997] FATAL -- :   
F, [2019-03-04T11:50:41.762954 #68997] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:50:41.764644 #68997]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-04 11:50:41 +0200
I, [2019-03-04T11:50:41.765490 #68997]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-04T11:50:41.765894 #68997] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:50:41.767678 #68997] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-04T11:50:41.769226 #68997] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:50:41.770880 #68997]  INFO -- : Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms)
F, [2019-03-04T11:50:41.772360 #68997] FATAL -- :   
F, [2019-03-04T11:50:41.772409 #68997] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-04T11:50:41.772439 #68997] FATAL -- :   
F, [2019-03-04T11:50:41.772466 #68997] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:50:41.773713 #68997]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-04 11:50:41 +0200
I, [2019-03-04T11:50:41.780240 #68997]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-04T11:50:41.780763 #68997] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:50:41.782299 #68997] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-04T11:50:41.783595 #68997] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:50:41.789633 #68997]  INFO -- : Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.2ms)
F, [2019-03-04T11:50:41.796109 #68997] FATAL -- :   
F, [2019-03-04T11:50:41.805912 #68997] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-04T11:50:41.805994 #68997] FATAL -- :   
F, [2019-03-04T11:50:41.806032 #68997] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:50:43.813615 #68997]  INFO -- : Started GET "/active_record_after_rollback" for 127.0.0.1 at 2019-03-04 11:50:43 +0200
I, [2019-03-04T11:50:43.814571 #68997]  INFO -- : Processing by DummyController#active_record_after_rollback as HTML
D, [2019-03-04T11:50:43.814906 #68997] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:50:43.816412 #68997] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "Bango"]]
D, [2019-03-04T11:50:43.817661 #68997] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
I, [2019-03-04T11:50:43.819117 #68997]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-04T11:50:43.844211 #68997] FATAL -- :   
F, [2019-03-04T11:50:43.844316 #68997] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (an instance of AirbrakeTestError)
       got: (#<Airbrake::Notice:0x00007fd62a36bed0 @config=#<Airbrake::Config:0x00007fd629453f88 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fd628534200 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of AirbrakeTestError"]
[0m[32m+[#<Airbrake::Notice:0x00007fd62a36bed0 @config=#<Airbrake::Config:0x00007fd629453f88 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fd629453f10 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fd629453ec0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fd629453e70 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fd629453df8>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"after_rollback", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>52, :function=>"raise_error_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_rollback_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>357, :function=>"rolledback!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>112, :function=>"rollback_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>231, :function=>"block in rollback_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>228, :function=>"rollback_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>242, :function=>"rescue in block in within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>259, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>127, :function=>"active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>120, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}, {:type=>"ActiveRecord::Rollback", :message=>"ActiveRecord::Rollback", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>129, :function=>"block in active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"block in transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>239, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>127, :function=>"active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>120, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: after_rollback>, :rack_request=>#<ActionDispatch::Request:0x00007fd6285341d8 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fd62a3781f8>, "rack.errors"=>#<StringIO:0x00007fd62a378270>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/active_record_after_rollback", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fd628403b88 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fd628403ac0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fd628403a70 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fd628403a20>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fd62a4b0ef8 @filters=[#<Proc:0x00007fd62a4b0de0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fd62a4b0db8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fd62a4b0d68@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fd62a4b05e8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fd62a4b05c0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fd62a4b03b8 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fd62a4b03e0 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fd62a4b0368 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fd6294532e0 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fd6288f2b08>, "ROUTES_70278890100100_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/active_record_after_rollback", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"5ab31a42-9cd1-497b-954f-6cd6d29a4a52", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fd62b856f48 @req=#<ActionDispatch::Request:0x00007fd62b856f70 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7fd62b855b48 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fd62b855af8 @by=#<ActionDispatch::Session::CookieStore:0x00007fd62a49b0d0 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fd62a49b0f8 @app=#<Rack::Head:0x00007fd62a49b120 @app=#<Rack::ConditionalGet:0x00007fd62a49b148 @app=#<Rack::ETag:0x00007fd62a49b170 @app=#<Rack::TempfileReaper:0x00007fd62a49b198 @app=#<Warden::Manager:0x00007fd62a49b260 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fd6288f2b08>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70278914944260 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"active_record_after_rollback"}, "action_controller.instance"=>#<DummyController:0x00007fd62b854220 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fd62b855710 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_rollback"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_rollback", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fd6295e6aa8 @req=#<ActionDispatch::Request:0x00007fd62b855710 ...>>>, @_response=#<ActionDispatch::Response:0x00007fd62b854478 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fd62b854400>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fd62b8543b0 @response=#<ActionDispatch::Response:0x00007fd62b854478 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fd62b854388 @monitor=#<ActionDispatch::Response:0x00007fd62b854478 ...>, @cond=#<Thread::ConditionVariable:0x00007fd62b854360>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fd62b855710 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_rollback"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_rollback", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fd6295e6aa8 @req=#<ActionDispatch::Request:0x00007fd62b855710 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fd62b854090 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fd62b854428 @paths=[#<ActionView::FixtureResolver:0x00007fd628398270 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fd628398248 keys=0 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="active_record_after_rollback", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"active_record_after_rollback"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fd62845ba68 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-169608738871186172>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fd628534200 @max_size=10000>>]
[0m):
F, [2019-03-04T11:50:43.844390 #68997] FATAL -- :   
F, [2019-03-04T11:50:43.844418 #68997] FATAL -- : lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
lib/airbrake/rack/middleware.rb:40:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:50:43.846163 #68997]  INFO -- : Started GET "/active_record_after_commit" for 127.0.0.1 at 2019-03-04 11:50:43 +0200
I, [2019-03-04T11:50:43.847196 #68997]  INFO -- : Processing by DummyController#active_record_after_commit as HTML
D, [2019-03-04T11:50:43.847731 #68997] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:50:43.849386 #68997] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "Bingo"]]
D, [2019-03-04T11:50:43.850797 #68997] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:50:43.852554 #68997]  INFO -- : Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms)
F, [2019-03-04T11:50:43.867118 #68997] FATAL -- :   
F, [2019-03-04T11:50:43.867191 #68997] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (an instance of AirbrakeTestError)
       got: (#<Airbrake::Notice:0x00007fd6291ae0a8 @config=#<Airbrake::Config:0x00007fd629453f88 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fd62a5bfe70 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of AirbrakeTestError"]
[0m[32m+[#<Airbrake::Notice:0x00007fd6291ae0a8 @config=#<Airbrake::Config:0x00007fd629453f88 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fd629453f10 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fd629453ec0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fd629453e70 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fd629453df8>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"after_commit", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>48, :function=>"raise_error_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_commit_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>346, :function=>"committed!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>128, :function=>"commit_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>223, :function=>"block in commit_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>213, :function=>"commit_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>252, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>385, :function=>"with_transaction_returning_status"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>310, :function=>"block in save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>325, :function=>"rollback_active_record_state!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>309, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/suppressor.rb", :line=>44, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/persistence.rb", :line=>36, :function=>"create"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>123, :function=>"active_record_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>110, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: after_commit>, :rack_request=>#<ActionDispatch::Request:0x00007fd62a5bfe48 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fd6282abf10>, "rack.errors"=>#<StringIO:0x00007fd6282b0600>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/active_record_after_commit", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fd628403b88 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fd628403ac0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fd628403a70 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fd628403a20>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fd62a4b0ef8 @filters=[#<Proc:0x00007fd62a4b0de0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fd62a4b0db8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fd62a4b0d68@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fd62a4b05e8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fd62a4b05c0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fd62a4b03b8 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fd62a4b03e0 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fd62a4b0368 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fd6294532e0 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fd6288f2b08>, "ROUTES_70278890100100_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/active_record_after_commit", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"608f82d8-72d9-4623-9204-a838afcd8e83", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fd6282a9080 @req=#<ActionDispatch::Request:0x00007fd6282a9288 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7fd62a0bd288 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fd62a0bd210 @by=#<ActionDispatch::Session::CookieStore:0x00007fd62a49b0d0 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fd62a49b0f8 @app=#<Rack::Head:0x00007fd62a49b120 @app=#<Rack::ConditionalGet:0x00007fd62a49b148 @app=#<Rack::ETag:0x00007fd62a49b170 @app=#<Rack::TempfileReaper:0x00007fd62a49b198 @app=#<Warden::Manager:0x00007fd62a49b260 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fd6288f2b08>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70278902573140 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"active_record_after_commit"}, "action_controller.instance"=>#<DummyController:0x00007fd62a1c48c0 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fd62a0bca40 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_commit"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_commit", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fd62a1bc580 @req=#<ActionDispatch::Request:0x00007fd62a0bca40 ...>>>, @_response=#<ActionDispatch::Response:0x00007fd62a1c4f28 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fd62a1c4ed8>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fd62a1c4dc0 @response=#<ActionDispatch::Response:0x00007fd62a1c4f28 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fd62a1c4cf8 @monitor=#<ActionDispatch::Response:0x00007fd62a1c4f28 ...>, @cond=#<Thread::ConditionVariable:0x00007fd62a1c4cd0>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fd62a0bca40 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_commit"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_commit", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fd62a1bc580 @req=#<ActionDispatch::Request:0x00007fd62a0bca40 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fd62a1c43e8 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fd62a1bfd70 @paths=[#<ActionView::FixtureResolver:0x00007fd628398270 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fd628398248 keys=0 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="active_record_after_commit", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"active_record_after_commit"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fd62845ba68 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-169608738871186172>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fd62a5bfe70 @max_size=10000>>]
[0m):
F, [2019-03-04T11:50:43.867251 #68997] FATAL -- :   
F, [2019-03-04T11:50:43.867277 #68997] FATAL -- : lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
lib/airbrake/rack/middleware.rb:40:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:50:43.869208 #68997]  INFO -- : Started GET "/delayed_job" for 127.0.0.1 at 2019-03-04 11:50:43 +0200
I, [2019-03-04T11:50:43.870056 #68997]  INFO -- : Processing by DummyController#delayed_job as HTML
I, [2019-03-04T11:50:43.884325 #68997]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.4ms)
F, [2019-03-04T11:50:43.894289 #68997] FATAL -- :   
F, [2019-03-04T11:50:43.894379 #68997] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n"))
       got: (#<Airbrake::Notice:0x00007fd6286254c0 @config=#<Airbrake::Config:0x00007fd629453f88 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fd62a489308 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,3 +1,2 @@
[0m[31m-["anything",
[0m[31m- "hash_including(\"handler\"=>\"--- !ruby/struct:BangoJob\\nbingo: bingo\\nbongo: bongo\\n\")"]
[0m[32m+[#<Airbrake::Notice:0x00007fd6286254c0 @config=#<Airbrake::Config:0x00007fd629453f88 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fd629453f10 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fd629453ec0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fd629453e70 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fd629453df8>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>86, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>142, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>197, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.1.0", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007fd62a4892b8 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fd628687468>, "rack.errors"=>#<StringIO:0x00007fd628687530>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fd628403b88 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fd628403ac0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fd628403a70 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fd628403a20>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fd62a4b0ef8 @filters=[#<Proc:0x00007fd62a4b0de0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fd62a4b0db8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fd62a4b0d68@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fd62a4b05e8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fd62a4b05c0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fd62a4b03b8 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fd62a4b03e0 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fd62a4b0368 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fd6294532e0 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fd6288f2b08>, "ROUTES_70278890100100_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"bda584ef-65e7-4525-8af3-41a60565191c", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fd6286858e8 @req=#<ActionDispatch::Request:0x00007fd628685910 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7fd628684740 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fd6286846f0 @by=#<ActionDispatch::Session::CookieStore:0x00007fd62a49b0d0 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fd62a49b0f8 @app=#<Rack::Head:0x00007fd62a49b120 @app=#<Rack::ConditionalGet:0x00007fd62a49b148 @app=#<Rack::ETag:0x00007fd62a49b170 @app=#<Rack::TempfileReaper:0x00007fd62a49b198 @app=#<Warden::Manager:0x00007fd62a49b260 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fd6288f2b08>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70278888825600 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fd62867f1f0 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fd6286842e0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/delayed_job", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fd62867e4a8 @req=#<ActionDispatch::Request:0x00007fd6286842e0 ...>>>, @_response=#<ActionDispatch::Response:0x00007fd62867f420 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fd62867f3d0>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fd62867f380 @response=#<ActionDispatch::Response:0x00007fd62867f420 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fd62867f358 @monitor=#<ActionDispatch::Response:0x00007fd62867f420 ...>, @cond=#<Thread::ConditionVariable:0x00007fd62867f330>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fd6286842e0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/delayed_job", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fd62867e4a8 @req=#<ActionDispatch::Request:0x00007fd6286842e0 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fd62867f088 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fd62867ef98 @paths=[#<ActionView::FixtureResolver:0x00007fd628398270 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fd628398248 keys=0 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fd62845ba68 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-169608738871186172>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fd62a489308 @max_size=10000>>]
[0m):
F, [2019-03-04T11:50:43.894450 #68997] FATAL -- :   
F, [2019-03-04T11:50:43.894476 #68997] FATAL -- : lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
lib/airbrake/rack/middleware.rb:40:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:50:43.896206 #68997]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-04 11:50:43 +0200
I, [2019-03-04T11:50:43.896994 #68997]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-04T11:50:43.897451 #68997] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:50:43.898889 #68997] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-04T11:50:43.900157 #68997] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:50:43.901900 #68997]  INFO -- : Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms)
F, [2019-03-04T11:50:43.904276 #68997] FATAL -- :   
F, [2019-03-04T11:50:43.904334 #68997] FATAL -- : RSpec::Expectations::ExpectationNotMetError (
expected: "AirbrakeTestError"
     got: "RSpec::Mocks::MockExpectationError"

(compared using ==)
):
F, [2019-03-04T11:50:43.904365 #68997] FATAL -- :   
F, [2019-03-04T11:50:43.904400 #68997] FATAL -- : lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
lib/airbrake/rack/middleware.rb:40:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:50:43.906048 #68997]  INFO -- : Started GET "/" for 127.0.0.1 at 2019-03-04 11:50:43 +0200
I, [2019-03-04T11:50:43.906873 #68997]  INFO -- : Processing by DummyController#index as HTML
I, [2019-03-04T11:50:43.909464 #68997]  INFO -- :   Rendering dummy/index.html.erb within layouts/application
I, [2019-03-04T11:50:43.910263 #68997]  INFO -- :   Rendered dummy/index.html.erb within layouts/application (0.7ms)
I, [2019-03-04T11:50:43.910638 #68997]  INFO -- : Completed 200 OK in 4ms (Views: 3.2ms | ActiveRecord: 0.0ms)
I, [2019-03-04T11:50:43.914011 #68997]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-04 11:50:43 +0200
I, [2019-03-04T11:50:43.915229 #68997]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-04T11:50:43.915688 #68997] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:50:43.917225 #68997] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-04T11:50:43.918574 #68997] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:50:43.928204 #68997]  INFO -- : Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.2ms)
F, [2019-03-04T11:50:43.933847 #68997] FATAL -- :   
F, [2019-03-04T11:50:43.938660 #68997] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-04T11:50:43.938734 #68997] FATAL -- :   
F, [2019-03-04T11:50:43.938766 #68997] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:50:45.946267 #68997]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-04 11:50:45 +0200
I, [2019-03-04T11:50:45.947359 #68997]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-04T11:50:45.947844 #68997] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:50:45.949436 #68997] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-04T11:50:45.950751 #68997] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:50:45.956432 #68997]  INFO -- : Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.2ms)
F, [2019-03-04T11:50:45.966572 #68997] FATAL -- :   
F, [2019-03-04T11:50:45.974311 #68997] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-04T11:50:45.974368 #68997] FATAL -- :   
F, [2019-03-04T11:50:45.974395 #68997] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:50:47.980413 #68997]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-04 11:50:47 +0200
I, [2019-03-04T11:50:47.981438 #68997]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-04T11:50:47.981871 #68997] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:50:47.983568 #68997] DEBUG -- :   [1m[36mBook Create (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-04T11:50:47.984972 #68997] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:50:47.991387 #68997]  INFO -- : Completed 500 Internal Server Error in 10ms (ActiveRecord: 0.2ms)
F, [2019-03-04T11:50:48.002199 #68997] FATAL -- :   
F, [2019-03-04T11:50:48.006907 #68997] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-04T11:50:48.006958 #68997] FATAL -- :   
F, [2019-03-04T11:50:48.006985 #68997] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:50:50.014971 #68997]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-04 11:50:50 +0200
I, [2019-03-04T11:50:50.019792 #68997]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-04T11:50:50.020325 #68997] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:50:50.022105 #68997] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-04T11:50:50.023571 #68997] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:50:50.034732 #68997]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms)
F, [2019-03-04T11:50:50.040544 #68997] FATAL -- :   
F, [2019-03-04T11:50:50.045294 #68997] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-04T11:50:50.045376 #68997] FATAL -- :   
F, [2019-03-04T11:50:50.045407 #68997] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:50:52.049676 #68997]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-04 11:50:52 +0200
I, [2019-03-04T11:50:52.050732 #68997]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-04T11:50:52.051225 #68997] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:50:52.052771 #68997] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-04T11:50:52.054009 #68997] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:50:52.064845 #68997]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-04T11:50:52.070243 #68997] FATAL -- :   
F, [2019-03-04T11:50:52.075531 #68997] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-04T11:50:52.075589 #68997] FATAL -- :   
F, [2019-03-04T11:50:52.075618 #68997] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:50:54.082965 #68997]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-04 11:50:54 +0200
I, [2019-03-04T11:50:54.083934 #68997]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-04T11:50:54.084455 #68997] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:50:54.088044 #68997] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-04T11:50:54.089211 #68997] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:50:54.099165 #68997]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms)
F, [2019-03-04T11:50:54.104981 #68997] FATAL -- :   
F, [2019-03-04T11:50:54.109807 #68997] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-04T11:50:54.109861 #68997] FATAL -- :   
F, [2019-03-04T11:50:54.109888 #68997] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:50:56.113317 #68997]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-04 11:50:56 +0200
I, [2019-03-04T11:50:56.114246 #68997]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-04T11:50:56.114725 #68997] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:50:56.116324 #68997] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-04T11:50:56.117884 #68997] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:50:56.128572 #68997]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.3ms)
F, [2019-03-04T11:50:56.134370 #68997] FATAL -- :   
F, [2019-03-04T11:50:56.138953 #68997] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-04T11:50:56.138988 #68997] FATAL -- :   
F, [2019-03-04T11:50:56.139013 #68997] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:50:58.146218 #68997]  INFO -- : Started GET "/resque" for 127.0.0.1 at 2019-03-04 11:50:58 +0200
I, [2019-03-04T11:50:58.147131 #68997]  INFO -- : Processing by DummyController#resque as HTML
I, [2019-03-04T11:50:58.148841 #68997]  INFO -- :   Rendering dummy/resque.html.erb within layouts/application
I, [2019-03-04T11:50:58.149115 #68997]  INFO -- :   Rendered dummy/resque.html.erb within layouts/application (0.2ms)
I, [2019-03-04T11:50:58.149411 #68997]  INFO -- : Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.0ms)
I, [2019-03-04T11:50:58.151042 #68997]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-04 11:50:58 +0200
I, [2019-03-04T11:50:58.151945 #68997]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-03-04T11:50:58.151990 #68997]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-04T11:50:58.161239 #68997]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-03-04T11:50:58.161528 #68997]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
I, [2019-03-04T11:50:58.161814 #68997]  INFO -- : Completed 200 OK in 10ms (Views: 0.9ms | ActiveRecord: 0.0ms)
I, [2019-03-04T11:51:00.166892 #68997]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-04 11:51:00 +0200
I, [2019-03-04T11:51:00.168111 #68997]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-03-04T11:51:00.168167 #68997]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-04T11:51:00.178433 #68997]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-03-04T11:51:00.178718 #68997]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
I, [2019-03-04T11:51:00.178987 #68997]  INFO -- : Completed 200 OK in 11ms (Views: 0.9ms | ActiveRecord: 0.0ms)
I, [2019-03-04T11:51:02.186431 #68997]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-04 11:51:02 +0200
I, [2019-03-04T11:51:02.187604 #68997]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-03-04T11:51:02.187663 #68997]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-04T11:51:02.199527 #68997]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-03-04T11:51:02.199821 #68997]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
I, [2019-03-04T11:51:02.200133 #68997]  INFO -- : Completed 200 OK in 12ms (Views: 0.9ms | ActiveRecord: 0.0ms)
I, [2019-03-04T11:51:04.207444 #68997]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-04 11:51:04 +0200
I, [2019-03-04T11:51:04.208634 #68997]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-03-04T11:51:04.208691 #68997]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-04T11:51:04.218249 #68997]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-03-04T11:51:04.218594 #68997]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.3ms)
I, [2019-03-04T11:51:04.218886 #68997]  INFO -- : Completed 200 OK in 10ms (Views: 1.0ms | ActiveRecord: 0.0ms)
I, [2019-03-04T11:51:06.227038 #68997]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-04 11:51:06 +0200
I, [2019-03-04T11:51:06.228513 #68997]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-03-04T11:51:06.228564 #68997]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-04T11:51:06.238783 #68997]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-03-04T11:51:06.239142 #68997]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.3ms)
I, [2019-03-04T11:51:06.239491 #68997]  INFO -- : Completed 200 OK in 11ms (Views: 1.5ms | ActiveRecord: 0.0ms)
I, [2019-03-04T11:51:08.247662 #68997]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-03-04 11:51:08 +0200
I, [2019-03-04T11:51:08.248813 #68997]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-03-04T11:51:08.248868 #68997]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-04T11:51:08.258699 #68997]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-03-04T11:51:08.259048 #68997]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.3ms)
I, [2019-03-04T11:51:08.259318 #68997]  INFO -- : Completed 200 OK in 10ms (Views: 1.1ms | ActiveRecord: 0.0ms)
I, [2019-03-04T11:51:10.266900 #68997]  INFO -- : Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-04 11:51:10 +0200
I, [2019-03-04T11:51:10.268184 #68997]  INFO -- : Processing by DummyController#notify_airbrake_helper as HTML
I, [2019-03-04T11:51:10.268244 #68997]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-04T11:51:10.278495 #68997]  INFO -- :   Rendering dummy/notify_airbrake_helper.html.erb within layouts/application
I, [2019-03-04T11:51:10.278840 #68997]  INFO -- :   Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.3ms)
I, [2019-03-04T11:51:10.279174 #68997]  INFO -- : Completed 200 OK in 11ms (Views: 1.0ms | ActiveRecord: 0.0ms)
I, [2019-03-04T11:51:12.287228 #68997]  INFO -- : Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-04 11:51:12 +0200
I, [2019-03-04T11:51:12.288485 #68997]  INFO -- : Processing by DummyController#notify_airbrake_helper as HTML
I, [2019-03-04T11:51:12.288538 #68997]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-04T11:51:12.298389 #68997]  INFO -- :   Rendering dummy/notify_airbrake_helper.html.erb within layouts/application
I, [2019-03-04T11:51:12.298687 #68997]  INFO -- :   Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
I, [2019-03-04T11:51:12.298974 #68997]  INFO -- : Completed 200 OK in 10ms (Views: 1.0ms | ActiveRecord: 0.0ms)
I, [2019-03-04T11:51:14.306801 #68997]  INFO -- : Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-04 11:51:14 +0200
I, [2019-03-04T11:51:14.307945 #68997]  INFO -- : Processing by DummyController#notify_airbrake_helper as HTML
I, [2019-03-04T11:51:14.307996 #68997]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-04T11:51:14.318032 #68997]  INFO -- :   Rendering dummy/notify_airbrake_helper.html.erb within layouts/application
I, [2019-03-04T11:51:14.318391 #68997]  INFO -- :   Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.3ms)
I, [2019-03-04T11:51:14.318719 #68997]  INFO -- : Completed 200 OK in 11ms (Views: 1.1ms | ActiveRecord: 0.0ms)
I, [2019-03-04T11:51:16.325250 #68997]  INFO -- : Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-04 11:51:16 +0200
I, [2019-03-04T11:51:16.326567 #68997]  INFO -- : Processing by DummyController#notify_airbrake_helper as HTML
I, [2019-03-04T11:51:16.326622 #68997]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-04T11:51:16.338601 #68997]  INFO -- :   Rendering dummy/notify_airbrake_helper.html.erb within layouts/application
I, [2019-03-04T11:51:16.338891 #68997]  INFO -- :   Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
I, [2019-03-04T11:51:16.339218 #68997]  INFO -- : Completed 200 OK in 12ms (Views: 1.0ms | ActiveRecord: 0.0ms)
I, [2019-03-04T11:51:18.347068 #68997]  INFO -- : Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-04 11:51:18 +0200
I, [2019-03-04T11:51:18.348295 #68997]  INFO -- : Processing by DummyController#notify_airbrake_helper as HTML
I, [2019-03-04T11:51:18.348380 #68997]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-04T11:51:18.363220 #68997]  INFO -- :   Rendering dummy/notify_airbrake_helper.html.erb within layouts/application
I, [2019-03-04T11:51:18.363548 #68997]  INFO -- :   Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
I, [2019-03-04T11:51:18.363908 #68997]  INFO -- : Completed 200 OK in 15ms (Views: 1.1ms | ActiveRecord: 0.0ms)
I, [2019-03-04T11:51:20.370390 #68997]  INFO -- : Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-03-04 11:51:20 +0200
I, [2019-03-04T11:51:20.371419 #68997]  INFO -- : Processing by DummyController#notify_airbrake_helper as HTML
I, [2019-03-04T11:51:20.371464 #68997]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-03-04T11:51:20.380866 #68997]  INFO -- :   Rendering dummy/notify_airbrake_helper.html.erb within layouts/application
I, [2019-03-04T11:51:20.381171 #68997]  INFO -- :   Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
I, [2019-03-04T11:51:20.381513 #68997]  INFO -- : Completed 200 OK in 10ms (Views: 1.0ms | ActiveRecord: 0.0ms)
I, [2019-03-04T11:51:22.388215 #68997]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-04 11:51:22 +0200
I, [2019-03-04T11:51:22.389576 #68997]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-04T11:51:22.389639 #68997]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-04T11:51:22.390185 #68997] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:51:22.392106 #68997] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-04T11:51:22.393627 #68997] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:51:22.404109 #68997]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-04T11:51:22.409391 #68997] FATAL -- :   
F, [2019-03-04T11:51:22.414347 #68997] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-04T11:51:22.414398 #68997] FATAL -- :   
F, [2019-03-04T11:51:22.414424 #68997] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:51:24.418286 #68997]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-04 11:51:24 +0200
I, [2019-03-04T11:51:24.419355 #68997]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-04T11:51:24.419409 #68997]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-04T11:51:24.419850 #68997] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:51:24.421466 #68997] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-04T11:51:24.422888 #68997] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:51:24.434003 #68997]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-04T11:51:24.440103 #68997] FATAL -- :   
F, [2019-03-04T11:51:24.446914 #68997] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-04T11:51:24.446965 #68997] FATAL -- :   
F, [2019-03-04T11:51:24.446994 #68997] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:51:26.453270 #68997]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-04 11:51:26 +0200
I, [2019-03-04T11:51:26.454471 #68997]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-04T11:51:26.454524 #68997]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-04T11:51:26.455043 #68997] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:51:26.457011 #68997] DEBUG -- :   [1m[36mBook Create (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-04T11:51:26.458594 #68997] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:51:26.468689 #68997]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.3ms)
F, [2019-03-04T11:51:26.474654 #68997] FATAL -- :   
F, [2019-03-04T11:51:26.479227 #68997] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-04T11:51:26.479278 #68997] FATAL -- :   
F, [2019-03-04T11:51:26.479306 #68997] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:51:28.487362 #68997]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-04 11:51:28 +0200
I, [2019-03-04T11:51:28.488527 #68997]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-04T11:51:28.488587 #68997]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-04T11:51:28.489158 #68997] DEBUG -- :   [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:51:28.490975 #68997] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-04T11:51:28.492540 #68997] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:51:28.503093 #68997]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.3ms)
F, [2019-03-04T11:51:28.509341 #68997] FATAL -- :   
F, [2019-03-04T11:51:28.513791 #68997] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-04T11:51:28.513838 #68997] FATAL -- :   
F, [2019-03-04T11:51:28.513865 #68997] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:51:30.520007 #68997]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-04 11:51:30 +0200
I, [2019-03-04T11:51:30.521052 #68997]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-04T11:51:30.521099 #68997]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-04T11:51:30.521527 #68997] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:51:30.523142 #68997] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-04T11:51:30.524623 #68997] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:51:30.535305 #68997]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-04T11:51:30.541695 #68997] FATAL -- :   
F, [2019-03-04T11:51:30.547879 #68997] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-04T11:51:30.547936 #68997] FATAL -- :   
F, [2019-03-04T11:51:30.547965 #68997] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:51:32.554977 #68997]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-03-04 11:51:32 +0200
I, [2019-03-04T11:51:32.556291 #68997]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-03-04T11:51:32.556359 #68997]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-03-04T11:51:32.556842 #68997] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:51:32.558583 #68997] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-04T11:51:32.559950 #68997] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:51:32.570257 #68997]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-03-04T11:51:32.576485 #68997] FATAL -- :   
F, [2019-03-04T11:51:32.580940 #68997] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-04T11:51:32.580983 #68997] FATAL -- :   
F, [2019-03-04T11:51:32.581009 #68997] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-03-04T11:51:34.586843 #68997]  INFO -- : Started GET "/active_job" for 127.0.0.1 at 2019-03-04 11:51:34 +0200
I, [2019-03-04T11:51:34.587920 #68997]  INFO -- : Processing by DummyController#active_job as HTML
I, [2019-03-04T11:51:34.589599 #68997]  INFO -- :   Rendering dummy/active_job.html.erb within layouts/application
I, [2019-03-04T11:51:34.592342 #68997]  INFO -- :   Rendered dummy/active_job.html.erb within layouts/application (0.3ms)
I, [2019-03-04T11:51:34.593247 #68997]  INFO -- : Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.0ms)
I, [2019-03-04T11:51:36.600432 #68997]  INFO -- : Started GET "/active_job" for 127.0.0.1 at 2019-03-04 11:51:36 +0200
I, [2019-03-04T11:51:36.601411 #68997]  INFO -- : Processing by DummyController#active_job as HTML
I, [2019-03-04T11:51:36.602642 #68997]  INFO -- :   Rendering dummy/active_job.html.erb within layouts/application
I, [2019-03-04T11:51:36.603592 #68997]  INFO -- :   Rendered dummy/active_job.html.erb within layouts/application (0.3ms)
I, [2019-03-04T11:51:36.603900 #68997]  INFO -- : Completed 200 OK in 2ms (Views: 1.8ms | ActiveRecord: 0.0ms)
I, [2019-03-04T11:51:38.609366 #68997]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-03-04 11:51:38 +0200
I, [2019-03-04T11:51:38.610191 #68997]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-03-04T11:51:38.610647 #68997] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-04T11:51:38.612038 #68997] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-03-04T11:51:38.613180 #68997] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-04T11:51:38.614292 #68997]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
F, [2019-03-04T11:51:38.615726 #68997] FATAL -- :   
F, [2019-03-04T11:51:38.615776 #68997] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-04T11:51:38.615804 #68997] FATAL -- :   
F, [2019-03-04T11:51:38.615841 #68997] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
D, [2019-03-12T19:42:38.960392 #88782] DEBUG -- :   [1m[35m (1.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-12T19:42:38.961228 #88782] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-12T19:42:38.964471 #88782] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-12T19:42:38.965019 #88782] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-12T19:42:38.965503 #88782] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-12T19:42:38.967065 #88782] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-12T19:42:38.978927 #88782] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-12T19:42:38.982180 #88782] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-12T19:42:38.983081 #88782] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-12 17:42:38.982510"], ["updated_at", "2019-03-12 17:42:38.982510"]]
D, [2019-03-12T19:42:38.983263 #88782] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-12T19:42:39.024681 #88782]  INFO -- : Started GET "/breakdown" for 127.0.0.1 at 2019-03-12 19:42:39 +0200
I, [2019-03-12T19:42:39.026626 #88782]  INFO -- : Processing by DummyController#breakdown as HTML
D, [2019-03-12T19:42:39.033707 #88782] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-12T19:42:39.035674 #88782] DEBUG -- :   [1m[36mBook Create (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "breakdown"]]
D, [2019-03-12T19:42:39.037407 #88782] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-12T19:42:39.039134 #88782]  INFO -- : Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.7ms)
F, [2019-03-12T19:42:42.169356 #88782] FATAL -- :   
F, [2019-03-12T19:42:42.169479 #88782] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify_performance_breakdown with unexpected arguments
  expected: (hash_including(:route=>"/breakdown(.:format)", :method=>"GET", :response_type=>:html, :groups=>{:db=>...chers::BuiltIn::BeAnInstanceOf:0x00007fb3b5f1d158 @expected=Float, @matcher_name=:an_instance_of>>}))
       got: ({:groups=>{:db=>0.6869998760521412}, :method=>"GET", :response_type=>:html, :route=>"/breakdown(.:format)", :start_time=>2019-03-12 19:42:39.026763000 +0200})
Diff:[0m
[0m[34m@@ -1,2 +1,6 @@
[0m[31m-["hash_including(:route=>\"/breakdown(.:format)\", :method=>\"GET\", :response_type=>:html, :groups=>{:db=>#<RSpec::Matchers::AliasedMatcher:0x00007fb3b5f1d1d0 @description_block=#<Proc:0x00007fb3b7a2ea00@/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-expectations-3.8.2/lib/rspec/matchers/dsl.rb:31 (lambda)>, @base_matcher=#<RSpec::Matchers::BuiltIn::BeAnInstanceOf:0x00007fb3b5f1d1f8 @expected=Float, @matcher_name=:an_instance_of>>, :view=>#<RSpec::Matchers::AliasedMatcher:0x00007fb3b5f1d130 @description_block=#<Proc:0x00007fb3b7a2ea00@/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-expectations-3.8.2/lib/rspec/matchers/dsl.rb:31 (lambda)>, @base_matcher=#<RSpec::Matchers::BuiltIn::BeAnInstanceOf:0x00007fb3b5f1d158 @expected=Float, @matcher_name=:an_instance_of>>})"]
[0m[32m+[{:groups=>{:db=>0.6869998760521412},
[0m[32m+  :method=>"GET",
[0m[32m+  :response_type=>:html,
[0m[32m+  :route=>"/breakdown(.:format)",
[0m[32m+  :start_time=>2019-03-12 19:42:39.026763000 +0200}]
[0m):
F, [2019-03-12T19:42:42.169506 #88782] FATAL -- :   
F, [2019-03-12T19:42:42.169532 #88782] FATAL -- : lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:15:in `block in call'
lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:12:in `each'
lib/airbrake/rails/action_controller_performance_breakdown_subscriber.rb:12:in `call'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
D, [2019-03-12T19:42:59.909131 #88797] DEBUG -- :   [1m[35m (0.8ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-12T19:42:59.909524 #88797] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-12T19:42:59.912071 #88797] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-12T19:42:59.912581 #88797] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-12T19:42:59.913133 #88797] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-12T19:42:59.914464 #88797] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-12T19:42:59.923832 #88797] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-12T19:42:59.926882 #88797] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-12T19:42:59.927728 #88797] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-12 17:42:59.927165"], ["updated_at", "2019-03-12 17:42:59.927165"]]
D, [2019-03-12T19:42:59.927934 #88797] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
D, [2019-03-12T19:43:20.290859 #88811] DEBUG -- :   [1m[35m (0.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-03-12T19:43:20.291315 #88811] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-03-12T19:43:20.293885 #88811] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-03-12T19:43:20.294437 #88811] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-03-12T19:43:20.294918 #88811] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-03-12T19:43:20.296287 #88811] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-03-12T19:43:20.306138 #88811] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-03-12T19:43:20.309355 #88811] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-12T19:43:20.310168 #88811] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-03-12 17:43:20.309653"], ["updated_at", "2019-03-12 17:43:20.309653"]]
D, [2019-03-12T19:43:20.310345 #88811] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-12T19:43:20.349159 #88811]  INFO -- : Started GET "/breakdown" for 127.0.0.1 at 2019-03-12 19:43:20 +0200
I, [2019-03-12T19:43:20.351473 #88811]  INFO -- : Processing by DummyController#breakdown as HTML
D, [2019-03-12T19:43:20.359979 #88811] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-03-12T19:43:20.361506 #88811] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "breakdown"]]
D, [2019-03-12T19:43:20.362713 #88811] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-03-12T19:43:20.364005 #88811]  INFO -- : Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.8ms)
F, [2019-03-12T19:43:21.585482 #88811] FATAL -- :   
F, [2019-03-12T19:43:21.585588 #88811] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-03-12T19:43:21.585619 #88811] FATAL -- :   
F, [2019-03-12T19:43:21.585656 #88811] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
D, [2019-04-12T02:58:10.029161 #5487] DEBUG -- :   [1m[35m (1.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-04-12T02:58:10.030097 #5487] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-04-12T02:58:10.033286 #5487] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-04-12T02:58:10.033860 #5487] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-04-12T02:58:10.034389 #5487] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-04-12T02:58:10.035989 #5487] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-04-12T02:58:10.048943 #5487] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-04-12T02:58:10.052619 #5487] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T02:58:10.053565 #5487] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-04-11 23:58:10.052969"], ["updated_at", "2019-04-11 23:58:10.052969"]]
D, [2019-04-12T02:58:10.053873 #5487] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T02:58:10.096460 #5487]  INFO -- : Started GET "/delayed_job" for 127.0.0.1 at 2019-04-12 02:58:10 +0300
I, [2019-04-12T02:58:10.098378 #5487]  INFO -- : Processing by DummyController#delayed_job as HTML
F, [2019-04-12T02:58:10.163090 #5487] FATAL -- :   
F, [2019-04-12T02:58:10.163189 #5487] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n"))
       got: (#<Airbrake::Notice:0x00007fe1d4b00a28 @config=#<Airbrake::Config:0x00007fe1d218c6d8 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fe1d25124b0 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,3 +1,2 @@
[0m[31m-["anything",
[0m[31m- "hash_including(\"handler\"=>\"--- !ruby/struct:BangoJob\\nbingo: bingo\\nbongo: bongo\\n\")"]
[0m[32m+[#<Airbrake::Notice:0x00007fe1d4b00a28 @config=#<Airbrake::Config:0x00007fe1d218c6d8 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fe1d218c638 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fe1d218c5e8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fe1d218c570 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fe1d218c4f8>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3">, @payload={:errors=>[{:type=>"NoMethodError", :message=>"undefined method `new' for #<Airbrake::Rails::App:0x00007fe1d4db9418>", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/app.rb", :line=>34, :function=>"block in engines"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/app.rb", :line=>34, :function=>"map"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/app.rb", :line=>34, :function=>"engines"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/app.rb", :line=>20, :function=>"routes"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/action_controller_route_subscriber.rb", :line=>29, :function=>"find_route"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/action_controller_route_subscriber.rb", :line=>20, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/fanout.rb", :line=>129, :function=>"finish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/fanout.rb", :line=>48, :function=>"block in finish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/fanout.rb", :line=>48, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/fanout.rb", :line=>48, :function=>"finish"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>44, :function=>"finish_with_state"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>29, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>196, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<NoMethodError: undefined method `new' for #<Airbrake::Rails::App:0x00007fe1d4db9418>>, :rack_request=>#<ActionDispatch::Request:0x00007fe1d25123c0 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fe1d4be86e8>, "rack.errors"=>#<StringIO:0x00007fe1d4be87d8>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fe1d42dfba0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fe1d42dfb50 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fe1d42dfb00 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fe1d42dfab0>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fe1d4bc31e0 @filters=[#<Proc:0x00007fe1d4bc2ce0@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fe1d4bc2c68@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fe1d4bc2ad8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fe1d4bc1e30@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fe1d4bc1e08@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fe1d4bc1228 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fe1d4bc13b8 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fe1d4bc11d8 entries=0 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fe1d3233e28 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fe1d4eee680>, "ROUTES_70303958397760_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"ede67c36-9545-4297-b153-c2f1eb9633bb", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fe1d4b83f18 @req=#<ActionDispatch::Request:0x00007fe1d4b83f90 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7fe1d4b81a10 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fe1d4b81d30 @by=#<ActionDispatch::Session::CookieStore:0x00007fe1d4984280 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fe1d49842d0 @app=#<Rack::Head:0x00007fe1d4984398 @app=#<Rack::ConditionalGet:0x00007fe1d4984438 @app=#<Rack::ETag:0x00007fe1d49844b0 @app=#<Rack::TempfileReaper:0x00007fe1d49844d8 @app=#<Warden::Manager:0x00007fe1d4984690 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fe1d4eee680>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70303956604700 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fe1d4b52418 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fe1d4b7af58 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/delayed_job", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fe1d4b42f40 @req=#<ActionDispatch::Request:0x00007fe1d4b7af58 ...>>>, @_response=#<ActionDispatch::Response:0x00007fe1d4b53570 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fe1d4b533e0>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fe1d4b52be8 @response=#<ActionDispatch::Response:0x00007fe1d4b53570 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fe1d4b529e0 @monitor=#<ActionDispatch::Response:0x00007fe1d4b53570 ...>, @cond=#<Thread::ConditionVariable:0x00007fe1d4b52918>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fe1d4b7af58 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/delayed_job", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fe1d4b42f40 @req=#<ActionDispatch::Request:0x00007fe1d4b7af58 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fe1d4b51bd0 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fe1d4b517c0 @paths=[#<ActionView::FixtureResolver:0x00007fe1d8820700 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fe1d88206d8 keys=0 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fe1d4d917b0 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-3208715001972497982>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fe1d25124b0 @max_size=10000>>]
[0m):
F, [2019-04-12T02:58:10.163249 #5487] FATAL -- :   
F, [2019-04-12T02:58:10.163278 #5487] FATAL -- : lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
lib/airbrake/rack/middleware.rb:40:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T02:58:10.165178 #5487]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:58:10 +0300
I, [2019-04-12T02:58:10.165946 #5487]  INFO -- : Processing by DummyController#crash as HTML
F, [2019-04-12T02:58:10.183580 #5487] FATAL -- :   
F, [2019-04-12T02:58:10.194654 #5487] FATAL -- : NoMethodError (undefined method `new' for #<Airbrake::Rails::App:0x00007fe1d4db9418>):
F, [2019-04-12T02:58:10.194714 #5487] FATAL -- :   
F, [2019-04-12T02:58:10.194745 #5487] FATAL -- : lib/airbrake/rails/app.rb:34:in `block in engines'
lib/airbrake/rails/app.rb:34:in `map'
lib/airbrake/rails/app.rb:34:in `engines'
lib/airbrake/rails/app.rb:20:in `routes'
lib/airbrake/rails/action_controller_route_subscriber.rb:29:in `find_route'
lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T02:58:12.201389 #5487]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:58:12 +0300
I, [2019-04-12T02:58:12.202198 #5487]  INFO -- : Processing by DummyController#crash as HTML
F, [2019-04-12T02:58:12.220172 #5487] FATAL -- :   
F, [2019-04-12T02:58:12.227798 #5487] FATAL -- : NoMethodError (undefined method `new' for #<Airbrake::Rails::App:0x00007fe1d4db9418>):
F, [2019-04-12T02:58:12.227856 #5487] FATAL -- :   
F, [2019-04-12T02:58:12.227895 #5487] FATAL -- : lib/airbrake/rails/app.rb:34:in `block in engines'
lib/airbrake/rails/app.rb:34:in `map'
lib/airbrake/rails/app.rb:34:in `engines'
lib/airbrake/rails/app.rb:20:in `routes'
lib/airbrake/rails/action_controller_route_subscriber.rb:29:in `find_route'
lib/airbrake/rails/action_controller_route_subscriber.rb:20:in `call'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
D, [2019-04-12T02:58:24.561498 #5498] DEBUG -- :   [1m[35m (1.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-04-12T02:58:24.561953 #5498] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-04-12T02:58:24.564623 #5498] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-04-12T02:58:24.565127 #5498] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-04-12T02:58:24.565638 #5498] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-04-12T02:58:24.566976 #5498] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-04-12T02:58:24.576745 #5498] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-04-12T02:58:24.579885 #5498] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T02:58:24.580823 #5498] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-04-11 23:58:24.580249"], ["updated_at", "2019-04-11 23:58:24.580249"]]
D, [2019-04-12T02:58:24.581053 #5498] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T02:58:24.619574 #5498]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:58:24 +0300
I, [2019-04-12T02:58:24.621538 #5498]  INFO -- : Processing by DummyController#crash as HTML
F, [2019-04-12T02:58:53.911073 #5498] FATAL -- :   
F, [2019-04-12T02:58:53.918287 #5498] FATAL -- : NoMethodError (undefined method `new' for #<Airbrake::Rails::App:0x00007fd7074d1cd8>):
F, [2019-04-12T02:58:53.918344 #5498] FATAL -- :   
F, [2019-04-12T02:58:53.918379 #5498] FATAL -- : lib/airbrake/rails/app.rb:34:in `block in engines'
lib/airbrake/rails/app.rb:34:in `map'
lib/airbrake/rails/app.rb:34:in `engines'
lib/airbrake/rails/app.rb:20:in `routes'
lib/airbrake/rails/action_controller_route_subscriber.rb:30:in `find_route'
lib/airbrake/rails/action_controller_route_subscriber.rb:21:in `call'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T02:58:53.921173 #5498]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:58:53 +0300
I, [2019-04-12T02:58:53.922178 #5498]  INFO -- : Processing by DummyController#crash as HTML
F, [2019-04-12T02:58:55.051977 #5498] FATAL -- :   
F, [2019-04-12T02:58:55.058337 #5498] FATAL -- : NoMethodError (undefined method `new' for #<Airbrake::Rails::App:0x00007fd7074d1cd8>):
F, [2019-04-12T02:58:55.058415 #5498] FATAL -- :   
F, [2019-04-12T02:58:55.058444 #5498] FATAL -- : lib/airbrake/rails/app.rb:34:in `block in engines'
lib/airbrake/rails/app.rb:34:in `map'
lib/airbrake/rails/app.rb:34:in `engines'
lib/airbrake/rails/app.rb:20:in `routes'
lib/airbrake/rails/action_controller_route_subscriber.rb:30:in `find_route'
lib/airbrake/rails/action_controller_route_subscriber.rb:21:in `call'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T02:58:55.060516 #5498]  INFO -- : Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 02:58:55 +0300
I, [2019-04-12T02:58:55.066298 #5498]  INFO -- : Processing by DummyController#notify_airbrake_helper as HTML
I, [2019-04-12T02:58:55.066362 #5498]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-04-12T02:59:00.235746 #5511] DEBUG -- :   [1m[35m (1.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-04-12T02:59:00.236208 #5511] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-04-12T02:59:00.238928 #5511] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-04-12T02:59:00.239437 #5511] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-04-12T02:59:00.239974 #5511] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-04-12T02:59:00.241370 #5511] DEBUG -- :   [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-04-12T02:59:00.251374 #5511] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-04-12T02:59:00.255012 #5511] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T02:59:00.256061 #5511] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-04-11 23:59:00.255404"], ["updated_at", "2019-04-11 23:59:00.255404"]]
D, [2019-04-12T02:59:00.256291 #5511] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T02:59:00.290644 #5511]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:59:00 +0300
I, [2019-04-12T02:59:00.292761 #5511]  INFO -- : Processing by DummyController#crash as HTML
F, [2019-04-12T02:59:22.625133 #5511] FATAL -- :   
F, [2019-04-12T02:59:22.630515 #5511] FATAL -- : ArgumentError (wrong number of arguments (given 1, expected 0)):
F, [2019-04-12T02:59:22.630558 #5511] FATAL -- :   
F, [2019-04-12T02:59:22.630603 #5511] FATAL -- : lib/airbrake/rails/app.rb:10:in `initialize'
lib/airbrake/rails/app.rb:34:in `new'
lib/airbrake/rails/app.rb:34:in `block in engines'
lib/airbrake/rails/app.rb:34:in `map'
lib/airbrake/rails/app.rb:34:in `engines'
lib/airbrake/rails/app.rb:20:in `routes'
lib/airbrake/rails/action_controller_route_subscriber.rb:30:in `find_route'
lib/airbrake/rails/action_controller_route_subscriber.rb:21:in `call'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
D, [2019-04-12T02:59:27.184409 #5526] DEBUG -- :   [1m[35m (1.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-04-12T02:59:27.184982 #5526] DEBUG -- :   [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-04-12T02:59:27.188060 #5526] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-04-12T02:59:27.188670 #5526] DEBUG -- :   [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-04-12T02:59:27.189239 #5526] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-04-12T02:59:27.190921 #5526] DEBUG -- :   [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-04-12T02:59:27.201023 #5526] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-04-12T02:59:27.204262 #5526] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T02:59:27.205164 #5526] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-04-11 23:59:27.204596"], ["updated_at", "2019-04-11 23:59:27.204596"]]
D, [2019-04-12T02:59:27.205356 #5526] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T02:59:27.243400 #5526]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-04-12 02:59:27 +0300
I, [2019-04-12T02:59:27.245627 #5526]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-04-12T02:59:45.090049 #5540] DEBUG -- :   [1m[35m (0.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-04-12T02:59:45.090541 #5540] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-04-12T02:59:45.093287 #5540] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-04-12T02:59:45.093857 #5540] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-04-12T02:59:45.094392 #5540] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-04-12T02:59:45.095984 #5540] DEBUG -- :   [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-04-12T02:59:45.106225 #5540] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-04-12T02:59:45.109495 #5540] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T02:59:45.110382 #5540] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-04-11 23:59:45.109822"], ["updated_at", "2019-04-11 23:59:45.109822"]]
D, [2019-04-12T02:59:45.110579 #5540] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T02:59:45.150500 #5540]  INFO -- : Started GET "/active_record_after_commit" for 127.0.0.1 at 2019-04-12 02:59:45 +0300
I, [2019-04-12T02:59:45.152493 #5540]  INFO -- : Processing by DummyController#active_record_after_commit as HTML
D, [2019-04-12T03:04:04.505082 #5569] DEBUG -- :   [1m[35m (0.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-04-12T03:04:04.505515 #5569] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-04-12T03:04:04.508448 #5569] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-04-12T03:04:04.509080 #5569] DEBUG -- :   [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-04-12T03:04:04.509645 #5569] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-04-12T03:04:04.511075 #5569] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-04-12T03:04:04.521281 #5569] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-04-12T03:04:04.524464 #5569] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:04:04.525313 #5569] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-04-12 00:04:04.524811"], ["updated_at", "2019-04-12 00:04:04.524811"]]
D, [2019-04-12T03:04:04.525510 #5569] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:04:04.558491 #5569]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-04-12 03:04:04 +0300
I, [2019-04-12T03:04:04.560404 #5569]  INFO -- : Processing by DummyController#crash as HTML
F, [2019-04-12T03:04:20.687815 #5569] FATAL -- :   
F, [2019-04-12T03:04:20.692825 #5569] FATAL -- : NoMethodError (undefined method `path' for []:Array):
F, [2019-04-12T03:04:20.692872 #5569] FATAL -- :   
F, [2019-04-12T03:04:20.692910 #5569] FATAL -- : lib/airbrake/rails/app.rb:13:in `block in routes'
lib/airbrake/rails/app.rb:11:in `map'
lib/airbrake/rails/app.rb:11:in `routes'
lib/airbrake/rails/action_controller_route_subscriber.rb:30:in `find_route'
lib/airbrake/rails/action_controller_route_subscriber.rb:21:in `call'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
D, [2019-04-12T03:04:27.717981 #5598] DEBUG -- :   [1m[35m (1.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-04-12T03:04:27.718478 #5598] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-04-12T03:04:27.721386 #5598] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-04-12T03:04:27.721910 #5598] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-04-12T03:04:27.722474 #5598] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-04-12T03:04:27.723856 #5598] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-04-12T03:04:27.733698 #5598] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-04-12T03:04:27.737083 #5598] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:04:27.737993 #5598] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-04-12 00:04:27.737425"], ["updated_at", "2019-04-12 00:04:27.737425"]]
D, [2019-04-12T03:04:27.738224 #5598] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:04:27.777204 #5598]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-04-12 03:04:27 +0300
I, [2019-04-12T03:04:27.779267 #5598]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-04-12T03:04:33.521335 #5598] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:04:33.523020 #5598] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:04:33.524502 #5598] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:04:33.535597 #5598]  INFO -- : Completed 500 Internal Server Error in 23ms (ActiveRecord: 0.7ms)
F, [2019-04-12T03:04:33.538180 #5598] FATAL -- :   
F, [2019-04-12T03:04:33.538246 #5598] FATAL -- : RSpec::Expectations::ExpectationNotMetError (
expected: "AirbrakeTestError"
     got: "RSpec::Mocks::MockExpectationError"

(compared using ==)
):
F, [2019-04-12T03:04:33.538279 #5598] FATAL -- :   
F, [2019-04-12T03:04:33.538309 #5598] FATAL -- : lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
lib/airbrake/rack/middleware.rb:40:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:04:33.540462 #5598]  INFO -- : Started GET "/" for 127.0.0.1 at 2019-04-12 03:04:33 +0300
I, [2019-04-12T03:04:33.541436 #5598]  INFO -- : Processing by DummyController#index as HTML
D, [2019-04-12T03:04:44.156500 #5610] DEBUG -- :   [1m[35m (1.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-04-12T03:04:44.157135 #5610] DEBUG -- :   [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-04-12T03:04:44.160007 #5610] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-04-12T03:04:44.160653 #5610] DEBUG -- :   [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-04-12T03:04:44.161435 #5610] DEBUG -- :   [1m[35m (0.2ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-04-12T03:04:44.163122 #5610] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-04-12T03:04:44.173377 #5610] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-04-12T03:04:44.176755 #5610] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:04:44.177605 #5610] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-04-12 00:04:44.177083"], ["updated_at", "2019-04-12 00:04:44.177083"]]
D, [2019-04-12T03:04:44.177814 #5610] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:04:44.217474 #5610]  INFO -- : Started GET "/active_record_after_rollback" for 127.0.0.1 at 2019-04-12 03:04:44 +0300
I, [2019-04-12T03:04:44.219410 #5610]  INFO -- : Processing by DummyController#active_record_after_rollback as HTML
D, [2019-04-12T03:04:44.219873 #5610] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:04:44.228259 #5610] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "Bango"]]
D, [2019-04-12T03:04:44.229592 #5610] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
I, [2019-04-12T03:04:44.231023 #5610]  INFO -- : Completed 500 Internal Server Error in 11ms (ActiveRecord: 0.6ms)
F, [2019-04-12T03:04:44.260152 #5610] FATAL -- :   
F, [2019-04-12T03:04:44.260267 #5610] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (an instance of AirbrakeTestError)
       got: (#<Airbrake::Notice:0x00007fc4ec2a5478 @config=#<Airbrake::Config:0x00007fc4ec4071e0 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fc4eba44d38 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of AirbrakeTestError"]
[0m[32m+[#<Airbrake::Notice:0x00007fc4ec2a5478 @config=#<Airbrake::Config:0x00007fc4ec4071e0 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fc4ec407168 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fc4ec407118 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fc4ec4070a0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fc4ec407028>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3">, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"after_rollback", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>53, :function=>"raise_error_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_rollback_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>357, :function=>"rolledback!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>112, :function=>"rollback_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>231, :function=>"block in rollback_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>228, :function=>"rollback_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>242, :function=>"rescue in block in within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>259, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>134, :function=>"active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>119, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}, {:type=>"ActiveRecord::Rollback", :message=>"ActiveRecord::Rollback", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>136, :function=>"block in active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"block in transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>239, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>134, :function=>"active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>119, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: after_rollback>, :rack_request=>#<ActionDispatch::Request:0x00007fc4eba44d10 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fc4ea1d2f98>, "rack.errors"=>#<StringIO:0x00007fc4ea1d30b0>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/active_record_after_rollback", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fc4ea221148 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fc4ea2210d0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fc4ea221080 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fc4ea221030>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fc4ed8106c8 @filters=[#<Proc:0x00007fc4ed811b18@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fc4ebd37f90@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fc4ebd37f68@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fc4ebd37838@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fc4ebd37810@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fc4ebd37608 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fc4ebd37630 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fc4ebd375e0 entries=0 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fc4eba27080 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fc4ebb81818>, "ROUTES_70241872514060_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/active_record_after_rollback", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"080e2852-7eb7-4080-8123-3b96084cb2ac", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fc4eae9b388 @req=#<ActionDispatch::Request:0x00007fc4eae9b3b0 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7fc4eae9a1b8 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fc4eae9a168 @by=#<ActionDispatch::Session::CookieStore:0x00007fc4ec6028c8 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fc4ec6028f0 @app=#<Rack::Head:0x00007fc4ec602918 @app=#<Rack::ConditionalGet:0x00007fc4ec602940 @app=#<Rack::ETag:0x00007fc4ec602968 @app=#<Rack::TempfileReaper:0x00007fc4ec602990 @app=#<Warden::Manager:0x00007fc4ec602a58 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fc4ebb81818>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70241865748560 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"active_record_after_rollback"}, "action_controller.instance"=>#<DummyController:0x00007fc4eaeaba08 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fc4eae99d30 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_rollback"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_rollback", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fc4eaeaa248 @req=#<ActionDispatch::Request:0x00007fc4eae99d30 ...>>>, @_response=#<ActionDispatch::Response:0x00007fc4eaeabe40 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fc4eaeabda0>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fc4eaeabcd8 @response=#<ActionDispatch::Response:0x00007fc4eaeabe40 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fc4eaeabc38 @monitor=#<ActionDispatch::Response:0x00007fc4eaeabe40 ...>, @cond=#<Thread::ConditionVariable:0x00007fc4eaeabc10>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fc4eae99d30 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_rollback"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_rollback", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fc4eaeaa248 @req=#<ActionDispatch::Request:0x00007fc4eae99d30 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fc4eaeab760 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fc4eaeab5d0 @paths=[#<ActionView::FixtureResolver:0x00007fc4ea263340 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fc4ea2632f0 keys=0 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown"}>]>>, @_action_name="active_record_after_rollback", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"active_record_after_rollback"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fc4ea399cc8 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-1717079155660000342>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fc4eba44d38 @max_size=10000>>]
[0m):
F, [2019-04-12T03:04:44.260374 #5610] FATAL -- :   
F, [2019-04-12T03:04:44.260411 #5610] FATAL -- : lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
lib/airbrake/rack/middleware.rb:40:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:04:44.261755 #5610]  INFO -- : Started GET "/active_record_after_commit" for 127.0.0.1 at 2019-04-12 03:04:44 +0300
I, [2019-04-12T03:04:44.262507 #5610]  INFO -- : Processing by DummyController#active_record_after_commit as HTML
D, [2019-04-12T03:04:44.262863 #5610] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:04:44.264187 #5610] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "Bingo"]]
D, [2019-04-12T03:04:44.265406 #5610] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:04:44.266659 #5610]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
F, [2019-04-12T03:04:44.278038 #5610] FATAL -- :   
F, [2019-04-12T03:04:44.278102 #5610] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (an instance of AirbrakeTestError)
       got: (#<Airbrake::Notice:0x00007fc4f0808970 @config=#<Airbrake::Config:0x00007fc4ec4071e0 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fc4ec7ef870 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of AirbrakeTestError"]
[0m[32m+[#<Airbrake::Notice:0x00007fc4f0808970 @config=#<Airbrake::Config:0x00007fc4ec4071e0 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fc4ec407168 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fc4ec407118 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fc4ec4070a0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fc4ec407028>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3">, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"after_commit", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>49, :function=>"raise_error_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_commit_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>346, :function=>"committed!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>128, :function=>"commit_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>223, :function=>"block in commit_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>213, :function=>"commit_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>252, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>385, :function=>"with_transaction_returning_status"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>310, :function=>"block in save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>325, :function=>"rollback_active_record_state!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>309, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/suppressor.rb", :line=>44, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/persistence.rb", :line=>36, :function=>"create"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>130, :function=>"active_record_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>109, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: after_commit>, :rack_request=>#<ActionDispatch::Request:0x00007fc4ec7ef848 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fc4eadd8f40>, "rack.errors"=>#<StringIO:0x00007fc4eadd8900>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/active_record_after_commit", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fc4ea221148 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fc4ea2210d0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fc4ea221080 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fc4ea221030>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fc4ed8106c8 @filters=[#<Proc:0x00007fc4ed811b18@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fc4ebd37f90@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fc4ebd37f68@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fc4ebd37838@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fc4ebd37810@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fc4ebd37608 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fc4ebd37630 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fc4ebd375e0 entries=0 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fc4eba27080 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fc4ebb81818>, "ROUTES_70241872514060_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/active_record_after_commit", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"078a7370-137a-4c62-948e-e90a7499bdab", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fc4eadd2eb0 @req=#<ActionDispatch::Request:0x00007fc4eadd2ed8 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7fc4eadd1d08 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fc4eadd1cb8 @by=#<ActionDispatch::Session::CookieStore:0x00007fc4ec6028c8 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fc4ec6028f0 @app=#<Rack::Head:0x00007fc4ec602918 @app=#<Rack::ConditionalGet:0x00007fc4ec602940 @app=#<Rack::ETag:0x00007fc4ec602968 @app=#<Rack::TempfileReaper:0x00007fc4ec602990 @app=#<Warden::Manager:0x00007fc4ec602a58 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fc4ebb81818>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70241865338360 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"active_record_after_commit"}, "action_controller.instance"=>#<DummyController:0x00007fc4eadd06b0 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fc4eadd18d0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_commit"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_commit", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fc4eadcbb88 @req=#<ActionDispatch::Request:0x00007fc4eadd18d0 ...>>>, @_response=#<ActionDispatch::Response:0x00007fc4eadd0958 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fc4eadd08e0>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fc4eadd0890 @response=#<ActionDispatch::Response:0x00007fc4eadd0958 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fc4eadd0868 @monitor=#<ActionDispatch::Response:0x00007fc4eadd0958 ...>, @cond=#<Thread::ConditionVariable:0x00007fc4eadd0840>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fc4eadd18d0 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_commit"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_commit", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fc4eadcbb88 @req=#<ActionDispatch::Request:0x00007fc4eadd18d0 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fc4eadd04d0 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fc4eadd0368 @paths=[#<ActionView::FixtureResolver:0x00007fc4ea263340 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fc4ea2632f0 keys=0 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown"}>]>>, @_action_name="active_record_after_commit", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"active_record_after_commit"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fc4ea399cc8 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-1717079155660000342>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fc4ec7ef870 @max_size=10000>>]
[0m):
F, [2019-04-12T03:04:44.278156 #5610] FATAL -- :   
F, [2019-04-12T03:04:44.278185 #5610] FATAL -- : lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
lib/airbrake/rack/middleware.rb:40:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:04:44.279485 #5610]  INFO -- : Started GET "/active_job" for 127.0.0.1 at 2019-04-12 03:04:44 +0300
I, [2019-04-12T03:04:44.280193 #5610]  INFO -- : Processing by DummyController#active_job as HTML
I, [2019-04-12T03:04:44.287404 #5610]  INFO -- :   Rendering dummy/active_job.html.erb within layouts/application
I, [2019-04-12T03:04:44.288738 #5610]  INFO -- :   Rendered dummy/active_job.html.erb within layouts/application (1.3ms)
I, [2019-04-12T03:04:44.289124 #5610]  INFO -- : Completed 200 OK in 9ms (Views: 7.9ms | ActiveRecord: 0.0ms)
I, [2019-04-12T03:04:46.292407 #5610]  INFO -- : Started GET "/active_job" for 127.0.0.1 at 2019-04-12 03:04:46 +0300
I, [2019-04-12T03:04:46.293317 #5610]  INFO -- : Processing by DummyController#active_job as HTML
I, [2019-04-12T03:04:46.295060 #5610]  INFO -- :   Rendering dummy/active_job.html.erb within layouts/application
I, [2019-04-12T03:04:46.295337 #5610]  INFO -- :   Rendered dummy/active_job.html.erb within layouts/application (0.2ms)
I, [2019-04-12T03:04:46.295650 #5610]  INFO -- : Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.0ms)
I, [2019-04-12T03:04:48.302461 #5610]  INFO -- : Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 03:04:48 +0300
I, [2019-04-12T03:04:48.309429 #5610]  INFO -- : Processing by DummyController#notify_airbrake_helper as HTML
I, [2019-04-12T03:04:48.309514 #5610]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-04-12T03:04:48.315550 #5610]  INFO -- :   Rendering dummy/notify_airbrake_helper.html.erb within layouts/application
I, [2019-04-12T03:04:48.320954 #5610]  INFO -- :   Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.3ms)
I, [2019-04-12T03:04:48.321330 #5610]  INFO -- : Completed 200 OK in 12ms (Views: 6.2ms | ActiveRecord: 0.0ms)
I, [2019-04-12T03:04:50.327594 #5610]  INFO -- : Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 03:04:50 +0300
I, [2019-04-12T03:04:50.328955 #5610]  INFO -- : Processing by DummyController#notify_airbrake_helper as HTML
I, [2019-04-12T03:04:50.329009 #5610]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-04-12T03:04:50.339492 #5610]  INFO -- :   Rendering dummy/notify_airbrake_helper.html.erb within layouts/application
I, [2019-04-12T03:04:50.339844 #5610]  INFO -- :   Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.3ms)
I, [2019-04-12T03:04:50.340166 #5610]  INFO -- : Completed 200 OK in 11ms (Views: 1.1ms | ActiveRecord: 0.0ms)
I, [2019-04-12T03:04:52.344176 #5610]  INFO -- : Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 03:04:52 +0300
I, [2019-04-12T03:04:52.345404 #5610]  INFO -- : Processing by DummyController#notify_airbrake_helper as HTML
I, [2019-04-12T03:04:52.345464 #5610]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-04-12T03:04:52.356064 #5610]  INFO -- :   Rendering dummy/notify_airbrake_helper.html.erb within layouts/application
I, [2019-04-12T03:04:52.356427 #5610]  INFO -- :   Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.3ms)
I, [2019-04-12T03:04:52.356918 #5610]  INFO -- : Completed 200 OK in 11ms (Views: 1.3ms | ActiveRecord: 0.0ms)
I, [2019-04-12T03:04:54.361458 #5610]  INFO -- : Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 03:04:54 +0300
I, [2019-04-12T03:04:54.362665 #5610]  INFO -- : Processing by DummyController#notify_airbrake_helper as HTML
I, [2019-04-12T03:04:54.362728 #5610]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-04-12T03:04:54.373935 #5610]  INFO -- :   Rendering dummy/notify_airbrake_helper.html.erb within layouts/application
I, [2019-04-12T03:04:54.374252 #5610]  INFO -- :   Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
I, [2019-04-12T03:04:54.374555 #5610]  INFO -- : Completed 200 OK in 12ms (Views: 1.0ms | ActiveRecord: 0.0ms)
I, [2019-04-12T03:04:56.381880 #5610]  INFO -- : Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 03:04:56 +0300
I, [2019-04-12T03:04:56.386065 #5610]  INFO -- : Processing by DummyController#notify_airbrake_helper as HTML
I, [2019-04-12T03:04:56.386137 #5610]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-04-12T03:04:56.399204 #5610]  INFO -- :   Rendering dummy/notify_airbrake_helper.html.erb within layouts/application
I, [2019-04-12T03:04:56.399550 #5610]  INFO -- :   Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.3ms)
I, [2019-04-12T03:04:56.399834 #5610]  INFO -- : Completed 200 OK in 14ms (Views: 1.0ms | ActiveRecord: 0.0ms)
I, [2019-04-12T03:04:58.407379 #5610]  INFO -- : Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 03:04:58 +0300
I, [2019-04-12T03:04:58.408566 #5610]  INFO -- : Processing by DummyController#notify_airbrake_helper as HTML
I, [2019-04-12T03:04:58.408646 #5610]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-04-12T03:04:58.419007 #5610]  INFO -- :   Rendering dummy/notify_airbrake_helper.html.erb within layouts/application
I, [2019-04-12T03:04:58.419358 #5610]  INFO -- :   Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.3ms)
I, [2019-04-12T03:04:58.419674 #5610]  INFO -- : Completed 200 OK in 11ms (Views: 1.1ms | ActiveRecord: 0.0ms)
I, [2019-04-12T03:05:00.425156 #5610]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 03:05:00 +0300
I, [2019-04-12T03:05:00.426497 #5610]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-04-12T03:05:00.426551 #5610]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-04-12T03:05:00.427068 #5610] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:05:00.428869 #5610] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:05:00.430268 #5610] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:05:00.441923 #5610]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms)
F, [2019-04-12T03:05:00.448133 #5610] FATAL -- :   
F, [2019-04-12T03:05:00.452252 #5610] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-04-12T03:05:00.452302 #5610] FATAL -- :   
F, [2019-04-12T03:05:00.452339 #5610] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:05:02.460060 #5610]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 03:05:02 +0300
I, [2019-04-12T03:05:02.461167 #5610]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-04-12T03:05:02.461221 #5610]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-04-12T03:05:02.461648 #5610] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:05:02.463362 #5610] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:05:02.464747 #5610] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:05:02.475708 #5610]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-04-12T03:05:02.481508 #5610] FATAL -- :   
F, [2019-04-12T03:05:02.486248 #5610] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-04-12T03:05:02.486291 #5610] FATAL -- :   
F, [2019-04-12T03:05:02.486320 #5610] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:05:04.493713 #5610]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 03:05:04 +0300
I, [2019-04-12T03:05:04.494842 #5610]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-04-12T03:05:04.494895 #5610]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-04-12T03:05:04.495331 #5610] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:05:04.497074 #5610] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:05:04.498380 #5610] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:05:04.512624 #5610]  INFO -- : Completed 500 Internal Server Error in 18ms (ActiveRecord: 0.2ms)
F, [2019-04-12T03:05:04.517924 #5610] FATAL -- :   
F, [2019-04-12T03:05:04.517968 #5610] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-04-12T03:05:04.517998 #5610] FATAL -- :   
F, [2019-04-12T03:05:04.522312 #5610] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:05:06.528030 #5610]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 03:05:06 +0300
I, [2019-04-12T03:05:06.529195 #5610]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-04-12T03:05:06.529253 #5610]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-04-12T03:05:06.529717 #5610] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:05:06.531335 #5610] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:05:06.532633 #5610] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:05:06.543288 #5610]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-04-12T03:05:06.548711 #5610] FATAL -- :   
F, [2019-04-12T03:05:06.553244 #5610] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-04-12T03:05:06.553283 #5610] FATAL -- :   
F, [2019-04-12T03:05:06.553310 #5610] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:05:08.556744 #5610]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 03:05:08 +0300
I, [2019-04-12T03:05:08.557993 #5610]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-04-12T03:05:08.558064 #5610]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-04-12T03:05:08.558550 #5610] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:05:08.560042 #5610] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:05:08.561356 #5610] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:05:08.572595 #5610]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-04-12T03:05:08.578098 #5610] FATAL -- :   
F, [2019-04-12T03:05:08.582838 #5610] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-04-12T03:05:08.582892 #5610] FATAL -- :   
F, [2019-04-12T03:05:08.582920 #5610] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:05:10.588498 #5610]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 03:05:10 +0300
I, [2019-04-12T03:05:10.589666 #5610]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-04-12T03:05:10.589722 #5610]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-04-12T03:05:10.590233 #5610] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:05:10.591992 #5610] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:05:10.593445 #5610] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:05:10.605685 #5610]  INFO -- : Completed 500 Internal Server Error in 16ms (ActiveRecord: 0.2ms)
F, [2019-04-12T03:05:10.613383 #5610] FATAL -- :   
F, [2019-04-12T03:05:10.617977 #5610] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-04-12T03:05:10.618060 #5610] FATAL -- :   
F, [2019-04-12T03:05:10.618090 #5610] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:05:12.624994 #5610]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 03:05:12 +0300
I, [2019-04-12T03:05:12.626297 #5610]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-04-12T03:05:12.626357 #5610]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-04-12T03:05:12.637446 #5610]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-04-12T03:05:12.637744 #5610]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
I, [2019-04-12T03:05:12.638019 #5610]  INFO -- : Completed 200 OK in 12ms (Views: 0.9ms | ActiveRecord: 0.0ms)
I, [2019-04-12T03:05:14.642957 #5610]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 03:05:14 +0300
I, [2019-04-12T03:05:14.644174 #5610]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-04-12T03:05:14.644236 #5610]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-04-12T03:05:14.654607 #5610]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-04-12T03:05:14.655002 #5610]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
I, [2019-04-12T03:05:14.655383 #5610]  INFO -- : Completed 200 OK in 11ms (Views: 1.1ms | ActiveRecord: 0.0ms)
I, [2019-04-12T03:05:16.659822 #5610]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 03:05:16 +0300
I, [2019-04-12T03:05:16.660962 #5610]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-04-12T03:05:16.661019 #5610]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-04-12T03:05:16.671318 #5610]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-04-12T03:05:16.671646 #5610]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
I, [2019-04-12T03:05:16.672005 #5610]  INFO -- : Completed 200 OK in 11ms (Views: 1.2ms | ActiveRecord: 0.0ms)
I, [2019-04-12T03:05:18.677454 #5610]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 03:05:18 +0300
I, [2019-04-12T03:05:18.678690 #5610]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-04-12T03:05:18.678751 #5610]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-04-12T03:05:18.689943 #5610]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-04-12T03:05:18.690299 #5610]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.3ms)
I, [2019-04-12T03:05:18.690621 #5610]  INFO -- : Completed 200 OK in 12ms (Views: 1.1ms | ActiveRecord: 0.0ms)
I, [2019-04-12T03:05:20.694426 #5610]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 03:05:20 +0300
I, [2019-04-12T03:05:20.695562 #5610]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-04-12T03:05:20.695614 #5610]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-04-12T03:05:20.705026 #5610]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-04-12T03:05:20.705341 #5610]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
I, [2019-04-12T03:05:20.705608 #5610]  INFO -- : Completed 200 OK in 10ms (Views: 1.0ms | ActiveRecord: 0.0ms)
I, [2019-04-12T03:05:22.711922 #5610]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 03:05:22 +0300
I, [2019-04-12T03:05:22.713198 #5610]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-04-12T03:05:22.713258 #5610]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-04-12T03:05:22.724329 #5610]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-04-12T03:05:22.724664 #5610]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
I, [2019-04-12T03:05:22.725009 #5610]  INFO -- : Completed 200 OK in 12ms (Views: 1.1ms | ActiveRecord: 0.0ms)
I, [2019-04-12T03:05:24.734219 #5610]  INFO -- : Started HEAD "/crash" for 127.0.0.1 at 2019-04-12 03:05:24 +0300
I, [2019-04-12T03:05:24.742907 #5610]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-04-12T03:05:24.743416 #5610] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:05:24.744897 #5610] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:05:24.746014 #5610] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:05:24.747153 #5610]  INFO -- : Completed 0  in 4ms (ActiveRecord: 0.2ms)
F, [2019-04-12T03:05:24.748494 #5610] FATAL -- :   
F, [2019-04-12T03:05:24.748544 #5610] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-04-12T03:05:24.748577 #5610] FATAL -- :   
F, [2019-04-12T03:05:24.748609 #5610] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:05:24.750085 #5610]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-04-12 03:05:24 +0300
I, [2019-04-12T03:05:24.750772 #5610]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-04-12T03:05:24.751080 #5610] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:05:24.752138 #5610] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:05:24.753227 #5610] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:05:24.754244 #5610]  INFO -- : Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.1ms)
F, [2019-04-12T03:05:24.755492 #5610] FATAL -- :   
F, [2019-04-12T03:05:24.755551 #5610] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-04-12T03:05:24.755583 #5610] FATAL -- :   
F, [2019-04-12T03:05:24.755614 #5610] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:05:24.757085 #5610]  INFO -- : Started GET "/delayed_job" for 127.0.0.1 at 2019-04-12 03:05:24 +0300
I, [2019-04-12T03:05:24.757748 #5610]  INFO -- : Processing by DummyController#delayed_job as HTML
I, [2019-04-12T03:05:24.771297 #5610]  INFO -- : Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.3ms)
F, [2019-04-12T03:05:24.780296 #5610] FATAL -- :   
F, [2019-04-12T03:05:24.780375 #5610] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n"))
       got: (#<Airbrake::Notice:0x00007fc4ead791f8 @config=#<Airbrake::Config:0x00007fc4ec4071e0 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fc4ec794330 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,3 +1,2 @@
[0m[31m-["anything",
[0m[31m- "hash_including(\"handler\"=>\"--- !ruby/struct:BangoJob\\nbingo: bingo\\nbongo: bongo\\n\")"]
[0m[32m+[#<Airbrake::Notice:0x00007fc4ead791f8 @config=#<Airbrake::Config:0x00007fc4ec4071e0 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007fc4ec407168 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fc4ec407118 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fc4ec4070a0 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fc4ec407028>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>87, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>149, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>196, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007fc4ec794308 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007fc4ea5707e0>, "rack.errors"=>#<StringIO:0x00007fc4ea570858>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007fc4ea221148 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007fc4ea2210d0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007fc4ea221080 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fc4ea221030>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007fc4ed8106c8 @filters=[#<Proc:0x00007fc4ed811b18@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007fc4ebd37f90@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007fc4ebd37f68@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007fc4ebd37838@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007fc4ebd37810@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007fc4ebd37608 @key_generator=#<ActiveSupport::KeyGenerator:0x00007fc4ebd37630 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007fc4ebd375e0 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007fc4eba27080 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007fc4ebb81818>, "ROUTES_70241872514060_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"0503e529-ca05-464f-aea2-b3c2b67965f6", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007fc4ea56b1a0 @req=#<ActionDispatch::Request:0x00007fc4ea56b1c8 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7fc4ea569968 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007fc4ea5698f0 @by=#<ActionDispatch::Session::CookieStore:0x00007fc4ec6028c8 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007fc4ec6028f0 @app=#<Rack::Head:0x00007fc4ec602918 @app=#<Rack::ConditionalGet:0x00007fc4ec602940 @app=#<Rack::ETag:0x00007fc4ec602968 @app=#<Rack::TempfileReaper:0x00007fc4ec602990 @app=#<Warden::Manager:0x00007fc4ec602a58 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007fc4ebb81818>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70241860930520 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007fc4ea5680e0 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007fc4ea569378 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/delayed_job", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fc4ea55f120 @req=#<ActionDispatch::Request:0x00007fc4ea569378 ...>>>, @_response=#<ActionDispatch::Response:0x00007fc4ea568338 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007fc4ea5682e8>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007fc4ea568298 @response=#<ActionDispatch::Response:0x00007fc4ea568338 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007fc4ea568270 @monitor=#<ActionDispatch::Response:0x00007fc4ea568338 ...>, @cond=#<Thread::ConditionVariable:0x00007fc4ea568248>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007fc4ea569378 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/delayed_job", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007fc4ea55f120 @req=#<ActionDispatch::Request:0x00007fc4ea569378 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007fc4ea55ff30 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007fc4ea55fc38 @paths=[#<ActionView::FixtureResolver:0x00007fc4ea263340 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7fc4ea2632f0 keys=14 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007fc4ea399cc8 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-1717079155660000342>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007fc4ec794330 @max_size=10000>>]
[0m):
F, [2019-04-12T03:05:24.780440 #5610] FATAL -- :   
F, [2019-04-12T03:05:24.780477 #5610] FATAL -- : lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
lib/airbrake/rack/middleware.rb:40:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:05:24.782247 #5610]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-04-12 03:05:24 +0300
I, [2019-04-12T03:05:24.783193 #5610]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-04-12T03:05:24.783776 #5610] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:05:24.785642 #5610] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:05:24.787480 #5610] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:05:24.788660 #5610]  INFO -- : Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.3ms)
F, [2019-04-12T03:05:24.791076 #5610] FATAL -- :   
F, [2019-04-12T03:05:24.791138 #5610] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-04-12T03:05:24.791170 #5610] FATAL -- :   
F, [2019-04-12T03:05:24.791200 #5610] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:05:24.792546 #5610]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-04-12 03:05:24 +0300
I, [2019-04-12T03:05:24.793185 #5610]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-04-12T03:05:24.793575 #5610] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:05:24.794007 #5610] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:05:24.794264 #5610] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:05:24.794645 #5610]  INFO -- : Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.2ms)
F, [2019-04-12T03:05:24.796194 #5610] FATAL -- :   
F, [2019-04-12T03:05:24.796234 #5610] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-04-12T03:05:24.796260 #5610] FATAL -- :   
F, [2019-04-12T03:05:24.796284 #5610] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:05:24.797625 #5610]  INFO -- : Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 03:05:24 +0300
I, [2019-04-12T03:05:24.798342 #5610]  INFO -- : Processing by DummyController#breakdown as HTML
D, [2019-04-12T03:05:24.798749 #5610] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:05:24.800264 #5610] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "breakdown"]]
D, [2019-04-12T03:05:24.801380 #5610] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:05:24.802823 #5610]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
F, [2019-04-12T03:05:24.804133 #5610] FATAL -- :   
F, [2019-04-12T03:05:24.804247 #5610] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-04-12T03:05:24.804296 #5610] FATAL -- :   
F, [2019-04-12T03:05:24.804332 #5610] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:05:24.806693 #5610]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-04-12 03:05:24 +0300
I, [2019-04-12T03:05:24.807852 #5610]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-04-12T03:05:24.808294 #5610] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:05:24.809688 #5610] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:05:24.810961 #5610] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:05:24.821205 #5610]  INFO -- : Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.2ms)
F, [2019-04-12T03:05:24.827519 #5610] FATAL -- :   
F, [2019-04-12T03:05:24.831707 #5610] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-04-12T03:05:24.831763 #5610] FATAL -- :   
F, [2019-04-12T03:05:24.831793 #5610] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:05:26.840246 #5610]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-04-12 03:05:26 +0300
I, [2019-04-12T03:05:26.841313 #5610]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-04-12T03:05:26.841836 #5610] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:05:26.843861 #5610] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:05:26.845704 #5610] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:05:26.852849 #5610]  INFO -- : Completed 500 Internal Server Error in 11ms (ActiveRecord: 0.3ms)
F, [2019-04-12T03:05:26.866156 #5610] FATAL -- :   
F, [2019-04-12T03:05:26.870759 #5610] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-04-12T03:05:26.870800 #5610] FATAL -- :   
F, [2019-04-12T03:05:26.870826 #5610] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:05:28.877519 #5610]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-04-12 03:05:28 +0300
I, [2019-04-12T03:05:28.878432 #5610]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-04-12T03:05:28.878858 #5610] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:05:28.880512 #5610] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:05:28.882016 #5610] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:05:28.893146 #5610]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms)
F, [2019-04-12T03:05:28.899014 #5610] FATAL -- :   
F, [2019-04-12T03:05:28.903963 #5610] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-04-12T03:05:28.904025 #5610] FATAL -- :   
F, [2019-04-12T03:05:28.904071 #5610] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:05:30.910810 #5610]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-04-12 03:05:30 +0300
I, [2019-04-12T03:05:30.911665 #5610]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-04-12T03:05:30.912074 #5610] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:05:30.913558 #5610] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:05:30.914794 #5610] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:05:30.926174 #5610]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-04-12T03:05:30.931740 #5610] FATAL -- :   
F, [2019-04-12T03:05:30.936719 #5610] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-04-12T03:05:30.936760 #5610] FATAL -- :   
F, [2019-04-12T03:05:30.936788 #5610] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:05:32.940144 #5610]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-04-12 03:05:32 +0300
I, [2019-04-12T03:05:32.941442 #5610]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-04-12T03:05:32.941930 #5610] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:05:32.943748 #5610] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:05:32.945178 #5610] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:05:32.957181 #5610]  INFO -- : Completed 500 Internal Server Error in 16ms (ActiveRecord: 0.2ms)
F, [2019-04-12T03:05:32.965580 #5610] FATAL -- :   
F, [2019-04-12T03:05:32.970479 #5610] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-04-12T03:05:32.970521 #5610] FATAL -- :   
F, [2019-04-12T03:05:32.970549 #5610] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:05:34.976794 #5610]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-04-12 03:05:34 +0300
I, [2019-04-12T03:05:34.977779 #5610]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-04-12T03:05:34.978269 #5610] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:05:34.979795 #5610] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:05:34.981192 #5610] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:05:34.991978 #5610]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-04-12T03:05:34.997649 #5610] FATAL -- :   
F, [2019-04-12T03:05:35.002018 #5610] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-04-12T03:05:35.002057 #5610] FATAL -- :   
F, [2019-04-12T03:05:35.002084 #5610] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:05:37.010090 #5610]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-04-12 03:05:37 +0300
I, [2019-04-12T03:05:37.011394 #5610]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-04-12T03:05:37.011963 #5610] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:05:37.013678 #5610] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:05:37.015188 #5610] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:05:37.027130 #5610]  INFO -- : Completed 500 Internal Server Error in 16ms (ActiveRecord: 0.2ms)
F, [2019-04-12T03:05:37.033577 #5610] FATAL -- :   
F, [2019-04-12T03:05:37.039054 #5610] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-04-12T03:05:37.039101 #5610] FATAL -- :   
F, [2019-04-12T03:05:37.039131 #5610] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:05:39.046834 #5610]  INFO -- : Started GET "/resque" for 127.0.0.1 at 2019-04-12 03:05:39 +0300
I, [2019-04-12T03:05:39.047926 #5610]  INFO -- : Processing by DummyController#resque as HTML
I, [2019-04-12T03:05:39.049714 #5610]  INFO -- :   Rendering dummy/resque.html.erb within layouts/application
I, [2019-04-12T03:05:39.050078 #5610]  INFO -- :   Rendered dummy/resque.html.erb within layouts/application (0.3ms)
I, [2019-04-12T03:05:39.050445 #5610]  INFO -- : Completed 200 OK in 2ms (Views: 1.3ms | ActiveRecord: 0.0ms)
I, [2019-04-12T03:05:39.052666 #5610]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-04-12 03:05:39 +0300
I, [2019-04-12T03:05:39.053598 #5610]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-04-12T03:05:39.054093 #5610] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:05:39.055798 #5610] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:05:39.057189 #5610] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:05:39.058910 #5610]  INFO -- : Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms)
F, [2019-04-12T03:05:39.061225 #5610] FATAL -- :   
F, [2019-04-12T03:05:39.061276 #5610] FATAL -- : RSpec::Expectations::ExpectationNotMetError (
expected: "AirbrakeTestError"
     got: "RSpec::Mocks::MockExpectationError"

(compared using ==)
):
F, [2019-04-12T03:05:39.061304 #5610] FATAL -- :   
F, [2019-04-12T03:05:39.061329 #5610] FATAL -- : lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
lib/airbrake/rack/middleware.rb:40:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:05:39.062636 #5610]  INFO -- : Started GET "/" for 127.0.0.1 at 2019-04-12 03:05:39 +0300
I, [2019-04-12T03:05:39.063297 #5610]  INFO -- : Processing by DummyController#index as HTML
I, [2019-04-12T03:05:39.064099 #5610]  INFO -- :   Rendering dummy/index.html.erb within layouts/application
I, [2019-04-12T03:05:39.064411 #5610]  INFO -- :   Rendered dummy/index.html.erb within layouts/application (0.2ms)
I, [2019-04-12T03:05:39.064685 #5610]  INFO -- : Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
I, [2019-04-12T03:05:39.065918 #5610]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-04-12 03:05:39 +0300
I, [2019-04-12T03:05:39.066591 #5610]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-04-12T03:05:39.066898 #5610] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:05:39.068262 #5610] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:05:39.069659 #5610] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:05:39.082179 #5610]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms)
F, [2019-04-12T03:05:39.087159 #5610] FATAL -- :   
F, [2019-04-12T03:05:39.092163 #5610] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-04-12T03:05:39.092215 #5610] FATAL -- :   
F, [2019-04-12T03:05:39.092244 #5610] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
D, [2019-04-12T03:15:15.632098 #6017] DEBUG -- :   [1m[35m (1.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2019-04-12T03:15:15.632565 #6017] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar)[0m
D, [2019-04-12T03:15:15.635285 #6017] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
D, [2019-04-12T03:15:15.635835 #6017] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar, "queue" varchar, "created_at" datetime, "updated_at" datetime)[0m
D, [2019-04-12T03:15:15.636333 #6017] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
D, [2019-04-12T03:15:15.637964 #6017] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2019-04-12T03:15:15.649264 #6017] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2019-04-12T03:15:15.652839 #6017] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:15:15.653722 #6017] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-04-12 00:15:15.653154"], ["updated_at", "2019-04-12 00:15:15.653154"]]
D, [2019-04-12T03:15:15.653983 #6017] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:15:15.696142 #6017]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-04-12 03:15:15 +0300
I, [2019-04-12T03:15:15.698190 #6017]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-04-12T03:15:15.705801 #6017] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:15:15.707371 #6017] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:15:15.708635 #6017] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:15:15.709983 #6017]  INFO -- : Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.6ms)
F, [2019-04-12T03:15:15.711428 #6017] FATAL -- :   
F, [2019-04-12T03:15:15.711480 #6017] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-04-12T03:15:15.711517 #6017] FATAL -- :   
F, [2019-04-12T03:15:15.711547 #6017] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:15:15.713421 #6017]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-04-12 03:15:15 +0300
I, [2019-04-12T03:15:15.714239 #6017]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-04-12T03:15:15.714641 #6017] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:15:15.715198 #6017] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:15:15.715485 #6017] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:15:15.715955 #6017]  INFO -- : Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.2ms)
F, [2019-04-12T03:15:15.717305 #6017] FATAL -- :   
F, [2019-04-12T03:15:15.717342 #6017] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-04-12T03:15:15.717366 #6017] FATAL -- :   
F, [2019-04-12T03:15:15.717388 #6017] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:15:15.719109 #6017]  INFO -- : Started GET "/active_job" for 127.0.0.1 at 2019-04-12 03:15:15 +0300
I, [2019-04-12T03:15:15.719814 #6017]  INFO -- : Processing by DummyController#active_job as HTML
I, [2019-04-12T03:15:15.723312 #6017]  INFO -- :   Rendering dummy/active_job.html.erb within layouts/application
I, [2019-04-12T03:15:15.724166 #6017]  INFO -- :   Rendered dummy/active_job.html.erb within layouts/application (0.7ms)
I, [2019-04-12T03:15:15.726094 #6017]  INFO -- : Completed 200 OK in 6ms (Views: 5.1ms | ActiveRecord: 0.0ms)
I, [2019-04-12T03:15:17.731008 #6017]  INFO -- : Started GET "/active_job" for 127.0.0.1 at 2019-04-12 03:15:17 +0300
I, [2019-04-12T03:15:17.731985 #6017]  INFO -- : Processing by DummyController#active_job as HTML
I, [2019-04-12T03:15:17.733029 #6017]  INFO -- :   Rendering dummy/active_job.html.erb within layouts/application
I, [2019-04-12T03:15:17.733344 #6017]  INFO -- :   Rendered dummy/active_job.html.erb within layouts/application (0.2ms)
I, [2019-04-12T03:15:17.733651 #6017]  INFO -- : Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.0ms)
I, [2019-04-12T03:15:19.736523 #6017]  INFO -- : Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 03:15:19 +0300
I, [2019-04-12T03:15:19.743585 #6017]  INFO -- : Processing by DummyController#notify_airbrake_helper as HTML
I, [2019-04-12T03:15:19.743677 #6017]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-04-12T03:15:19.749483 #6017]  INFO -- :   Rendering dummy/notify_airbrake_helper.html.erb within layouts/application
I, [2019-04-12T03:15:19.754932 #6017]  INFO -- :   Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.3ms)
I, [2019-04-12T03:15:19.755320 #6017]  INFO -- : Completed 200 OK in 12ms (Views: 6.3ms | ActiveRecord: 0.0ms)
I, [2019-04-12T03:15:21.762774 #6017]  INFO -- : Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 03:15:21 +0300
I, [2019-04-12T03:15:21.764099 #6017]  INFO -- : Processing by DummyController#notify_airbrake_helper as HTML
I, [2019-04-12T03:15:21.764162 #6017]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-04-12T03:15:21.778238 #6017]  INFO -- :   Rendering dummy/notify_airbrake_helper.html.erb within layouts/application
I, [2019-04-12T03:15:21.778579 #6017]  INFO -- :   Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
I, [2019-04-12T03:15:21.778907 #6017]  INFO -- : Completed 200 OK in 15ms (Views: 1.1ms | ActiveRecord: 0.0ms)
I, [2019-04-12T03:15:23.782735 #6017]  INFO -- : Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 03:15:23 +0300
I, [2019-04-12T03:15:23.783839 #6017]  INFO -- : Processing by DummyController#notify_airbrake_helper as HTML
I, [2019-04-12T03:15:23.783892 #6017]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-04-12T03:15:23.794235 #6017]  INFO -- :   Rendering dummy/notify_airbrake_helper.html.erb within layouts/application
I, [2019-04-12T03:15:23.794606 #6017]  INFO -- :   Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.3ms)
I, [2019-04-12T03:15:23.794912 #6017]  INFO -- : Completed 200 OK in 11ms (Views: 1.1ms | ActiveRecord: 0.0ms)
I, [2019-04-12T03:15:25.799716 #6017]  INFO -- : Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 03:15:25 +0300
I, [2019-04-12T03:15:25.800973 #6017]  INFO -- : Processing by DummyController#notify_airbrake_helper as HTML
I, [2019-04-12T03:15:25.801041 #6017]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-04-12T03:15:25.815048 #6017]  INFO -- :   Rendering dummy/notify_airbrake_helper.html.erb within layouts/application
I, [2019-04-12T03:15:25.815374 #6017]  INFO -- :   Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
I, [2019-04-12T03:15:25.815715 #6017]  INFO -- : Completed 200 OK in 15ms (Views: 1.1ms | ActiveRecord: 0.0ms)
I, [2019-04-12T03:15:27.823643 #6017]  INFO -- : Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 03:15:27 +0300
I, [2019-04-12T03:15:27.825125 #6017]  INFO -- : Processing by DummyController#notify_airbrake_helper as HTML
I, [2019-04-12T03:15:27.825208 #6017]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-04-12T03:15:27.836029 #6017]  INFO -- :   Rendering dummy/notify_airbrake_helper.html.erb within layouts/application
I, [2019-04-12T03:15:27.836326 #6017]  INFO -- :   Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
I, [2019-04-12T03:15:27.836601 #6017]  INFO -- : Completed 200 OK in 11ms (Views: 0.9ms | ActiveRecord: 0.0ms)
I, [2019-04-12T03:15:29.839929 #6017]  INFO -- : Started GET "/notify_airbrake_helper?foo=bar" for 127.0.0.1 at 2019-04-12 03:15:29 +0300
I, [2019-04-12T03:15:29.841155 #6017]  INFO -- : Processing by DummyController#notify_airbrake_helper as HTML
I, [2019-04-12T03:15:29.841215 #6017]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-04-12T03:15:29.851251 #6017]  INFO -- :   Rendering dummy/notify_airbrake_helper.html.erb within layouts/application
I, [2019-04-12T03:15:29.851539 #6017]  INFO -- :   Rendered dummy/notify_airbrake_helper.html.erb within layouts/application (0.2ms)
I, [2019-04-12T03:15:29.851822 #6017]  INFO -- : Completed 200 OK in 11ms (Views: 0.9ms | ActiveRecord: 0.0ms)
I, [2019-04-12T03:15:31.857244 #6017]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 03:15:31 +0300
I, [2019-04-12T03:15:31.858521 #6017]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-04-12T03:15:31.858577 #6017]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-04-12T03:15:31.859074 #6017] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:15:31.860735 #6017] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:15:31.862159 #6017] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:15:31.873431 #6017]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms)
F, [2019-04-12T03:15:31.879682 #6017] FATAL -- :   
F, [2019-04-12T03:15:31.884596 #6017] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-04-12T03:15:31.884653 #6017] FATAL -- :   
F, [2019-04-12T03:15:31.884682 #6017] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:15:33.891755 #6017]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 03:15:33 +0300
I, [2019-04-12T03:15:33.892950 #6017]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-04-12T03:15:33.893025 #6017]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-04-12T03:15:33.893520 #6017] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:15:33.895264 #6017] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:15:33.896780 #6017] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:15:33.911056 #6017]  INFO -- : Completed 500 Internal Server Error in 18ms (ActiveRecord: 0.2ms)
F, [2019-04-12T03:15:33.916673 #6017] FATAL -- :   
F, [2019-04-12T03:15:33.921171 #6017] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-04-12T03:15:33.921228 #6017] FATAL -- :   
F, [2019-04-12T03:15:33.921254 #6017] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:15:35.926415 #6017]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 03:15:35 +0300
I, [2019-04-12T03:15:35.927702 #6017]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-04-12T03:15:35.927762 #6017]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-04-12T03:15:35.928301 #6017] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:15:35.930159 #6017] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:15:35.931681 #6017] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:15:35.942849 #6017]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms)
F, [2019-04-12T03:15:35.948565 #6017] FATAL -- :   
F, [2019-04-12T03:15:35.953188 #6017] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-04-12T03:15:35.953234 #6017] FATAL -- :   
F, [2019-04-12T03:15:35.953262 #6017] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:15:37.959772 #6017]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 03:15:37 +0300
I, [2019-04-12T03:15:37.961221 #6017]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-04-12T03:15:37.961283 #6017]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-04-12T03:15:37.961856 #6017] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:15:37.963755 #6017] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:15:37.965404 #6017] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:15:37.978866 #6017]  INFO -- : Completed 500 Internal Server Error in 17ms (ActiveRecord: 0.3ms)
F, [2019-04-12T03:15:37.985910 #6017] FATAL -- :   
F, [2019-04-12T03:15:37.991190 #6017] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-04-12T03:15:37.991257 #6017] FATAL -- :   
F, [2019-04-12T03:15:37.991300 #6017] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:15:39.997211 #6017]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 03:15:39 +0300
I, [2019-04-12T03:15:39.998324 #6017]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-04-12T03:15:39.998373 #6017]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-04-12T03:15:39.998802 #6017] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:15:40.000423 #6017] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:15:40.001689 #6017] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:15:40.015704 #6017]  INFO -- : Completed 500 Internal Server Error in 17ms (ActiveRecord: 0.2ms)
F, [2019-04-12T03:15:40.020904 #6017] FATAL -- :   
F, [2019-04-12T03:15:40.025816 #6017] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-04-12T03:15:40.025878 #6017] FATAL -- :   
F, [2019-04-12T03:15:40.025908 #6017] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:15:42.032294 #6017]  INFO -- : Started GET "/crash?foo=bar" for 127.0.0.1 at 2019-04-12 03:15:42 +0300
I, [2019-04-12T03:15:42.033191 #6017]  INFO -- : Processing by DummyController#crash as HTML
I, [2019-04-12T03:15:42.033233 #6017]  INFO -- :   Parameters: {"foo"=>"bar"}
D, [2019-04-12T03:15:42.033616 #6017] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:15:42.034958 #6017] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:15:42.036079 #6017] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:15:42.047823 #6017]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-04-12T03:15:42.053706 #6017] FATAL -- :   
F, [2019-04-12T03:15:42.058407 #6017] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-04-12T03:15:42.058450 #6017] FATAL -- :   
F, [2019-04-12T03:15:42.058478 #6017] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:15:44.065719 #6017]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 03:15:44 +0300
I, [2019-04-12T03:15:44.066813 #6017]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-04-12T03:15:44.066860 #6017]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-04-12T03:15:44.076264 #6017]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-04-12T03:15:44.076710 #6017]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.3ms)
I, [2019-04-12T03:15:44.077270 #6017]  INFO -- : Completed 200 OK in 10ms (Views: 1.4ms | ActiveRecord: 0.0ms)
I, [2019-04-12T03:15:46.081525 #6017]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 03:15:46 +0300
I, [2019-04-12T03:15:46.082653 #6017]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-04-12T03:15:46.082703 #6017]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-04-12T03:15:46.093111 #6017]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-04-12T03:15:46.093436 #6017]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
I, [2019-04-12T03:15:46.093759 #6017]  INFO -- : Completed 200 OK in 11ms (Views: 1.4ms | ActiveRecord: 0.0ms)
I, [2019-04-12T03:15:48.101326 #6017]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 03:15:48 +0300
I, [2019-04-12T03:15:48.102682 #6017]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-04-12T03:15:48.102814 #6017]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-04-12T03:15:48.112937 #6017]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-04-12T03:15:48.113246 #6017]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
I, [2019-04-12T03:15:48.113549 #6017]  INFO -- : Completed 200 OK in 11ms (Views: 1.0ms | ActiveRecord: 0.0ms)
I, [2019-04-12T03:15:50.121736 #6017]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 03:15:50 +0300
I, [2019-04-12T03:15:50.122959 #6017]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-04-12T03:15:50.123020 #6017]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-04-12T03:15:50.136366 #6017]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-04-12T03:15:50.136660 #6017]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
I, [2019-04-12T03:15:50.137041 #6017]  INFO -- : Completed 200 OK in 14ms (Views: 1.1ms | ActiveRecord: 0.0ms)
I, [2019-04-12T03:15:52.141531 #6017]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 03:15:52 +0300
I, [2019-04-12T03:15:52.142602 #6017]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-04-12T03:15:52.142655 #6017]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-04-12T03:15:52.151940 #6017]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-04-12T03:15:52.152369 #6017]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
I, [2019-04-12T03:15:52.152893 #6017]  INFO -- : Completed 200 OK in 10ms (Views: 1.5ms | ActiveRecord: 0.0ms)
I, [2019-04-12T03:15:54.160337 #6017]  INFO -- : Started GET "/notify_airbrake_sync_helper?foo=bar" for 127.0.0.1 at 2019-04-12 03:15:54 +0300
I, [2019-04-12T03:15:54.161544 #6017]  INFO -- : Processing by DummyController#notify_airbrake_sync_helper as HTML
I, [2019-04-12T03:15:54.161603 #6017]  INFO -- :   Parameters: {"foo"=>"bar"}
I, [2019-04-12T03:15:54.171669 #6017]  INFO -- :   Rendering dummy/notify_airbrake_sync_helper.html.erb within layouts/application
I, [2019-04-12T03:15:54.171988 #6017]  INFO -- :   Rendered dummy/notify_airbrake_sync_helper.html.erb within layouts/application (0.2ms)
I, [2019-04-12T03:15:54.172298 #6017]  INFO -- : Completed 200 OK in 11ms (Views: 1.0ms | ActiveRecord: 0.0ms)
I, [2019-04-12T03:15:56.179441 #6017]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-04-12 03:15:56 +0300
I, [2019-04-12T03:15:56.184656 #6017]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-04-12T03:15:56.185334 #6017] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:15:56.187386 #6017] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:15:56.189382 #6017] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:15:56.199550 #6017]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms)
F, [2019-04-12T03:15:56.201737 #6017] FATAL -- :   
F, [2019-04-12T03:15:56.201785 #6017] FATAL -- : RSpec::Expectations::ExpectationNotMetError (
expected: "AirbrakeTestError"
     got: "RSpec::Mocks::MockExpectationError"

(compared using ==)
):
F, [2019-04-12T03:15:56.201815 #6017] FATAL -- :   
F, [2019-04-12T03:15:56.201858 #6017] FATAL -- : lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
lib/airbrake/rack/middleware.rb:40:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:15:56.203477 #6017]  INFO -- : Started GET "/" for 127.0.0.1 at 2019-04-12 03:15:56 +0300
I, [2019-04-12T03:15:56.204274 #6017]  INFO -- : Processing by DummyController#index as HTML
I, [2019-04-12T03:15:56.205109 #6017]  INFO -- :   Rendering dummy/index.html.erb within layouts/application
I, [2019-04-12T03:15:56.205393 #6017]  INFO -- :   Rendered dummy/index.html.erb within layouts/application (0.2ms)
I, [2019-04-12T03:15:56.205817 #6017]  INFO -- : Completed 200 OK in 1ms (Views: 1.1ms | ActiveRecord: 0.0ms)
I, [2019-04-12T03:15:56.207742 #6017]  INFO -- : Started HEAD "/crash" for 127.0.0.1 at 2019-04-12 03:15:56 +0300
I, [2019-04-12T03:15:56.212102 #6017]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-04-12T03:15:56.212569 #6017] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:15:56.213900 #6017] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:15:56.215037 #6017] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:15:56.216268 #6017]  INFO -- : Completed 0  in 4ms (ActiveRecord: 0.2ms)
F, [2019-04-12T03:15:56.217597 #6017] FATAL -- :   
F, [2019-04-12T03:15:56.217644 #6017] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-04-12T03:15:56.217671 #6017] FATAL -- :   
F, [2019-04-12T03:15:56.217695 #6017] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:15:56.219300 #6017]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-04-12 03:15:56 +0300
I, [2019-04-12T03:15:56.220336 #6017]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-04-12T03:15:56.220910 #6017] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:15:56.222366 #6017] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:15:56.223630 #6017] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:15:56.224973 #6017]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
F, [2019-04-12T03:15:56.226479 #6017] FATAL -- :   
F, [2019-04-12T03:15:56.226519 #6017] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-04-12T03:15:56.226544 #6017] FATAL -- :   
F, [2019-04-12T03:15:56.226568 #6017] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:15:56.227937 #6017]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-04-12 03:15:56 +0300
I, [2019-04-12T03:15:56.228625 #6017]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-04-12T03:15:56.228958 #6017] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:15:56.230342 #6017] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:15:56.231573 #6017] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:15:56.242968 #6017]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.1ms)
F, [2019-04-12T03:15:56.248408 #6017] FATAL -- :   
F, [2019-04-12T03:15:56.254196 #6017] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-04-12T03:15:56.254270 #6017] FATAL -- :   
F, [2019-04-12T03:15:56.254299 #6017] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:15:58.262807 #6017]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-04-12 03:15:58 +0300
I, [2019-04-12T03:15:58.263710 #6017]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-04-12T03:15:58.264139 #6017] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:15:58.265497 #6017] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:15:58.266619 #6017] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:15:58.277837 #6017]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-04-12T03:15:58.283127 #6017] FATAL -- :   
F, [2019-04-12T03:15:58.288169 #6017] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-04-12T03:15:58.288207 #6017] FATAL -- :   
F, [2019-04-12T03:15:58.288233 #6017] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:16:00.294803 #6017]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-04-12 03:16:00 +0300
I, [2019-04-12T03:16:00.295667 #6017]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-04-12T03:16:00.296102 #6017] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:16:00.297509 #6017] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:16:00.298740 #6017] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:16:00.311831 #6017]  INFO -- : Completed 500 Internal Server Error in 16ms (ActiveRecord: 0.2ms)
F, [2019-04-12T03:16:00.318344 #6017] FATAL -- :   
F, [2019-04-12T03:16:00.323029 #6017] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-04-12T03:16:00.323101 #6017] FATAL -- :   
F, [2019-04-12T03:16:00.323127 #6017] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:16:02.329037 #6017]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-04-12 03:16:02 +0300
I, [2019-04-12T03:16:02.330083 #6017]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-04-12T03:16:02.330588 #6017] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:16:02.332302 #6017] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:16:02.333786 #6017] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:16:02.345176 #6017]  INFO -- : Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms)
F, [2019-04-12T03:16:02.350369 #6017] FATAL -- :   
F, [2019-04-12T03:16:02.355026 #6017] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-04-12T03:16:02.355073 #6017] FATAL -- :   
F, [2019-04-12T03:16:02.355099 #6017] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:16:04.361483 #6017]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-04-12 03:16:04 +0300
I, [2019-04-12T03:16:04.362493 #6017]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-04-12T03:16:04.363015 #6017] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:16:04.364676 #6017] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:16:04.366116 #6017] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:16:04.379499 #6017]  INFO -- : Completed 500 Internal Server Error in 17ms (ActiveRecord: 0.2ms)
F, [2019-04-12T03:16:04.384853 #6017] FATAL -- :   
F, [2019-04-12T03:16:04.384898 #6017] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-04-12T03:16:04.389450 #6017] FATAL -- :   
F, [2019-04-12T03:16:04.389511 #6017] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:16:06.395907 #6017]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-04-12 03:16:06 +0300
I, [2019-04-12T03:16:06.396825 #6017]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-04-12T03:16:06.397327 #6017] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:16:06.398866 #6017] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:16:06.400169 #6017] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:16:06.411193 #6017]  INFO -- : Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)
F, [2019-04-12T03:16:06.416510 #6017] FATAL -- :   
F, [2019-04-12T03:16:06.421120 #6017] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-04-12T03:16:06.421188 #6017] FATAL -- :   
F, [2019-04-12T03:16:06.421216 #6017] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:16:08.427734 #6017]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-04-12 03:16:08 +0300
I, [2019-04-12T03:16:08.428846 #6017]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-04-12T03:16:08.429281 #6017] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:16:08.430571 #6017] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:16:08.431764 #6017] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:16:08.442374 #6017]  INFO -- : Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.2ms)
F, [2019-04-12T03:16:08.448749 #6017] FATAL -- :   
F, [2019-04-12T03:16:08.453338 #6017] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-04-12T03:16:08.453378 #6017] FATAL -- :   
F, [2019-04-12T03:16:08.453405 #6017] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:16:10.456473 #6017]  INFO -- : Started GET "/delayed_job" for 127.0.0.1 at 2019-04-12 03:16:10 +0300
I, [2019-04-12T03:16:10.457509 #6017]  INFO -- : Processing by DummyController#delayed_job as HTML
I, [2019-04-12T03:16:10.473631 #6017]  INFO -- : Completed 500 Internal Server Error in 16ms (ActiveRecord: 0.4ms)
F, [2019-04-12T03:16:10.482707 #6017] FATAL -- :   
F, [2019-04-12T03:16:10.482816 #6017] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (anything, hash_including("handler"=>"--- !ruby/struct:BangoJob\nbingo: bingo\nbongo: bongo\n"))
       got: (#<Airbrake::Notice:0x00007f93293b3210 @config=#<Airbrake::Config:0x00007f932bb89c58 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007f93293a0cf0 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,3 +1,2 @@
[0m[31m-["anything",
[0m[31m- "hash_including(\"handler\"=>\"--- !ruby/struct:BangoJob\\nbingo: bingo\\nbongo: bongo\\n\")"]
[0m[32m+[#<Airbrake::Notice:0x00007f93293b3210 @config=#<Airbrake::Config:0x00007f932bb89c58 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007f932bb89be0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007f932bb89b90 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007f932bb89b40 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f932bb89ac8>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"delayed_job error", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>87, :function=>"perform"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>81, :function=>"block in invoke_job"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/delayed_job.rb", :line=>10, :function=>"block (2 levels) in <class:Airbrake>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>79, :function=>"block (2 levels) in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>79, :function=>"block in add"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>78, :function=>"invoke_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>19, :function=>"block (2 levels) in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>61, :function=>"block in initialize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>66, :function=>"execute"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/lifecycle.rb", :line=>40, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>17, :function=>"block in enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>16, :function=>"tap"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>16, :function=>"enqueue_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bundler/gems/delayed_job-460018e338e6/lib/delayed/backend/base.rb", :line=>12, :function=>"enqueue"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>149, :function=>"delayed_job"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>196, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: delayed_job error>, :rack_request=>#<ActionDispatch::Request:0x00007f93293a0cc8 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007f93290faff0>, "rack.errors"=>#<StringIO:0x00007f93290fb1d0>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/delayed_job", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007f932a1c29f0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007f932a1c2950 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007f932a1c2900 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f932a1c2860>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007f932bfa60c0 @filters=[#<Proc:0x00007f932bfa5fa8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007f932bfa5f80@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007f932bfa5f58@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007f932bfa5828@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007f932bfa5800@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007f932bfa55f8 @key_generator=#<ActiveSupport::KeyGenerator:0x00007f932bfa5620 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007f932bfa55d0 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007f932bb00048 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007f932915ba30>, "ROUTES_70135013104920_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/delayed_job", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"1c448bc9-99c0-45d2-a3e1-385e6e2395ff", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007f93290e3170 @req=#<ActionDispatch::Request:0x00007f93290e3198 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7f93290f3c50 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007f93290f3bd8 @by=#<ActionDispatch::Session::CookieStore:0x00007f932c01b050 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007f932c01b078 @app=#<Rack::Head:0x00007f932c01b0a0 @app=#<Rack::ConditionalGet:0x00007f932c01b0c8 @app=#<Rack::ETag:0x00007f932c01b0f0 @app=#<Rack::TempfileReaper:0x00007f932c01b118 @app=#<Warden::Manager:0x00007f932c01b1e0 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007f932915ba30>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70135012891780 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"delayed_job"}, "action_controller.instance"=>#<DummyController:0x00007f93290eba78 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007f93290f3048 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/delayed_job", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007f93290eab78 @req=#<ActionDispatch::Request:0x00007f93290f3048 ...>>>, @_response=#<ActionDispatch::Response:0x00007f93290ebcf8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f93290ebca8>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007f93290ebc30 @response=#<ActionDispatch::Response:0x00007f93290ebcf8 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007f93290ebc08 @monitor=#<ActionDispatch::Response:0x00007f93290ebcf8 ...>, @cond=#<Thread::ConditionVariable:0x00007f93290ebbe0>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007f93290f3048 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"delayed_job"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/delayed_job", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007f93290eab78 @req=#<ActionDispatch::Request:0x00007f93290f3048 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007f93290eb910 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007f93290eb820 @paths=[#<ActionView::FixtureResolver:0x00007f932bafae90 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7f932bafae68 keys=15 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown"}>]>>, @_action_name="delayed_job", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"delayed_job"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007f932a4b2f20 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-3945511686665288776>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007f93293a0cf0 @max_size=10000>>]
[0m):
F, [2019-04-12T03:16:10.482877 #6017] FATAL -- :   
F, [2019-04-12T03:16:10.482904 #6017] FATAL -- : lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
lib/airbrake/rack/middleware.rb:40:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:16:10.484961 #6017]  INFO -- : Started GET "/breakdown" for 127.0.0.1 at 2019-04-12 03:16:10 +0300
I, [2019-04-12T03:16:10.485832 #6017]  INFO -- : Processing by DummyController#breakdown as HTML
D, [2019-04-12T03:16:10.486326 #6017] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:16:10.487771 #6017] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "breakdown"]]
D, [2019-04-12T03:16:10.488933 #6017] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:16:10.490097 #6017]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
F, [2019-04-12T03:16:10.491676 #6017] FATAL -- :   
F, [2019-04-12T03:16:10.491725 #6017] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-04-12T03:16:10.491750 #6017] FATAL -- :   
F, [2019-04-12T03:16:10.491774 #6017] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:16:10.493216 #6017]  INFO -- : Started GET "/active_record_after_commit" for 127.0.0.1 at 2019-04-12 03:16:10 +0300
I, [2019-04-12T03:16:10.494086 #6017]  INFO -- : Processing by DummyController#active_record_after_commit as HTML
D, [2019-04-12T03:16:10.494499 #6017] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:16:10.495834 #6017] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "Bingo"]]
D, [2019-04-12T03:16:10.497003 #6017] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:16:10.498140 #6017]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
F, [2019-04-12T03:16:10.509584 #6017] FATAL -- :   
F, [2019-04-12T03:16:10.509688 #6017] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (an instance of AirbrakeTestError)
       got: (#<Airbrake::Notice:0x00007f93292a8730 @config=#<Airbrake::Config:0x00007f932bb89c58 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007f9329290a40 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of AirbrakeTestError"]
[0m[32m+[#<Airbrake::Notice:0x00007f93292a8730 @config=#<Airbrake::Config:0x00007f932bb89c58 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007f932bb89be0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007f932bb89b90 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007f932bb89b40 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f932bb89ac8>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"after_commit", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>49, :function=>"raise_error_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_commit_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>346, :function=>"committed!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>128, :function=>"commit_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>223, :function=>"block in commit_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>213, :function=>"commit_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>252, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>385, :function=>"with_transaction_returning_status"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>310, :function=>"block in save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>325, :function=>"rollback_active_record_state!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>309, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/suppressor.rb", :line=>44, :function=>"save"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/persistence.rb", :line=>36, :function=>"create"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>130, :function=>"active_record_after_commit"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>109, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: after_commit>, :rack_request=>#<ActionDispatch::Request:0x00007f9329290a18 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007f9329302d98>, "rack.errors"=>#<StringIO:0x00007f9329302e10>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/active_record_after_commit", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007f932a1c29f0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007f932a1c2950 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007f932a1c2900 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f932a1c2860>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007f932bfa60c0 @filters=[#<Proc:0x00007f932bfa5fa8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007f932bfa5f80@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007f932bfa5f58@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007f932bfa5828@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007f932bfa5800@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007f932bfa55f8 @key_generator=#<ActiveSupport::KeyGenerator:0x00007f932bfa5620 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007f932bfa55d0 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007f932bb00048 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007f932915ba30>, "ROUTES_70135013104920_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/active_record_after_commit", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"80b51cd2-c3a4-4ff0-9afd-26710ecd46c6", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007f9329301cb8 @req=#<ActionDispatch::Request:0x00007f9329301ce0 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7f9329300bb0 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007f9329300b60 @by=#<ActionDispatch::Session::CookieStore:0x00007f932c01b050 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007f932c01b078 @app=#<Rack::Head:0x00007f932c01b0a0 @app=#<Rack::ConditionalGet:0x00007f932c01b0c8 @app=#<Rack::ETag:0x00007f932c01b0f0 @app=#<Rack::TempfileReaper:0x00007f932c01b118 @app=#<Warden::Manager:0x00007f932c01b1e0 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007f932915ba30>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70135013967160 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"active_record_after_commit"}, "action_controller.instance"=>#<DummyController:0x00007f93292fb0e8 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007f9329300688 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_commit"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_commit", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007f93292fa378 @req=#<ActionDispatch::Request:0x00007f9329300688 ...>>>, @_response=#<ActionDispatch::Response:0x00007f93292fb340 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f93292fb2c8>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007f93292fb278 @response=#<ActionDispatch::Response:0x00007f93292fb340 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007f93292fb250 @monitor=#<ActionDispatch::Response:0x00007f93292fb340 ...>, @cond=#<Thread::ConditionVariable:0x00007f93292fb228>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007f9329300688 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_commit"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_commit", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007f93292fa378 @req=#<ActionDispatch::Request:0x00007f9329300688 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007f93292faf80 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007f93292fae68 @paths=[#<ActionView::FixtureResolver:0x00007f932bafae90 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7f932bafae68 keys=15 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown"}>]>>, @_action_name="active_record_after_commit", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"active_record_after_commit"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007f932a4b2f20 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-3945511686665288776>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007f9329290a40 @max_size=10000>>]
[0m):
F, [2019-04-12T03:16:10.509782 #6017] FATAL -- :   
F, [2019-04-12T03:16:10.509819 #6017] FATAL -- : lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
lib/airbrake/rack/middleware.rb:40:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:16:10.511307 #6017]  INFO -- : Started GET "/active_record_after_rollback" for 127.0.0.1 at 2019-04-12 03:16:10 +0300
I, [2019-04-12T03:16:10.512156 #6017]  INFO -- : Processing by DummyController#active_record_after_rollback as HTML
D, [2019-04-12T03:16:10.512437 #6017] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:16:10.513944 #6017] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "Bango"]]
D, [2019-04-12T03:16:10.515223 #6017] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
I, [2019-04-12T03:16:10.516323 #6017]  INFO -- : Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
F, [2019-04-12T03:16:10.531999 #6017] FATAL -- :   
F, [2019-04-12T03:16:10.532116 #6017] FATAL -- : RSpec::Mocks::MockExpectationError (Airbrake received :notify with unexpected arguments
  expected: (an instance of AirbrakeTestError)
       got: (#<Airbrake::Notice:0x00007f932925fb70 @config=#<Airbrake::Config:0x00007f932bb89c58 @proxy={}, @queue...nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007f932beff0e0 @max_size=10000>>)
Diff:[0m
[0m[34m@@ -1,2 +1,2 @@
[0m[31m-["an instance of AirbrakeTestError"]
[0m[32m+[#<Airbrake::Notice:0x00007f932925fb70 @config=#<Airbrake::Config:0x00007f932bb89c58 @proxy={}, @queue_size=100, @workers=5, @code_hunks=true, @logger=#<Logger:0x00007f932bb89be0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007f932bb89b90 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007f932bb89b40 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/dev/null", @dev=#<File:/dev/null>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f932bb89ac8>>>, @project_id=113743, @project_key="fd04e13d806a90f96614ad8e529b2822", @host="https://api.airbrake.io", @ignore_environments=[], @timeout=nil, @blacklist_keys=[], @whitelist_keys=[], @root_directory="/Users/kyrylo/Code/airbrake/airbrake/gemfiles", @versions={}, @performance_stats=false, @performance_stats_flush_period=1, @app_version="1.2.3", @endpoint=#<URI::HTTPS https://api.airbrake.io/api/v3/projects/113743/notices>>, @payload={:errors=>[{:type=>"AirbrakeTestError", :message=>"after_rollback", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>53, :function=>"raise_error_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>426, :function=>"block in make_lambda"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>271, :function=>"block in simple"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"block in invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>517, :function=>"invoke_after"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>133, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rails/active_record.rb", :line=>25, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>816, :function=>"_run_rollback_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>357, :function=>"rolledback!"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>112, :function=>"rollback_records"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>231, :function=>"block in rollback_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>228, :function=>"rollback_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>242, :function=>"rescue in block in within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>259, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>134, :function=>"active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>119, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}, {:type=>"ActiveRecord::Rollback", :message=>"ActiveRecord::Rollback", :backtrace=>[{:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>136, :function=>"block in active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"block in transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>239, :function=>"block in within_new_transaction"}, {:file=>"/Users/kyrylo/.rubies/ruby-2.4.2/lib/ruby/2.4.0/monitor.rb", :line=>214, :function=>"mon_synchronize"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/transaction.rb", :line=>236, :function=>"within_new_transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb", :line=>259, :function=>"transaction"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/transactions.rb", :line=>212, :function=>"transaction"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/dummy_app.rb", :line=>134, :function=>"active_record_after_rollback"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/basic_implicit_render.rb", :line=>6, :function=>"send_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>194, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rendering.rb", :line=>30, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>42, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/callbacks.rb", :line=>41, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/rescue.rb", :line=>22, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>34, :function=>"block in process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"block in instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications/instrumenter.rb", :line=>23, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/notifications.rb", :line=>168, :function=>"instrument"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/instrumentation.rb", :line=>32, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal/params_wrapper.rb", :line=>256, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activerecord-5.2.2/lib/active_record/railties/controller_runtime.rb", :line=>24, :function=>"process_action"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/abstract_controller/base.rb", :line=>134, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionview-5.2.2/lib/action_view/rendering.rb", :line=>32, :function=>"process"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>191, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_controller/metal.rb", :line=>252, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>52, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>34, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>52, :function=>"block in serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"each"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/journey/router.rb", :line=>35, :function=>"serve"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb", :line=>840, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>36, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"catch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/warden-1.2.8/lib/warden/manager.rb", :line=>34, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/tempfile_reaper.rb", :line=>15, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/etag.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/conditional_get.rb", :line=>25, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/head.rb", :line=>12, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/http/content_security_policy.rb", :line=>18, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>232, :function=>"context"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/session/abstract/id.rb", :line=>226, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/cookies.rb", :line=>670, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>28, :function=>"block in call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/callbacks.rb", :line=>98, :function=>"run_callbacks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/callbacks.rb", :line=>26, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>33, :function=>"call!"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/lib/airbrake/rack/middleware.rb", :line=>21, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/debug_exceptions.rb", :line=>61, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/show_exceptions.rb", :line=>33, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>38, :function=>"call_app"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/rack/logger.rb", :line=>28, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/remote_ip.rb", :line=>81, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/request_id.rb", :line=>27, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/method_override.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/runtime.rb", :line=>22, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/activesupport-5.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb", :line=>29, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/executor.rb", :line=>14, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/actionpack-5.2.2/lib/action_dispatch/middleware/static.rb", :line=>127, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-2.0.6/lib/rack/sendfile.rb", :line=>111, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/engine.rb", :line=>524, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/mock_session.rb", :line=>30, :function=>"request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>244, :function=>"process_request"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rack-test-0.6.3/lib/rack/test.rb", :line=>58, :function=>"get"}, {:file=>"/Users/kyrylo/Code/airbrake/airbrake/spec/integration/rails/rails_spec.rb", :line=>119, :function=>"block (3 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>254, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"block in with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"block in with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>604, :function=>"block in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-wait-0.0.9/lib/rspec/wait.rb", :line=>46, :function=>"block (2 levels) in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>447, :function=>"instance_exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>373, :function=>"execute_with"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>606, :function=>"block (2 levels) in run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>342, :function=>"call"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>607, :function=>"run_around_example_hooks_for"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/hooks.rb", :line=>464, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>457, :function=>"with_around_example_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>500, :function=>"with_around_and_singleton_context_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example.rb", :line=>251, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>629, :function=>"block in run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>625, :function=>"run_examples"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>591, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"block in run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/example_group.rb", :line=>592, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (3 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"map"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>116, :function=>"block (2 levels) in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/configuration.rb", :line=>1989, :function=>"with_suite_hooks"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>111, :function=>"block in run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/reporter.rb", :line=>74, :function=>"report"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>110, :function=>"run_specs"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>87, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>71, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/lib/rspec/core/runner.rb", :line=>45, :function=>"invoke"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/rspec-core-3.8.0/exe/rspec", :line=>4, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec", :line=>23, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>74, :function=>"kernel_load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli/exec.rb", :line=>28, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>463, :function=>"exec"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/command.rb", :line=>27, :function=>"run"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/invocation.rb", :line=>126, :function=>"invoke_command"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor.rb", :line=>387, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>27, :function=>"dispatch"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/vendor/thor/lib/thor/base.rb", :line=>466, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/cli.rb", :line=>18, :function=>"start"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>30, :function=>"block in <top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/lib/bundler/friendly_errors.rb", :line=>124, :function=>"with_friendly_errors"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/gems/bundler-1.17.1/exe/bundle", :line=>22, :function=>"<top (required)>"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"load"}, {:file=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/bundle", :line=>23, :function=>"<main>"}]}], :context=>{:version=>"1.2.3", :rootDirectory=>"/Users/kyrylo/Code/airbrake/airbrake/gemfiles", :hostname=>"Kyrylos-MacBook-Pro.local", :severity=>"error", :os=>"x86_64-darwin16", :language=>"ruby/2.4.2", :notifier=>{:name=>"airbrake-ruby", :version=>"4.2.3", :url=>"https://github.com/airbrake/airbrake-ruby"}}, :environment=>{:program_name=>"/Users/kyrylo/.gem/ruby/2.4.2/bin/rspec"}, :session=>{}, :params=>{}}, @stash={:exception=>#<AirbrakeTestError: after_rollback>, :rack_request=>#<ActionDispatch::Request:0x00007f932beff0b8 @env={"rack.version"=>[1, 3], "rack.input"=>#<StringIO:0x00007f932a670dd0>, "rack.errors"=>#<StringIO:0x00007f932a670e48>, "rack.multithread"=>true, "rack.multiprocess"=>true, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "SERVER_NAME"=>"example.org", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "PATH_INFO"=>"/active_record_after_rollback", "rack.url_scheme"=>"http", "HTTPS"=>"off", "SCRIPT_NAME"=>"", "CONTENT_LENGTH"=>"0", "rack.test"=>true, "REMOTE_ADDR"=>"127.0.0.1", "HTTP_HOST"=>"example.org", "HTTP_COOKIE"=>"", "action_dispatch.parameter_filter"=>[], "action_dispatch.redirect_filter"=>[], "action_dispatch.secret_token"=>"ni6aeph6aeriBiphesh8omahv6cohpue5Quah5ceiMohtuvei8", "action_dispatch.secret_key_base"=>"62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", "action_dispatch.show_exceptions"=>true, "action_dispatch.show_detailed_exceptions"=>false, "action_dispatch.logger"=>#<Logger:0x00007f932a1c29f0 @level=0, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007f932a1c2950 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007f932a1c2900 @shift_period_suffix="%Y%m%d", @shift_size=1048576, @shift_age=0, @filename="/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log", @dev=#<File:/Users/kyrylo/Code/airbrake/airbrake/spec/apps/rails/logs/52.log>, @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f932a1c2860>>>, "action_dispatch.backtrace_cleaner"=>#<Rails::BacktraceCleaner:0x00007f932bfa60c0 @filters=[#<Proc:0x00007f932bfa5fa8@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:16>, #<Proc:0x00007f932bfa5f80@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:17>, #<Proc:0x00007f932bfa5f58@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:18>, #<Proc:0x00007f932bfa5828@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:31>], @silencers=[#<Proc:0x00007f932bfa5800@/Users/kyrylo/.gem/ruby/2.4.2/gems/railties-5.2.2/lib/rails/backtrace_cleaner.rb:21>], @root="/Users/kyrylo/Code/airbrake/airbrake/">, "action_dispatch.key_generator"=>#<ActiveSupport::CachingKeyGenerator:0x00007f932bfa55f8 @key_generator=#<ActiveSupport::KeyGenerator:0x00007f932bfa5620 @secret="62773890cad9d9d584b57320f8612f8f7378a90aadcabc6ee", @iterations=1000>, @cache_keys=#<Concurrent::Map:0x00007f932bfa55d0 entries=2 default_proc=nil>>, "action_dispatch.http_auth_salt"=>"http authentication", "action_dispatch.signed_cookie_salt"=>"signed cookie", "action_dispatch.encrypted_cookie_salt"=>"encrypted cookie", "action_dispatch.encrypted_signed_cookie_salt"=>"signed encrypted cookie", "action_dispatch.authenticated_encrypted_cookie_salt"=>"authenticated encrypted cookie", "action_dispatch.use_authenticated_cookie_encryption"=>false, "action_dispatch.encrypted_cookie_cipher"=>nil, "action_dispatch.signed_cookie_digest"=>nil, "action_dispatch.cookies_serializer"=>nil, "action_dispatch.cookies_digest"=>nil, "action_dispatch.cookies_rotations"=>#<ActiveSupport::Messages::RotationConfiguration:0x00007f932bb00048 @signed=[], @encrypted=[]>, "action_dispatch.content_security_policy"=>nil, "action_dispatch.content_security_policy_report_only"=>false, "action_dispatch.content_security_policy_nonce_generator"=>nil, "action_dispatch.routes"=>#<ActionDispatch::Routing::RouteSet:0x00007f932915ba30>, "ROUTES_70135013104920_SCRIPT_NAME"=>"", "ORIGINAL_FULLPATH"=>"/active_record_after_rollback", "ORIGINAL_SCRIPT_NAME"=>"", "action_dispatch.request_id"=>"14dd54fe-d3a4-41a0-a6f8-5531ed43d0cc", "action_dispatch.remote_ip"=>#<ActionDispatch::RemoteIp::GetIp:0x00007f93292834f8 @req=#<ActionDispatch::Request:0x00007f9329283520 @env={...}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>, @check_ip=true, @proxies=[#<IPAddr: IPv4:127.0.0.1/255.255.255.255>, #<IPAddr: IPv6:0000:0000:0000:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>, #<IPAddr: IPv6:fc00:0000:0000:0000:0000:0000:0000:0000/fe00:0000:0000:0000:0000:0000:0000:0000>, #<IPAddr: IPv4:10.0.0.0/255.0.0.0>, #<IPAddr: IPv4:172.16.0.0/255.240.0.0>, #<IPAddr: IPv4:192.168.0.0/255.255.0.0>], @ip="127.0.0.1">, "rack.session"=>#<ActionDispatch::Request::Session:0x7f9329281ba8 not yet loaded>, "rack.session.options"=>#<ActionDispatch::Request::Session::Options:0x00007f9329281b58 @by=#<ActionDispatch::Session::CookieStore:0x00007f932c01b050 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x00007f932c01b078 @app=#<Rack::Head:0x00007f932c01b0a0 @app=#<Rack::ConditionalGet:0x00007f932c01b0c8 @app=#<Rack::ETag:0x00007f932c01b0f0 @app=#<Rack::TempfileReaper:0x00007f932c01b118 @app=#<Warden::Manager:0x00007f932c01b1e0 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, @app=#<ActionDispatch::Routing::RouteSet:0x00007f932915ba30>>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="jiez4Mielu1AiHugog3shiiPhe3lai3faer", @cookie_only=true>, @delegate={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}>, "rack.tempfiles"=>[], "warden"=>Warden::Proxy:70135013707080 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{}, :intercept_401=>true}, "action_dispatch.request.path_parameters"=>{:controller=>"dummy", :action=>"active_record_after_rollback"}, "action_controller.instance"=>#<DummyController:0x00007f9329277cc0 @_action_has_layout=true, @_routes=nil, @_request=#<ActionDispatch::Request:0x00007f9329281450 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_rollback"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_rollback", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007f9329276fa0 @req=#<ActionDispatch::Request:0x00007f9329281450 ...>>>, @_response=#<ActionDispatch::Response:0x00007f9329277ef0 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Thread::Mutex:0x00007f9329277ea0>, @header={"X-Frame-Options"=>"SAMEORIGIN", "X-XSS-Protection"=>"1; mode=block", "X-Content-Type-Options"=>"nosniff", "X-Download-Options"=>"noopen", "X-Permitted-Cross-Domain-Policies"=>"none", "Referrer-Policy"=>"strict-origin-when-cross-origin"}, @stream=#<ActionDispatch::Response::Buffer:0x00007f9329277e50 @response=#<ActionDispatch::Response:0x00007f9329277ef0 ...>, @buf=[], @closed=false, @str_body=nil>, @status=200, @cv=#<MonitorMixin::ConditionVariable:0x00007f9329277e28 @monitor=#<ActionDispatch::Response:0x00007f9329277ef0 ...>, @cond=#<Thread::ConditionVariable:0x00007f9329277e00>>, @committed=false, @sending=false, @sent=false, @cache_control={}, @request=#<ActionDispatch::Request:0x00007f9329281450 @env={...}, @filtered_parameters={"controller"=>"dummy", "action"=>"active_record_after_rollback"}, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method="GET", @remote_ip=nil, @original_fullpath=nil, @fullpath="/active_record_after_rollback", @ip=nil, @headers=#<ActionDispatch::Http::Headers:0x00007f9329276fa0 @req=#<ActionDispatch::Request:0x00007f9329281450 ...>>>>, @_lookup_context=#<ActionView::LookupContext:0x00007f9329277b58 @details_key=nil, @cache=true, @prefixes=["dummy"], @rendered_format=nil, @details={:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}, @view_paths=#<ActionView::PathSet:0x00007f9329277a68 @paths=[#<ActionView::FixtureResolver:0x00007f932bafae90 @pattern=":prefix/:action{.:locale,}{.:formats,}{+:variants,}{.:handlers,}", @cache=#<ActionView::Resolver::Cache:0x7f932bafae68 keys=15 queries=0>, @hash={"layouts/application.html.erb"=>"<%= yield %>", "dummy/index.html.erb"=>"Hello from index", "dummy/notify_airbrake_helper.html.erb"=>"notify_airbrake_helper", "dummy/notify_airbrake_sync_helper.html.erb"=>"notify_airbrake_helper_sync", "dummy/active_record_after_commit.html.erb"=>"active_record_after_commit", "dummy/active_record_after_rollback.html.erb"=>"active_record_after_rollback", "dummy/active_job.html.erb"=>"active_job", "dummy/resque.html.erb"=>"resque", "dummy/delayed_job.html.erb"=>"delayed_job", "dummy/breakdown.html.erb"=>"breakdown"}>]>>, @_action_name="active_record_after_rollback", @_response_body=nil>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"dummy", "action"=>"active_record_after_rollback"}, "action_dispatch.request.formats"=>[#<Mime::Type:0x00007f932a4b2f20 @synonyms=["application/xhtml+xml"], @symbol=:html, @string="text/html", @hash=-3945511686665288776>]}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=nil, @port=nil, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil>}, @truncator=#<Airbrake::Truncator:0x00007f932beff0e0 @max_size=10000>>]
[0m):
F, [2019-04-12T03:16:10.532188 #6017] FATAL -- :   
F, [2019-04-12T03:16:10.532215 #6017] FATAL -- : lib/airbrake/rack/middleware.rb:65:in `notify_airbrake'
lib/airbrake/rack/middleware.rb:35:in `rescue in call!'
lib/airbrake/rack/middleware.rb:40:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:16:10.533846 #6017]  INFO -- : Started GET "/crash" for 127.0.0.1 at 2019-04-12 03:16:10 +0300
I, [2019-04-12T03:16:10.534868 #6017]  INFO -- : Processing by DummyController#crash as HTML
D, [2019-04-12T03:16:10.535288 #6017] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2019-04-12T03:16:10.536749 #6017] DEBUG -- :   [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "book"]]
D, [2019-04-12T03:16:10.538019 #6017] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
I, [2019-04-12T03:16:10.543446 #6017]  INFO -- : Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.2ms)
F, [2019-04-12T03:16:10.553300 #6017] FATAL -- :   
F, [2019-04-12T03:16:10.557804 #6017] FATAL -- : AirbrakeTestError (after_commit):
F, [2019-04-12T03:16:10.558182 #6017] FATAL -- :   
F, [2019-04-12T03:16:10.558224 #6017] FATAL -- : lib/airbrake/rails/active_record.rb:25:in `run_callbacks'
lib/airbrake/rack/middleware.rb:33:in `call!'
lib/airbrake/rack/middleware.rb:21:in `call'
I, [2019-04-12T03:16:12.565802 #6017]  INFO -- : Started GET "/resque" for 127.0.0.1 at 2019-04-12 03:16:12 +0300
I, [2019-04-12T03:16:12.566799 #6017]  INFO -- : Processing by DummyController#resque as HTML
I, [2019-04-12T03:16:12.568713 #6017]  INFO -- :   Rendering dummy/resque.html.erb within layouts/application
I, [2019-04-12T03:16:12.569430 #6017]  INFO -- :   Rendered dummy/resque.html.erb within layouts/application (0.6ms)
I, [2019-04-12T03:16:12.569950 #6017]  INFO -- : Completed 200 OK in 3ms (Views: 1.8ms | ActiveRecord: 0.0ms)
